(this["webpackJsonpphysic-schem"]=this["webpackJsonpphysic-schem"]||[]).push([[0],{115:function(t,n,e){},117:function(t,n,e){},118:function(t,n,e){"use strict";e.r(n);var a=e(1),o=e(0),c=e.n(o),r=e(14),i=e.n(r),s=e(10),d=e(7),u=e(16),l=e(2),h=e(58),b="START_DRAGGING";function p(t,n){return{type:b,x:t,y:n}}var j="STOP_DRAGGING";function O(){return{type:j}}var f="UPDATE_POSITION";function y(t){var n=t.x,e=t.y,a=t.attractor,o=t.attracted,c=t.shiftPress;return{type:f,x:n,y:e,attractor:a||null,attracted:o||null,shiftPress:c}}var x="START_SELECT";function m(){return{type:x}}var g="TOGGLE_SELECTION";function v(t,n){return{type:g,objectId:t,reset:n}}var I="START_CREATE_PATH_ELEMENT";function M(t){return{type:I,elementType:t}}var C="VALIDATE_FIRST_STEP_PATH_ELEMENT_CREATION";var w="INVALIDATE_FIRST_STEP_PATH_ELEMENT_CREATION";var L="SAVE_PATH_ELEMENT_CREATION";var P="START_CREATE_NODE_ELEMENT";var E="ELEMENT_CREATION_NEXT_STEP";var A="SPLIT_ANCHOR";var k="START_RECTANGLE_SELECTION";var T="STOP_RECTANGLE_SELECTION";var N="STACK_SELECTED_ANCHORS";function R(t){return{type:N,direction:t}}var D="DELETE_ELEMENT";var S="UPDATE_COMPONENT";var _="ZOOM";var F="START_MOVE_PAPER";var H="MOVE_PAPER";var V="END_MOVE_PAPER";var B="SET_MODE_MOVE_PAPER";var G="UPDATE_MAGNET_OPTION";function U(t,n){return{type:G,optionName:t,optionValue:n}}var Z="MODE_SELECT",z="MODE_DRAG",X="MODE_CREATE_PATH_ELEMENT",K="MODE_CREATE_NODE_ELEMENT",Y="MODE_RECTANGLE_SELECTION",W="MODE_MOVE_PAPER",q=function(t,n){switch(n.type){case B:return Object(l.a)(Object(l.a)({},t),{},{mode:W});case _:return function(t,n){var e=n.zoom,a=800/e,o=500/e,c=t.displayOptions,r=c.x,i=c.y,s=r+c.width/2-a/2,d=i+c.height/2-o/2;return Object(l.a)(Object(l.a)({},t),{},{displayOptions:Object(l.a)(Object(l.a)({},t.displayOptions),{},{x:s,y:d,zoom:e,width:a,height:o})})}(t,n);case H:return function(t,n){var e=n.x,a=n.y,o=t.displayOptions.dragging,c=o.x0,r=o.y0;return Object(l.a)(Object(l.a)({},t),{},{displayOptions:Object(l.a)(Object(l.a)({},t.displayOptions),{},{x:t.displayOptions.x+(c-e)/t.displayOptions.zoom,y:t.displayOptions.y+(r-a)/t.displayOptions.zoom,dragging:Object(l.a)(Object(l.a)({},t.displayOptions.dragging),{},{x0:e,y0:a})})})}(t,n);case F:case V:return function(t,n){var e=n.x,a=void 0===e?null:e,o=n.y,c=void 0===o?null:o;return Object(l.a)(Object(l.a)({},t),{},{displayOptions:Object(l.a)(Object(l.a)({},t.displayOptions),{},{dragging:{isDragging:!t.displayOptions.dragging.isDragging,x0:a,y0:c}})})}(t,n);default:return t}},$=function(t,n){var e=n.type,a=n.optionName,o=n.optionValue,c=void 0===o?null:o;switch(e){case G:return null===c?Object(l.a)(Object(l.a)({},t),{},{magnetsOptions:Object(l.a)(Object(l.a)({},t.magnetsOptions),{},Object(u.a)({},a,!t.magnetsOptions[a]))}):Object(l.a)(Object(l.a)({},t),{},{magnetsOptions:Object(l.a)(Object(l.a)({},t.magnetsOptions),{},Object(u.a)({},a,c))});default:return t}},J={show:!1,currantText:"",currantIsForward:!0,currantIsAbove:!0,currantIsAfter:!0},Q={displayOptions:{x:0,y:0,zoom:1,width:800,height:500,dragging:{isDragging:!1,x0:null,y0:null}},magnetsOptions:{isGridAttracting:!0,gridSpace:1,isPathCoordinatesAttracting:!0,isNodeAnchorsAttracting:!0},mode:Z,selection:[],adhesivePoints:[],weakLinks:[],currentMagnet:{attractor:null,attracted:null},pathComponents:{byId:{id5:{id:"id5",position:"anchor6",type:"nmos",angle:-45},id6:{id:"id6",position:"anchor7",type:"nmos",angle:"",positionAnchor:""}},allIds:["id5","id6"]},anchors:{byId:{anchor6:{id:"anchor6",x:100,y:400,isNodePosition:!0,nodeId:"id5"},anchor7:{id:"anchor7",x:200,y:400,isNodePosition:!0,nodeId:"id6"}},allIds:[]}},tt=e(84),nt=e(85),et=(e(21),100),at=1.4,ot=function(t,n,e,a,o){return"".concat(n+Math.cos(-t/180*Math.PI)*a-Math.sin(-t/180*Math.PI)*o," ").concat(e+Math.sin(-t/180*Math.PI)*a+Math.cos(-t/180*Math.PI)*o)},ct={baseline:"bottom",hanging:"top",middle:"middle"},rt=function(t,n){return-5<t&&t<5?{textAnchor:"middle",alignmentBaseline:n?"baseline":"hanging"}:-86<t&&t<=-5?{textAnchor:n?"end":"start",alignmentBaseline:n?"baseline":"hanging"}:-95<t&&t<=-86?{textAnchor:n?"end":"start",alignmentBaseline:"middle"}:-176<t&&t<=-95?{textAnchor:n?"end":"start",alignmentBaseline:n?"hanging":"baseline"}:t>=5&&t<86?{textAnchor:n?"start":"end",alignmentBaseline:n?"baseline":"hanging"}:t>=86&&t<95?{textAnchor:n?"start":"end",alignmentBaseline:"middle"}:t>=95&&t<176?{textAnchor:n?"start":"end",alignmentBaseline:n?"hanging":"baseline"}:{textAnchor:"middle",alignmentBaseline:n?"hanging":"baseline"}},it=function(t,n,e,a,o,c,r){var i=r.fromCoords,s=r.toCoords,d=r.currant,u=d.show,l=d.currantText,h=d.currantIsForward,b=void 0===h||h,p=d.currantIsAbove,j=void 0===p||p,O=d.currantIsAfter,f=void 0===O||O;if(!u)return null;var y=i.x-e,x=s.x-e,m=i.y-a,g=s.y-a,v=f?x+c*(y-x)/2:y+c*(x-y)/2,I=f?g+c*(m-g)/2:m+c*(g-m)/2,M=(b?0:180)-o;if(t.path("M ".concat(ot(M,v,I,-7.5,7.5),"\n    L ").concat(ot(M,v,I,7.5,0),"\n    L ").concat(ot(M,v,I,-7.5,-7.5),"\n    Z\n    ")),!l)return null;var C=v-(j?-7.5:7.5)*Math.sin(o/180*Math.PI),w=I+(j?-7.5:7.5)*Math.cos(o/180*Math.PI),L=rt(o,j),P=L.textAnchor,E=L.alignmentBaseline;n.textAlign=P,n.textBaseline=ct[E],n.fillText(l,C,w)},st=function(t){var n=t.fromCoords,e=t.toCoords,o=t.currantText,c=t.ratio,r=void 0===c?null:c,i=t.angle,s=void 0===i?null:i,d=t.currantIsForward,u=void 0===d||d,h=t.currantIsAbove,b=void 0===h||h,p=t.currantIsAfter,j=void 0===p||p;if(!n||!e||null===s||null===r)return null;var O=n.x,f=n.y,y=e.x,x=e.y,m=j?y+r*(O-y)/2:O+r*(y-O)/2,g=j?x+r*(f-x)/2:f+r*(x-f)/2;return Object(a.jsxs)("g",{style:{fill:"black",stroke:"none"},children:[Object(a.jsx)("path",{d:"M ".concat(m+7.5," ").concat(g," L  ").concat(m-7.5," ").concat(g+7.5," L  ").concat(m-7.5," ").concat(g-7.5," Z"),style:{transform:"rotate(".concat(s+(u?0:180),"deg)"),transformOrigin:"".concat(m,"px ").concat(g,"px")}}),Object(a.jsx)("text",{x:m-(b?-7.5:7.5)*Math.sin(s/180*Math.PI),y:g+(b?-7.5:7.5)*Math.cos(s/180*Math.PI),style:Object(l.a)({},rt(s,b)),children:o},Math.random())]})},dt=function(t,n,e,a){return-20<t&&t<20?{textAnchor:"middle",alignmentBaseline:n?"baseline":"hanging"}:-110<t&&t<-70?{textAnchor:n?"end":"start",alignmentBaseline:"middle"}:70<t&&t<110?{textAnchor:n?"start":"end",alignmentBaseline:"middle"}:t<-160||t>160?{textAnchor:"middle",alignmentBaseline:n?"hanging":"baseline"}:t<=-20&&t>=-70||t>=20&&t<=70?{textAnchor:"middle",alignmentBaseline:n?"baseline":"hanging",transform:"rotate(".concat(t,"deg)"),transformOrigin:"".concat(e,"px ").concat(a,"px")}:t<=-110&&t>=-160||t>=110&&t<=160?{textAnchor:"middle",alignmentBaseline:n?"hanging":"baseline",transform:"rotate(".concat(t+180,"deg)"),transformOrigin:"".concat(e,"px ").concat(a,"px")}:void 0},ut=function(t){var n=t.fromCoords,e=t.toCoords,o=t.angle,c=void 0===o?null:o,r=t.height,i=void 0===r?null:r,s=t.text,d=t.isAbove,u=void 0===d||d;if(!n||!e||!s||null===c||null===i)return null;var h=n.x,b=n.y,p=e.x,j=e.y,O=(h+p)/2+(u?i+10:-(i+10))*Math.sin(c/180*Math.PI),f=(b+j)/2+(u?-(i+10):i+10)*Math.cos(c/180*Math.PI);return Object(a.jsx)("g",{style:{fill:"black",stroke:"none"},children:Object(a.jsx)("text",{x:O,y:f,style:Object(l.a)({},dt(c,u,O,f)),children:s},Math.random())})},lt=function(t,n){return n.id?{fromCoords:t.anchors.byId[n.from],toCoords:t.anchors.byId[n.to]}:{}},ht=function(t){var n=t.height,e=void 0===n?1:n,o=t.width,c=void 0===o?1:o;return function(t){return Object(s.b)(lt)((function(n){var o=n.fromCoords,r=n.toCoords,i=n.selected,s=n.onMouseDown,d=n.currant,u=n.label,h=n.annotation,b=n.mirror,p=n.invert;if(!o||!r)return null;var j=o.x,O=o.y,f=r.x,y=r.y,x=Math.sqrt(Math.pow(j-f,2)+Math.pow(O-y,2)),m=(x-c*et*at)/(2*x),g=parseInt(180*Math.atan2(y-O,f-j)/Math.PI);return Object(a.jsxs)("g",{onMouseDown:s||null,className:"component ".concat(i?"red":"black"),children:[Object(a.jsx)("g",{style:{transform:"translate(".concat((j+f)/2,"px , ").concat((O+y)/2,"px) rotate(").concat(g,"deg)").concat(b?"scaleY(-1)":"").concat(p?"scaleX(-1)":"")},children:t(Object(l.a)(Object(l.a)({},n),{},{x:(j+f)/2,y:(O+y)/2,angle:g}))}),Object(a.jsx)("path",{d:"M ".concat(j," ").concat(O," L ").concat(j+m*(f-j)," ").concat(O+m*(y-O))}),Object(a.jsx)("path",{d:"M ".concat(f," ").concat(y," L ").concat(f+m*(j-f)," ").concat(y+m*(O-y))}),d&&d.show&&Object(a.jsx)(st,Object(l.a)({fromCoords:o,toCoords:r,ratio:m,angle:g},d)),u&&Object(a.jsx)(ut,{fromCoords:o,toCoords:r,height:.5*e*et*at,angle:g,text:u}),h&&Object(a.jsx)(ut,{fromCoords:o,toCoords:r,height:.5*e*et*at,angle:g,text:h,isAbove:!1})]})}))}},bt=function(t,n,e,a,o,c){var r=c.fromCoords,i=r.x,s=r.y,d=c.toCoords,u=d.x,l=d.y,h=(i+u)/2-n,b=(s+l)/2-e,p=Math.sqrt(Math.pow(i-u,2)+Math.pow(s-l,2)),j=(p-a*et*at)/(2*p),O=parseInt(180*Math.atan2(l-s,u-i)/Math.PI);return t.path("M ".concat(i-n," ").concat(s-e,"\n    L ").concat(i+j*(u-i)-n," ").concat(s+j*(l-s)-e,"\n    M ").concat(u-n," ").concat(l-e,"\n    L ").concat(u+j*(i-u)-n," ").concat(l+j*(s-l)-e)),{x:h,y:b,angle:O,ratio:j}},pt=function(t){var n=function(t){var n=t.show,e=t.currantText,a=t.currantIsForward,o=t.currantIsAbove,c=t.currantIsAfter;if(!n)return"";var r=e||"$$$$";if(c){var i=a?">":"<";return"i".concat(o?"^":"_").concat(i,"=").concat(r)}var s=o?"^":"_";return"i".concat(a?">":"<").concat(s,"=").concat(r)}(t.currant),e=function(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return t?n?"l=".concat(t):"l_=".concat(t):""}(t.label),a=function(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t?n?"a^=".concat(t):"a=".concat(t):""}(t.annotation);return"".concat(e?", ".concat(e):"").concat(a?", ".concat(a):"").concat(n?", ".concat(n):"").concat(t.mirror?", mirror":"").concat(t.invert?", invert":"")},jt=(.7071*42).toFixed(3),Ot=ht({width:.6,height:.6})((function(){return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("circle",{cx:0,cy:0,r:42}),Object(a.jsx)("path",{d:"M -".concat(jt," -").concat(jt," L ").concat(jt," ").concat(jt," M -").concat(jt," ").concat(jt," L ").concat(jt," -").concat(jt)})]})})),ft=28,yt=35,xt=ht({width:.4,height:.5})((function(){return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("path",{d:"M ".concat(ft," 0 L ").concat(-28," ").concat(-35," L ").concat(-28," ").concat(yt," Z")}),Object(a.jsx)("path",{d:"M ".concat(ft," ").concat(yt," L ").concat(ft," ").concat(-35)})]})})),mt=56,gt=21,vt=ht({width:.8,height:.8})((function(t){var n=t.wiper_pos,e=void 0===n?.5:n;return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("path",{d:"M ".concat(-56," 0 L ").concat(-5/6*mt," ").concat(-21," L ").concat(-28," ").concat(gt," L ").concat(-1/6*mt," ").concat(-21," L ").concat(1/6*mt," ").concat(gt," L ").concat(28," ").concat(-21," L ").concat(5/6*mt," ").concat(gt," L ").concat(56," 0")}),Object(a.jsx)("path",{d:"M ".concat(2*-(.5-e)*mt," ").concat(-56," L ").concat(2*-(.5-e)*mt," ").concat(-21)})]})})),It=42,Mt=14,Ct=ht({width:.2,height:.6})((function(){return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("path",{d:"M  ".concat(-14," ").concat(-42," L ").concat(-14," ").concat(It)}),Object(a.jsx)("path",{d:"M  ".concat(Mt," ").concat(-42," L ").concat(Mt," ").concat(It)}),Object(a.jsx)("path",{d:"M ".concat(-35," ").concat(-42," L ").concat(35," ").concat(It)})]})})),wt=98,Lt=77,Pt=function(t){switch(t){case"B":return{x:wt,y:0};case"C":return{x:0,y:Lt};case"E":return{x:0,y:-77};default:return{x:0,y:0}}},Et=Object(s.b)((function(t,n){return n.id?{mode:t.mode,positionCoords:t.anchors.byId[n.position]}:{}}))((function(t){var n=t.positionCoords,e=t.positionAnchor,o=void 0===e?"":e,c=t.angle,r=void 0===c?0:c,i=(t.mode,t.selected),s=(t.showHandles,t.id,t.onMouseDown);if(!n)return null;var d=n.x,u=n.y,l=Pt(o),h=l.x,b=l.y;return Object(a.jsx)("g",{onMouseDown:s||null,className:"component ".concat(i?"red":"black"),children:Object(a.jsx)("g",{style:{transform:"translate(".concat(d,"px , ").concat(u,"px) rotate(").concat(-r,"deg)")},children:Object(a.jsxs)("g",{style:{transform:"translate(".concat(h,"px , ").concat(b,"px)")},children:[Object(a.jsx)("path",{d:"M ".concat(0," ",-77," \n                  L ",0," ").concat(-26.95,"\n                  L ").concat(-49," ").concat(-26.95)}),Object(a.jsx)("path",{d:"M ".concat(-49," ").concat(-38.5,"\n                  L ").concat(-49," ").concat(38.5,"\n                  L ").concat(-49," ").concat(26.95,"\n                  L ",0," ").concat(26.95,"\n                  L ",0," ").concat(Lt)}),Object(a.jsx)("path",{d:"M ".concat(-60.76," ").concat(-26.95,"\n                  L ").concat(-60.76," ").concat(26.95),style:{strokeWidth:2}}),Object(a.jsx)("path",{d:"M ".concat(-60.76," 0\n                      L ").concat(-98," 0")})]})})})})),At=27.999999999999996,kt=Object(s.b)((function(t,n){return n.id?{positionCoords:t.anchors.byId[n.position]}:{}}))((function(t){var n=t.positionCoords,e=t.angle,o=void 0===e?0:e,c=t.selected,r=t.onMouseDown;if(!n)return null;var i=n.x,s=n.y;return Object(a.jsx)("g",{onMouseDown:r||null,className:"component ".concat(c?"red":"black"),children:Object(a.jsxs)("g",{style:{transform:"translate(".concat(i,"px , ").concat(s,"px) rotate(").concat(-o,"deg)")},children:[Object(a.jsx)("path",{d:"M ".concat(-.5*At," ").concat(22.4,"\n                L 0 ").concat(1.5*At,"\n                L ").concat(.5*At," ").concat(22.4)}),Object(a.jsx)("path",{d:"M 0 0\n                L 0 ".concat(1.5*At)})]})})})),Tt=27.999999999999996,Nt=Object(s.b)((function(t,n){return n.id?{positionCoords:t.anchors.byId[n.position]}:{}}))((function(t){var n=t.positionCoords,e=t.angle,o=void 0===e?0:e,c=t.selected,r=t.onMouseDown;if(!n)return null;var i=n.x,s=n.y;return Object(a.jsx)("g",{onMouseDown:r||null,className:"component ".concat(c?"red":"black"),children:Object(a.jsxs)("g",{style:{transform:"translate(".concat(i,"px , ").concat(s,"px) rotate(").concat(-o,"deg)")},children:[Object(a.jsx)("path",{d:"M ".concat(-.5*Tt," ").concat(-22.4,"\n                L 0 ").concat(-1.5*Tt,"\n                L ").concat(.5*Tt," ").concat(-22.4)}),Object(a.jsx)("path",{d:"M 0 0\n                L 0 ".concat(-1.5*Tt)})]})})})),Rt=14,Dt=42,St=ht({width:.2,height:.6})((function(){return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("path",{d:"M  ".concat(-14," ").concat(-42," L ").concat(-14," ").concat(Dt)}),Object(a.jsx)("path",{d:"M  ".concat(Rt," ").concat(-42," L ").concat(Rt," ").concat(Dt)})]})})),_t=56,Ft=21,Ht=ht({width:.8,height:.3})((function(){return Object(a.jsx)("path",{d:"M ".concat(-56," 0 L ").concat(-5/6*_t," ").concat(-21," L ").concat(-28," ").concat(Ft," L ").concat(-1/6*_t," ").concat(-21," L ").concat(1/6*_t," ").concat(Ft," L ").concat(28," ").concat(-21," L ").concat(5/6*_t," ").concat(Ft," L ").concat(56," 0")})})),Vt=.099,Bt=6.93,Gt=42,Ut=ht({width:Vt,height:.6})((function(){return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("path",{d:"M ".concat(-6.93," ").concat(-42," L ").concat(-6.93," ").concat(Gt)}),Object(a.jsx)("path",{d:"M ".concat(Bt," ").concat(-21,"L ").concat(Bt," ").concat(21)})]})})),Zt=.35,zt=function(t){var n=t.x,e=t.y,o=t.r,c=t.theta1,r=t.theta2,i=n+o*Math.cos(c/180*Math.PI),s=e-o*Math.sin(c/180*Math.PI),d=n+o*Math.cos(r/180*Math.PI),u=e-o*Math.sin(r/180*Math.PI);return Object(a.jsx)("path",{d:"M ".concat(i," ").concat(s," A ").concat(o," ").concat(o," 0 0 ").concat(c<r?0:1," ").concat(d," ").concat(u," ")})},Xt=ht({width:Zt,height:.35})((function(t){var n=t.isOpen,e=t.withArrow,o=24.5,c=.5*(e?.35:.3)*et*at;return e?Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(zt,{x:-24.5,y:0,r:29.4,theta1:n?-10:90,theta2:n?90:-20}),Object(a.jsx)("path",{d:"M ".concat(-24.5," 0 L ").concat(14.7," ").concat(-c)})]}):Object(a.jsx)("path",{d:"M ".concat(-24.5," 0 L ").concat(22.05," ").concat(-c," M ").concat(o," 0 L ").concat(4.9," 0 L ").concat(4.9," ").concat(-c)})})),Kt=Object(s.b)((function(t,n){return n.id?{fromCoords:t.anchors.byId[n.from],toCoords:t.anchors.byId[n.to]}:{}}))((function(t){var n=t.fromCoords,e=t.toCoords,o=t.selected,c=t.onMouseDown,r=t.currant,i=t.label,s=t.annotation;if(!n||!e)return null;var d=n.x,u=n.y,h=e.x,b=e.y,p=(Math.sqrt(Math.pow(d-h,2)+Math.pow(u-b,2)),parseInt(180*Math.atan2(b-u,h-d)/Math.PI));return Object(a.jsxs)("g",{onMouseDown:c||null,className:"component ".concat(o?"red":"black"),children:[Object(a.jsx)("path",{d:"M ".concat(d," ").concat(u," L ").concat(h," ").concat(b)}),r&&r.show&&Object(a.jsx)(st,Object(l.a)({fromCoords:n,toCoords:e,ratio:1,angle:p},r)),i&&Object(a.jsx)(ut,{fromCoords:n,toCoords:e,height:0,angle:p,text:i}),s&&Object(a.jsx)(ut,{fromCoords:n,toCoords:e,height:0,angle:p,text:s,isAbove:!1})]})})),Yt=Object(s.b)((function(t,n){return n.id?{fromCoords:t.anchors.byId[n.from],toCoords:t.anchors.byId[n.to]}:{}}))((function(t){var n=t.fromCoords,e=t.toCoords,o=t.selected,c=t.onMouseDown;if(!n||!e)return null;var r=n.x,i=n.y,s=e.x,d=e.y;return Object(a.jsx)("g",{onMouseDown:c||null,className:"component ".concat(o?"red":"black"),children:Object(a.jsx)("path",{d:"M ".concat(r," ").concat(i," L ").concat(s," ").concat(i,"L ").concat(s," ").concat(d)})})})),Wt=Object(s.b)((function(t,n){return n.id?{fromCoords:t.anchors.byId[n.from],toCoords:t.anchors.byId[n.to]}:{}}))((function(t){var n=t.fromCoords,e=t.toCoords,o=t.selected,c=t.onMouseDown;if(!n||!e)return null;var r=n.x,i=n.y,s=e.x,d=e.y;return Object(a.jsx)("g",{onMouseDown:c||null,className:"component ".concat(o?"red":"black"),children:Object(a.jsx)("path",{d:"M ".concat(r," ").concat(i," L ").concat(r," ").concat(d,"L ").concat(s," ").concat(d)})})})),qt={pR:function(t){return function(t){var n=t.fromCoords,e=t.toCoords,a=n.x,o=n.y,c=e.x,r=e.y,i=Math.atan2(r-o,c-a);return[{name:"wiper",x:(a+c)/2+55*Math.sin(i),y:(o+r)/2-55*Math.cos(i)}]}(t)},nmos:function(t){return function(t){var n=t.positionAnchor,e=t.angle,a=void 0===e?0:e,o=t.positionCoords,c=o.x,r=o.y,i=Pt(n),s=i.x,d=i.y,u=Pt("C"),l=Pt("B"),h=Pt("E"),b=Math.PI*a/180,p=Math.atan2(d-u.y,s-u.x),j=Math.atan2(d-l.y,s-l.x),O=Math.atan2(d-h.y,s-h.x),f=Math.sqrt(Math.pow(u.x-s,2)+Math.pow(u.y-d,2)),y=Math.sqrt(Math.pow(l.x-s,2)+Math.pow(l.y-d,2)),x=Math.sqrt(Math.pow(h.x-s,2)+Math.pow(h.y-d,2));return[{name:"C",x:c+Math.cos(-b+p)*f,y:r+Math.sin(-b+p)*f},{name:"B",x:c+Math.cos(-b+j)*y,y:r+Math.sin(-b+j)*y},{name:"E",x:c+Math.cos(-b+O)*x,y:r+Math.sin(-b+O)*x}]}(t)},vee:function(t){return function(t){var n=t.positionCoords;return[{name:"C",x:n.x,y:n.y}]}(t)},vcc:function(t){return function(t){var n=t.positionCoords;return[{name:"C",x:n.x,y:n.y}]}(t)}},$t={short:function(t){return"to[short".concat(pt(t),"] ")},rightUp:function(){return"-| "},upRight:function(){return"|- "},lampe:function(t){return"to[lamp".concat(pt(t),"] ")},"empty led":function(t){return"to[empty diode".concat(pt(t),"] ")},pR:function(t){return"to[pR".concat(pt(t),"] ")},nmos:function(t,n){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=n.x,o=n.y,c=n.position,r=n.anchor,i=c?"(".concat(c,")"):"(".concat((a/et).toFixed(2),", ").concat((-o/et).toFixed(2),")");return"\\draw ".concat(i," node[nmos").concat(r?", anchor=".concat(r):"").concat(t.angle&&0!==parseFloat(t.angle)?", rotate=".concat(t.angle):"","]").concat(e?"(".concat(e,")"):"","{};")},vee:function(t){return"node[vee".concat(t.angle&&0!==t.angle?" ,rotate="+t.angle:"","]{}")},vcc:function(t){return"node[vcc".concat(t.angle&&0!==t.angle?" ,rotate="+t.angle:"","]{}")},vcapacitor:function(t){return"to[variable capacitor".concat(pt(t),"] ")},C:function(t){return"to[C".concat(pt(t),"] ")},R:function(t){return"to[R".concat(pt(t),"] ")},battery1:function(t){return"to[battery1".concat(pt(t),"] ")},switch:function(t){var n=t.isOpen;return t.withArrow?"to[".concat(n?"opening ":"","switch").concat(pt(t),"] "):"to[normal ".concat(n?"open":"closed"," switch").concat(pt(t),"] ")}},Jt={short:function(t,n,e,a,o){var c=o.fromCoords.x-e,r=o.fromCoords.y-a,i=o.toCoords.x-e,s=o.toCoords.y-a;t.path("M ".concat(c," ").concat(r," L ").concat(i," ").concat(s));var d=parseInt(180*Math.atan2(s-r,i-c)/Math.PI);it(t,n,e,a,d,1,o)},rightUp:function(t,n,e,a,o){var c=o.fromCoords.x-e,r=o.fromCoords.y-a,i=o.toCoords.x-e,s=o.toCoords.y-a;t.path("M ".concat(c," ").concat(r," L ").concat(i," ").concat(r," L ").concat(i," ").concat(s))},upRight:function(t,n,e,a,o){var c=o.fromCoords.x-e,r=o.fromCoords.y-a,i=o.toCoords.x-e,s=o.toCoords.y-a;t.path("M ".concat(c," ").concat(r," L ").concat(c," ").concat(s,"L ").concat(i," ").concat(s))},lampe:function(t,n,e,a,o){var c=bt(t,e,a,.6,0,o),r=c.x,i=c.y,s=c.angle,d=c.ratio;it(t,n,e,a,s,d,o),t.path("M ".concat(ot(-s,r,i,jt,jt),"\n    L ").concat(ot(-s,r,i,-jt,-jt),"\n    M ").concat(ot(-s,r,i,jt,-jt),"\n    L ").concat(ot(-s,r,i,-jt,jt),"\n    ")),t.circle(r,i,84)},"empty led":function(t,n,e,a,o){var c=bt(t,e,a,.4,0,o),r=c.x,i=c.y,s=c.angle,d=c.ratio;it(t,n,e,a,s,d,o),t.path("M ".concat(ot(-s,r,i,ft,0),"\n    L ").concat(ot(-s,r,i,-28,-35),"\n    L ").concat(ot(-s,r,i,-28,yt),"\n    Z\n    M ").concat(ot(-s,r,i,ft,yt),"\n    L ").concat(ot(-s,r,i,ft,-35),"\n    "))},pR:function(t,n,e,a,o){var c=bt(t,e,a,.8,0,o),r=c.x,i=c.y,s=c.angle,d=c.ratio;it(t,n,e,a,s,d,o);var u=o.wiper_pos;t.path("M ".concat(ot(-s,r,i,-56,0),"\n    L ").concat(ot(-s,r,i,-5/6*mt,-21)," \n    L ").concat(ot(-s,r,i,-28,gt)," \n    L ").concat(ot(-s,r,i,-1/6*mt,-21)," \n    L ").concat(ot(-s,r,i,1/6*mt,gt)," \n    L ").concat(ot(-s,r,i,28,-21)," \n    L ").concat(ot(-s,r,i,5/6*mt,gt)," \n    L ").concat(ot(-s,r,i,mt,0),"\n    M ").concat(ot(-s,r,i,2*-(.5-u)*mt,-56),"\n    L ").concat(ot(-s,r,i,2*-(.5-u)*mt,-21)))},nmos:function(t,n,e,a,o){var c=o.positionCoords.x-e,r=o.positionCoords.y-a,i=o.angle;t.path("M ".concat(ot(i,c,r,0,-77)," \n      L ").concat(ot(i,c,r,0,-26.95),"\n      L ").concat(ot(i,c,r,-49,-26.95),"\n      M ").concat(ot(i,c,r,-49,-38.5),"\n      L ").concat(ot(i,c,r,-49,38.5),"\n      L ").concat(ot(i,c,r,-49,26.95),"\n      L ").concat(ot(i,c,r,0,26.95),"\n      L ").concat(ot(i,c,r,0,Lt),"\n      M ").concat(ot(i,c,r,-60.76,-26.95),"\n      L ").concat(ot(i,c,r,-60.76,26.95),"\n      M ").concat(ot(i,c,r,-60.76,0),"\n      L ").concat(ot(i,c,r,-98,0)))},vee:function(t,n,e,a,o){var c=o.positionCoords.x-e,r=o.positionCoords.y-a,i=o.angle;t.path("M ".concat(ot(i,c,r,-.5*At,22.4)," \n      L ").concat(ot(i,c,r,0,1.5*At),"\n      L ").concat(ot(i,c,r,.5*At,22.4),"\n      M ").concat(ot(i,c,r,0,0)," \n      L ").concat(ot(i,c,r,0,1.5*At)))},vcc:function(t,n,e,a,o){var c=o.positionCoords.x-e,r=o.positionCoords.y-a,i=o.angle;t.path("M ".concat(ot(i,c,r,-.5*Tt,-22.4)," \n      L ").concat(ot(i,c,r,0,-1.5*Tt),"\n      L ").concat(ot(i,c,r,.5*Tt,-22.4),"\n      M ").concat(ot(i,c,r,0,0)," \n      L ").concat(ot(i,c,r,0,-1.5*Tt)))},vcapacitor:function(t,n,e,a,o){var c=bt(t,e,a,.2,0,o),r=c.x,i=c.y,s=c.angle;t.path("M ".concat(ot(-s,r,i,-14,It),"\n    L ").concat(ot(-s,r,i,-14,-42),"\n    M ").concat(ot(-s,r,i,Mt,It),"\n    L ").concat(ot(-s,r,i,Mt,-42),"\n    M ").concat(ot(-s,r,i,-35,-42),"\n    L ").concat(ot(-s,r,i,35,It),"\n    "))},C:function(t,n,e,a,o){var c=bt(t,e,a,.2,0,o),r=c.x,i=c.y,s=c.angle,d=c.ratio;it(t,n,e,a,s,d,o),t.path("M ".concat(ot(-s,r,i,-14,Dt),"\n    L ").concat(ot(-s,r,i,-14,-42),"\n    M ").concat(ot(-s,r,i,Rt,Dt),"\n    L ").concat(ot(-s,r,i,Rt,-42),"\n    "))},R:function(t,n,e,a,o){var c=bt(t,e,a,.8,0,o),r=c.x,i=c.y,s=c.angle,d=c.ratio;it(t,n,e,a,s,d,o),t.path("M ".concat(ot(-s,r,i,-56,0),"\n    L ").concat(ot(-s,r,i,-5/6*_t,-21)," \n    L ").concat(ot(-s,r,i,-28,Ft)," \n    L ").concat(ot(-s,r,i,-1/6*_t,-21)," \n    L ").concat(ot(-s,r,i,1/6*_t,Ft)," \n    L ").concat(ot(-s,r,i,28,-21)," \n    L ").concat(ot(-s,r,i,5/6*_t,Ft)," \n    L ").concat(ot(-s,r,i,_t,0)))},battery1:function(t,n,e,a,o){var c=bt(t,e,a,Vt,0,o),r=c.x,i=c.y,s=c.angle,d=c.ratio;it(t,n,e,a,s,d,o),t.path("M ".concat(ot(-s,r,i,-6.93,-42),"\n    L ").concat(ot(-s,r,i,-6.93,Gt),"\n    M ").concat(ot(-s,r,i,Bt,21),"\n    L ").concat(ot(-s,r,i,Bt,-21),"\n    "))},switch:function(t,n,e,a,o){var c=bt(t,e,a,Zt,0,o),r=(c.x,c.y,c.angle),i=c.ratio;it(t,n,e,a,r,i,o)}},Qt=function(t){return qt[t.type]?qt[t.type](t):[]},tn=function(t,n,e){return $t[t.type](t,n,e)},nn={short:!0,rightUp:!0,upRight:!0,lampe:!0,"empty led":!0,pR:!0,nmos:!1,vee:!1,vcc:!1,vcapacitor:!0,C:!0,R:!0,battery1:!0,switch:!0},en={short:!1,rightUp:!1,upRight:!1,lampe:!1,"empty led":!1,pR:!1,nmos:!0,vee:!1,vcc:!1,vcapacitor:!1,C:!1,R:!1,battery1:!1,switch:!1},an={bipoles:["lampe","R","C","switch","battery1","empty led","vcapacitor","pR"],sources:[],references:["vee","vcc"],transistors:["nmos"]},on={short:function(t){return Object(a.jsx)(Kt,Object(l.a)({},t),t.id)},rightUp:function(t){return Object(a.jsx)(Yt,Object(l.a)({},t),t.id)},upRight:function(t){return Object(a.jsx)(Wt,Object(l.a)({},t),t.id)},lampe:function(t){return Object(a.jsx)(Ot,Object(l.a)({},t),t.id)},"empty led":function(t){return Object(a.jsx)(xt,Object(l.a)({},t),t.id)},pR:function(t){return Object(a.jsx)(vt,Object(l.a)({},t),t.id)},nmos:function(t){return Object(a.jsx)(Et,Object(l.a)({},t),t.id)},vee:function(t){return Object(a.jsx)(kt,Object(l.a)({},t),t.id)},vcc:function(t){return Object(a.jsx)(Nt,Object(l.a)({},t),t.id)},vcapacitor:function(t){return Object(a.jsx)(Ct,Object(l.a)({},t),t.id)},C:function(t){return Object(a.jsx)(St,Object(l.a)({},t),t.id)},R:function(t){return Object(a.jsx)(Ht,Object(l.a)({},t),t.id)},battery1:function(t){return Object(a.jsx)(Ut,Object(l.a)({},t),t.id)},switch:function(t){return Object(a.jsx)(Xt,Object(l.a)({},t),t.id)}},cn=function(t){var n=[];return nn[t]&&n.push({type:"ANCHOR",id:null,dx:0,dy:0}),Qt({type:t,fromCoords:{x:0,y:0},toCoords:{x:0,y:0},positionCoords:{x:0,y:0}}).forEach((function(e){var a=e.x,o=e.y,c=e.name;n.push({type:nn[t]?"PATH":"NODE",name:c,id:null,dx:-a,dy:-o})})),n},rn=function(t,n){return!(!t.from||t.from!==n)||(!(!t.to||t.to!==n)||!(!t.position||t.position!==n))},sn=function(t,n,e){var a=Object(l.a)({},t);return t.from&&t.from===n&&(a.from=e),t.to&&t.to===n&&(a.to=e),t.position&&t.position===n&&(a.position=e),Object(l.a)({},a)},dn=function(t,n){var e=[],a=[];t.selection.forEach((function(e){if(t.anchors.allIds.includes(e))-1===a.findIndex((function(t){return t.id===e}))&&a.push({type:"ANCHOR",id:e,dx:n.x-t.anchors.byId[e].x,dy:n.y-t.anchors.byId[e].y});else if(t.pathComponents.allIds.includes(e)){if(Qt(Object(l.a)(Object(l.a)({},t.pathComponents.byId[e]),{},{fromCoords:t.pathComponents.byId[e].from&&t.anchors.byId[t.pathComponents.byId[e].from],toCoords:t.pathComponents.byId[e].to&&t.anchors.byId[t.pathComponents.byId[e].to],positionCoords:t.pathComponents.byId[e].position&&t.anchors.byId[t.pathComponents.byId[e].position]})).forEach((function(o){var c=o.x,r=o.y,i=o.name;a.push({type:t.pathComponents.byId[e].position?"NODE":"PATH",name:i,id:e,dx:n.x-c,dy:n.y-r})})),t.pathComponents.byId[e].from&&-1===a.findIndex((function(n){return n.id===t.pathComponents.byId[e].from}))){var o=t.pathComponents.byId[e].from;a.push({type:"ANCHOR",id:o,dx:n.x-t.anchors.byId[o].x,dy:n.y-t.anchors.byId[o].y})}if(t.pathComponents.byId[e].to&&-1===a.findIndex((function(n){return n.id===t.pathComponents.byId[e].to}))){var c=t.pathComponents.byId[e].to;a.push({type:"ANCHOR",id:c,dx:n.x-t.anchors.byId[c].x,dy:n.y-t.anchors.byId[c].y})}}}));for(var o=Object(d.a)(t.selection),c=[],r=function(){var n=o.pop();t.pathComponents.allIds.includes(n)?(t.pathComponents.byId[n].from&&!e.includes(t.pathComponents.byId[n].from)&&e.push(t.pathComponents.byId[n].from),t.pathComponents.byId[n].to&&!e.includes(t.pathComponents.byId[n].to)&&e.push(t.pathComponents.byId[n].to),t.pathComponents.byId[n].position&&(e.includes(t.pathComponents.byId[n].position)||o.push(t.pathComponents.byId[n].position),c.includes(n)||(c.push(n),t.weakLinks.forEach((function(t){var a=t.anchorId;t.nodeId!==n||e.includes(a)||o.push(a)}))))):e.includes(n)||(e.push(n),t.anchors.byId[n].isNodePosition&&o.push(t.anchors.byId[n].nodeId))};o.length>0;)r();return Object(l.a)(Object(l.a)({},t),{},{mode:z,anchorsToMove:[].concat(e),adhesivePoints:[].concat(a),originalPosition:{x:n.x,y:n.y},alreadyMoved:{x:0,y:0},weakLinksToRemove:Object(d.a)(t.weakLinks.filter((function(n){var a=n.anchorId,o=n.nodeId;return e.includes(a)&&!e.includes(t.pathComponents.byId[o].position)})).map((function(t){return t.anchorId+"-"+t.nodeId})))})},un=function(t,n){if(t.currentMagnet.attractor&&t.currentMagnet.attracted&&"ANCHOR"===t.currentMagnet.attracted.type&&"ANCHOR"===t.currentMagnet.attractor.type){var e=t.currentMagnet.attracted.id,a=t.currentMagnet.attractor.id,o=t.anchors.allIds.findIndex((function(t){return t===e})),c=t.anchors.byId,r=(c[e],Object(tt.a)(c,[e].map(nt.a))),i={};return t.pathComponents.allIds.forEach((function(n){i[n]=sn(t.pathComponents.byId[n],e,a)})),Object(l.a)(Object(l.a)({},t),{},{anchors:{byId:Object(l.a)({},r),allIds:[].concat(Object(d.a)(t.anchors.allIds.slice(0,o)),Object(d.a)(t.anchors.allIds.slice(o+1)))},pathComponents:Object(l.a)(Object(l.a)({},t.pathComponents),{},{byId:Object(l.a)({},i)}),mode:Z,anchorsToMove:[],originalPosition:{},alreadyMoved:{},weakLinksToRemove:[],weakLinks:Object(d.a)(t.weakLinks.filter((function(n){var e=n.anchorId,a=n.nodeId;return!t.weakLinksToRemove.includes(e+"-"+a)})))})}if(t.currentMagnet.attractor&&t.currentMagnet.attracted&&"PATH"!==t.currentMagnet.attracted.type&&"PATH"!==t.currentMagnet.attractor.type){var s=[];if("NODE"===t.currentMagnet.attracted.type&&"NODE"===t.currentMagnet.attractor.type)s.push({anchorId:t.pathComponents.byId[t.currentMagnet.attracted.id].position,nodeId:t.currentMagnet.attractor.id,name:t.currentMagnet.attractor.name,nameAnchor:t.currentMagnet.attracted.name});else{var u="NODE"===t.currentMagnet.attracted.type?t.currentMagnet.attracted.id:t.currentMagnet.attractor.id,h="ANCHOR"===t.currentMagnet.attracted.type?t.currentMagnet.attracted.id:t.currentMagnet.attractor.id,b="NODE"===t.currentMagnet.attracted.type?t.currentMagnet.attracted.name:t.currentMagnet.attractor.name;s.push({anchorId:h,nodeId:u,name:b})}return Object(l.a)(Object(l.a)({},t),{},{mode:Z,anchorsToMove:[],originalPosition:{},alreadyMoved:{},weakLinksToRemove:[],weakLinks:[].concat(Object(d.a)(t.weakLinks.filter((function(n){var e=n.anchorId,a=n.nodeId;return!t.weakLinksToRemove.includes(e+"-"+a)}))),s)})}return Object(l.a)(Object(l.a)({},t),{},{mode:Z,anchorsToMove:[],originalPosition:{},alreadyMoved:{},weakLinksToRemove:[],weakLinks:Object(d.a)(t.weakLinks.filter((function(n){var e=n.anchorId,a=n.nodeId;return!t.weakLinksToRemove.includes(e+"-"+a)})))})},ln=function(t,n){var e,a,o=n.x,c=n.y,r=n.shiftPress,i=t.originalPosition,s=i.x,d=i.y;r?Math.abs(o-s)>Math.abs(c-d)?(e=o-s,a=0):(e=0,a=c-d):(e=o-s,a=c-d);var u=t.anchors.byId;return t.anchorsToMove.forEach((function(n){u[n]=Object(l.a)(Object(l.a)({},u[n]),{},{x:u[n].x+e-t.alreadyMoved.x,y:u[n].y+a-t.alreadyMoved.y})})),Object(l.a)(Object(l.a)({},t),{},{anchors:Object(l.a)(Object(l.a)({},t.anchors),{},{byId:Object(l.a)({},u)}),alreadyMoved:{x:e,y:a}})},hn=function(t,n){var e=n.selection;if(1===e.length&&t.pathComponents.allIds.includes(e[0])){var a=e[0],o=["from","to","position"].map((function(n){return t.pathComponents.byId[a][n]})).filter((function(t){return!!t})).filter((function(n){return 1===t.pathComponents.allIds.filter((function(e){return rn(t.pathComponents.byId[e],n)})).length})),c=Object(l.a)({},t.anchors.byId);o.forEach((function(t){return delete c[t]}));var r=Object(l.a)({},t.pathComponents.byId);return delete r[a],Object(l.a)(Object(l.a)({},t),{},{pathComponents:{allIds:Object(d.a)(t.pathComponents.allIds.filter((function(t){return t!==a}))),byId:Object(l.a)({},r)},anchors:{byId:Object(l.a)({},c),allIds:Object(d.a)(t.anchors.allIds.filter((function(t){return!o.includes(t)})))},weakLinks:Object(d.a)(t.weakLinks.filter((function(t){var n=t.anchorId,e=t.nodeId;t.name;return e!==a&&!o.includes(n)})))})}return t},bn=e(180),pn=function(t,n){return Object(l.a)(Object(l.a)({},t),{},{selection:[],adhesivePoints:Object(d.a)(cn(n.elementType)),mode:X,newPath:Object(l.a)(Object(l.a)({},t.newPath),{},{elementType:n.elementType,isFromValidated:!1})})},jn=function(t,n){return Object(l.a)(Object(l.a)({},t),{},{newPath:Object(l.a)(Object(l.a)({},t.newPath),{},{attractorFrom:t.currentMagnet.attractor&&Object(l.a)({},t.currentMagnet.attractor),to:{x:null,y:null},attractorTo:null,isFromValidated:!0,movedAfterFromCreation:!1})})},On=function(t,n){return t.newPath.movedAfterFromCreation&&t.newPath.isFromValidated?Object(l.a)(Object(l.a)({},t),{},{newPath:Object(l.a)(Object(l.a)({},t.newPath),{},{from:Object(l.a)({},t.newPath.to),attractorFrom:t.newPath.attractorTo&&Object(l.a)({},t.newPath.attractorTo),to:{x:null,y:null},attractorTo:null,isFromValidated:!1})}):t},fn=function(t,n){var e=t.currentMagnet.attractor&&Object(l.a)({},t.currentMagnet.attractor),a=t.newPath,o=a.attractorFrom,c=a.from,r=a.to,i=a.elementType,s=Object(bn.a)(),h=o&&"ANCHOR"===o.type?o.id:Object(bn.a)(),b=e&&"ANCHOR"===e.type?e.id:Object(bn.a)(),p=Object(l.a)({},t.anchors);o&&"ANCHOR"===o.type||(p={byId:Object(l.a)(Object(l.a)({},p.byId),{},Object(u.a)({},h,{id:h,x:c.x,y:c.y})),allIds:[].concat(Object(d.a)(p.allIds),[h])}),e&&"ANCHOR"===e.type||(p={byId:Object(l.a)(Object(l.a)({},p.byId),{},Object(u.a)({},b,{id:b,x:r.x,y:r.y})),allIds:[].concat(Object(d.a)(p.allIds),[b])});var j=[];return o&&"NODE"===o.type&&j.push({anchorId:h,nodeId:o.id,name:o.name}),e&&"NODE"===e.type&&j.push({anchorId:b,nodeId:e.id,name:e.name}),Object(l.a)(Object(l.a)({},t),{},{currentMagnet:Object(l.a)(Object(l.a)({},t.currentMagnet),{},{attractor:{type:"ANCHOR",id:b}}),newPath:Object(l.a)(Object(l.a)({},t.newPath),{},{isFromValidated:!1,from:Object(l.a)({},r),to:{x:null,y:null}}),pathComponents:{byId:Object(l.a)(Object(l.a)({},t.pathComponents.byId),{},Object(u.a)({},s,{id:s,from:h,to:b,type:i,currant:J,label:"",annotation:"",mirror:!1,invert:!1})),allIds:[].concat(Object(d.a)(t.pathComponents.allIds),[s])},anchors:Object(l.a)({},p),weakLinks:[].concat(Object(d.a)(t.weakLinks),j)})},yn=function(t,n){var e=n.x,a=n.y,o=n.shiftPress;if(t.newPath.isFromValidated){if(o){var c=t.newPath.from,r=c.x,i=c.y;return Math.abs(e-r)>Math.abs(a-i)?Object(l.a)(Object(l.a)({},t),{},{newPath:Object(l.a)(Object(l.a)({},t.newPath),{},{to:{x:e,y:i},movedAfterFromCreation:!0})}):Object(l.a)(Object(l.a)({},t),{},{newPath:Object(l.a)(Object(l.a)({},t.newPath),{},{to:{x:r,y:a},movedAfterFromCreation:!0})})}return Object(l.a)(Object(l.a)({},t),{},{newPath:Object(l.a)(Object(l.a)({},t.newPath),{},{to:{x:e,y:a},movedAfterFromCreation:!0})})}return Object(l.a)(Object(l.a)({},t),{},{newPath:Object(l.a)(Object(l.a)({},t.newPath),{},{from:{x:e,y:a}})})},xn=function(t,n){var e=n.x,a=n.y,o=Object(l.a)(Object(l.a)({},t.rectangleSelection),{},{x1:e,y1:a});return Object(l.a)(Object(l.a)({},t),{},{selection:Object(d.a)(t.anchors.allIds.filter((function(n){return function(t,n){var e=t.x,a=t.y,o=n.x0,c=n.y0,r=n.x1,i=n.y1;return Math.abs(e-o)+Math.abs(e-r)<=Math.abs(r-o)&&Math.abs(a-c)+Math.abs(a-i)<=Math.abs(i-c)}(t.anchors.byId[n],o)}))),rectangleSelection:Object(l.a)(Object(l.a)({},t.rectangleSelection),{},{x1:e,y1:a})})},mn=function(t,n){return Object(l.a)(Object(l.a)({},t),{},{mode:Z,rectangleSelection:{},selection:t.rectangleSelection.x0===t.rectangleSelection.x1||t.rectangleSelection.y0===t.rectangleSelection.y1?[]:Object(d.a)(t.selection)})},gn=function(t,n){return Object(l.a)(Object(l.a)({},t),{},{mode:Y,rectangleSelection:{x0:n.x,y0:n.y,x1:n.x,y1:n.y}})},vn=function(t,n){var e=n.x,a=n.y;return Object(l.a)(Object(l.a)({},t),{},{newNode:Object(l.a)(Object(l.a)({},t.newNode),{},{position:{x:e,y:a}})})},In=function(t,n){return Object(l.a)(Object(l.a)({},t),{},{selection:[],adhesivePoints:Object(d.a)(cn(n.elementType)),mode:K,newNode:{elementType:n.elementType,position:{x:null,y:null}}})},Mn=function(t,n){if(t.mode===K&&null!==t.newNode.position.x&&null!==t.newNode.position.y){var e=Object(bn.a)(),a=Object(bn.a)(),o=[];return t.currentMagnet.attractor&&t.currentMagnet.attracted&&("ANCHOR"===t.currentMagnet.attractor.type&&o.push({anchorId:t.currentMagnet.attractor.id,nodeId:e,name:t.currentMagnet.attracted.name}),"NODE"===t.currentMagnet.attractor.type&&o.push({anchorId:a,nodeId:t.currentMagnet.attractor.id,name:t.currentMagnet.attractor.name,nameAnchor:t.currentMagnet.attracted.name})),Object(l.a)(Object(l.a)({},t),{},{newNode:Object(l.a)(Object(l.a)({},t.newNode),{},{position:{x:null,y:null}}),pathComponents:{byId:Object(l.a)(Object(l.a)({},t.pathComponents.byId),{},Object(u.a)({},e,{id:e,position:a,type:t.newNode.elementType,angle:0})),allIds:[].concat(Object(d.a)(t.pathComponents.allIds),[e])},anchors:Object(l.a)(Object(l.a)({},t.anchors),{},{byId:Object(l.a)(Object(l.a)({},t.anchors.byId),{},Object(u.a)({},a,{id:a,x:t.newNode.position.x,y:t.newNode.position.y,isNodePosition:!0,nodeId:e}))}),weakLinks:[].concat(Object(d.a)(t.weakLinks),o)})}return t},Cn=function(t,n,e){var a=Object(l.a)({},t);return n.forEach((function(t){var n=t.anchorId,o=t.anchorName;a[n]=Object(l.a)(Object(l.a)({},a[n]),{},{x:a[n].x+e[o].dx,y:a[n].y+e[o].dy})})),Object(l.a)({},a)},wn=function(t,n){var e=n.id,a=n.value,o=t.pathComponents.byId[e],c=t.anchors.byId[o.position],r=o.angle,i=a,s=Qt(Object(l.a)(Object(l.a)({},o),{},{positionCoords:c,angle:r})),h=Qt(Object(l.a)(Object(l.a)({},o),{},{positionCoords:c,angle:i})),b={};if(h.forEach((function(t){var n=t.name,e=t.x,a=t.y;b[n]={dx:e,dy:a}})),s.forEach((function(t){var n=t.name,e=t.x,a=t.y;b[n].dx-=e,b[n].dy-=a})),t.rotationHelper&&t.rotationHelper.id&&t.rotationHelper.id===e)return Object(l.a)(Object(l.a)({},t),{},{anchors:Object(l.a)(Object(l.a)({},t.anchors),{},{byId:Object(l.a)({},Cn(t.anchors.byId,t.rotationHelper.IdToUpdate,b))}),pathComponents:Object(l.a)(Object(l.a)({},t.pathComponents),{},{byId:Object(l.a)(Object(l.a)({},t.pathComponents.byId),{},Object(u.a)({},e,Object(l.a)(Object(l.a)({},t.pathComponents.byId[e]),{},{angle:i})))})});var p=[],j=[];return t.weakLinks.forEach((function(n,a){var c=n.anchorId,r=n.nodeId,i=n.name,s=n.nameAnchor;c!==o.position||0===b[s].x&&0===b[s].y||j.push(a),r===e&&(t.anchors.byId[c].isNodePosition&&en[t.pathComponents.byId[t.anchors.byId[c].nodeId].type]?j.push(a):p.push({anchorId:c,anchorName:i}))})),console.log(j.length),Object(l.a)(Object(l.a)({},t),{},{anchors:Object(l.a)(Object(l.a)({},t.anchors),{},{byId:Object(l.a)({},Cn(t.anchors.byId,p,b))}),pathComponents:Object(l.a)(Object(l.a)({},t.pathComponents),{},{byId:Object(l.a)(Object(l.a)({},t.pathComponents.byId),{},Object(u.a)({},e,Object(l.a)(Object(l.a)({},t.pathComponents.byId[e]),{},{angle:i})))}),rotationHelper:{IdToUpdate:p,id:e},weakLinks:Object(d.a)(t.weakLinks.filter((function(t,n){return!j.includes(n)})))})},Ln=function(t,n){var e=t.selection.filter((function(n){return n in t.anchors.byId})),a=[];if(e.length<=1||!["U","D","L","R"].includes(n.direction))return t;var o={};return e.forEach((function(e,a){var c=t.anchors.byId[e];switch(n.direction){case"U":o.y=0===a?c.y:Math.min(o.y,c.y);break;case"D":o.y=0===a?c.y:Math.max(o.y,c.y);break;case"L":o.x=0===a?c.x:Math.min(o.x,c.x);break;case"R":o.x=0===a?c.x:Math.max(o.x,c.x)}})),e.forEach((function(n){var e=t.anchors.byId[n];(void 0!==o.x&&o.x!==e.x||void 0!==o.y&&o.y!==e.y)&&a.push(n),t.anchors.byId[n]=Object(l.a)(Object(l.a)({},e),o)})),Object(l.a)(Object(l.a)({},t),{},{anchors:Object(l.a)(Object(l.a)({},t.anchors),{},{byId:Object(l.a)({},t.anchors.byId)}),weakLinks:Object(d.a)(t.weakLinks.filter((function(t){var n=t.anchorId;return!a.includes(n)})))})},Pn=function(t,n){var e=n.anchorId;if(!e&&1===t.selection.length&&t.anchors.allIds.includes(t.selection[0])&&(e=t.selection[0]),e&&t.anchors.allIds.includes(e)){var a=t.pathComponents.allIds.filter((function(n){return rn(t.pathComponents.byId[n],e)}));if(a.length<=1)return t;var o=t.anchors,c=t.pathComponents.byId,r=[],i=t.weakLinks.filter((function(t){var n=t.anchorId;return e===n}));return a.slice(1).forEach((function(n){var a=Object(bn.a)();c[n]=sn(t.pathComponents.byId[n],e,a),o.allIds=[a].concat(Object(d.a)(o.allIds)),o.byId=Object(l.a)(Object(l.a)({},o.byId),{},Object(u.a)({},a,Object(l.a)({},o.byId[e]))),i.forEach((function(t){r.push(Object(l.a)(Object(l.a)({},t),{},{anchorId:a}))}))})),Object(l.a)(Object(l.a)({},t),{},{pathComponents:Object(l.a)(Object(l.a)({},t.pathComponents),{},{byId:Object(l.a)({},c)}),anchors:{allIds:Object(d.a)(o.allIds),byId:Object(l.a)({},o.byId)},weakLinks:[].concat(Object(d.a)(t.weakLinks),r)})}return t};var En=Object(h.b)((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Q,n=arguments.length>1?arguments[1]:void 0;switch(t=Object(l.a)({},q(t,n)),t=Object(l.a)({},$(t,n)),n.type){case S:var e=n.id,a=n.name,o=n.value;return"angle"===a?wn(t,n):Object(l.a)(Object(l.a)({},t),{},{pathComponents:Object(l.a)(Object(l.a)({},t.pathComponents),{},{byId:Object(l.a)(Object(l.a)({},t.pathComponents.byId),{},Object(u.a)({},e,Object(l.a)(Object(l.a)({},t.pathComponents.byId[e]),{},Object(u.a)({},a,o))))})});case g:if(n.reset)return Object(l.a)(Object(l.a)({},t),{},{selection:[n.objectId]});var c=t.selection.findIndex((function(t){return t===n.objectId}));return c>=0?Object(l.a)(Object(l.a)({},t),{},{selection:[].concat(Object(d.a)(t.selection.slice(0,c)),Object(d.a)(t.selection.slice(c+1)))}):Object(l.a)(Object(l.a)({},t),{},{selection:[].concat(Object(d.a)(t.selection),[n.objectId])});case x:return Object(l.a)(Object(l.a)({},t),{},{selection:[],adhesivePoints:[],mode:Z});case b:return dn(t,n);case j:return un(t);case f:var r=n.attractor,i=n.attracted;if(null===r&&(t.mode===X||t.mode===K)&&t.magnetsOptions.isGridAttracting){var s=n.x,h=n.y,p=et*t.magnetsOptions.gridSpace,O=Math.abs(s)%p,y=Math.abs(h)%p,m=10;(O<=m||O>=p-m)&&(y<=m||y>=p-m)&&(n.x=p*Math.round(s/p),n.y=p*Math.round(h/p))}switch(t.mode){case z:return Object(l.a)(Object(l.a)({},ln(t,n)),{},{currentMagnet:{attractor:r,attracted:i}});case X:return Object(l.a)(Object(l.a)({},yn(t,n)),{},{currentMagnet:{attractor:r,attracted:i}});case K:return Object(l.a)(Object(l.a)({},vn(t,n)),{},{currentMagnet:{attractor:r,attracted:i}});case Y:return Object(l.a)(Object(l.a)({},xn(t,n)),{},{currentMagnet:{attractor:r,attracted:i}});default:return Object(l.a)(Object(l.a)({},t),{},{currentMagnet:{attractor:r,attracted:i}})}case I:return pn(t,n);case P:return In(t,n);case E:return Mn(t);case C:return jn(t);case w:return On(t);case L:return fn(t);case A:return Pn(t,n);case k:return gn(t,n);case T:return mn(t);case N:return Ln(t,n);case D:return hn(t,n);default:return t}})),An=(e(115),e(11)),kn=e(83),Tn=e(164),Nn=e(158),Rn=e(162),Dn=e(163),Sn=50,_n=Object(s.b)((function(t){return{pathComponents:t.pathComponents,anchors:t.anchors}}))((function(t){var n=t.pathComponents,e=t.anchors,c=Object(o.useRef)(),r=Object(o.useState)(0),i=Object(An.a)(r,2),s=i[0],d=i[1],u=Object(o.useState)(0),l=Object(An.a)(u,2),h=l[0],b=l[1],p=Object(o.useState)(),j=Object(An.a)(p,2),O=j[0],f=j[1];return Object(o.useEffect)((function(){var t=document.getElementById("drawingArea").getBBox();d(t.width),b(t.height);var a=kn.a.canvas(document.getElementById("rough-canvas")),o=document.getElementById("rough-canvas").getContext("2d");o.font="0.7cm Computer Modern",o.fillStyle="white",o.fillRect(0,0,s+100,h+100),n.allIds.forEach((function(c){var r=n.byId[c];r.positionCoords=r.position?e.byId[r.position]:void 0,r.fromCoords=r.from?e.byId[r.from]:void 0,r.toCoords=r.to?e.byId[r.to]:void 0,function(t,n,e,a,o){Jt[o.type](t,n,e,a,o)}(a,o,t.x-Sn,t.y-Sn,r)}))}),[s,h,n]),Object(o.useEffect)((function(){f(c.current.toDataURL("image/jpg").replace("image/png","image/octet-stream"))}),[c.current]),Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(Nn.a,{children:"Image Generator"}),Object(a.jsx)(Rn.a,{children:Object(a.jsx)("canvas",{id:"rough-canvas",ref:c,width:s+100,height:h+100})}),Object(a.jsx)(Dn.a,{children:Object(a.jsx)(Tn.a,{href:O,download:"circuit.png",variant:"contained",color:"primary",children:"Download"})})]})})),Fn=e(87),Hn=e(119),Vn=e(179),Bn=e(168),Gn=e(78),Un=e.n(Gn),Zn=e(80),zn=e.n(Zn),Xn=e(79),Kn=e.n(Xn),Yn=Object(s.b)((function(t){return{mode:t.mode,zoom:t.displayOptions.zoom,magnetsOptions:t.magnetsOptions}}),(function(t){return{startCreatePathElement:function(n){return t(M(n))},setZoom:function(n){return t(function(t){return{type:_,zoom:t}}(n))},setModeMovePaper:function(){return t({type:B})},startSelect:function(){return t(m())},stackSelectedAnchors:function(n){return t(R(n))},updateMagnetOption:function(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return t(U(n,e))}}}))((function(t){var n=t.mode,e=t.zoom,o=t.magnetsOptions,c=t.startCreatePathElement,r=t.setZoom,i=t.setModeMovePaper,s=t.stackSelectedAnchors,d=t.updateMagnetOption;return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(Hn.a,{onMouseDown:function(t){c("short"),t.stopPropagation()},children:Object(a.jsxs)(Fn.a,{children:[Object(a.jsx)("circle",{cx:"4",cy:"20",r:"2"}),Object(a.jsx)("circle",{cx:"20",cy:"4",r:"2"}),Object(a.jsx)("path",{d:"M 19.5,3.5 3.5,19.5 l 1,1 L 20.5,4.5 Z"})]})}),Object(a.jsx)(Hn.a,{onMouseDown:function(t){c("upRight"),t.stopPropagation()},children:Object(a.jsxs)(Fn.a,{children:[Object(a.jsx)("circle",{cx:"4",cy:"20",r:"2"}),Object(a.jsx)("circle",{cx:"20",cy:"4",r:"2"}),Object(a.jsx)("path",{d:"M 20,3.5 H 3.5 V 20 h 1 V 4.5 H 20 Z"})]})}),Object(a.jsx)(Hn.a,{onMouseDown:function(t){c("rightUp"),t.stopPropagation()},children:Object(a.jsxs)(Fn.a,{children:[Object(a.jsx)("circle",{cx:"4",cy:"20",r:"2"}),Object(a.jsx)("circle",{cx:"20",cy:"4",r:"2"}),Object(a.jsx)("path",{d:"M 5,20.5 20.5,20.5 l 0,-16.5 h -1 L 19.5,19.5 l -15.5,0 z"})]})}),"|",Object(a.jsx)(Hn.a,{color:n===W?"secondary":"default",onMouseDown:function(t){t.stopPropagation(),n===W?m():i()},children:Object(a.jsx)(Un.a,{})}),Object(a.jsx)(Hn.a,{disabled:e<.2,onMouseDown:function(t){t.stopPropagation(),r(e/2)},children:Object(a.jsx)(Kn.a,{})}),e,Object(a.jsx)(Hn.a,{disabled:e>2,onMouseDown:function(t){t.stopPropagation(),r(2*e)},children:Object(a.jsx)(zn.a,{})}),"|",Object(a.jsx)(Hn.a,{onMouseDown:function(t){t.stopPropagation(),s("L")},children:Object(a.jsx)(Fn.a,{children:Object(a.jsx)("path",{d:"M22 13V19H6V13H22M6 5V11H16V5H6M2 2V22H4V2H2"})})}),Object(a.jsx)(Hn.a,{onMouseDown:function(t){t.stopPropagation(),s("R")},children:Object(a.jsx)(Fn.a,{children:Object(a.jsx)("path",{d:"M18 13V19H2V13H18M8 5V11H18V5H8M20 2V22H22V2H20Z"})})}),Object(a.jsx)(Hn.a,{onMouseDown:function(t){t.stopPropagation(),s("U")},children:Object(a.jsx)(Fn.a,{children:Object(a.jsx)("path",{d:"M11 22H5V6H11V22M19 6H13V16H19V6M22 2H2V4H22V2Z"})})}),Object(a.jsx)(Hn.a,{onMouseDown:function(t){t.stopPropagation(),s("D")},children:Object(a.jsx)(Fn.a,{children:Object(a.jsx)("path",{d:"M11 18H5V2H11V18M19 8H13V18H19V8M22 20H2V22H22V20Z"})})}),"|",Object(a.jsx)(Hn.a,{color:o.isGridAttracting?"secondary":"default",onMouseDown:function(t){t.stopPropagation(),d("isGridAttracting")},children:Object(a.jsxs)(Fn.a,{children:[Object(a.jsx)("path",{d:"M0 6v1h24v-1ZM0 12v1h24v-1ZM0 18v1h24v-1Z"}),Object(a.jsx)("path",{d:"M4 0h1v24h-1ZM11 0h1v24h-1ZM18 0h1v24h-1Z"}),Object(a.jsx)("circle",{cx:18.5,cy:18.5,r:3})]})}),Object(a.jsxs)(Vn.a,{value:o.gridSpace,onChange:function(t){return d("gridSpace",t.target.value)},children:[Object(a.jsx)(Bn.a,{value:.5,children:"0.5"}),Object(a.jsx)(Bn.a,{value:1,children:"1"}),Object(a.jsx)(Bn.a,{value:2,children:"2"})]}),Object(a.jsx)(Hn.a,{color:o.isPathCoordinatesAttracting?"secondary":"default",onMouseDown:function(t){t.stopPropagation(),d("isPathCoordinatesAttracting")},children:Object(a.jsxs)(Fn.a,{children:[Object(a.jsx)("path",{d:"M4 11.5h20v1h-20Z"}),Object(a.jsx)("circle",{cx:2,cy:12,r:2}),Object(a.jsx)("circle",{cx:22,cy:12,r:2})]})}),Object(a.jsx)(Hn.a,{color:o.isNodeAnchorsAttracting?"secondary":"default",onMouseDown:function(t){t.stopPropagation(),d("isNodeAnchorsAttracting")},children:Object(a.jsxs)(Fn.a,{children:[Object(a.jsx)("circle",{id:"path858",cx:"2",cy:"16.5",r:"2"}),Object(a.jsx)("circle",{id:"path834",cx:"2",cy:"7.5",r:"2"}),Object(a.jsx)("circle",{id:"path838",cx:"22",cy:"12",r:"2"}),Object(a.jsx)("path",{d:"m 22,11.5 v 1 L 18.5,12.5 7,21 7,17 H 2 V 16 H 7 L 7,8 H 2 v -1 L 7,7 7,3 18.5,11.5 Z"})]})})]})})),Wn=Object(s.b)((function(t){return{pathComponents:t.pathComponents,selection:t.selection,mode:t.mode}}),(function(t,n){var e=n.svgRef,a=n.displayOptions;return{toggleSelection:function(n,e){return t(v(n,e))},startDragging:function(n,o){var c=e.current.getBoundingClientRect(),r=c.x,i=c.y,s=c.width,d=c.height,u=a.x,l=a.y,h=a.width,b=a.height;a.zoom;t(p(u+h/s*(n-r),l+b/d*(o-i)))}}}))((function(t){var n=t.pathComponents,e=t.selection,o=t.mode,c=t.startDragging,r=t.toggleSelection;return Object(a.jsx)(a.Fragment,{children:n.allIds.map((function(t){return n.byId[t].type&&on[n.byId[t].type](Object(l.a)(Object(l.a)({},n.byId[t]),{},{onMouseDown:o===Z?function(a){a.stopPropagation(),!a.ctrlKey&&e.includes(n.byId[t].id)?c(a.nativeEvent.clientX,a.nativeEvent.clientY):r(n.byId[t].id,!a.ctrlKey)}:null,selected:e.includes(n.byId[t].id)}))}))})})),qn=(e(117),Object(s.b)((function(t,n){var e=n.id;return{x:t.anchors.byId[e].x,y:t.anchors.byId[e].y,mode:t.mode,selected:t.selection.includes(e)}}),(function(t,n){var e=n.svgRef,a=n.displayOptions;return{toggleSelection:function(n,e){return t(v(n,e))},startDragging:function(n,o){var c=e.current.getBoundingClientRect(),r=c.x,i=c.y,s=c.width,d=c.height,u=a.x,l=a.y,h=a.width,b=a.height;a.zoom;t(p(u+h/s*(n-r),l+b/d*(o-i)))}}}))((function(t){var n=t.id,e=t.x,o=t.y,c=t.mode,r=t.selected,i=t.startDragging,s=t.toggleSelection;return Object(a.jsx)("circle",{cx:e,cy:o,r:5,className:"anchor ".concat(r?"selected":""),onMouseDown:c===Z?function(t){t.stopPropagation(),!t.ctrlKey&&r?i(t.nativeEvent.clientX,t.nativeEvent.clientY):s(n,!t.ctrlKey)}:null})}))),$n=Object(s.b)((function(t){return{anchorIds:t.anchors.allIds}}))((function(t){var n=t.anchorIds,e=t.svgRef,o=t.displayOptions;return Object(a.jsx)(a.Fragment,{children:n.map((function(t){return Object(a.jsx)(qn,{id:t,svgRef:e,displayOptions:o},t)}))})})),Jn=Object(s.b)(null,(function(t,n){var e=n.attractor,a=n.attracted;return{updatePosition:function(n,o){return t(y({x:n,y:o,attractor:e,attracted:a}))},stopDragging:function(){return t(O())}}}))((function(t){t.id;var n=t.x,e=t.y,c=t.dx,r=t.dy,i=t.color,s=t.mode,d=t.updatePosition,u=t.stopDragging,l=Object(o.useState)(!1),h=Object(An.a)(l,2),b=h[0],p=h[1];return Object(a.jsxs)(a.Fragment,{children:[b&&Object(a.jsx)("circle",{cx:n,cy:e,r:5,style:{fill:"none",stroke:"red",strokeWidth:2}}),Object(a.jsx)("circle",{cx:n+c,cy:e+r,r:10,style:{fill:i||"transparent"},onMouseEnter:function(t){t.stopPropagation(),d(n+c,e+r),p(!0)},onMouseLeave:function(){return p(!1)},onMouseMove:function(t){return t.stopPropagation()},onMouseUp:s===z?function(t){t.stopPropagation(),u()}:null})]})})),Qn=function(t,n){return!!n&&(!("string"!=typeof t||!n.includes(t))||(!(!t.from||!n.includes(t.from))||(!(!t.to||!n.includes(t.to))||!(!t.position||!n.includes(t.position)))))},te=Object(s.b)((function(t){return Object(l.a)({anchors:t.anchors,pathComponents:t.pathComponents,mode:t.mode,anchorsToMove:t.anchorsToMove,selection:t.selection,adhesivePoints:t.adhesivePoints||null},t.magnetsOptions)}))((function(t){var n=t.mode,e=t.anchors,o=t.pathComponents,c=t.anchorsToMove,r=t.adhesivePoints,i=t.isPathCoordinatesAttracting,s=t.isNodeAnchorsAttracting;return n!==z&&n!==K&&n!==X?null:Object(a.jsxs)(a.Fragment,{children:[s&&o.allIds.filter((function(t){return!Qn(o.byId[t],c)})).reduce((function(t,c){return[].concat(Object(d.a)(t),Object(d.a)(Qt(Object(l.a)(Object(l.a)({},o.byId[c]),{},{fromCoords:o.byId[c].from&&e.byId[o.byId[c].from],toCoords:o.byId[c].to&&e.byId[o.byId[c].to],positionCoords:o.byId[c].position&&e.byId[o.byId[c].position]})).map((function(t){var e=t.x,i=t.y,s=t.name;return r.reduce((function(t,r){var u=r.type,l=r.dx,h=r.dy,b=r.name,p=void 0===b?"":b,j=r.id;return[].concat(Object(d.a)(t),[Object(a.jsx)(Jn,{x:e,dx:l,y:i,dy:h,mode:n,attractor:{type:o.byId[c].position?"NODE":"PATH",name:s,id:c},attracted:{type:u,name:p,id:j}},"".concat(c,"-").concat(s,"<-").concat(j,"-").concat(p||""))])}),[])}))))}),[]),i&&e.allIds.filter((function(t){return!Qn(t,c)})).map((function(t){return r.reduce((function(o,c){var r=c.type,i=c.dx,s=c.dy,u=c.name,l=void 0===u?"":u,h=c.id;return[].concat(Object(d.a)(o),[Object(a.jsx)(Jn,{x:e.byId[t].x,dx:i,y:e.byId[t].y,dy:s,mode:n,attractor:{type:"ANCHOR",name:"",id:t},attracted:{type:r,name:l,id:h}},"".concat(t,"<-").concat(h,"-").concat(l||""))])}),[])}))]})})),ne=Object(s.b)((function(t){return{mode:t.mode,newPath:t.newPath,newNode:t.newNode,rectangleSelection:t.rectangleSelection,displayOptions:t.displayOptions,isGridAttracting:t.magnetsOptions.isGridAttracting,gridSpace:t.magnetsOptions.gridSpace}}),(function(t){return{updatePosition:function(n,e,a){return t(y({x:n,y:e,shiftPress:a}))},stopDragging:function(){return t(O())},validateFirstStepPathElementCreation:function(){return t({type:C})},invalidateFirstStepPathElementCreation:function(){return t({type:w})},savePathElementCreation:function(){return t({type:L})},nextStepOfElementCreation:function(){return t({type:E})},startRectangleSelection:function(n,e){return t(function(t,n){return{type:k,x:t,y:n}}(n,e))},stopRectangleSelection:function(){return t({type:T})},startMovePaper:function(n,e){return t(function(t,n){return{type:F,x:t,y:n}}(n,e))}}}))((function(t){var n=t.svgRef,e=t.mode,o=t.newPath,c=t.newNode,r=t.rectangleSelection,i=t.displayOptions,s=t.isGridAttracting,d=t.gridSpace,u=t.stopDragging,l=t.updatePosition,h=t.validateFirstStepPathElementCreation,b=t.invalidateFirstStepPathElementCreation,p=t.savePathElementCreation,j=t.nextStepOfElementCreation,O=t.startRectangleSelection,f=t.stopRectangleSelection,y=t.startMovePaper,x=i.x,m=i.y,g=i.width,v=i.height;return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(Yn,{}),Object(a.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"".concat(x," ").concat(m," ").concat(g," ").concat(v),style:{width:"100%",background:"lightgray"},onMouseMove:e===z||e===X||e===K||e===Y?function(t){var a=n.current.getBoundingClientRect(),o=a.x,c=a.y,r=a.width,i=a.height;switch(e){case z:case X:case K:case Y:l(x+(t.nativeEvent.clientX-o)*(g/r),m+(t.nativeEvent.clientY-c)*(v/i),t.shiftKey)}}:null,onMouseDown:function(t){var a=n.current.getBoundingClientRect(),c=a.x,r=a.y,i=a.width,s=a.height;switch(e){case Z:t.stopPropagation(),O(x+(t.nativeEvent.clientX-c)*(g/i),m+(t.nativeEvent.clientY-r)*(v/s));break;case X:t.stopPropagation(),o.isFromValidated?p(x+(t.nativeEvent.clientX-c)*(g/i),m+(t.nativeEvent.clientY-r)*(v/s)):h();break;case K:t.stopPropagation(),j();break;case W:t.stopPropagation(),y(t.nativeEvent.clientX,t.nativeEvent.clientY)}},onMouseUp:e===z?function(){return u()}:e===Y?function(t){t.stopPropagation(),f()}:null,ref:n,children:[Object(a.jsx)("defs",{children:Object(a.jsx)("pattern",{id:"grid-magnets",x:"-10",y:"-10",width:d*et,height:d*et,patternUnits:"userSpaceOnUse",children:Object(a.jsx)("circle",{fill:"gray",cx:"10",cy:"10",r:"3"})})}),s&&Object(a.jsx)("rect",{x:x-10,y:m-10,width:"100%",height:"100%",fill:"url(#grid-magnets)"}),Object(a.jsxs)("g",{id:"drawingArea",children:[Object(a.jsx)(Wn,{svgRef:n,displayOptions:i}),e===X&&o&&o.isFromValidated&&o.to&&null!==o.to.x&&null!==o.to.y&&o.from&&null!==o.from.x&&null!==o.from.y&&on[o.elementType]({fromCoords:o.from,toCoords:o.to}),e===X&&o&&o.isFromValidated&&null!==o.to.x&&null!==o.to.y&&Object(a.jsx)("circle",{cx:o.to.x,cy:o.to.y,r:5}),e===X&&o&&o.from&&null!==o.from.x&&null!==o.from.y&&Object(a.jsx)("circle",{cx:o.from.x,cy:o.from.y,r:5,onMouseEnter:b}),e===K&&c&&c.position&&null!==c.position.x&&null!==c.position.y&&on[c.elementType]({positionCoords:c.position}),e===K&&c&&c.position&&null!==c.position.x&&null!==c.position.y&&Object(a.jsx)("circle",{cx:c.position.x,cy:c.position.y,r:5}),Object(a.jsx)($n,{svgRef:n,displayOptions:i}),Object(a.jsx)(te,{svgRef:n,displayOptions:i}),e===Y&&Object(a.jsx)("path",{d:"M ".concat(r.x0," ").concat(r.y0," L  ").concat(r.x0," ").concat(r.y1," L ").concat(r.x1," ").concat(r.y1," L  ").concat(r.x1," ").concat(r.y0," Z"),style:{fill:"transparent",stroke:"red",strokeWidth:1}})]})]})]})})),ee=function(t){var n=t.toFixed(2);return".00"===n.slice(-3)?n.slice(0,-3):"0"===n.slice(-1)?n.slice(0,-1):n},ae=function(t){var n=t.x,e=t.y;return"".concat("number"===typeof n?n.toFixed(2):n,"-").concat("number"===typeof e?e.toFixed(2):e)},oe=function(t,n,e){var a=ae({x:t,y:n});return e[a].name?"(".concat(e[a].name,")"):"(".concat(ee(t/et),", ").concat(ee(-n/et),")")},ce=function(t){return function(n){return n.filter((function(n){return!t[n]}))}},re=function(t,n){return function(e,a){var o=n[e],c=o.endingPaths,r=o.nodeAssociated,i=n[a],s=i.endingPaths,d=i.nodeAssociated;return ce(t)(c).length<ce(t)(s).length?-1:ce(t)(c).length>ce(t)(s).length?1:ce(t)(r).length>ce(t)(d).length?-1:ce(t)(r).length<ce(t)(d).length?1:0}},ie=function(t,n,e,a,o){for(var c=[],r=0,i="point".concat(o+1),s=t,d=n[s],u=d.startingPaths.filter((function(t){return!a[t]})),l=d.endingPaths.filter((function(t){return!a[t]})),h=d.nodeAssociated.filter((function(t){return!a[t]})),b=!0;u.length>0||h.length>0;)if(0===c.length&&c.push("\\draw "),b&&(c.push("".concat(oe(d.x,d.y,n)," ")),!d.name&&(u.length>1||l.length>0)&&(c.push("coordinate(".concat(i,") ")),n[s].name=i,i="point".concat(o+(r+=1)+1))),h.length>0){b=!1;var p=h.pop(),j=e.pathComponents.byId[p];c.push("".concat(tn(j)," ")),a[j.id]=!0}else{b=!0;var O=e.pathComponents.byId[u[0]];c.push(tn(O)),a[O.id]=!0,u=(d=n[s=ae(e.anchors.byId[O.to])]).startingPaths.filter((function(t){return!a[t]})),l=d.endingPaths.filter((function(t){return!a[t]})),h=d.nodeAssociated.filter((function(t){return!a[t]}))}return c.length>0&&(b&&(c.push("".concat(oe(d.x,d.y,n)," ")),!d.name&&l.length>0&&(n[s].name=i,c.push("coordinate(".concat(i,") ")),i="point".concat(o+(r+=1)+1))),c.push(";")),[c,r]};var se=function(t){var n=function(t){var n={},e={};return t.pathComponents.allIds.forEach((function(a){var o=t.pathComponents.byId[a];if(nn[o.type]){var c=t.anchors.byId[o.from],r=t.anchors.byId[o.to],i=ae(c),s=ae(r);void 0===n[i]?n[i]={x:c.x.toFixed(2),y:c.y.toFixed(2),name:null,startingPaths:[o.id],endingPaths:[],nodeAssociated:[]}:n[i].startingPaths.includes(o.id)||n[i].startingPaths.push(o.id),void 0===n[s]?n[s]={x:r.x.toFixed(2),y:r.y.toFixed(2),name:null,endingPaths:[o.id],startingPaths:[],nodeAssociated:[]}:n[s].endingPaths.includes(o.id)||n[s].endingPaths.push(o.id)}else if(e[o.id]={name:null,parent:null,parentAnchor:null,anchor:null,associatedIds:[]},!en[o.type]){var d=t.anchors.byId[o.position],u=ae(d);void 0===n[u]?n[u]={x:d.x.toFixed(2),y:d.y.toFixed(2),name:null,startingPaths:[],endingPaths:[],nodeAssociated:[o.id]}:n[u].nodeAssociated.includes(o.id)||n[u].nodeAssociated.push(o.id)}})),t.weakLinks.forEach((function(a){var o=a.anchorId,c=a.nodeId,r=a.name,i=a.nameAnchor,s=t.anchors.byId[o];if(s.isNodePosition&&en[t.pathComponents.byId[t.anchors.byId[o].nodeId].type]){var d=t.anchors.byId[o].nodeId;e[d].parent=c,e[d].anchor=i,e[d].parentAnchor=r,e[c].associatedIds.includes(d)||e[c].associatedIds.push(d)}else{var u=ae(s);n[u].nodeAssociated.includes(c)||n[u].nodeAssociated.push(c),e[c].associatedIds.includes(u)||e[c].associatedIds.push(u)}})),[n,e]}(t),e=Object(An.a)(n,2),a=e[0],o=e[1],c={},r=0,i={},s=["\\begin{circuitikz}"],d=t.pathComponents.allIds.filter((function(n){var e=t.pathComponents.byId[n];return function(t){return!!t.position}(e)&&en[e.type]})).sort((function(t,n){return null===o[t].parent?-1:null===o[n].parent?1:(o[n].parent===t||o[t].parent,-1)}));d.forEach((function(n){var e=t.pathComponents.byId[n],a={};if(null!==o[n].parent?(a.position="".concat(o[o[n].parent].name,".").concat(o[n].parentAnchor),a.anchor=o[n].anchor):(a.x=t.anchors.byId[e.position].x,a.y=t.anchors.byId[e.position].y),o[n].associatedIds.length>0){var r="".concat(e.type).concat(i[e.type]||1);s.push(tn(e,a,r)),o[e.id].name=r,i[e.type]=(i[e.type]||1)+1}else s.push(tn(e,a));c[n]=!0})),t.weakLinks.forEach((function(n){var e=n.anchorId,r=n.nodeId,i=n.name,s=(n.nameAnchor,t.anchors.byId[e]),d=ae(s);a[d]&&c[r]&&!a[d].name&&o[r].name&&(a[d].name="".concat(o[r].name,".").concat(i))})),d.forEach((function(n){o[n].associatedIds.forEach((function(n){if(void 0!==a[n]){var e=ie(n,a,t,c,r),o=Object(An.a)(e,2),i=o[0],d=o[1];i.length>0&&(r+=d,s.push(i.join("")))}}))}));for(var u=Object.keys(a);u.length>0;){var l=u.sort(re(tn,a))[0];if(void 0!==a[l]){var h=ie(l,a,t,c,r),b=Object(An.a)(h,2),p=b[0],j=b[1];if(p.length>0)r+=j,s.push(p.join(""));else{var O=u.indexOf(l);u.splice(O,1)}}else{var f=u.indexOf(l);u.splice(f,1)}}return s.push("\\end{circuitikz}"),s},de=Object(s.b)((function(t){return{code:se(t)}}),null)((function(t){var n=t.code;return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(Nn.a,{children:"Your LaTEX code"}),Object(a.jsx)(Rn.a,{children:Object(a.jsx)("pre",{children:n.slice(0,n.length-1).join("\n\t")+"\n"+n[n.length-1]})}),Object(a.jsx)(Dn.a,{children:Object(a.jsx)(Tn.a,{autoFocus:!0,onClick:function(){!function(t){navigator.clipboard.writeText(t).then((function(){}),(function(){}))}(n.slice(0,n.length-1).join("\n\t")+"\n"+n[n.length-1])},children:"Copy"})})]})})),ue=e(167),le=e(120),he=e(169),be=e(170),pe=e(165),je=e(182),Oe=e(172),fe=e(171),ye=e(181),xe={label:function(t,n){return Object(a.jsx)(le.a,{children:Object(a.jsx)(ye.a,{label:"Label",value:t,onKeyDown:function(t){return t.stopPropagation()},onChangeCapture:n(null)})})},annotation:function(t,n){return Object(a.jsx)(le.a,{children:Object(a.jsx)(ye.a,{label:"Annotation",value:t,onKeyDown:function(t){return t.stopPropagation()},onChangeCapture:n(null)})})},angle:function(t,n){return Object(a.jsxs)(le.a,{button:!0,children:[Object(a.jsx)(he.a,{primary:"rotation"}),Object(a.jsx)(be.a,{children:Object(a.jsx)(pe.a,{value:t||0,onKeyDown:function(t){return t.stopPropagation()},onChangeCapture:n(null),inputProps:{step:5,min:-180,max:180,type:"number"}})})]})},mirror:function(t,n){return Object(a.jsx)(le.a,{children:Object(a.jsx)(fe.a,{control:Object(a.jsx)(Oe.a,{checked:t,onChange:n(!t),name:"mirror"}),label:"mirror"})})},invert:function(t,n){return Object(a.jsx)(le.a,{children:Object(a.jsx)(fe.a,{control:Object(a.jsx)(Oe.a,{checked:t,onChange:n(!t),name:"invert"}),label:"Invert"})})},currant:function(t,n){return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)(le.a,{button:!0,children:[Object(a.jsx)(he.a,{primary:"Currant"}),Object(a.jsx)(be.a,{children:Object(a.jsx)(je.a,{checked:t.show,onChange:n(Object(l.a)(Object(l.a)({},t),{},{show:!t.show})),inputProps:{"aria-label":"primary checkbox"}})})]}),Object(a.jsx)(le.a,{children:Object(a.jsx)(ye.a,{disabled:!t.show,label:"Currant name",value:t.currantText,onKeyDown:function(t){return t.stopPropagation()},onChangeCapture:function(e){return n(Object(l.a)(Object(l.a)({},t),{},{currantText:e.target.value}))()}})}),Object(a.jsx)(le.a,{children:Object(a.jsx)(fe.a,{disabled:!t.show,control:Object(a.jsx)(Oe.a,{checked:t.currantIsForward,onChange:n(Object(l.a)(Object(l.a)({},t),{},{currantIsForward:!t.currantIsForward})),name:"arrow direction"}),label:"direction"})}),Object(a.jsx)(le.a,{children:Object(a.jsx)(fe.a,{disabled:!t.show,control:Object(a.jsx)(Oe.a,{checked:t.currantIsAfter,onChange:n(Object(l.a)(Object(l.a)({},t),{},{currantIsAfter:!t.currantIsAfter})),name:"currant position"}),label:"arrow position"})}),Object(a.jsx)(le.a,{children:Object(a.jsx)(fe.a,{disabled:!t.show,control:Object(a.jsx)(Oe.a,{checked:t.currantIsAbove,onChange:n(Object(l.a)(Object(l.a)({},t),{},{currantIsAbove:!t.currantIsAbove})),name:"text position"}),label:"text position"})})]})}},me=Object(s.b)((function(t){if(t.selection.length<1||!t.pathComponents.allIds.includes(t.selection[0]))return{};var n=t.selection[0];return{id:n,options:t.pathComponents.byId[n]}}),(function(t){return{handleInputChange:function(n,e){return function(a){return function(o){return t(function(t,n,e){return{type:S,id:t,name:n,value:e}}(n,e,null===a?o.target.value:a))}}}}}))((function(t){var n=t.handleInputChange,e=t.id,o=t.options,c=void 0===o?null:o;return null===c?null:Object(a.jsx)(ue.a,{children:Object.keys(c).map((function(t){return[t,Object.keys(xe).findIndex((function(n){return n===t}))]})).filter((function(t){return Object(An.a)(t,2)[1]>=0})).sort((function(t,n){return Object(An.a)(t,2)[1]-Object(An.a)(n,2)[1]})).map((function(t){var o=Object(An.a)(t,1)[0];return Object(a.jsx)("div",{children:xe[o](c[o],n(e,o))},o)}))})})),ge=e(81),ve=e.n(ge),Ie=e(82),Me=e.n(Ie),Ce=e(173),we=Object(s.b)(null,(function(t){return{startCreatePathElement:function(n){return t(M(n))},startCreateNodeElement:function(n){return t(function(t){return{type:P,elementType:t}}(n))}}}))((function(t){var n=t.startCreatePathElement,e=t.startCreateNodeElement,c=Object(o.useState)(),r=Object(An.a)(c,2),i=r[0],s=r[1];return Object(a.jsx)(ue.a,{children:Object.keys(an).map((function(t){return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)(le.a,{button:!0,onClick:function(){return s(i===t?null:t)},children:[Object(a.jsx)(he.a,{primary:t}),i===t?Object(a.jsx)(ve.a,{}):Object(a.jsx)(Me.a,{})]},t),Object(a.jsx)(Ce.a,{in:i===t,timeout:"auto",unmountOnExit:!0,children:Object(a.jsx)(ue.a,{children:an[t].map((function(t){return Object(a.jsx)(le.a,{button:!0,onMouseDown:function(a){a.stopPropagation(),nn[t]?n(t):e(t)},children:Object(a.jsx)(he.a,{primary:t,style:{paddingLeft:"20px"}})},t)}))})})]})}))})})),Le=e(183),Pe=e(176),Ee=e(177),Ae=e(47),ke=e(174),Te=e(175),Ne=e(178),Re=Object(ke.a)((function(t){return{root:{display:"flex"},appBar:{zIndex:t.zIndex.drawer+1},toolBar:{justifyContent:"space-between"},drawer:{width:180,flexShrink:0},drawerPaper:{width:180},drawerContainer:{overflow:"auto"},optionDrawer:{},optionDrawerPaper:{width:280},content:{flexGrow:1,padding:t.spacing(3)}}}));var De=Object(s.b)((function(t){return{mode:t.mode,selection:t.selection,pathIds:t.pathComponents.allIds,isPaperDragged:t.displayOptions.dragging.isDragging}}),(function(t){return{startSelect:function(){return t(m())},splitAnchor:function(){return t({type:A,anchorId:n||null});var n},stackSelectedAnchors:function(n){return t(R(n))},deleteElement:function(n){t(function(t){return{type:D,selection:t}}(n))},movePaper:function(n,e){return t(function(t,n){return{type:H,x:t,y:n}}(n,e))},endMovePaper:function(){return t({type:V})}}}))((function(t){var n=t.mode,e=t.selection,c=t.pathIds,r=t.isPaperDragged,i=t.startSelect,s=t.splitAnchor,d=t.stackSelectedAnchors,u=t.deleteElement,l=t.movePaper,h=t.endMovePaper,b=Re(),p=Object(o.useState)(!1),j=Object(An.a)(p,2),O=j[0],f=j[1],y=Object(o.useState)(!1),x=Object(An.a)(y,2),m=x[0],g=x[1],v=Object(o.useRef)();return Object(o.useEffect)((function(){var t=function(t){switch(t.key){case"ArrowRight":d("R");break;case"ArrowLeft":d("L");break;case"ArrowUp":d("U");break;case"ArrowDown":d("D");break;case"s":s();break;case"Delete":u(e);break;default:console.log(t.key)}};return document.addEventListener("keydown",t),function(){document.removeEventListener("keydown",t)}}),[s,d,u,e]),Object(a.jsxs)("div",{className:b.root,tabIndex:"0",onMouseDown:i,onMouseMove:n===W&&r?function(t){l(t.nativeEvent.clientX,t.nativeEvent.clientY)}:null,onMouseUp:n===W&&r?h:null,children:[Object(a.jsx)(Te.a,{}),Object(a.jsx)(Pe.a,{position:"fixed",className:b.appBar,children:Object(a.jsxs)(Ee.a,{className:b.toolBar,children:[Object(a.jsx)(Ae.a,{variant:"h6",noWrap:!0,children:"Clipped drawer"}),Object(a.jsx)(Tn.a,{color:"inherit",onClick:function(){return g(!0)},children:"Rough"}),Object(a.jsx)(Tn.a,{color:"inherit",onClick:function(){return f(!0)},children:"LaTEX"})]})}),Object(a.jsxs)(Le.a,{className:b.drawer,variant:"permanent",classes:{paper:b.drawerPaper},children:[Object(a.jsx)(Ee.a,{}),Object(a.jsx)("div",{className:b.drawerContainer,children:Object(a.jsx)(we,{})})]}),Object(a.jsxs)(Le.a,{anchor:"right",variant:"persistent",open:(n===Z||n===z)&&1===e.length&&c.includes(e[0]),className:b.optionDrawer,classes:{paper:b.optionDrawerPaper},onMouseDown:function(t){return t.stopPropagation()},children:[Object(a.jsx)(Ee.a,{}),Object(a.jsx)(me,{})]}),Object(a.jsxs)("main",{className:b.content,children:[Object(a.jsx)(Ee.a,{}),Object(a.jsx)(ne,{svgRef:v})]}),Object(a.jsx)(Ne.a,{open:O,onClose:function(){f(!1)},children:Object(a.jsx)(de,{})}),Object(a.jsx)(Ne.a,{maxWidth:"lg",open:m,onClose:function(){g(!1)},children:Object(a.jsx)(_n,{})})]})}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(Object(a.jsx)(c.a.StrictMode,{children:Object(a.jsx)(s.a,{store:En,children:Object(a.jsx)(De,{})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))},21:function(t,n,e){}},[[118,1,2]]]);
//# sourceMappingURL=main.a6471191.chunk.js.map