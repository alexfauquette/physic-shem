(this["webpackJsonpphysic-schem"]=this["webpackJsonpphysic-schem"]||[]).push([[0],{30:function(t,e,n){},74:function(t,e,n){},75:function(t,e,n){},76:function(t,e,n){"use strict";n.r(e);var o=n(1),c=n(0),a=n.n(c),r=n(9),i=n.n(r),s=n(8),d=n(18),l=n(16),h=n(51),b=n(10),u=n(3),p=n(37),j="START_DRAGGING";function y(t,e){return{type:j,x:t,y:e}}var O="STOP_DRAGGING";function x(t,e){return{type:O,attractor:t||null,attracted:e||null}}var m="UPDATE_POSITION";function f(t){var e=t.x,n=t.y,o=t.id,c=t.shiftPress;return{type:m,x:e,y:n,id:o||null,shiftPress:c}}var I="START_SELECT";var v="TOGGLE_SELECTION";function C(t,e){return{type:v,objectId:t,reset:e}}var g="START_CREATE_PATH_ELEMENT";var w="VALIDATE_FIRST_STEP_PATH_ELEMENT_CREATION";var M="INVALIDATE_FIRST_STEP_PATH_ELEMENT_CREATION";var E="SAVE_PATH_ELEMENT_CREATION";var P="START_CREATE_NODE_ELEMENT";var T="ELEMENT_CREATION_NEXT_STEP";var N="SPLIT_ANCHOR";var L="START_RECTANGLE_SELECTION";var A="STOP_RECTANGLE_SELECTION";var R="STACK_SELECTED_ANCHORS";n(30);var S=100,_=1.4,F=(.7071*30).toFixed(3),k=Object(s.b)((function(t,e){return e.id?{mode:t.mode,fromCoords:t.anchors.byId[e.from],toCoords:t.anchors.byId[e.to]}:{}}),(function(t){return{}}))((function(t){var e=t.fromCoords,n=t.toCoords,c=(t.anchors,t.mode,t.selected),a=(t.showHandles,t.id,Object(l.a)(t,["fromCoords","toCoords","anchors","mode","selected","showHandles","id"]));if(!e||!n)return null;var r=e.x,i=e.y,s=n.x,d=n.y,h=.5-30/Math.sqrt(Math.pow(r-s,2)+Math.pow(i-d,2)),b=parseInt(180*Math.atan2(d-i,s-r)/Math.PI);return Object(o.jsx)("g",{className:"component ".concat(c?"red":"black"),children:Object(o.jsxs)("g",Object(u.a)(Object(u.a)({},a),{},{children:[Object(o.jsxs)("g",{style:{transform:"translate(".concat((r+s)/2,"px , ").concat((i+d)/2,"px) rotate(").concat(b,"deg)")},children:[Object(o.jsx)("circle",{cx:0,cy:0,r:30}),Object(o.jsx)("path",{d:"M -".concat(F," -").concat(F," L ").concat(F," ").concat(F," M -").concat(F," ").concat(F," L ").concat(F," -").concat(F)})]}),Object(o.jsx)("path",{d:"M ".concat(r," ").concat(i," L ").concat(r+h*(s-r)," ").concat(i+h*(d-i))}),Object(o.jsx)("path",{d:"M ".concat(s," ").concat(d," L ").concat(s+h*(r-s)," ").concat(d+h*(i-d))})]}))})})),D=Object(s.b)((function(t,e){return e.id?{mode:t.mode,fromCoords:t.anchors.byId[e.from],toCoords:t.anchors.byId[e.to]}:{}}))((function(t){var e=t.fromCoords,n=t.toCoords,c=(t.anchors,t.mode,t.selected),a=(t.showHandles,t.id,Object(l.a)(t,["fromCoords","toCoords","anchors","mode","selected","showHandles","id"]));if(!e||!n)return null;var r=e.x,i=e.y,s=n.x,d=n.y,h=Math.sqrt(Math.pow(r-s,2)+Math.pow(i-d,2)),b=(h-40)/(2*h),p=parseInt(180*Math.atan2(d-i,s-r)/Math.PI);return Object(o.jsx)("g",{className:"component ".concat(c?"red":"black"),children:Object(o.jsxs)("g",Object(u.a)(Object(u.a)({},a),{},{children:[Object(o.jsxs)("g",{style:{transform:"translate(".concat((r+s)/2,"px , ").concat((i+d)/2,"px) rotate(").concat(p,"deg)")},children:[Object(o.jsx)("path",{d:"M ".concat(20," 0 L ").concat(-20," ").concat(-25," L ").concat(-20," ").concat(25," Z")}),Object(o.jsx)("path",{d:"M ".concat(20," ").concat(25," L ").concat(20," ").concat(-25)})]}),Object(o.jsx)("path",{d:"M ".concat(r," ").concat(i," L ").concat(r+b*(s-r)," ").concat(i+b*(d-i))}),Object(o.jsx)("path",{d:"M ".concat(s," ").concat(d," L ").concat(s+b*(r-s)," ").concat(d+b*(i-d))})]}))})})),H=.8,B=40,G=15,V=Object(s.b)((function(t,e){return e.id?{mode:t.mode,fromCoords:t.anchors.byId[e.from],toCoords:t.anchors.byId[e.to]}:{}}))((function(t){var e=t.fromCoords,n=t.toCoords,c=(t.mode,t.selected),a=(t.showHandles,t.id,t.wiper_pos),r=void 0===a?.5:a,i=Object(l.a)(t,["fromCoords","toCoords","mode","selected","showHandles","id","wiper_pos"]);if(!e||!n)return null;var s=e.x,d=e.y,h=n.x,b=n.y,p=Math.sqrt(Math.pow(s-h,2)+Math.pow(d-b,2)),j=(p-80)/(2*p),y=parseInt(180*Math.atan2(b-d,h-s)/Math.PI);return Object(o.jsx)("g",{className:"component ".concat(c?"red":"black"),children:Object(o.jsxs)("g",Object(u.a)(Object(u.a)({},i),{},{children:[Object(o.jsxs)("g",{style:{transform:"translate(".concat((s+h)/2,"px , ").concat((d+b)/2,"px) rotate(").concat(y,"deg)")},children:[Object(o.jsx)("path",{d:"M ".concat(-40," 0 L ").concat(-5/6*B," ").concat(-15," L ").concat(-20," ").concat(G," L ").concat(-1/6*B," ").concat(-15," L ").concat(1/6*B," ").concat(G," L ").concat(20," ").concat(-15," L ").concat(5/6*B," ").concat(G," L ").concat(40," 0")}),Object(o.jsx)("path",{d:"M ".concat(-(.5-r)*H*S," ").concat(-40," L ").concat(-(.5-r)*H*S," ").concat(-15)})]}),Object(o.jsx)("path",{d:"M ".concat(s," ").concat(d," L ").concat(s+j*(h-s)," ").concat(d+j*(b-d))}),Object(o.jsx)("path",{d:"M ".concat(h," ").concat(b," L ").concat(h+j*(s-h)," ").concat(b+j*(d-b))})]}))})})),X=30,q=Object(s.b)((function(t,e){return e.id?{mode:t.mode,fromCoords:t.anchors.byId[e.from],toCoords:t.anchors.byId[e.to]}:{}}))((function(t){var e=t.fromCoords,n=t.toCoords,c=(t.mode,t.selected),a=(t.showHandles,t.id,Object(l.a)(t,["fromCoords","toCoords","mode","selected","showHandles","id"]));if(!e||!n)return null;var r=e.x,i=e.y,s=n.x,d=n.y,h=Math.sqrt(Math.pow(r-s,2)+Math.pow(i-d,2)),b=(h-20)/(2*h),p=parseInt(180*Math.atan2(d-i,s-r)/Math.PI);return Object(o.jsx)("g",{className:"component ".concat(c?"red":"black"),children:Object(o.jsxs)("g",Object(u.a)(Object(u.a)({},a),{},{children:[Object(o.jsxs)("g",{style:{transform:"translate(".concat((r+s)/2,"px , ").concat((i+d)/2,"px) rotate(").concat(p,"deg)")},children:[Object(o.jsx)("path",{d:"M  ".concat(-10," ").concat(-30," L ").concat(-10," ").concat(X)}),Object(o.jsx)("path",{d:"M  ".concat(10," ").concat(-30," L ").concat(10," ").concat(X)}),Object(o.jsx)("path",{d:"M ".concat(-25," ").concat(-30," L ").concat(25," ").concat(X)})]}),Object(o.jsx)("path",{d:"M ".concat(r," ").concat(i," L ").concat(r+b*(s-r)," ").concat(i+b*(d-i))}),Object(o.jsx)("path",{d:"M ".concat(s," ").concat(d," L ").concat(s+b*(r-s)," ").concat(d+b*(i-d))})]}))})})),U=70,K=55.00000000000001,W=function(t){switch(t){case"B":return{x:U,y:0};case"C":return{x:0,y:K};case"E":return{x:0,y:-K};default:return{x:0,y:0}}},Y=Object(s.b)((function(t,e){return e.id?{mode:t.mode,positionCoords:t.anchors.byId[e.position]}:{}}))((function(t){var e=t.positionCoords,n=t.positionAnchor,c=void 0===n?"":n,a=t.angle,r=void 0===a?0:a,i=(t.mode,t.selected),s=(t.showHandles,t.id,Object(l.a)(t,["positionCoords","positionAnchor","angle","mode","selected","showHandles","id"]));if(!e)return null;var d=e.x,h=e.y,b=W(c),p=b.x,j=b.y;return Object(o.jsx)("g",{className:"component ".concat(i?"red":"black"),children:Object(o.jsx)("g",Object(u.a)(Object(u.a)({},s),{},{children:Object(o.jsx)("g",{style:{transform:"translate(".concat(d,"px , ").concat(h,"px) rotate(").concat(-r,"deg)")},children:Object(o.jsxs)("g",{style:{transform:"translate(".concat(p,"px , ").concat(j,"px)")},children:[Object(o.jsx)("path",{d:"M ".concat(0," ",-K," \n                  L ",0," ").concat(-19.25,"\n                  L ").concat(-35," ").concat(-19.25)}),Object(o.jsx)("path",{d:"M ".concat(-35," ").concat(-.5*K,"\n                  L ").concat(-35," ").concat(.5*K,"\n                  L ").concat(-35," ").concat(19.25,"\n                  L ",0," ").concat(19.25,"\n                  L ",0," ").concat(K)}),Object(o.jsx)("path",{d:"M ".concat(-43.4," ").concat(-19.25,"\n                  L ").concat(-43.4," ").concat(19.25),style:{strokeWidth:2}}),Object(o.jsx)("path",{d:"M ".concat(-43.4," 0\n                      L ").concat(-70," 0")})]})})}))})})),z={lampe:function(){return[]},"empty led":function(){return[]},pR:function(t){return function(t){var e=t.fromCoords,n=t.toCoords,o=e.x,c=e.y,a=n.x,r=n.y,i=Math.atan2(r-c,a-o);return[{name:"wiper",x:(o+a)/2+55*Math.sin(i),y:(c+r)/2-55*Math.cos(i)}]}(t)},nmos:function(t){return function(t){var e=t.positionAnchor,n=t.angle,o=void 0===n?0:n,c=t.positionCoords,a=c.x,r=c.y,i=W(e),s=i.x,d=i.y,l=W("C"),h=W("B"),b=W("E"),u=Math.PI*o/180,p=Math.atan2(d-l.y,s-l.x),j=Math.atan2(d-h.y,s-h.x),y=Math.atan2(d-b.y,s-b.x),O=Math.sqrt(Math.pow(l.x-s,2)+Math.pow(l.y-d,2)),x=Math.sqrt(Math.pow(h.x-s,2)+Math.pow(h.y-d,2)),m=Math.sqrt(Math.pow(b.x-s,2)+Math.pow(b.y-d,2));return[{name:"C",x:a+Math.cos(-u+p)*O,y:r+Math.sin(-u+p)*O},{name:"B",x:a+Math.cos(-u+j)*x,y:r+Math.sin(-u+j)*x},{name:"E",x:a+Math.cos(-u+y)*m,y:r+Math.sin(-u+y)*m}]}(t)},vcapacitor:function(t){return function(t){var e=t.fromCoords,n=t.toCoords,o=e.x,c=e.y,a=n.x,r=n.y,i=Math.atan2(r-c,a-o);return[{name:"wiper",x:(o+a)/2+55*Math.sin(i),y:(c+r)/2-55*Math.cos(i)}]}(t)}},J={lampe:function(t,e,n){return"\\draw (".concat((e.x/S*_).toFixed(2),", ").concat((-e.y/S*_).toFixed(2),") to[lamp] (").concat((n.x/S*_).toFixed(2),", ").concat((-n.y/S*_).toFixed(2),");")},"empty led":function(t,e,n){return"\\draw (".concat((e.x/S*_).toFixed(2),", ").concat((-e.y/S*_).toFixed(2),") to[empty diode] (").concat((n.x/S*_).toFixed(2),", ").concat((-n.y/S*_).toFixed(2),");")},pR:function(t,e,n){return"\\draw (".concat((e.x/S*_).toFixed(2),", ").concat((-e.y/S*_).toFixed(2),") to[pR] (").concat((n.x/S*_).toFixed(2),", ").concat((-n.y/S*_).toFixed(2),");")},nmos:function(t,e){return"\\draw (".concat((e.x/S*_).toFixed(2),", ").concat((-e.y/S*_).toFixed(2),") node[nmos").concat(t.positionAnchor?" ,anchor="+t.positionAnchor:"").concat(t.angle&&0!==t.angle?" ,rotate="+t.angle:"","]{};")},vcapacitor:function(t,e,n){return"\\draw (".concat((e.x/S*1.4).toFixed(2),", ").concat((-e.y/S*_).toFixed(2),") to[variable capacitor] (").concat((n.x/S*_).toFixed(2),", ").concat((-n.y/S*1.4).toFixed(2),");")}},Z=function(t){return z[t.type](t)},$=function(t,e,n){return J[t.type](t,e,n)},Q={lampe:!0,"empty led":!0,pR:!0,nmos:!1,vcapacitor:!0},tt={lampe:function(t){return Object(o.jsx)(k,Object(u.a)({},t),t.id)},"empty led":function(t){return Object(o.jsx)(D,Object(u.a)({},t),t.id)},pR:function(t){return Object(o.jsx)(V,Object(u.a)({},t),t.id)},nmos:function(t){return Object(o.jsx)(Y,Object(u.a)({},t),t.id)},vcapacitor:function(t){return Object(o.jsx)(q,Object(u.a)({},t),t.id)}},et=n(119),nt="MODE_SELECT",ot="MODE_DRAG",ct="MODE_CREATE_PATH_ELEMENT",at="MODE_CREATE_NODE_ELEMENT",rt="MODE_RECTANGLE_SELECTION",it=function(t){var e=[];Q[t]?e.push({type:"ANCHOR",id:null,dx:0,dy:0}):(e.push({type:"ANCHOR",id:null,dx:0,dy:0}),Z({type:t,fromCoords:{x:0,y:0},toCoords:{x:0,y:0},positionCoords:{x:0,y:0}}).forEach((function(t){var n=t.x,o=t.y,c=t.name;e.push({type:"COMPONENT",name:c,id:null,dx:-n,dy:-o})})));return e},st=function(t,e){return!(!t.from||t.from!==e)||(!(!t.to||t.to!==e)||!(!t.position||t.position!==e))},dt=function(t,e,n){var o=Object(u.a)({},t);return t.from&&t.from===e&&(o.from=n),t.to&&t.to===e&&(o.to=n),t.position&&t.position===e&&(o.position=n),Object(u.a)({},o)},lt=function(t,e){var n=t.x,o=t.y,c=e.x0,a=e.y0,r=e.x1,i=e.y1;return Math.abs(n-c)+Math.abs(n-r)<=Math.abs(r-c)&&Math.abs(o-a)+Math.abs(o-i)<=Math.abs(i-a)},ht=function(t,e){return null!==e&&t.anchors.allIds.includes(e)},bt={mode:nt,selection:[],links:[],adhesivePoints:[],scene:[{id:Object(et.a)(),x:50,y:50,type:"lampe"},{id:Object(et.a)(),x:150,y:150,type:"lampe"},{id:Object(et.a)(),x:50,y:150,type:"resistance"}],pathComponents:{byId:{id1:{id:"id1",from:"anchor1",to:"anchor3",type:"pR"},id2:{id:"id2",from:"anchor2",to:"anchor3",type:"empty led"},id3:{id:"id3",from:"anchor4",to:"anchor3",type:"lampe"},id4:{id:"id4",from:"anchor5",to:"anchor3",type:"lampe"},id5:{id:"id5",position:"anchor6",type:"nmos",angle:-45,positionAnchor:"B"},id6:{id:"id6",position:"anchor7",type:"nmos",angle:"",positionAnchor:""}},allIds:["id1","id2","id3","id4","id5","id6"]},anchors:{byId:{anchor1:{id:"anchor1",x:10,y:200},anchor2:{id:"anchor2",x:500,y:200},anchor3:{id:"anchor3",x:250,y:200},anchor4:{id:"anchor4",x:250,y:400},anchor5:{id:"anchor5",x:250,y:10},anchor6:{id:"anchor6",x:100,y:400},anchor7:{id:"anchor7",x:100,y:400}},allIds:["anchor1","anchor2","anchor3","anchor4","anchor5","anchor6","anchor7"]}};var ut=Object(p.b)((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:bt,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case v:if(e.reset)return Object(u.a)(Object(u.a)({},t),{},{selection:[e.objectId]});var n=t.selection.findIndex((function(t){return t===e.objectId}));return n>=0?Object(u.a)(Object(u.a)({},t),{},{selection:[].concat(Object(b.a)(t.selection.slice(0,n)),Object(b.a)(t.selection.slice(n+1)))}):Object(u.a)(Object(u.a)({},t),{},{selection:[].concat(Object(b.a)(t.selection),[e.objectId])});case I:return Object(u.a)(Object(u.a)({},t),{},{selection:[],adhesivePoints:[],mode:nt});case j:var o=[],c=[];return t.selection.forEach((function(n){if(t.anchors.allIds.includes(n))-1===c.findIndex((function(t){return t.id===n}))&&c.push({type:"ANCHOR",id:n,dx:e.x-t.anchors.byId[n].x,dy:e.y-t.anchors.byId[n].y});else if(t.pathComponents.allIds.includes(n)){if(Z(Object(u.a)(Object(u.a)({},t.pathComponents.byId[n]),{},{fromCoords:t.pathComponents.byId[n].from&&t.anchors.byId[t.pathComponents.byId[n].from],toCoords:t.pathComponents.byId[n].to&&t.anchors.byId[t.pathComponents.byId[n].to],positionCoords:t.pathComponents.byId[n].position&&t.anchors.byId[t.pathComponents.byId[n].position]})).forEach((function(o){var a=o.x,r=o.y,i=o.name;t.pathComponents.byId[n].positionAnchor&&i===t.pathComponents.byId[n].positionAnchor||c.push({type:"COMPONENT",name:i,id:n,dx:e.x-a,dy:e.y-r})})),t.pathComponents.byId[n].from&&-1===c.findIndex((function(e){return e.id===t.pathComponents.byId[n].from}))){var o=t.pathComponents.byId[n].from;c.push({type:"ANCHOR",id:o,dx:e.x-t.anchors.byId[o].x,dy:e.y-t.anchors.byId[o].y})}if(t.pathComponents.byId[n].to&&-1===c.findIndex((function(e){return e.id===t.pathComponents.byId[n].to}))){var a=t.pathComponents.byId[n].to;c.push({type:"ANCHOR",id:a,dx:e.x-t.anchors.byId[a].x,dy:e.y-t.anchors.byId[a].y})}if(t.pathComponents.byId[n].position&&-1===c.findIndex((function(e){return e.id===t.pathComponents.byId[n].position}))){var r=t.pathComponents.byId[n].position;c.push({type:"ANCHOR",id:r,dx:e.x-t.anchors.byId[r].x,dy:e.y-t.anchors.byId[r].y})}}})),t.selection.forEach((function(e){t.anchors.allIds.includes(e)?o.includes(e)||o.push(e):t.pathComponents.allIds.includes(e)&&(t.pathComponents.byId[e].from&&!o.includes(t.pathComponents.byId[e].from)&&o.push(t.pathComponents.byId[e].from),t.pathComponents.byId[e].to&&!o.includes(t.pathComponents.byId[e].to)&&o.push(t.pathComponents.byId[e].to),t.pathComponents.byId[e].position&&!o.includes(t.pathComponents.byId[e].position)&&o.push(t.pathComponents.byId[e].position))})),Object(u.a)(Object(u.a)({},t),{},{mode:ot,anchorsToMove:[].concat(o),adhesivePoints:[].concat(c),originalPosition:{x:e.x,y:e.y},alreadyMoved:{x:0,y:0}});case O:if(e.attractor&&e.attracted&&"ANCHOR"===e.attracted.type&&"ANCHOR"===e.attractor.type){var a=e.attracted.id,r=e.attractor.id,i=t.anchors.allIds.findIndex((function(t){return t===a})),s=t.anchors.byId,p=(s[a],Object(l.a)(s,[a].map(h.a))),y={};return t.pathComponents.allIds.forEach((function(e){y[e]=dt(t.pathComponents.byId[e],a,r)})),Object(u.a)(Object(u.a)({},t),{},{anchors:{byId:Object(u.a)({},p),allIds:[].concat(Object(b.a)(t.anchors.allIds.slice(0,i)),Object(b.a)(t.anchors.allIds.slice(i+1)))},pathComponents:Object(u.a)(Object(u.a)({},t.pathComponents),{},{byId:Object(u.a)({},y)}),mode:nt,anchorsToMove:[],originalPosition:{},alreadyMoved:{}})}return Object(u.a)(Object(u.a)({},t),{},{mode:nt,anchorsToMove:[],originalPosition:{},alreadyMoved:{}});case m:var x=e.x,f=e.y,C=(e.id,e.shiftPress);switch(t.mode){case ot:var S,_;C?Math.abs(x-t.originalPosition.x)>Math.abs(f-t.originalPosition.y)?(S=x-t.originalPosition.x,_=0):(S=0,_=f-t.originalPosition.y):(S=x-t.originalPosition.x,_=f-t.originalPosition.y);var F=t.anchors.byId;return t.anchorsToMove.forEach((function(e){F[e]=Object(u.a)(Object(u.a)({},F[e]),{},{x:F[e].x+S-t.alreadyMoved.x,y:F[e].y+_-t.alreadyMoved.y})})),Object(u.a)(Object(u.a)({},t),{},{anchors:Object(u.a)(Object(u.a)({},t.anchors),{},{byId:Object(u.a)({},F)}),alreadyMoved:{x:S,y:_}});case ct:return t.newPath.isFromValidated?Object(u.a)(Object(u.a)({},t),{},{newPath:Object(u.a)(Object(u.a)({},t.newPath),{},{to:{x:e.x,y:e.y,id:e.id},movedAfterFromCreation:!0})}):Object(u.a)(Object(u.a)({},t),{},{newPath:Object(u.a)(Object(u.a)({},t.newPath),{},{from:{x:e.x,y:e.y,id:e.id}})});case at:return Object(u.a)(Object(u.a)({},t),{},{newNode:Object(u.a)(Object(u.a)({},t.newNode),{},{position:{x:e.x,y:e.y,id:e.id}})});case rt:var k=Object(u.a)(Object(u.a)({},t.rectangleSelection),{},{x1:x,y1:f});return Object(u.a)(Object(u.a)({},t),{},{selection:Object(b.a)(t.anchors.allIds.filter((function(e){return lt(t.anchors.byId[e],k)}))),rectangleSelection:Object(u.a)(Object(u.a)({},t.rectangleSelection),{},{x1:x,y1:f})});default:return t}case g:return Object(u.a)(Object(u.a)({},t),{},{selection:[],adhesivePoints:Object(b.a)(it(e.elementType)),mode:ct,newPath:{elementType:e.elementType,isFromValidated:!1,from:{x:null,y:null,id:null},to:{x:null,y:null,id:null}}});case P:return Object(u.a)(Object(u.a)({},t),{},{selection:[],adhesivePoints:Object(b.a)(it(e.elementType)),mode:at,newNode:{elementType:e.elementType,position:{x:null,y:null,id:null}}});case T:if(t.mode===at&&null!==t.newNode.position.x&&null!==t.newNode.position.y){var D=Object(et.a)(),H=Object(et.a)(),B=t.anchors;null!==t.newNode.position.id&&t.anchors.allIds.includes(t.newNode.position.id)||(B={byId:Object(u.a)(Object(u.a)({},t.anchors.byId),{},Object(d.a)({},H,{id:H,x:t.newNode.position.x,y:t.newNode.position.y})),allIds:[].concat(Object(b.a)(t.anchors.allIds),[H])});var G=t.newNode.position.id&&t.anchors.allIds.includes(t.newNode.position.id)?t.newNode.position.id:H;return Object(u.a)(Object(u.a)({},t),{},{newNode:Object(u.a)(Object(u.a)({},t.newNode),{},{position:{x:null,y:null,id:null}}),pathComponents:{byId:Object(u.a)(Object(u.a)({},t.pathComponents.byId),{},Object(d.a)({},D,{id:D,position:G,type:t.newNode.elementType})),allIds:[].concat(Object(b.a)(t.pathComponents.allIds),[D])},anchors:Object(u.a)({},B)})}return t;case w:return Object(u.a)(Object(u.a)({},t),{},{newPath:Object(u.a)(Object(u.a)({},t.newPath),{},{to:{x:null,y:null,id:null},isFromValidated:!0,movedAfterFromCreation:!1})});case M:return t.newPath.movedAfterFromCreation&&t.newPath.isFromValidated?Object(u.a)(Object(u.a)({},t),{},{newPath:Object(u.a)(Object(u.a)({},t.newPath),{},{from:Object(u.a)({},t.newPath.to),to:{x:null,y:null,id:null},isFromValidated:!1})}):t;case E:var V=Object(et.a)(),X=Object(et.a)(),q=Object(et.a)(),U=Object(u.a)({},t.anchors);if(!ht(t,t.newPath.from.id)&&ht(t,t.newPath.to.id))U={byId:Object(u.a)(Object(u.a)({},t.anchors.byId),{},Object(d.a)({},X,{id:X,x:t.newPath.from.x,y:t.newPath.from.y})),allIds:[].concat(Object(b.a)(t.anchors.allIds),[X])};else if(!ht(t,t.newPath.to.id)&&ht(t,t.newPath.from.id))U={byId:Object(u.a)(Object(u.a)({},t.anchors.byId),{},Object(d.a)({},q,{id:q,x:t.newPath.to.x,y:t.newPath.to.y})),allIds:[].concat(Object(b.a)(t.anchors.allIds),[q])};else if(!ht(t,t.newPath.from.id)&&!ht(t,t.newPath.to.id)){var K;U={byId:Object(u.a)(Object(u.a)({},t.anchors.byId),{},(K={},Object(d.a)(K,X,{id:X,x:t.newPath.from.x,y:t.newPath.from.y}),Object(d.a)(K,q,{id:q,x:t.newPath.to.x,y:t.newPath.to.y}),K)),allIds:[].concat(Object(b.a)(t.anchors.allIds),[X,q])}}return Object(u.a)(Object(u.a)({},t),{},{newPath:Object(u.a)(Object(u.a)({},t.newPath),{},{isFromValidated:!1,from:Object(u.a)(Object(u.a)({},t.newPath.to),{},{id:ht(t,t.newPath.to.id)?t.newPath.to.id:q}),to:{x:null,y:null,id:null}}),pathComponents:{byId:Object(u.a)(Object(u.a)({},t.pathComponents.byId),{},Object(d.a)({},V,{id:V,from:ht(t,t.newPath.from.id)?t.newPath.from.id:X,to:ht(t,t.newPath.to.id)?t.newPath.to.id:q,type:t.newPath.elementType})),allIds:[].concat(Object(b.a)(t.pathComponents.allIds),[V])},anchors:Object(u.a)({},U)});case N:var W=e.anchorId;if(!W&&1===t.selection.length&&t.anchors.allIds.includes(t.selection[0])&&(W=t.selection[0]),W&&t.anchors.allIds.includes(W)){var Y=t.pathComponents.allIds.filter((function(e){return st(t.pathComponents.byId[e],W)}));if(Y.length<=1)return t;var z=t.anchors,J=t.pathComponents.byId;return Y.slice(1).forEach((function(e){var n=Object(et.a)();J[e]=dt(t.pathComponents.byId[e],W,n),z.allIds=[n].concat(Object(b.a)(z.allIds)),z.byId=Object(u.a)(Object(u.a)({},z.byId),{},Object(d.a)({},n,Object(u.a)({},z.byId[W])))})),Object(u.a)(Object(u.a)({},t),{},{pathComponents:Object(u.a)(Object(u.a)({},t.pathComponents),{},{byId:Object(u.a)({},J)}),anchors:{allIds:Object(b.a)(z.allIds),byId:Object(u.a)({},z.byId)}})}return t;case L:return Object(u.a)(Object(u.a)({},t),{},{mode:rt,rectangleSelection:{x0:e.x,y0:e.y,x1:e.x,y1:e.y}});case A:return Object(u.a)(Object(u.a)({},t),{},{mode:nt,rectangleSelection:{},selection:t.rectangleSelection.x0===t.rectangleSelection.x1||t.rectangleSelection.y0===t.rectangleSelection.y1?[]:Object(b.a)(t.selection)});case R:var $=t.selection.filter((function(e){return e in t.anchors.byId}));if(console.log($),$.length<=1||!["U","D","L","R"].includes(e.direction))return t;var Q={};return $.forEach((function(n,o){var c=t.anchors.byId[n];switch(e.direction){case"U":Q.y=0===o?c.y:Math.min(Q.y,c.y);break;case"D":Q.y=0===o?c.y:Math.max(Q.y,c.y);break;case"L":Q.x=0===o?c.x:Math.min(Q.x,c.x);break;case"R":Q.x=0===o?c.x:Math.max(Q.x,c.x)}})),$.forEach((function(e){t.anchors.byId[e]=Object(u.a)(Object(u.a)({},t.anchors.byId[e]),Q)})),Object(u.a)(Object(u.a)({},t),{},{anchors:{byId:Object(u.a)({},t.anchors.byId),allIds:t.anchors.allIds}});default:return t}})),pt=(n(74),n(41)),jt=Object(s.b)((function(t){return{pathComponents:t.pathComponents,selection:t.selection,mode:t.mode}}),(function(t,e){var n=e.svgRef;return{toggleSelection:function(e,n){return t(C(e,n))},startDragging:function(e,o){var c=n.current.getBoundingClientRect(),a=c.x,r=c.y;t(y(e-a,o-r))}}}))((function(t){var e=t.pathComponents,n=t.selection,c=t.mode,a=t.startDragging,r=t.toggleSelection;return Object(o.jsx)(o.Fragment,{children:e.allIds.map((function(t){return e.byId[t].type&&tt[e.byId[t].type](Object(u.a)(Object(u.a)({},e.byId[t]),{},{onMouseDown:c===nt?function(o){o.stopPropagation(),!o.ctrlKey&&n.includes(e.byId[t].id)?a(o.nativeEvent.clientX,o.nativeEvent.clientY):r(e.byId[t].id,!o.ctrlKey)}:null,selected:n.includes(e.byId[t].id)}))}))})})),yt=(n(75),Object(s.b)((function(t,e){var n=e.id;return{x:t.anchors.byId[n].x,y:t.anchors.byId[n].y,mode:t.mode,selected:t.selection.includes(n)}}),(function(t,e){var n=e.svgRef;return{toggleSelection:function(e,n){return t(C(e,n))},startDragging:function(e,o){var c=n.current.getBoundingClientRect(),a=c.x,r=c.y;t(y(e-a,o-r))}}}))((function(t){var e=t.id,n=t.x,c=t.y,a=t.mode,r=t.selected,i=t.startDragging,s=t.toggleSelection;return Object(o.jsx)("circle",{cx:n,cy:c,r:5,className:"anchor ".concat(r?"selected":""),onMouseDown:a===nt?function(t){t.stopPropagation(),!t.ctrlKey&&r?i(t.nativeEvent.clientX,t.nativeEvent.clientY):s(e,!t.ctrlKey)}:null})}))),Ot=Object(s.b)((function(t){return{anchorIds:t.anchors.allIds}}))((function(t){var e=t.anchorIds,n=t.svgRef;return Object(o.jsx)(o.Fragment,{children:e.map((function(t){return Object(o.jsx)(yt,{id:t,svgRef:n},t)}))})})),xt=Object(s.b)(null,(function(t,e){var n=e.attractor,o=e.attracted;return{updatePosition:function(e,o){return t(f({x:e,y:o,id:n.id}))},stopDragging:function(){return t(x(n,o))}}}))((function(t){t.id;var e=t.x,n=t.y,a=t.dx,r=t.dy,i=t.color,s=t.mode,d=t.updatePosition,l=t.stopDragging,h=Object(c.useState)(!1),b=Object(pt.a)(h,2),u=b[0],p=b[1];return Object(o.jsxs)(o.Fragment,{children:[u&&Object(o.jsx)("circle",{cx:e,cy:n,r:5,style:{fill:"none",stroke:"red",strokeWidth:2}}),Object(o.jsx)("circle",{cx:e+a,cy:n+r,r:10,style:{fill:i||"transparent"},onMouseEnter:function(t){t.stopPropagation(),d(e+a,n+r),p(!0)},onMouseLeave:function(){return p(!1)},onMouseMove:function(t){return t.stopPropagation()},onMouseUp:s===ot?function(t){t.stopPropagation(),l()}:null})]})})),mt=function(t,e){return!!e&&(!("string"!=typeof t||!e.includes(t))||(!(!t.from||!e.includes(t.from))||(!(!t.to||!e.includes(t.to))||!(!t.position||!e.includes(t.position)))))},ft=Object(s.b)((function(t){return{anchors:t.anchors,pathComponents:t.pathComponents,mode:t.mode,anchorsToMove:t.anchorsToMove,selection:t.selection,adhesivePoints:t.adhesivePoints||null}}))((function(t){var e=t.mode,n=t.anchors,c=t.pathComponents,a=t.anchorsToMove,r=t.adhesivePoints;return e!==ot&&e!==at&&e!==ct?null:Object(o.jsxs)(o.Fragment,{children:[c.allIds.filter((function(t){return!mt(c.byId[t],a)})).reduce((function(t,a){return[].concat(Object(b.a)(t),Object(b.a)(Z(Object(u.a)(Object(u.a)({},c.byId[a]),{},{fromCoords:c.byId[a].from&&n.byId[c.byId[a].from],toCoords:c.byId[a].to&&n.byId[c.byId[a].to],positionCoords:c.byId[a].position&&n.byId[c.byId[a].position]})).map((function(t){var n=t.x,c=t.y,i=t.name;return r.reduce((function(t,r){var s=r.type,d=r.dx,l=r.dy,h=r.name,u=void 0===h?"":h,p=r.id;return[].concat(Object(b.a)(t),[Object(o.jsx)(xt,{x:n,dx:d,y:c,dy:l,mode:e,attractor:{type:"COMPONENT",name:i,id:a},attracted:{type:s,name:u,id:p}},"".concat(a,"-").concat(i,"<-").concat(p,"-").concat(u||""))])}),[])}))))}),[]),n.allIds.filter((function(t){return!mt(t,a)})).map((function(t){return r.reduce((function(c,a){var r=a.type,i=a.dx,s=a.dy,d=a.name,l=void 0===d?"":d,h=a.id;return[].concat(Object(b.a)(c),[Object(o.jsx)(xt,{x:n.byId[t].x,dx:i,y:n.byId[t].y,dy:s,mode:e,attractor:{type:"ANCHOR",name:"",id:t},attracted:{type:r,name:l,id:h}},"".concat(t,"<-").concat(h,"-").concat(l||""))])}),[])}))]})})),It=Object(s.b)((function(t){return{mode:t.mode,newPath:t.newPath,newNode:t.newNode,rectangleSelection:t.rectangleSelection}}),(function(t){return{updatePosition:function(e,n,o){return t(f({x:e,y:n,shiftPress:o}))},stopDragging:function(){return t(x())},validateFirstStepPathElementCreation:function(){return t({type:w})},invalidateFirstStepPathElementCreation:function(){return t({type:M})},savePathElementCreation:function(){return t({type:E})},nextStepOfElementCreation:function(){return t({type:T})},startRectangleSelection:function(e,n){return t(function(t,e){return{type:L,x:t,y:e}}(e,n))},stopRectangleSelection:function(){return t({type:A})}}}))((function(t){var e=t.mode,n=t.newPath,a=t.newNode,r=t.rectangleSelection,i=t.stopDragging,s=t.updatePosition,d=t.validateFirstStepPathElementCreation,l=t.invalidateFirstStepPathElementCreation,h=t.savePathElementCreation,b=t.nextStepOfElementCreation,u=t.startRectangleSelection,p=t.stopRectangleSelection,j=Object(c.useRef)();return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)("p",{children:e}),Object(o.jsx)("p",{children:a&&a.from&&a.elementType}),Object(o.jsx)("p",{children:n&&n.elementType||"none"}),Object(o.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1000 600",style:{width:1e3,height:600},onMouseMove:e===ot||e===ct||e===at||e===rt?function(t){var n=j.current.getBoundingClientRect(),o=n.x,c=n.y;switch(e){case ot:case ct:case at:case rt:s(t.nativeEvent.clientX-o,t.nativeEvent.clientY-c,t.shiftKey)}}:null,onMouseDown:function(t){var o=j.current.getBoundingClientRect(),c=o.x,a=o.y;switch(e){case nt:t.stopPropagation(),u(t.nativeEvent.clientX-c,t.nativeEvent.clientY-a);break;case ct:t.stopPropagation(),n.isFromValidated?h(t.nativeEvent.clientX-c,t.nativeEvent.clientY-a):d();break;case at:t.stopPropagation(),b()}},onMouseUp:e===ot?function(){return i()}:e===rt?function(t){t.stopPropagation(),p()}:null,ref:j,children:[Object(o.jsx)(jt,{svgRef:j}),e===ct&&n&&n.isFromValidated&&n.to&&null!==n.to.x&&null!==n.to.y&&n.from&&null!==n.from.x&&null!==n.from.y&&tt[n.elementType]({fromCoords:n.from,toCoords:n.to}),e===ct&&n&&n.isFromValidated&&null!==n.to.x&&null!==n.to.y&&Object(o.jsx)("circle",{cx:n.to.x,cy:n.to.y,r:5}),e===ct&&n&&n.from&&null!==n.from.x&&null!==n.from.y&&Object(o.jsx)("circle",{cx:n.from.x,cy:n.from.y,r:5,onMouseEnter:l}),e===at&&a&&a.position&&null!==a.position.x&&null!==a.position.y&&tt[a.elementType]({positionCoords:a.position}),e===at&&a&&a.position&&null!==a.position.x&&null!==a.position.y&&Object(o.jsx)("circle",{cx:a.position.x,cy:a.position.y,r:5}),Object(o.jsx)(Ot,{svgRef:j}),Object(o.jsx)(ft,{svgRef:j}),e===rt&&Object(o.jsx)("path",{d:"M ".concat(r.x0," ").concat(r.y0," L  ").concat(r.x0," ").concat(r.y1," L ").concat(r.x1," ").concat(r.y1," L  ").concat(r.x1," ").concat(r.y0," Z"),style:{fill:"transparent",stroke:"red",strokeWidth:1}})]})]})}));var vt=function(t){var e=["\\begin{circuitikz}[american]"];return t.pathComponents.allIds.forEach((function(n){var o=t.pathComponents.byId[n];!function(t){return!!t.position}(o)?e.push($(o,t.anchors.byId[o.from],t.anchors.byId[o.to])):e.push($(o,t.anchors.byId[o.position]))})),e.push("\\end{circuitikz}"),e},Ct=n(106),gt=n(109),wt=n(110),Mt=n(111),Et=Object(s.b)((function(t){return{code:vt(t)}}),null)((function(t){var e=t.code;return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)(Ct.a,{children:"Your LaTEX code"}),Object(o.jsx)(gt.a,{children:Object(o.jsx)("pre",{children:e.slice(0,e.length-1).join("\n\t")+"\n"+e[e.length-1]})}),Object(o.jsx)(wt.a,{children:Object(o.jsx)(Mt.a,{autoFocus:!0,onClick:function(){!function(t){navigator.clipboard.writeText(t).then((function(){}),(function(){}))}(e.slice(0,e.length-1).join("\n\t")+"\n"+e[e.length-1])},children:"Copy"})})]})})),Pt=n(112),Tt=n(121),Nt=n(113),Lt=Object(s.b)((function(t){if(t.selection.length<1||!t.pathComponents.allIds.includes(t.selection[0]))return{};var e=t.selection[0];return{options:t.pathComponents.byId[e]}}))((function(t){var e=t.options,n=void 0===e?null:e;return null===n?null:Object(o.jsx)(Pt.a,{children:Object.keys(n).map((function(t){return Object(o.jsx)(Tt.a,{button:!0,children:Object(o.jsx)(Nt.a,{primary:t,secondary:n[t]})},t)}))})})),At=n(120),Rt=n(116),St=n(117),_t=n(36),Ft=n(114),kt=n(115),Dt=n(118),Ht=Object(Ft.a)((function(t){return{root:{display:"flex"},appBar:{zIndex:t.zIndex.drawer+1},toolBar:{justifyContent:"space-between"},drawer:{width:180,flexShrink:0},drawerPaper:{width:180},drawerContainer:{overflow:"auto"},content:{flexGrow:1,padding:t.spacing(3)}}}));var Bt=Object(s.b)((function(t){return{mode:t.mode,selection:t.selection}}),(function(t){return{startSelect:function(){return t({type:I})},startCreatePathElement:function(e){return t(function(t){return{type:g,elementType:t}}(e))},startCreateNodeElement:function(e){return t(function(t){return{type:P,elementType:t}}(e))},splitAnchor:function(){return t({type:N,anchorId:e||null});var e},stackSelectedAnchors:function(e){return t(function(t){return{type:R,direction:t}}(e))}}}))((function(t){var e=t.mode,n=t.selection,a=t.startSelect,r=t.startCreatePathElement,i=t.startCreateNodeElement,s=t.splitAnchor,d=t.stackSelectedAnchors,l=Ht(),h=Object(c.useState)(!1),b=Object(pt.a)(h,2),u=b[0],p=b[1];return Object(c.useEffect)((function(){var t=function(t){switch(t.key){case"ArrowRight":d("R");break;case"ArrowLeft":d("L");break;case"ArrowUp":d("U");break;case"ArrowDown":d("D");break;case"s":s();break;default:console.log(t.key)}};return document.addEventListener("keydown",t),function(){document.removeEventListener("keydown",t)}}),[s,d]),Object(o.jsxs)("div",{className:l.root,tabIndex:"0",onMouseDown:a,children:[Object(o.jsx)(kt.a,{}),Object(o.jsx)(Rt.a,{position:"fixed",className:l.appBar,children:Object(o.jsxs)(St.a,{className:l.toolBar,children:[Object(o.jsx)(_t.a,{variant:"h6",noWrap:!0,children:"Clipped drawer"}),Object(o.jsx)(Mt.a,{color:"inherit",onClick:function(){return p(!0)},children:"LaTEX"})]})}),Object(o.jsxs)(At.a,{className:l.drawer,variant:"permanent",classes:{paper:l.drawerPaper},children:[Object(o.jsx)(St.a,{}),Object(o.jsx)("div",{className:l.drawerContainer,children:Object(o.jsx)(Pt.a,{children:Object.keys(tt).map((function(t){return Object(o.jsxs)(Tt.a,{button:!0,onMouseDown:function(e){e.stopPropagation(),Q[t]?r(t):i(t)},children:[Object(o.jsx)(Nt.a,{primary:t}),Object(o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 100 50",style:{width:100,height:50},children:tt[t]({x:50,y:25})})]},t)}))})})]}),Object(o.jsxs)(At.a,{anchor:"right",variant:"persistent",open:e===nt&&1===n.length,children:[Object(o.jsx)(St.a,{}),Object(o.jsx)(Lt,{})]}),Object(o.jsxs)("main",{className:l.content,children:[Object(o.jsx)(St.a,{}),Object(o.jsx)(It,{})]}),Object(o.jsx)(Dt.a,{open:u,onClose:function(){p(!1)},children:Object(o.jsx)(Et,{})})]})}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(Object(o.jsx)(a.a.StrictMode,{children:Object(o.jsx)(s.a,{store:ut,children:Object(o.jsx)(Bt,{})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))}},[[76,1,2]]]);
//# sourceMappingURL=main.f82a17cd.chunk.js.map