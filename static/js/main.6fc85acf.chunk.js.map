{"version":3,"sources":["redux/actions/index.js","redux/store/interactionModes.js","redux/store/displayOptions.js","redux/store/magnetsOptions.js","redux/store/debugInitialState.js","utils/maths.js","utils/svgToCanvas.js","utils/constantes.js","atoms/currant.js","atoms/label.js","components/hoc/pathComponents.js","components/Lampe.js","components/empty_diode.js","components/pR.js","components/vcapacitor.js","components/nmos.js","components/op_amp.js","components/vee.js","components/vcc.js","components/ground.js","components/C.js","components/L.js","components/R.js","components/battery1.js","atoms/arrowEnd.js","components/switch.js","components/short.js","components/rightUp.js","components/upRight.js","components/index.js","redux/store/utils.js","redux/store/dragging.js","redux/store/delete.js","redux/store/pathCreation.js","redux/store/rectangleSelection.js","redux/store/nodeCreation.js","redux/store/anchorHelper.js","redux/store/index.js","atoms/anchor.js","container/RoughDrawing.js","container/toolbar.js","container/componentsDrawer.js","container/anchors.js","atoms/magnet.js","container/magnets.js","container/index.js","redux/store/getCircuitikz/utils.js","redux/store/getCircuitikz/drawPath.js","redux/store/getCircuitikz/initializeCoords.js","redux/store/getCircuitikz/index.js","container/latexDisplay.js","container/elementOptions.js","container/leftMenu.js","container/tutorial/options.png","container/tutorial/save.png","container/tutorial/selectElement.png","container/tutorial/index.js","container/FileManager.js","pages/App.js","pages/Home.js","tutorial/interaction/index.js","tutorial/currantExplanation/index.js","tutorial/positionExplanation/index.js","tutorial/bipoleExplanation/index.js","tutorial/decorationExplanation/index.js","pages/Tuto/index.js","serviceWorker.js","index.js","tutorial/bipoleExplanation/index.module.scss","pages/Tuto/index.module.scss","tutorial/interaction/index.module.scss","tutorial/decorationExplanation/index.module.scss","tutorial/currantExplanation/index.module.scss","tutorial/positionExplanation/index.module.scss"],"names":["START_DRAGGING","startDragging","x","y","type","STOP_DRAGGING","stopDragging","UPDATE_POSITION","updatePosition","attractor","attracted","shiftPress","START_SELECT","startSelect","TOGGLE_SELECTION","toggleSelection","objectId","reset","START_CREATE_PATH_ELEMENT","startCreatePathElement","elementType","VALIDATE_FIRST_STEP_PATH_ELEMENT_CREATION","INVALIDATE_FIRST_STEP_PATH_ELEMENT_CREATION","SAVE_PATH_ELEMENT_CREATION","START_CREATE_NODE_ELEMENT","ELEMENT_CREATION_NEXT_STEP","SPLIT_ANCHOR","START_RECTANGLE_SELECTION","STOP_RECTANGLE_SELECTION","STACK_SELECTED_ANCHORS","stackSelectedAnchors","direction","DELETE_ELEMENT","UPDATE_COMPONENT","ZOOM","START_MOVE_PAPER","MOVE_PAPER","END_MOVE_PAPER","SET_MODE_MOVE_PAPER","UPDATE_MAGNET_OPTION","updateMagnetOption","optionName","optionValue","LOAD_PROJECT","MODE_SELECT","MODE_DRAG","MODE_CREATE_PATH_ELEMENT","MODE_CREATE_NODE_ELEMENT","MODE_RECTANGLE_SELECTION","MODE_MOVE_PAPER","default_displayOptions","zoom","width","height","dragging","isDragging","x0","y0","reducer_displayOptions","state","action","mode","newZoom","newWidth","newHeight","displayOptions","newX","newY","movePaper","toggleDragging","reducer_magnetsOptions","magnetsOptions","initial_state","isGridAttracting","gridSpace","isPathCoordinatesAttracting","isNodeAnchorsAttracting","selection","adhesivePoints","weakLinks","currentMagnet","components","byId","allIds","coordinates","rotation","angle","xScale","yScale","Math","cos","PI","sin","translateSVGbaseline2Canvas","baseline","hanging","middle","translateSVGalign2Canvas","start","end","MULTIPLICATIVE_CONST","R_LEN","defaultCurrant","show","currantText","currantIsForward","currantIsAbove","currantIsAfter","default_path_options","currant","label","annotation","mirror","invert","getTextAnchor","textAnchor","alignmentBaseline","drawRoughCurrant","rc","ctx","ratio","element","fromCoords","toCoords","xFrom","xTo","yFrom","yTo","xI","yI","theta","path","xText","yText","textAlign","textBaseline","fillText","CurrantArrow","style","fill","stroke","d","transform","transformOrigin","random","isAbove","rotationAngle","gap","drawRoughLabel","text","from","to","xL","yL","save","translate","rotate","restore","Label","mapStateToProps","props","id","withPathAttributes","component","connect","selected","onMouseDown","sqrt","parseInt","atan2","className","drawLinks","getPathAttributes","currantAttribute","position","getCurrantAttribute","getLabelAttribute","getAnnotationAttribute","poles","R","r","toFixed","cx","cy","UNIT_X","UNIT_Y","UNIT_Y2","parameters","wiper_pos","STEP","capacitor_width","getElementTranslation","positionAnchor","positionCoords","showHandles","xAnchor","yAnchor","deltaX","deltaY","base_height","gate_height","strokeWidth","upX","upY","input_height","port_width","OTHER","UNIT_Y_DOWN","Array","coils","map","join","ArrowEnd","dy","Arrow","theta1","theta2","x1","y1","x2","y2","isOpen","withArrow","getAnchors","pR","name","pR_getAnchor","nmos","dx","Cgap","Bgap","Egap","radAngle","Crad","Brad","Erad","distanceC","distanceB","distanceE","nmos_getAnchor","op_amp","anchorRad","distance","op_amp_getAnchor","vee","vee_getAnchor","vcc","vcc_getAnchor","ground","ground_getAnchor","pathOptions","pRParameters","switch","switchParameters","short","shortParameters","rightUp","upRight","getDrawer","lampe","positionInformations","anchor","coord","parseFloat","vcapacitor","C","L","battery1","getRoughComponents","circle","useNaiveCircleOrientation","drawRoughArrowEnd","getBoundingBoxComponent","dx1","dx2","dy1","dy2","getBoundingBox","coordinateById","rep","pathGetBoundingBoxCenter","getElementAnchors","drawElement","position1","position2","isPath","isMultyPole","structure","bipoles","sources","references","transistors","svgComponents","getAdhesivePoints","push","forEach","componentUseThisAnchor","anchorId","replaceComponentAnchor","previousAnchorId","newAnchorId","newElement","coordinatesToMove","selectedId","includes","findIndex","elem","fromId","toId","pile","nodeSeen","pop","nodeId","isNodePosition","length","originalPosition","alreadyMoved","weakLinksToRemove","filter","anchorToRemoveID","anchorToUseId","anchorToRemoveIDIndex","remainingAnchors","newByIDElements","slice","newWeakLink","newMoveX","newMoveY","originalX","originalY","abs","anchorById","deleteElement","componentIdsToRemove","componentIdsToKeep","coordinateToRemove","componentId","arg","elementId","idToRemove","newState","newPath","isFromValidated","validateFirstStepPathElement","attractorFrom","attractorTo","movedAfterFromCreation","invalidateFirstStepPathElement","savePathElement","newId_element","uuid","fromAnchor","toAnchor","newAnchors","shape","newWeakLinks","newRectangle","rectangleSelection","maxX","max","minX","min","maxY","minY","point_included","xa","ya","xb","yb","xc","yc","xd","yd","rect_included","stopRectangleSelection","startRectangleSelection","newNode","startNodeCreation","anchorsDelta","saveNodeCreation","positionId","newPositions","toUpdate","deltaToAdd","anchorName","rotateNode","value","prevAngle","newAngle","prevAnchors","rotationHelper","IdToUpdate","stackAnchors","coordinatesSelected","movedAnchors","newPosition","index","undefined","splitAnchor","componentsToChange","newComponents","weakLinksToCopy","linkedAnchorId","linkToCopy","store","createStore","refSpace","modX","modY","round","xToTest","yToTest","draggingUpdatePosition","pathCreationUpdatePosition","nodeCreationUpdatePosition","rectangleSelectionUpdatePosition","ConnectedAnchor","dispatch","svgRef","current","getBoundingClientRect","xOffset","yOffset","svgWidth","svgHeight","SVG_X","SVG_Y","SVG_WIDTH","SVG_HEIGHT","event","stopPropagation","ctrlKey","nativeEvent","clientX","clientY","forwardRef","ref","margin","canvasRef","useRef","useState","setWidth","setHeight","seed","setSeed","roughness","setRoughness","canvasURL","setCanvasURL","useEffect","svgBBox","document","getElementById","getBBox","rough","canvas","options","curveFitting","getContext","font","fillStyle","fillRect","roughComponents","console","log","gen","config","roughCoordinate","toDataURL","replace","DialogTitle","DialogContent","DialogActions","Typography","gutterBottom","Slider","onChange","newValue","aria-labelledby","step","Button","onClick","variant","href","download","color","setZoom","setModeMovePaper","top","padding","backgroundColor","IconButton","SvgIcon","disabled","Select","target","MenuItem","ConnectedComponentsDrawer","ConnectedAnchors","anchorIds","isUsed","setIsUsed","onMouseEnter","onMouseLeave","onMouseMove","onMouseUp","isMoving","reduce","accumulator","accu","nameAdhesive","idAdhesive","ConnectedContainer","validateFirstStepPathElementCreation","invalidateFirstStepPathElementCreation","savePathElementCreation","nextStepOfElementCreation","startMovePaper","xmlns","viewBox","background","shiftKey","patternUnits","getPoles","shapeFrom","shapeTo","useStart","useEnd","simplifyNumber","getCoordId","getCoord","coords","previousCoord","coordId","removeDrawnElements","drawnElements","listeOfId","compareCoord","coordId1","coordId2","endingPaths1","endingPaths","nodeAssociated1","nodeAssociated","endingPaths2","nodeAssociated2","drawPathFromCoord","startCoordId","nbOfCoordinateUsed","elementsToAdd","nbOfCreatedNames","nextName","currantCoordId","currantCoord","nextPaths","startingPaths","arrivingPaths","nextNode","coordIsNew","initializeCoords","nodeReference","fromCoord","toCoord","fromCoordId","toCoordId","parent","parentAnchor","associatedIds","positionCoord","positionCoordId","multipoleNodes","parentNodeId","childNodeIdId","child","node1","node2","anchors1","anchors2","name1","name2","childAnchor","findCommonAnchor","Object","keys","anchors","coordX","coordY","anchorX","anchorY","getCircuitikz","nodeNumberOfNames","circuitText","multiAnchorNodeIds","isNode","sort","id1","id2","node","fillCoordWithAnchorsName","childId","coordsToPlot","idToPlot","indexOf","splice","code","autoFocus","navigator","clipboard","writeText","then","copyCode","inputElement","update","ListItem","TextField","onKeyDown","e","onChangeCapture","button","ListItemText","primary","ListItemSecondaryAction","Input","inputProps","FormControlLabel","control","checked","Checkbox","idOfInterest","handleInputChange","updateComponent","List","n","startCreateNodeElement","openSection","setOpenSection","sectionName","Collapse","in","timeout","unmountOnExit","paddingLeft","titles","images","selectElement","shortcuts","key","description","HelpShortcut","classes","localStorage","getItem","showHelp","setShowHelp","helpStep","setHelpStep","edge","menuButton","aria-label","Dialog","fullWidth","maxWidth","open","onClose","setItem","shortcut","keyboardDescription","keyboardKey","src","alt","MobileStepper","steps","activeStep","nextButton","size","backButton","loadProject","setIsOpen","anchorEl","setHref","encodeURIComponent","JSON","stringify","close","aria-controls","aria-haspopup","Menu","display","uploadedFile","fileReader","FileReader","onloadend","data","parse","result","readAsText","handleUpload","files","htmlFor","useStyles","makeStyles","theme","root","appBar","zIndex","drawer","toolBar","justifyContent","flexShrink","drawerPaper","drawerContainer","overflow","optionDrawer","optionDrawerPaper","content","flexGrow","spacing","marginRight","borderRadius","border","boxShadow","fontSize","fontWeight","lineHeight","isPaperDragged","endMovePaper","showCode","setShowCode","showRough","setShowRough","handleKeyDown","addEventListener","removeEventListener","tabIndex","CssBaseline","AppBar","Toolbar","Link","RouterLink","noWrap","Drawer","paper","header","headerTitle","callToActionContainer","flexWrap","flex","minWidth","Home","DrawSvg","drawGrid","Xpoints","floor","Ypoints","styles","drawingArea","_","xIndex","grid","yIndex","componentProps","coordinateProps","ShowLatexCode","line","latexArea","Displayer","svgOption","latexOption","showArea","default_components","default_coordinates","coord1","coord2","Explanation","setComponents","setCoordinates","left2right","setLeft2right","setCurrantDirection","setCurrantXPosition","setCurrantYPosition","isForard","isAfter","ButtonGroup","left","right","drawing","getCoordinates","xMarks","yMarks","setX1","setY1","setX2","setY2","defaultValue","valueLabelDisplay","marks","multCoordinates","coord0","coord3","coord4","coord5","getComponents","getMultipleComponents","nb","components_available","withAnnotations","withMultipleComponents","element_type","setType","SetLabel","SetAnnotation","FormControl","selector","InputLabel","labelId","type_el","textInput","shape1","shape2","setShape1","setShape2","Tuto","contentContainer","Boolean","window","location","hostname","match","createMuiTheme","palette","main","secondary","ReactDOM","render","StrictMode","ThemeProvider","serviceWorker","ready","registration","unregister","catch","error","message","module","exports"],"mappings":"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","file":"static/js/main.6fc85acf.chunk.js","sourcesContent":["export const START_DRAGGING = \"START_DRAGGING\";\nexport function startDragging(x, y) {\n  return {\n    type: START_DRAGGING,\n    x,\n    y,\n  };\n}\n\nexport const STOP_DRAGGING = \"STOP_DRAGGING\";\nexport function stopDragging() {\n  return {\n    type: STOP_DRAGGING,\n  };\n}\n\nexport const UPDATE_POSITION = \"UPDATE_POSITION\";\nexport function updatePosition({ x, y, attractor, attracted, shiftPress }) {\n  // TODO : id should be remove\n  return {\n    type: UPDATE_POSITION,\n    x,\n    y,\n    attractor: attractor || null,\n    attracted: attracted || null,\n    shiftPress,\n  };\n}\n\nexport const START_SELECT = \"START_SELECT\";\nexport function startSelect() {\n  return {\n    type: START_SELECT,\n  };\n}\n\nexport const TOGGLE_SELECTION = \"TOGGLE_SELECTION\";\nexport function toggleSelection(objectId, reset) {\n  return {\n    type: TOGGLE_SELECTION,\n    objectId,\n    reset,\n  };\n}\n\nexport const START_CREATE_PATH_ELEMENT = \"START_CREATE_PATH_ELEMENT\";\nexport function startCreatePathElement(elementType) {\n  return {\n    type: START_CREATE_PATH_ELEMENT,\n    elementType,\n  };\n}\n\nexport const VALIDATE_FIRST_STEP_PATH_ELEMENT_CREATION =\n  \"VALIDATE_FIRST_STEP_PATH_ELEMENT_CREATION\";\nexport function validateFirstStepPathElementCreation() {\n  return {\n    type: VALIDATE_FIRST_STEP_PATH_ELEMENT_CREATION,\n  };\n}\n\nexport const INVALIDATE_FIRST_STEP_PATH_ELEMENT_CREATION =\n  \"INVALIDATE_FIRST_STEP_PATH_ELEMENT_CREATION\";\nexport function invalidateFirstStepPathElementCreation() {\n  return {\n    type: INVALIDATE_FIRST_STEP_PATH_ELEMENT_CREATION,\n  };\n}\n\nexport const SAVE_PATH_ELEMENT_CREATION = \"SAVE_PATH_ELEMENT_CREATION\";\nexport function savePathElementCreation() {\n  return {\n    type: SAVE_PATH_ELEMENT_CREATION,\n  };\n}\n\nexport const START_CREATE_NODE_ELEMENT = \"START_CREATE_NODE_ELEMENT\";\nexport function startCreateNodeElement(elementType) {\n  return {\n    type: START_CREATE_NODE_ELEMENT,\n    elementType,\n  };\n}\n\nexport const ELEMENT_CREATION_NEXT_STEP = \"ELEMENT_CREATION_NEXT_STEP\";\nexport function nextStepOfElementCreation() {\n  return {\n    type: ELEMENT_CREATION_NEXT_STEP,\n  };\n}\n\nexport const SPLIT_ANCHOR = \"SPLIT_ANCHOR\";\nexport function splitAnchor(anchorId) {\n  return {\n    type: SPLIT_ANCHOR,\n    anchorId: anchorId || null,\n  };\n}\n\nexport const START_RECTANGLE_SELECTION = \"START_RECTANGLE_SELECTION\";\nexport function startRectangleSelection(x, y) {\n  return {\n    type: START_RECTANGLE_SELECTION,\n    x,\n    y,\n  };\n}\n\nexport const STOP_RECTANGLE_SELECTION = \"STOP_RECTANGLE_SELECTION\";\nexport function stopRectangleSelection() {\n  return {\n    type: STOP_RECTANGLE_SELECTION,\n  };\n}\n\nexport const STACK_SELECTED_ANCHORS = \"STACK_SELECTED_ANCHORS\";\nexport function stackSelectedAnchors(direction) {\n  return {\n    type: STACK_SELECTED_ANCHORS,\n    direction,\n  };\n}\n\nexport const DELETE_ELEMENT = \"DELETE_ELEMENT\";\nexport function deleteElement(selection) {\n  return {\n    type: DELETE_ELEMENT,\n    selection,\n  };\n}\n\nexport const UPDATE_COMPONENT = \"UPDATE_COMPONENT\";\nexport function updateComponent(id, name, value) {\n  return {\n    type: UPDATE_COMPONENT,\n    id,\n    name,\n    value,\n  };\n}\n\nexport const ZOOM = \"ZOOM\";\nexport function setZoom(zoom) {\n  return {\n    type: ZOOM,\n    zoom,\n  };\n}\n\nexport const START_MOVE_PAPER = \"START_MOVE_PAPER\";\nexport function startMovePaper(x, y) {\n  return {\n    type: START_MOVE_PAPER,\n    x,\n    y,\n  };\n}\n\nexport const MOVE_PAPER = \"MOVE_PAPER\";\nexport function movePaper(x, y) {\n  return {\n    type: MOVE_PAPER,\n    x,\n    y,\n  };\n}\n\nexport const END_MOVE_PAPER = \"END_MOVE_PAPER\";\nexport function endMovePaper() {\n  return {\n    type: END_MOVE_PAPER,\n  };\n}\n\nexport const SET_MODE_MOVE_PAPER = \"SET_MODE_MOVE_PAPER\";\nexport function setModeMovePaper() {\n  return {\n    type: SET_MODE_MOVE_PAPER,\n  };\n}\n\nexport const UPDATE_MAGNET_OPTION = \"UPDATE_MAGNET_OPTION\";\nexport function updateMagnetOption(optionName, optionValue) {\n  return {\n    type: UPDATE_MAGNET_OPTION,\n    optionName,\n    optionValue,\n  };\n}\n\nexport const LOAD_PROJECT = \"LOAD_PROJECT\";\nexport function loadProject({ components, coordinates }) {\n  return {\n    type: LOAD_PROJECT,\n    components,\n    coordinates,\n  };\n}\n","export const MODE_SELECT = \"MODE_SELECT\";\nexport const MODE_DRAG = \"MODE_DRAG\";\nexport const MODE_CREATE_PATH_ELEMENT = \"MODE_CREATE_PATH_ELEMENT\";\nexport const MODE_CREATE_NODE_ELEMENT = \"MODE_CREATE_NODE_ELEMENT\";\nexport const MODE_RECTANGLE_SELECTION = \"MODE_RECTANGLE_SELECTION\";\n\n// for dragging the all svg\nexport const MODE_MOVE_PAPER = \"MODE_MOVE_PAPER\";\n","import {\n  ZOOM,\n  START_MOVE_PAPER,\n  MOVE_PAPER,\n  END_MOVE_PAPER,\n  SET_MODE_MOVE_PAPER,\n} from \"redux/actions\";\nimport { MODE_MOVE_PAPER } from \"./interactionModes\";\n\n// If we want to use A4 format (not sure it's useful)\n// const PAGE_WIDTH = 2100;\n// const PAGE_HEIGHT = 2970;\nconst PAGE_WIDTH = 800;\nconst PAGE_HEIGHT = 500;\n\nexport const default_displayOptions = {\n  x: 0,\n  y: 0,\n  zoom: 1,\n  width: PAGE_WIDTH,\n  height: PAGE_HEIGHT,\n  dragging: {\n    isDragging: false,\n    x0: null,\n    y0: null,\n  },\n};\n\nconst zoom = (state, action) => {\n  const newZoom = action.zoom;\n  const newWidth = PAGE_WIDTH / newZoom;\n  const newHeight = PAGE_HEIGHT / newZoom;\n\n  const { x, y, width, height } = state.displayOptions;\n\n  // this do the center on the middle (no useful until SVG heigh is fixed to fit the screen size)\n  const newX = x + width / 2 - newWidth / 2;\n  const newY = y + height / 2 - newHeight / 2;\n\n  return {\n    ...state,\n    displayOptions: {\n      ...state.displayOptions,\n      x: newX,\n      y: newY,\n      zoom: newZoom,\n      width: newWidth,\n      height: newHeight,\n    },\n  };\n};\n\nconst toggleDragging = (state, action) => {\n  const { x = null, y = null } = action;\n  return {\n    ...state,\n    displayOptions: {\n      ...state.displayOptions,\n      dragging: {\n        isDragging: !state.displayOptions.dragging.isDragging,\n        x0: x,\n        y0: y,\n      },\n    },\n  };\n};\n\nconst movePaper = (state, action) => {\n  const { x, y } = action;\n  const { x0, y0 } = state.displayOptions.dragging;\n  return {\n    ...state,\n    displayOptions: {\n      ...state.displayOptions,\n      x: state.displayOptions.x + (x0 - x) / state.displayOptions.zoom,\n      y: state.displayOptions.y + (y0 - y) / state.displayOptions.zoom,\n      dragging: {\n        ...state.displayOptions.dragging,\n        x0: x,\n        y0: y,\n      },\n    },\n  };\n};\n\nconst reducer_displayOptions = (state, action) => {\n  switch (action.type) {\n    case SET_MODE_MOVE_PAPER:\n      return { ...state, mode: MODE_MOVE_PAPER };\n    case ZOOM:\n      return zoom(state, action);\n    case MOVE_PAPER:\n      return movePaper(state, action);\n    case START_MOVE_PAPER:\n    case END_MOVE_PAPER:\n      return toggleDragging(state, action);\n    default:\n      return state;\n  }\n};\nexport default reducer_displayOptions;\n","import { UPDATE_MAGNET_OPTION } from \"redux/actions\";\n\nexport const default_magnetsOptions = {\n  isGridAttracting: true,\n  gridSpace: 1,\n  isPathCoordinatesAttracting: true,\n  isNodeAnchorsAttracting: true,\n};\n\nconst reducer_magnetsOptions = (state, action) => {\n  const { type, optionName, optionValue = null } = action;\n  switch (type) {\n    case UPDATE_MAGNET_OPTION:\n      if (optionValue === null) {\n        return {\n          ...state,\n          magnetsOptions: {\n            ...state.magnetsOptions,\n            [optionName]: !state.magnetsOptions[optionName],\n          },\n        };\n      } else {\n        return {\n          ...state,\n          magnetsOptions: {\n            ...state.magnetsOptions,\n            [optionName]: optionValue,\n          },\n        };\n      }\n    default:\n      return state;\n  }\n};\nexport default reducer_magnetsOptions;\n","import { MODE_SELECT } from \"./interactionModes\";\nimport { default_displayOptions } from \"./displayOptions\";\nimport { default_magnetsOptions } from \"./magnetsOptions\";\n\nexport const initial_state = {\n  displayOptions: default_displayOptions,\n  magnetsOptions: default_magnetsOptions,\n  mode: MODE_SELECT,\n  selection: [],\n  adhesivePoints: [],\n  weakLinks: [],\n  currentMagnet: {\n    attractor: null,\n    attracted: null,\n  },\n  components: {\n    byId: {},\n    allIds: [],\n  },\n  coordinates: {\n    byId: {},\n    allIds: [],\n  },\n};\n","export const rotation = (angle, x0, y0, x, y, xScale = 1, yScale = 1) => {\n  return `${\n    x0 +\n    Math.cos((-angle / 180) * Math.PI) * xScale * x -\n    Math.sin((-angle / 180) * Math.PI) * yScale * y\n  } ${\n    y0 +\n    Math.sin((-angle / 180) * Math.PI) * xScale * x +\n    Math.cos((-angle / 180) * Math.PI) * yScale * y\n  }`;\n};\n\nexport const point_included = ({ x0, y0, x1, y1 }, { x, y }) => {\n  const maxX = Math.max(x0, x1);\n  const minX = Math.min(x0, x1);\n\n  const maxY = Math.max(y0, y1);\n  const minY = Math.min(y0, y1);\n\n  if (x < minX || x > maxX) {\n    return false;\n  }\n  if (y < minY || y > maxY) {\n    return false;\n  }\n  return true;\n};\n\nexport const rect_included = (\n  { x0, y0, x1, y1 },\n  { x, y, angle, dx1, dx2, dy1, dy2 }\n) => {\n  const maxX = Math.max(x0, x1);\n  const minX = Math.min(x0, x1);\n\n  const maxY = Math.max(y0, y1);\n  const minY = Math.min(y0, y1);\n\n  const xa =\n    x +\n    Math.cos((-angle / 180) * Math.PI) * dx1 -\n    Math.sin((-angle / 180) * Math.PI) * dy1;\n  if (xa < minX || xa > maxX) {\n    return false;\n  }\n\n  const ya =\n    y +\n    Math.sin((-angle / 180) * Math.PI) * dx1 +\n    Math.cos((-angle / 180) * Math.PI) * dy1;\n  if (ya < minY || ya > maxY) {\n    return false;\n  }\n\n  const xb =\n    x +\n    Math.cos((-angle / 180) * Math.PI) * dx2 -\n    Math.sin((-angle / 180) * Math.PI) * dy1;\n  if (xb < minX || xb > maxX) {\n    return false;\n  }\n\n  const yb =\n    y +\n    Math.sin((-angle / 180) * Math.PI) * dx2 +\n    Math.cos((-angle / 180) * Math.PI) * dy1;\n  if (yb < minY || yb > maxY) {\n    return false;\n  }\n\n  const xc =\n    x +\n    Math.cos((-angle / 180) * Math.PI) * dx1 -\n    Math.sin((-angle / 180) * Math.PI) * dy2;\n  if (xc < minX || xc > maxX) {\n    return false;\n  }\n\n  const yc =\n    y +\n    Math.sin((-angle / 180) * Math.PI) * dx1 +\n    Math.cos((-angle / 180) * Math.PI) * dy2;\n  if (yc < minY || yc > maxY) {\n    return false;\n  }\n\n  const xd =\n    x +\n    Math.cos((-angle / 180) * Math.PI) * dx2 -\n    Math.sin((-angle / 180) * Math.PI) * dy2;\n  if (xd < minX || xd > maxX) {\n    return false;\n  }\n\n  const yd =\n    y +\n    Math.sin((-angle / 180) * Math.PI) * dx2 +\n    Math.cos((-angle / 180) * Math.PI) * dy2;\n  if (yd < minY || yd > maxY) {\n    return false;\n  }\n\n  return true;\n};\n","export const translateSVGbaseline2Canvas = {\n  baseline: \"bottom\",\n  hanging: \"top\",\n  middle: \"middle\",\n};\n\nexport const translateSVGalign2Canvas = {\n  start: \"start\",\n  end: \"end\",\n  middle: \"center\",\n};\n","// this factor is used to get a good ratio between coordinates and line width\nexport const MULTIPLICATIVE_CONST = 100;\n\nexport const R_LEN = 1.4;\n\nexport const defaultCurrant = {\n  show: false,\n  currantText: \"\",\n  currantIsForward: true,\n  currantIsAbove: true,\n  currantIsAfter: true,\n};\n\nexport const default_path_options = {\n  currant: defaultCurrant,\n  label: \"\",\n  annotation: \"\",\n  mirror: false,\n  invert: false,\n};\n","import React from \"react\";\nimport {\n  rotation,\n  translateSVGbaseline2Canvas,\n  translateSVGalign2Canvas,\n} from \"utils\";\n\nconst getTextAnchor = (angle, currantIsAbove) => {\n  if (-5 < angle && angle < 5) {\n    return {\n      textAnchor: \"middle\",\n      alignmentBaseline: currantIsAbove ? \"baseline\" : \"hanging\",\n    };\n  }\n  if (-86 < angle && angle <= -5) {\n    return {\n      textAnchor: currantIsAbove ? \"end\" : \"start\",\n      alignmentBaseline: currantIsAbove ? \"baseline\" : \"hanging\",\n    };\n  }\n  if (-95 < angle && angle <= -86) {\n    return {\n      textAnchor: currantIsAbove ? \"end\" : \"start\",\n      alignmentBaseline: \"middle\",\n    };\n  }\n  if (-176 < angle && angle <= -95) {\n    return {\n      textAnchor: currantIsAbove ? \"end\" : \"start\",\n      alignmentBaseline: currantIsAbove ? \"hanging\" : \"baseline\",\n    };\n  }\n\n  if (angle >= 5 && angle < 86) {\n    return {\n      textAnchor: currantIsAbove ? \"start\" : \"end\",\n      alignmentBaseline: currantIsAbove ? \"baseline\" : \"hanging\",\n    };\n  }\n  if (angle >= 86 && angle < 95) {\n    return {\n      textAnchor: currantIsAbove ? \"start\" : \"end\",\n      alignmentBaseline: \"middle\",\n    };\n  }\n  if (angle >= 95 && angle < 176) {\n    return {\n      textAnchor: currantIsAbove ? \"start\" : \"end\",\n      alignmentBaseline: currantIsAbove ? \"hanging\" : \"baseline\",\n    };\n  }\n  return {\n    textAnchor: \"middle\",\n    alignmentBaseline: currantIsAbove ? \"hanging\" : \"baseline\",\n  };\n};\n\nexport const getCurrantAttribute = ({\n  show,\n  currantText,\n  currantIsForward,\n  currantIsAbove,\n  currantIsAfter,\n}) => {\n  if (!show) {\n    return \"\";\n  }\n  const text = currantText || \"$$$$\";\n  if (!currantIsAfter) {\n    const position = currantIsAbove ? \"^\" : \"_\";\n    const direction = currantIsForward ? \">\" : \"<\";\n    return `i${direction}${position}=${text}`;\n  } else {\n    const position = currantIsAbove ? \"^\" : \"_\";\n    const direction = currantIsForward ? \">\" : \"<\";\n    return `i${position}${direction}=${text}`;\n  }\n};\n\nconst CurrantArrow = ({\n  fromCoords,\n  toCoords,\n  currantText,\n  ratio = null,\n  angle = null,\n  currantIsForward = true,\n  currantIsAbove = true,\n  currantIsAfter = true,\n}) => {\n  if (!fromCoords || !toCoords || angle === null || ratio === null) {\n    return null;\n  }\n  const { x: xFrom, y: yFrom } = fromCoords;\n  const { x: xTo, y: yTo } = toCoords;\n\n  const xI = currantIsAfter\n    ? xTo + (ratio * (xFrom - xTo)) / 2\n    : xFrom + (ratio * (xTo - xFrom)) / 2;\n  const yI = currantIsAfter\n    ? yTo + (ratio * (yFrom - yTo)) / 2\n    : yFrom + (ratio * (yTo - yFrom)) / 2;\n  const rI = 15;\n\n  return (\n    <g\n      style={{\n        fill: \"black\",\n        stroke: \"none\",\n      }}\n    >\n      <path\n        d={`M ${xI + 0.5 * rI} ${yI} L  ${xI - 0.5 * rI} ${yI + 0.5 * rI} L  ${\n          xI - 0.5 * rI\n        } ${yI - 0.5 * rI} Z`}\n        style={{\n          transform: `rotate(${angle + (currantIsForward ? 0 : 180)}deg)`,\n          transformOrigin: `${xI}px ${yI}px`,\n        }}\n      />\n      <text\n        key={Math.random()}\n        x={\n          xI -\n          (currantIsAbove ? -0.5 * rI : 0.5 * rI) *\n            Math.sin((angle / 180) * Math.PI)\n        }\n        y={\n          yI +\n          (currantIsAbove ? -0.5 * rI : 0.5 * rI) *\n            Math.cos((angle / 180) * Math.PI)\n        }\n        style={{ ...getTextAnchor(angle, currantIsAbove) }}\n      >\n        {currantText}\n      </text>\n    </g>\n  );\n};\n\nexport const drawRoughCurrant = (rc, ctx, x0, y0, angle, ratio, element) => {\n  const {\n    fromCoords,\n    toCoords,\n    currant: {\n      show,\n      currantText,\n      currantIsForward = true,\n      currantIsAbove = true,\n      currantIsAfter = true,\n    },\n  } = element;\n\n  if (!show) {\n    return null;\n  }\n\n  const xFrom = fromCoords.x - x0;\n  const xTo = toCoords.x - x0;\n  const yFrom = fromCoords.y - y0;\n  const yTo = toCoords.y - y0;\n\n  const xI = currantIsAfter\n    ? xTo + (ratio * (xFrom - xTo)) / 2\n    : xFrom + (ratio * (xTo - xFrom)) / 2;\n  const yI = currantIsAfter\n    ? yTo + (ratio * (yFrom - yTo)) / 2\n    : yFrom + (ratio * (yTo - yFrom)) / 2;\n  const rI = 15;\n\n  const theta = -angle + (currantIsForward ? 0 : 180);\n  rc.path(\n    `M ${rotation(theta, xI, yI, -0.5 * rI, 0.5 * rI)}\n    L ${rotation(theta, xI, yI, 0.5 * rI, 0)}\n    L ${rotation(theta, xI, yI, -0.5 * rI, -0.5 * rI)}\n    Z\n    `\n  );\n\n  if (!currantText) {\n    return null;\n  }\n  const xText =\n    xI -\n    (currantIsAbove ? -0.5 * rI : 0.5 * rI) * Math.sin((angle / 180) * Math.PI);\n\n  const yText =\n    yI +\n    (currantIsAbove ? -0.5 * rI : 0.5 * rI) * Math.cos((angle / 180) * Math.PI);\n\n  const { textAnchor, alignmentBaseline } = getTextAnchor(\n    angle,\n    currantIsAbove\n  );\n\n  ctx.textAlign = translateSVGalign2Canvas[textAnchor];\n  ctx.textBaseline = translateSVGbaseline2Canvas[alignmentBaseline];\n  ctx.fillText(currantText, xText, yText);\n};\n\nexport default CurrantArrow;\n","import React from \"react\";\nimport { translateSVGbaseline2Canvas, translateSVGalign2Canvas } from \"utils\";\n\nconst getTextAnchor = (angle, isAbove, x, y) => {\n  if (-20 < angle && angle < 20) {\n    return {\n      textAnchor: \"middle\",\n      alignmentBaseline: isAbove ? \"baseline\" : \"hanging\",\n    };\n  }\n  if (-110 < angle && angle < -70) {\n    return {\n      textAnchor: isAbove ? \"end\" : \"start\",\n      alignmentBaseline: \"middle\",\n    };\n  }\n  if (70 < angle && angle < 110) {\n    return {\n      textAnchor: isAbove ? \"start\" : \"end\",\n      alignmentBaseline: \"middle\",\n    };\n  }\n  if (angle < -160 || angle > 160) {\n    return {\n      textAnchor: \"middle\",\n      alignmentBaseline: isAbove ? \"hanging\" : \"baseline\",\n    };\n  }\n  if (angle <= -20 && angle >= -70) {\n    return {\n      // textAnchor: isAbove ? \"end\" : \"start\",\n      textAnchor: \"middle\",\n      alignmentBaseline: isAbove ? \"baseline\" : \"hanging\",\n      transform: `rotate(${angle}deg)`,\n      transformOrigin: `${x}px ${y}px`,\n      rotationAngle: angle,\n    };\n  }\n  if (angle >= 20 && angle <= 70) {\n    return {\n      // textAnchor: isAbove ? \"start\" : \"end\",\n      textAnchor: \"middle\",\n      alignmentBaseline: isAbove ? \"baseline\" : \"hanging\",\n      transform: `rotate(${angle}deg)`,\n      transformOrigin: `${x}px ${y}px`,\n      rotationAngle: angle,\n    };\n  }\n  if (angle <= -110 && angle >= -160) {\n    return {\n      // textAnchor: isAbove ? \"end\" : \"start\",\n      textAnchor: \"middle\",\n      alignmentBaseline: isAbove ? \"hanging\" : \"baseline\",\n      transform: `rotate(${angle + 180}deg)`,\n      transformOrigin: `${x}px ${y}px`,\n      rotationAngle: angle + 180,\n    };\n  }\n  if (angle >= 110 && angle <= 160) {\n    return {\n      // textAnchor: isAbove ? \"start\" : \"end\",\n      textAnchor: \"middle\",\n      alignmentBaseline: isAbove ? \"hanging\" : \"baseline\",\n      transform: `rotate(${angle + 180}deg)`,\n      transformOrigin: `${x}px ${y}px`,\n      rotationAngle: angle + 180,\n    };\n  }\n};\n\nexport const getLabelAttribute = (text, isAbove = true) => {\n  if (!text) {\n    return \"\";\n  }\n  if (!isAbove) {\n    return `l_=${text}`;\n  } else {\n    return `l=${text}`;\n  }\n};\nexport const getAnnotationAttribute = (text, isAbove = false) => {\n  if (!text) {\n    return \"\";\n  }\n  if (!isAbove) {\n    return `a=${text}`;\n  } else {\n    return `a^=${text}`;\n  }\n};\n\nconst gap = 10;\n\nconst Label = ({\n  fromCoords,\n  toCoords,\n  angle = null,\n  height = null,\n  text,\n  isAbove = true,\n}) => {\n  if (!fromCoords || !toCoords || !text || angle === null || height === null) {\n    return null;\n  }\n  const { x: xFrom, y: yFrom } = fromCoords;\n  const { x: xTo, y: yTo } = toCoords;\n\n  const xL =\n    (xFrom + xTo) / 2 +\n    (isAbove ? height + gap : -(height + gap)) *\n      Math.sin((angle / 180) * Math.PI);\n  const yL =\n    (yFrom + yTo) / 2 +\n    (isAbove ? -(height + gap) : height + gap) *\n      Math.cos((angle / 180) * Math.PI);\n\n  return (\n    <g\n      style={{\n        fill: \"black\",\n        stroke: \"none\",\n      }}\n    >\n      <text\n        key={Math.random()}\n        x={xL}\n        y={yL}\n        style={{ ...getTextAnchor(angle, isAbove, xL, yL) }}\n      >\n        {text}\n      </text>\n    </g>\n  );\n};\n\nexport const drawRoughLabel = ({\n  ctx,\n  text,\n  from,\n  to,\n  angle,\n  isAbove,\n  height,\n}) => {\n  const { x: xFrom, y: yFrom } = from;\n  const { x: xTo, y: yTo } = to;\n\n  const xL =\n    (xFrom + xTo) / 2 +\n    (isAbove ? height + gap : -(height + gap)) *\n      Math.sin((angle / 180) * Math.PI);\n  const yL =\n    (yFrom + yTo) / 2 +\n    (isAbove ? -(height + gap) : height + gap) *\n      Math.cos((angle / 180) * Math.PI);\n\n  const { textAnchor, alignmentBaseline, rotationAngle = 0 } = getTextAnchor(\n    angle,\n    isAbove,\n    0,\n    0\n  );\n\n  ctx.save();\n\n  ctx.textAlign = translateSVGalign2Canvas[textAnchor];\n  ctx.textBaseline = translateSVGbaseline2Canvas[alignmentBaseline];\n\n  ctx.translate(xL, yL);\n  ctx.rotate((rotationAngle * Math.PI) / 180);\n\n  ctx.fillText(text, 0, 0);\n\n  ctx.restore();\n};\nexport default Label;\n","import React from \"react\";\nimport { connect } from \"react-redux\";\nimport { MULTIPLICATIVE_CONST, R_LEN } from \"utils\";\nimport CurrantArrow, { getCurrantAttribute } from \"atoms/currant\";\nimport Label, {\n  getLabelAttribute,\n  getAnnotationAttribute,\n  drawRoughLabel,\n} from \"atoms/label\";\n\nexport const pathGetBoundingBoxCenter = ({ fromCoords, toCoords }) => {\n  const { x: xFrom, y: yFrom } = fromCoords;\n  const { x: xTo, y: yTo } = toCoords;\n  const angle = parseInt(\n    (180 * Math.atan2(yTo - yFrom, xTo - xFrom)) / Math.PI\n  );\n\n  return { x: (xTo + xFrom) / 2, y: (yTo + yFrom) / 2, angle };\n};\nconst mapStateToProps = (state, props) => {\n  return props.id\n    ? {\n        fromCoords: state.coordinates.byId[props.from],\n        toCoords: state.coordinates.byId[props.to],\n      }\n    : {};\n};\n\n// TODO : should allow to have heighTop and heighBottom (cf pR component problem)\n// or a ratio between top and bottom to share the complete heigh\nexport const withPathAttributes = ({ height = 1, width = 1 }) => (component) =>\n  connect(mapStateToProps)((props) => {\n    const {\n      fromCoords,\n      toCoords,\n      selected,\n      onMouseDown,\n      currant,\n      label,\n      annotation,\n      mirror,\n      invert,\n    } = props;\n\n    if (!fromCoords || !toCoords) {\n      return null;\n    }\n\n    const { x: xFrom, y: yFrom } = fromCoords;\n    const { x: xTo, y: yTo } = toCoords;\n\n    const d = Math.sqrt((xFrom - xTo) ** 2 + (yFrom - yTo) ** 2);\n    const ratio = (d - width * MULTIPLICATIVE_CONST * R_LEN) / (2 * d); // ratio of the line use by connection\n    const angle = parseInt(\n      (180 * Math.atan2(yTo - yFrom, xTo - xFrom)) / Math.PI\n    );\n\n    return (\n      <g\n        onMouseDown={onMouseDown || null}\n        className={`component ${selected ? \"red\" : \"black\"}`}\n      >\n        <g\n          style={{\n            transform: `translate(${(xFrom + xTo) / 2}px , ${\n              (yFrom + yTo) / 2\n            }px) rotate(${angle}deg)${mirror ? \"scaleY(-1)\" : \"\"}${\n              invert ? \"scaleX(-1)\" : \"\"\n            }`,\n          }}\n        >\n          {component({\n            ...props,\n            x: (xFrom + xTo) / 2,\n            y: (yFrom + yTo) / 2,\n            angle: angle,\n          })}\n        </g>\n\n        {/* draw the line between anchors and the component */}\n        <path\n          d={`M ${xFrom} ${yFrom} L ${xFrom + ratio * (xTo - xFrom)} ${\n            yFrom + ratio * (yTo - yFrom)\n          }`}\n        />\n        <path\n          d={`M ${xTo} ${yTo} L ${xTo + ratio * (xFrom - xTo)} ${\n            yTo + ratio * (yFrom - yTo)\n          }`}\n        />\n\n        {currant && currant.show && (\n          <CurrantArrow\n            fromCoords={fromCoords}\n            toCoords={toCoords}\n            ratio={ratio}\n            angle={angle}\n            {...currant}\n          />\n        )}\n        {label && (\n          <Label\n            fromCoords={fromCoords}\n            toCoords={toCoords}\n            height={0.5 * height * MULTIPLICATIVE_CONST * R_LEN}\n            angle={angle}\n            text={label}\n          />\n        )}\n        {annotation && (\n          <Label\n            fromCoords={fromCoords}\n            toCoords={toCoords}\n            height={0.5 * height * MULTIPLICATIVE_CONST * R_LEN}\n            angle={angle}\n            text={annotation}\n            isAbove={false}\n          />\n        )}\n      </g>\n    );\n  });\n\nexport const drawLinks = (rc, ctx, x0, y0, width, height, element) => {\n  const { x: xFrom, y: yFrom } = element.fromCoords;\n  const { x: xTo, y: yTo } = element.toCoords;\n\n  const x = (xFrom + xTo) / 2 - x0;\n  const y = (yFrom + yTo) / 2 - y0;\n\n  const d = Math.sqrt((xFrom - xTo) ** 2 + (yFrom - yTo) ** 2);\n  const ratio = (d - width * MULTIPLICATIVE_CONST * R_LEN) / (2 * d); // ratio of the line use by connection\n  const angle = parseInt(\n    (180 * Math.atan2(yTo - yFrom, xTo - xFrom)) / Math.PI\n  );\n\n  rc.path(\n    `M ${xFrom - x0} ${yFrom - y0}\n    L ${xFrom + ratio * (xTo - xFrom) - x0} ${\n      yFrom + ratio * (yTo - yFrom) - y0\n    }\n    M ${xTo - x0} ${yTo - y0}\n    L ${xTo + ratio * (xFrom - xTo) - x0} ${yTo + ratio * (yFrom - yTo) - y0}`\n  );\n\n  const { label = null, annotation = null } = element;\n\n  if (label !== null) {\n    drawRoughLabel({\n      ctx,\n      text: label,\n      from: { x: xFrom - x0, y: yFrom - y0 },\n      to: { x: xTo - x0, y: yTo - y0 },\n      angle,\n      isAbove: true,\n      height: 0.5 * height * MULTIPLICATIVE_CONST * R_LEN,\n    });\n  }\n  if (annotation !== null) {\n    drawRoughLabel({\n      ctx,\n      text: annotation,\n      from: { x: xFrom - x0, y: yFrom - y0 },\n      to: { x: xTo - x0, y: yTo - y0 },\n      angle,\n      isAbove: false,\n      height: 0.5 * height * MULTIPLICATIVE_CONST * R_LEN,\n    });\n  }\n\n  return { x, y, angle, ratio };\n};\n\nexport const getPathAttributes = (element) => {\n  const currantAttribute = getCurrantAttribute(element.currant);\n  const label = getLabelAttribute(element.label);\n  const annotation = getAnnotationAttribute(element.annotation);\n\n  return `${label ? `, ${label}` : \"\"}${annotation ? `, ${annotation}` : \"\"}${\n    currantAttribute ? `, ${currantAttribute}` : \"\"\n  }${element.mirror ? \", mirror\" : \"\"}${element.invert ? \", invert\" : \"\"}${\n    element.poles ? `, ${element.poles}` : \"\"\n  }`;\n};\n","import React from \"react\";\nimport \"./style.scss\";\nimport { MULTIPLICATIVE_CONST, R_LEN, rotation } from \"utils\";\nimport {\n  withPathAttributes,\n  getPathAttributes,\n  drawLinks,\n} from \"./hoc/pathComponents\";\nimport { drawRoughCurrant } from \"atoms/currant\";\n\nconst width = 0.6;\nconst height = 0.6;\nconst R = 0.6 * 0.5 * MULTIPLICATIVE_CONST * R_LEN;\nconst r = (0.7071 * R).toFixed(3);\n\nexport const getBoundingBox = () => ({\n  dx1: -R,\n  dx2: R,\n  dy1: -R,\n  dy2: R,\n});\n\nconst Lampe = () => (\n  <>\n    <circle cx={0} cy={0} r={R} />\n    <path d={`M -${r} -${r} L ${r} ${r} M -${r} ${r} L ${r} -${r}`} />\n  </>\n);\n\nexport const roughComponent = (rc, ctx, x0, y0, element) => {\n  const { x, y, angle, ratio } = drawLinks(\n    rc,\n    ctx,\n    x0,\n    y0,\n    width,\n    height,\n    element\n  );\n\n  drawRoughCurrant(rc, ctx, x0, y0, angle, ratio, element);\n\n  rc.path(\n    `M ${rotation(-angle, x, y, r, r)}\n    L ${rotation(-angle, x, y, -r, -r)}\n    M ${rotation(-angle, x, y, r, -r)}\n    L ${rotation(-angle, x, y, -r, r)}\n    `\n  );\n  rc.circle(x, y, 2 * R);\n};\n\nexport const drawer = (element) => {\n  return `to[lamp${getPathAttributes(element)}] `;\n};\n\nexport default withPathAttributes({ width, height })(Lampe);\n","import React from \"react\";\nimport \"./style.scss\";\nimport { MULTIPLICATIVE_CONST, R_LEN, rotation } from \"utils\";\nimport {\n  withPathAttributes,\n  getPathAttributes,\n  drawLinks,\n} from \"./hoc/pathComponents\";\nimport { drawRoughCurrant } from \"atoms/currant\";\n\nconst height = 0.5;\nconst width = 0.4;\n\nconst UNIT_X = 0.5 * width * MULTIPLICATIVE_CONST * R_LEN;\nconst UNIT_Y = 0.5 * height * MULTIPLICATIVE_CONST * R_LEN;\n\nexport const getBoundingBox = () => ({\n  dx1: -UNIT_X,\n  dx2: UNIT_X,\n  dy1: -UNIT_Y,\n  dy2: UNIT_Y,\n});\n\nconst EmptyDiode = () => (\n  <>\n    <path\n      d={`M ${UNIT_X} 0 L ${-UNIT_X} ${-UNIT_Y} L ${-UNIT_X} ${UNIT_Y} Z`}\n    />\n    <path d={`M ${UNIT_X} ${UNIT_Y} L ${UNIT_X} ${-UNIT_Y}`} />\n  </>\n);\n\nexport const roughComponent = (rc, ctx, x0, y0, element) => {\n  const { x, y, angle, ratio } = drawLinks(\n    rc,\n    ctx,\n    x0,\n    y0,\n    width,\n    height,\n    element\n  );\n\n  drawRoughCurrant(rc, ctx, x0, y0, angle, ratio, element);\n\n  const xScale = element.invert ? -1 : 1;\n  const yScale = element.mirror ? -1 : 1;\n\n  rc.path(\n    `M ${rotation(-angle, x, y, UNIT_X, 0, xScale, yScale)}\n    L ${rotation(-angle, x, y, -UNIT_X, -UNIT_Y, xScale, yScale)}\n    L ${rotation(-angle, x, y, -UNIT_X, UNIT_Y, xScale, yScale)}\n    Z\n    M ${rotation(-angle, x, y, UNIT_X, UNIT_Y, xScale, yScale)}\n    L ${rotation(-angle, x, y, UNIT_X, -UNIT_Y, xScale, yScale)}\n    `\n  );\n};\n\nexport const drawer = (element) => {\n  return `to[empty diode${getPathAttributes(element)}] `;\n};\n\nexport default withPathAttributes({ width, height })(EmptyDiode);\n","import React from \"react\";\nimport \"./style.scss\";\nimport {\n  MULTIPLICATIVE_CONST,\n  R_LEN,\n  rotation,\n  default_path_options,\n} from \"utils\";\nimport {\n  withPathAttributes,\n  getPathAttributes,\n  drawLinks,\n} from \"./hoc/pathComponents\";\nimport { drawRoughCurrant } from \"atoms/currant\";\n\nconst height = 0.8;\nconst height_2 = 0.3;\nconst width = 0.8;\n\nconst UNIT_X = 0.5 * width * MULTIPLICATIVE_CONST * R_LEN;\nconst UNIT_Y2 = 0.5 * height_2 * MULTIPLICATIVE_CONST * R_LEN;\nconst UNIT_Y = 0.5 * height * MULTIPLICATIVE_CONST * R_LEN;\n\nexport const getBoundingBox = () => ({\n  dx1: -UNIT_X,\n  dx2: UNIT_X,\n  dy1: -UNIT_Y,\n  dy2: UNIT_Y2,\n});\n\nexport const getAnchor = ({ fromCoords, toCoords }) => {\n  const { x: xFrom, y: yFrom } = fromCoords;\n  const { x: xTo, y: yTo } = toCoords;\n\n  const angle = Math.atan2(yTo - yFrom, xTo - xFrom);\n\n  const x = (xFrom + xTo) / 2 + 55 * Math.sin(angle);\n  const y = (yFrom + yTo) / 2 - 55 * Math.cos(angle);\n  return [{ name: \"wiper\", x, y }];\n};\n\nconst PR = ({ wiper_pos = 0.5 }) => (\n  <>\n    <path\n      d={`M ${(-6 / 6) * UNIT_X} 0 L ${(-5 / 6) * UNIT_X} ${-UNIT_Y2} L ${\n        (-3 / 6) * UNIT_X\n      } ${UNIT_Y2} L ${(-1 / 6) * UNIT_X} ${-UNIT_Y2} L ${\n        (1 / 6) * UNIT_X\n      } ${UNIT_Y2} L ${(3 / 6) * UNIT_X} ${-UNIT_Y2} L ${\n        (5 / 6) * UNIT_X\n      } ${UNIT_Y2} L ${(6 / 6) * UNIT_X} 0`}\n    />\n    <path\n      d={`M ${-(0.5 - wiper_pos) * 2 * UNIT_X} ${-UNIT_Y} L ${\n        -(0.5 - wiper_pos) * 2 * UNIT_X\n      } ${-UNIT_Y2}`}\n    />\n  </>\n);\n\nexport const roughComponent = (rc, ctx, x0, y0, element) => {\n  const { x, y, angle, ratio } = drawLinks(\n    rc,\n    ctx,\n    x0,\n    y0,\n    width,\n    height,\n    element\n  );\n\n  drawRoughCurrant(rc, ctx, x0, y0, angle, ratio, element);\n\n  const xScale = element.invert ? -1 : 1;\n  const yScale = element.mirror ? -1 : 1;\n\n  const { wiper_pos } = element;\n  rc.path(\n    `M ${rotation(-angle, x, y, -UNIT_X, 0, xScale, yScale)}\n    L ${rotation(-angle, x, y, (-5 / 6) * UNIT_X, -UNIT_Y2, xScale, yScale)}\n    L ${rotation(-angle, x, y, (-3 / 6) * UNIT_X, UNIT_Y2, xScale, yScale)}\n    L ${rotation(-angle, x, y, (-1 / 6) * UNIT_X, -UNIT_Y2, xScale, yScale)}\n    L ${rotation(-angle, x, y, (1 / 6) * UNIT_X, UNIT_Y2, xScale, yScale)}\n    L ${rotation(-angle, x, y, (3 / 6) * UNIT_X, -UNIT_Y2, xScale, yScale)}\n    L ${rotation(-angle, x, y, (5 / 6) * UNIT_X, UNIT_Y2, xScale, yScale)}\n    L ${rotation(-angle, x, y, UNIT_X, 0, xScale, yScale)}\n    M ${rotation(\n      -angle,\n      x,\n      y,\n      -(0.5 - wiper_pos) * 2 * UNIT_X,\n      -UNIT_Y,\n      xScale,\n      yScale\n    )}\n    L ${rotation(\n      -angle,\n      x,\n      y,\n      -(0.5 - wiper_pos) * 2 * UNIT_X,\n      -UNIT_Y2,\n      xScale,\n      yScale\n    )}`\n  );\n};\n\nexport const drawer = (element) => {\n  return `to[pR${getPathAttributes(element)}] `;\n};\n\nexport const parameters = {\n  ...default_path_options,\n  wiper_pos: 0.5,\n};\n\nexport default withPathAttributes({ width, height })(PR);\n","import React from \"react\";\nimport \"./style.scss\";\nimport { MULTIPLICATIVE_CONST, R_LEN, rotation } from \"utils\";\nimport {\n  withPathAttributes,\n  getPathAttributes,\n  drawLinks,\n} from \"./hoc/pathComponents\";\nimport { drawRoughCurrant } from \"atoms/currant\";\n\nconst height = 0.6;\nconst width = 0.5;\nconst capacitor_width = 0.4;\n\nconst UNIT_X = 0.5 * width * MULTIPLICATIVE_CONST * R_LEN;\nconst UNIT_Y = 0.5 * height * MULTIPLICATIVE_CONST * R_LEN;\n\nconst STEP = capacitor_width * UNIT_X;\n\nexport const getBoundingBox = () => ({\n  dx1: -UNIT_X,\n  dx2: UNIT_X,\n  dy1: -UNIT_Y,\n  dy2: UNIT_Y,\n});\n\nconst Vcapacitor = () => (\n  <>\n    <path d={`M  ${-STEP} ${-UNIT_Y} L ${-STEP} ${UNIT_Y}`} />\n    <path d={`M  ${STEP} ${-UNIT_Y} L ${STEP} ${UNIT_Y}`} />\n    <path d={`M ${-UNIT_X} ${-UNIT_Y} L ${UNIT_X} ${UNIT_Y}`} />\n  </>\n);\n\nexport const roughComponent = (rc, ctx, x0, y0, element) => {\n  const { x, y, angle, ratio } = drawLinks(\n    rc,\n    ctx,\n    x0,\n    y0,\n    capacitor_width / 2,\n    height,\n    element\n  );\n\n  drawRoughCurrant(rc, ctx, x0, y0, angle, ratio, element);\n\n  const xScale = element.invert ? -1 : 1;\n  const yScale = element.mirror ? -1 : 1;\n\n  rc.path(\n    `M ${rotation(-angle, x, y, -STEP, UNIT_Y, xScale, yScale)}\n    L ${rotation(-angle, x, y, -STEP, -UNIT_Y, xScale, yScale)}\n    M ${rotation(-angle, x, y, STEP, UNIT_Y, xScale, yScale)}\n    L ${rotation(-angle, x, y, STEP, -UNIT_Y, xScale, yScale)}\n    M ${rotation(-angle, x, y, -UNIT_X, -UNIT_Y, xScale, yScale)}\n    L ${rotation(-angle, x, y, UNIT_X, UNIT_Y, xScale, yScale)}\n    `\n  );\n};\n\nexport const drawer = (element) => {\n  return `to[variable capacitor${getPathAttributes(element)}] `;\n};\n\nexport default withPathAttributes({ width: capacitor_width / 2, height })(\n  Vcapacitor\n);\n","import React from \"react\";\nimport { connect } from \"react-redux\";\nimport \"./style.scss\";\n\nimport { MULTIPLICATIVE_CONST, R_LEN, rotation } from \"utils\";\n\nconst width = 0.7;\nconst gate_height = 0.35;\nconst base_height = 0.5;\n// const conn_height = 0;\nconst height = 1.1;\nconst base_width = 0.5;\nconst gate_width = 0.62;\n// const arrow_pos = 0.6;\n// const bodydiode_scale = 0.3;\n// const bodydiode_distance = 0.3;\n// const bodydiode_conn = 0.6;\n// const curr_direction = 1;\n\nconst UNIT_X = width * MULTIPLICATIVE_CONST * R_LEN;\nconst UNIT_Y = 0.5 * height * MULTIPLICATIVE_CONST * R_LEN;\n\nconst getElementTranslation = (positionAnchor) => {\n  switch (positionAnchor) {\n    case \"B\":\n      return { x: UNIT_X, y: 0 };\n    case \"C\":\n      return { x: 0, y: UNIT_Y };\n    case \"E\":\n      return { x: 0, y: -UNIT_Y };\n    default:\n      return { x: 0, y: 0 };\n  }\n};\n\nexport const getBoundingBox = ({ angle = 0, positionCoords }) => {\n  return {\n    x: positionCoords.x,\n    y: positionCoords.y,\n    angle,\n    dx1: -UNIT_X,\n    dx2: 0,\n    dy1: -UNIT_Y,\n    dy2: UNIT_Y,\n  };\n};\n\nexport const getAnchor = ({ positionAnchor, angle = 0, positionCoords }) => {\n  const { x, y } = positionCoords;\n\n  const { x: dx, y: dy } = getElementTranslation(positionAnchor);\n\n  const Cgap = getElementTranslation(\"C\");\n  const Bgap = getElementTranslation(\"B\");\n  const Egap = getElementTranslation(\"E\");\n  const radAngle = (Math.PI * angle) / 180;\n\n  const Crad = Math.atan2(dy - Cgap.y, dx - Cgap.x);\n  const Brad = Math.atan2(dy - Bgap.y, dx - Bgap.x);\n  const Erad = Math.atan2(dy - Egap.y, dx - Egap.x);\n\n  const distanceC = Math.sqrt((Cgap.x - dx) ** 2 + (Cgap.y - dy) ** 2);\n  const distanceB = Math.sqrt((Bgap.x - dx) ** 2 + (Bgap.y - dy) ** 2);\n  const distanceE = Math.sqrt((Egap.x - dx) ** 2 + (Egap.y - dy) ** 2);\n\n  return [\n    {\n      name: \"C\",\n      x: x + Math.cos(-radAngle + Crad) * distanceC,\n      y: y + Math.sin(-radAngle + Crad) * distanceC,\n    },\n    {\n      name: \"B\",\n      x: x + Math.cos(-radAngle + Brad) * distanceB,\n      y: y + Math.sin(-radAngle + Brad) * distanceB,\n    },\n    {\n      name: \"E\",\n      x: x + Math.cos(-radAngle + Erad) * distanceE,\n      y: y + Math.sin(-radAngle + Erad) * distanceE,\n    },\n  ];\n};\n\n// If id => it's from scene\n// If no id => it's from adding\nconst mapStateToProps = (state, props) => {\n  return props.id\n    ? {\n        mode: state.mode,\n        // allows to create components directly without using the store\n        positionCoords: state.coordinates.byId[props.position],\n      }\n    : {};\n};\n\nconst NMOS = ({\n  positionCoords,\n  positionAnchor = \"\",\n  angle = 0,\n  mode,\n  selected,\n  showHandles,\n  id,\n  onMouseDown,\n}) => {\n  if (!positionCoords) {\n    return null;\n  }\n  const { x: xAnchor, y: yAnchor } = positionCoords;\n  const { x: deltaX, y: deltaY } = getElementTranslation(positionAnchor);\n\n  return (\n    <g\n      onMouseDown={onMouseDown || null}\n      className={`component ${selected ? \"red\" : \"black\"}`}\n    >\n      <g\n        style={{\n          transform: `translate(${xAnchor}px , ${yAnchor}px) rotate(${-angle}deg)`,\n        }}\n      >\n        <g\n          style={{\n            transform: `translate(${deltaX}px , ${deltaY}px)`,\n          }}\n        >\n          <path\n            d={`M ${0} ${-UNIT_Y} \n                  L ${0} ${-gate_height * UNIT_Y}\n                  L ${-base_width * UNIT_X} ${-gate_height * UNIT_Y}`}\n          />\n          <path\n            d={`M ${-base_width * UNIT_X} ${-base_height * UNIT_Y}\n                  L ${-base_width * UNIT_X} ${base_height * UNIT_Y}\n                  L ${-base_width * UNIT_X} ${gate_height * UNIT_Y}\n                  L ${0} ${gate_height * UNIT_Y}\n                  L ${0} ${UNIT_Y}`}\n          />\n          <path\n            d={`M ${-gate_width * UNIT_X} ${-gate_height * UNIT_Y}\n                  L ${-gate_width * UNIT_X} ${gate_height * UNIT_Y}`}\n            style={{ strokeWidth: 2 }}\n          />\n          <path\n            d={`M ${-gate_width * UNIT_X} 0\n                      L ${-UNIT_X} 0`}\n          />\n        </g>\n      </g>\n    </g>\n  );\n};\n\nexport const roughComponent = (rc, ctx, x0, y0, element) => {\n  const x = element.positionCoords.x - x0;\n  const y = element.positionCoords.y - y0;\n\n  const { angle } = element;\n\n  rc.path(\n    `M ${rotation(angle, x, y, 0, -UNIT_Y)} \n      L ${rotation(angle, x, y, 0, -gate_height * UNIT_Y)}\n      L ${rotation(angle, x, y, -base_width * UNIT_X, -gate_height * UNIT_Y)}\n      M ${rotation(angle, x, y, -base_width * UNIT_X, -base_height * UNIT_Y)}\n      L ${rotation(angle, x, y, -base_width * UNIT_X, +base_height * UNIT_Y)}\n      L ${rotation(angle, x, y, -base_width * UNIT_X, +gate_height * UNIT_Y)}\n      L ${rotation(angle, x, y, 0, gate_height * UNIT_Y)}\n      L ${rotation(angle, x, y, 0, UNIT_Y)}\n      M ${rotation(angle, x, y, -gate_width * UNIT_X, -gate_height * UNIT_Y)}\n      L ${rotation(angle, x, y, -gate_width * UNIT_X, +gate_height * UNIT_Y)}\n      M ${rotation(angle, x, y, -gate_width * UNIT_X, 0)}\n      L ${rotation(angle, x, y, -UNIT_X, 0)}`\n  );\n};\n\nexport const drawer = (element, positionInformations, name = null) => {\n  const { x, y, position, anchor } = positionInformations;\n\n  const coord = position\n    ? `(${position})`\n    : `(${(x / MULTIPLICATIVE_CONST).toFixed(2)}, ${(\n        -y / MULTIPLICATIVE_CONST\n      ).toFixed(2)})`;\n\n  return `\\\\draw ${coord} node[nmos${anchor ? `, anchor=${anchor}` : \"\"}${\n    element.angle && parseFloat(element.angle) !== 0\n      ? `, rotate=${element.angle}`\n      : \"\"\n  }]${name ? `(${name})` : \"\"}{};`;\n};\n\nexport default connect(mapStateToProps)(NMOS);\n","import React from \"react\";\nimport { connect } from \"react-redux\";\nimport \"./style.scss\";\n\nimport { MULTIPLICATIVE_CONST, R_LEN, rotation } from \"utils\";\n\nconst width = 1.7; // Total width\nconst port_width = 0.7; // Terminals length\nconst height = 1.4; // Total height\nconst input_height = 0.5; // Input port vertical separation\nconst up_pos = 0.45; // Top and bottom anchor position\n// const font = \\pgf@circ@font@tenbm // Absolute font size needed!\n\nconst UNIT_X = 0.5 * width * MULTIPLICATIVE_CONST * R_LEN;\nconst UNIT_Y = 0.5 * height * MULTIPLICATIVE_CONST * R_LEN;\n\nconst getElementTranslation = (positionAnchor) => {\n  const upX = (1 - 2 * up_pos) * (port_width * UNIT_X);\n  const upY = (1 - up_pos) * UNIT_Y;\n  switch (positionAnchor) {\n    case \"+\":\n      return { x: UNIT_X, y: -input_height * UNIT_Y };\n    case \"-\":\n      return { x: UNIT_X, y: input_height * UNIT_Y };\n    case \"up\":\n      return { x: upX, y: upY };\n    case \"down\":\n      return { x: upX, y: -upY };\n    case \"out\":\n      return { x: -UNIT_X, y: 0 };\n    default:\n      return { x: 0, y: 0 };\n  }\n};\n\nexport const getBoundingBox = ({ angle = 0, positionCoords }) => {\n  return {\n    x: positionCoords.x,\n    y: positionCoords.y,\n    angle,\n    dx1: -UNIT_X,\n    dx2: UNIT_X,\n    dy1: -UNIT_Y,\n    dy2: UNIT_Y,\n  };\n};\n\nexport const getAnchor = ({ positionAnchor, angle = 0, positionCoords }) => {\n  const { x, y } = positionCoords;\n\n  const { x: dx, y: dy } = getElementTranslation(positionAnchor);\n\n  return [\"+\", \"-\", \"up\", \"down\", \"out\"].map((name) => {\n    const gap = getElementTranslation(name);\n\n    const radAngle = (Math.PI * angle) / 180;\n\n    const anchorRad = Math.atan2(dy - gap.y, dx - gap.x);\n    const distance = Math.sqrt((gap.x - dx) ** 2 + (gap.y - dy) ** 2);\n    return {\n      name: name,\n      x: x + Math.cos(-radAngle + anchorRad) * distance,\n      y: y + Math.sin(-radAngle + anchorRad) * distance,\n    };\n  });\n};\n\n// If id => it's from scene\n// If no id => it's from adding\nconst mapStateToProps = (state, props) => {\n  return props.id\n    ? {\n        mode: state.mode,\n        // allows to create components directly without using the store\n        positionCoords: state.coordinates.byId[props.position],\n      }\n    : {};\n};\n\nconst OpAmp = ({\n  positionCoords,\n  positionAnchor = \"\",\n  angle = 0,\n  selected,\n\n  onMouseDown,\n}) => {\n  if (!positionCoords) {\n    return null;\n  }\n  const { x: xAnchor, y: yAnchor } = positionCoords;\n  const { x: deltaX, y: deltaY } = getElementTranslation(positionAnchor);\n\n  return (\n    <g\n      onMouseDown={onMouseDown || null}\n      className={`component ${selected ? \"red\" : \"black\"}`}\n    >\n      <g\n        style={{\n          transform: `translate(${xAnchor}px , ${yAnchor}px) rotate(${-angle}deg)`,\n        }}\n      >\n        <g\n          style={{\n            transform: `translate(${deltaX}px , ${deltaY}px)`,\n          }}\n        >\n          {/* Triangle */}\n          <path\n            d={`M ${port_width * UNIT_X} 0\n            L ${-port_width * UNIT_X} ${UNIT_Y}\n            L ${-port_width * UNIT_X} ${-UNIT_Y}\n            Z`}\n          />\n          {/* % Negative input terminal */}\n          <path\n            d={`M ${-UNIT_X} ${-input_height * UNIT_Y}\n               L ${-port_width * UNIT_X} ${-input_height * UNIT_Y}`}\n          />\n          <path\n            d={`M ${-port_width * UNIT_X + 10} ${-input_height * UNIT_Y} L ${\n              -port_width * UNIT_X + 30\n            } ${-input_height * UNIT_Y}`}\n          />\n\n          {/* % Positive input terminal */}\n          <path\n            d={`M ${-UNIT_X} ${input_height * UNIT_Y}\n                L ${-port_width * UNIT_X} ${input_height * UNIT_Y}`}\n          />\n          <path\n            d={`M ${-port_width * UNIT_X + 10} ${input_height * UNIT_Y}\n              L ${-port_width * UNIT_X + 30} ${input_height * UNIT_Y}\n              M ${-port_width * UNIT_X + 20} ${input_height * UNIT_Y - 10}\n              L ${-port_width * UNIT_X + 20} ${input_height * UNIT_Y + 10}`}\n          />\n\n          {/* % Output terminal */}\n          <path\n            d={`M ${UNIT_X} 0\n                L ${port_width * UNIT_X} 0`}\n          />\n        </g>\n      </g>\n    </g>\n  );\n};\n\nexport const roughComponent = (rc, ctx, x0, y0, element) => {\n  const x = element.positionCoords.x - x0;\n  const y = element.positionCoords.y - y0;\n\n  const { angle } = element;\n\n  rc.path(\n    `M ${rotation(angle, x, y, port_width * UNIT_X, 0)} \n      L ${rotation(angle, x, y, -port_width * UNIT_X, UNIT_Y)}\n      L ${rotation(angle, x, y, -port_width * UNIT_X, -UNIT_Y)}\n      Z\n      M ${rotation(angle, x, y, -UNIT_X, -input_height * UNIT_Y)}\n      L ${rotation(angle, x, y, -port_width * UNIT_X, -input_height * UNIT_Y)}\n      M ${rotation(angle, x, y, -UNIT_X, input_height * UNIT_Y)}\n      L ${rotation(angle, x, y, -port_width * UNIT_X, input_height * UNIT_Y)}\n      M ${rotation(angle, x, y, UNIT_X, 0)}\n      L ${rotation(angle, x, y, port_width * UNIT_X, 0)}\n      M ${rotation(\n        angle,\n        x,\n        y,\n        -port_width * UNIT_X + 10,\n        -input_height * UNIT_Y\n      )}\n      L ${rotation(\n        angle,\n        x,\n        y,\n        -port_width * UNIT_X + 30,\n        -input_height * UNIT_Y\n      )}\n      M ${rotation(\n        angle,\n        x,\n        y,\n        -port_width * UNIT_X + 10,\n        input_height * UNIT_Y\n      )}\n      L ${rotation(\n        angle,\n        x,\n        y,\n        -port_width * UNIT_X + 30,\n        input_height * UNIT_Y\n      )}\n      M ${rotation(\n        angle,\n        x,\n        y,\n        -port_width * UNIT_X + 20,\n        input_height * UNIT_Y - 10\n      )}\n      L ${rotation(\n        angle,\n        x,\n        y,\n        -port_width * UNIT_X + 20,\n        input_height * UNIT_Y + 10\n      )}`\n  );\n};\n\nexport const drawer = (element, positionInformations, name = null) => {\n  const { x, y, position, anchor } = positionInformations;\n\n  const coord = position\n    ? `(${position})`\n    : `(${(x / MULTIPLICATIVE_CONST).toFixed(2)}, ${(\n        -y / MULTIPLICATIVE_CONST\n      ).toFixed(2)})`;\n\n  return `\\\\draw ${coord} node[op amp${anchor ? `, anchor=${anchor}` : \"\"}${\n    element.angle && parseFloat(element.angle) !== 0\n      ? `, rotate=${element.angle}`\n      : \"\"\n  }]${name ? `(${name})` : \"\"}{};`;\n};\n\nexport default connect(mapStateToProps)(OpAmp);\n","import React from \"react\";\nimport { connect } from \"react-redux\";\nimport \"./style.scss\";\n\nimport { MULTIPLICATIVE_CONST, R_LEN, rotation } from \"utils\";\n\nconst width = 0.2;\nconst STEP = width * R_LEN * MULTIPLICATIVE_CONST;\n\nexport const getBoundingBox = ({ angle = 0, positionCoords }) => {\n  return {\n    x: positionCoords.x,\n    y: positionCoords.y,\n    angle,\n    dx1: 0.5 * STEP,\n    dx2: -0.5 * STEP,\n    dy1: 0,\n    dy2: 1.5 * STEP,\n  };\n};\n\nexport const getAnchor = ({ positionCoords }) => {\n  const { x, y } = positionCoords;\n\n  return [\n    {\n      name: \"C\",\n      x: x,\n      y: y,\n    },\n  ];\n};\n\n// If id => it's from scene\n// If no id => it's from adding\nconst mapStateToProps = (state, props) => {\n  return props.id\n    ? {\n        // allows to create components directly without using the store\n        positionCoords: state.coordinates.byId[props.position],\n      }\n    : {};\n};\n\nconst VEE = ({ positionCoords, angle = 0, selected, onMouseDown }) => {\n  if (!positionCoords) {\n    return null;\n  }\n  const { x: xAnchor, y: yAnchor } = positionCoords;\n\n  return (\n    <g\n      onMouseDown={onMouseDown || null}\n      className={`component ${selected ? \"red\" : \"black\"}`}\n    >\n      <g\n        style={{\n          transform: `translate(${xAnchor}px , ${yAnchor}px) rotate(${-angle}deg)`,\n        }}\n      >\n        <path\n          d={`M ${-0.5 * STEP} ${0.8 * STEP}\n                L 0 ${1.5 * STEP}\n                L ${0.5 * STEP} ${0.8 * STEP}`}\n        />\n        <path\n          d={`M 0 0\n                L 0 ${1.5 * STEP}`}\n        />\n      </g>\n    </g>\n  );\n};\n\nexport const roughComponent = (rc, ctx, x0, y0, element) => {\n  const x = element.positionCoords.x - x0;\n  const y = element.positionCoords.y - y0;\n\n  const { angle } = element;\n\n  rc.path(\n    `M ${rotation(angle, x, y, -0.5 * STEP, 0.8 * STEP)} \n      L ${rotation(angle, x, y, 0, 1.5 * STEP)}\n      L ${rotation(angle, x, y, 0.5 * STEP, 0.8 * STEP)}\n      M ${rotation(angle, x, y, 0, 0)} \n      L ${rotation(angle, x, y, 0, 1.5 * STEP)}`\n  );\n};\n\nexport const drawer = (element) => {\n  return `node[vee${\n    element.angle && element.angle !== 0 ? \" ,rotate=\" + element.angle : \"\"\n  }]{}`;\n};\n\nexport default connect(mapStateToProps)(VEE);\n","import React from \"react\";\nimport { connect } from \"react-redux\";\nimport \"./style.scss\";\n\nimport { MULTIPLICATIVE_CONST, R_LEN, rotation } from \"utils\";\n\nconst width = 0.2;\n\nconst STEP = width * R_LEN * MULTIPLICATIVE_CONST;\n\nexport const getBoundingBox = ({ angle = 0, positionCoords }) => {\n  return {\n    x: positionCoords.x,\n    y: positionCoords.y,\n    angle,\n    dx1: 0.5 * STEP,\n    dx2: -0.5 * STEP,\n    dy1: 0,\n    dy2: -1.5 * STEP,\n  };\n};\n\nexport const getAnchor = ({ positionCoords }) => {\n  const { x, y } = positionCoords;\n\n  return [\n    {\n      name: \"C\",\n      x: x,\n      y: y,\n    },\n  ];\n};\n\n// If id => it's from scene\n// If no id => it's from adding\nconst mapStateToProps = (state, props) => {\n  return props.id\n    ? {\n        // allows to create components directly without using the store\n        positionCoords: state.coordinates.byId[props.position],\n      }\n    : {};\n};\n\nconst VCC = ({ positionCoords, angle = 0, selected, onMouseDown }) => {\n  if (!positionCoords) {\n    return null;\n  }\n  const { x: xAnchor, y: yAnchor } = positionCoords;\n\n  return (\n    <g\n      onMouseDown={onMouseDown || null}\n      className={`component ${selected ? \"red\" : \"black\"}`}\n    >\n      <g\n        style={{\n          transform: `translate(${xAnchor}px , ${yAnchor}px) rotate(${-angle}deg)`,\n        }}\n      >\n        <path\n          d={`M ${-0.5 * STEP} ${-0.8 * STEP}\n                L 0 ${-1.5 * STEP}\n                L ${0.5 * STEP} ${-0.8 * STEP}`}\n        />\n        <path\n          d={`M 0 0\n                L 0 ${-1.5 * STEP}`}\n        />\n      </g>\n    </g>\n  );\n};\n\nexport const roughComponent = (rc, ctx, x0, y0, element) => {\n  const x = element.positionCoords.x - x0;\n  const y = element.positionCoords.y - y0;\n\n  const { angle } = element;\n\n  rc.path(\n    `M ${rotation(angle, x, y, -0.5 * STEP, -0.8 * STEP)} \n      L ${rotation(angle, x, y, 0, -1.5 * STEP)}\n      L ${rotation(angle, x, y, 0.5 * STEP, -0.8 * STEP)}\n      M ${rotation(angle, x, y, 0, 0)} \n      L ${rotation(angle, x, y, 0, -1.5 * STEP)}`\n  );\n};\n\nexport const drawer = (element) => {\n  return `node[vcc${\n    element.angle && element.angle !== 0 ? \" ,rotate=\" + element.angle : \"\"\n  }]{}`;\n};\n\nexport default connect(mapStateToProps)(VCC);\n","import React from \"react\";\nimport { connect } from \"react-redux\";\nimport \"./style.scss\";\n\nimport { MULTIPLICATIVE_CONST, R_LEN, rotation } from \"utils\";\n\nconst width = 0.25;\nconst STEP = width * R_LEN * MULTIPLICATIVE_CONST;\n\nexport const getBoundingBox = ({ angle = 0, positionCoords }) => {\n  return {\n    x: positionCoords.x,\n    y: positionCoords.y,\n    angle,\n    dx1: 0.6 * STEP,\n    dx2: -0.6 * STEP,\n    dy1: 0,\n    dy2: 1.6 * STEP,\n  };\n};\n\nexport const getAnchor = ({ positionCoords }) => {\n  const { x, y } = positionCoords;\n\n  return [\n    {\n      name: \"C\",\n      x: x,\n      y: y,\n    },\n  ];\n};\n\n// If id => it's from scene\n// If no id => it's from adding\nconst mapStateToProps = (state, props) => {\n  return props.id\n    ? {\n        // allows to create components directly without using the store\n        positionCoords: state.coordinates.byId[props.position],\n      }\n    : {};\n};\n\nconst Ground = ({ positionCoords, angle = 0, selected, onMouseDown }) => {\n  if (!positionCoords) {\n    return null;\n  }\n  const { x: xAnchor, y: yAnchor } = positionCoords;\n\n  return (\n    <g\n      onMouseDown={onMouseDown || null}\n      className={`component ${selected ? \"red\" : \"black\"}`}\n    >\n      <g\n        style={{\n          transform: `translate(${xAnchor}px , ${yAnchor}px) rotate(${-angle}deg)`,\n        }}\n      >\n        <path\n          d={`M ${-0.6 * STEP} ${1.2 * STEP} L ${0.6 * STEP} ${1.2 * STEP}\n          M ${-0.4 * STEP} ${1.4 * STEP} L ${0.4 * STEP} ${1.4 * STEP}\n          M ${-0.25 * STEP} ${1.6 * STEP} L ${0.25 * STEP} ${1.6 * STEP}`}\n        />\n        <path\n          d={`M 0 0\n                L 0 ${1.2 * STEP}`}\n        />\n      </g>\n    </g>\n  );\n};\n\nexport const roughComponent = (rc, ctx, x0, y0, element) => {\n  const x = element.positionCoords.x - x0;\n  const y = element.positionCoords.y - y0;\n\n  const { angle } = element;\n\n  rc.path(\n    `M ${rotation(angle, x, y, -0.6 * STEP, 1.2 * STEP)}\n     L ${rotation(angle, x, y, 0.6 * STEP, 1.2 * STEP)}\n     M ${rotation(angle, x, y, -0.4 * STEP, 1.4 * STEP)}\n     L ${rotation(angle, x, y, 0.4 * STEP, 1.4 * STEP)}\n     M ${rotation(angle, x, y, -0.25 * STEP, 1.6 * STEP)}\n     L ${rotation(angle, x, y, 0.25 * STEP, 1.6 * STEP)}\n     M ${rotation(angle, x, y, 0, 0)} \n     L ${rotation(angle, x, y, 0, 1.2 * STEP)}`\n  );\n};\n\nexport const drawer = (element) => {\n  return `node[ground${\n    element.angle && element.angle !== 0 ? \" ,rotate=\" + element.angle : \"\"\n  }]{}`;\n};\n\nexport default connect(mapStateToProps)(Ground);\n","import React from \"react\";\nimport \"./style.scss\";\nimport { MULTIPLICATIVE_CONST, R_LEN, rotation } from \"utils\";\nimport {\n  withPathAttributes,\n  getPathAttributes,\n  drawLinks,\n} from \"./hoc/pathComponents\";\nimport { drawRoughCurrant } from \"atoms/currant\";\n\nconst height = 0.6;\nconst width = 0.2;\n\nconst UNIT_X = 0.5 * width * MULTIPLICATIVE_CONST * R_LEN;\nconst UNIT_Y = 0.5 * height * MULTIPLICATIVE_CONST * R_LEN;\n\nexport const getBoundingBox = () => ({\n  dx1: -UNIT_X,\n  dx2: UNIT_X,\n  dy1: -UNIT_Y,\n  dy2: UNIT_Y,\n});\n\nexport const getAnchor = ({ fromCoords, toCoords }) => {\n  const { x: xFrom, y: yFrom } = fromCoords;\n  const { x: xTo, y: yTo } = toCoords;\n\n  const angle = Math.atan2(yTo - yFrom, xTo - xFrom);\n\n  const x = (xFrom + xTo) / 2 + 55 * Math.sin(angle);\n  const y = (yFrom + yTo) / 2 - 55 * Math.cos(angle);\n  return [{ name: \"wiper\", x, y }];\n};\n\nconst C = () => (\n  <>\n    <path d={`M  ${-UNIT_X} ${-UNIT_Y} L ${-UNIT_X} ${UNIT_Y}`} />\n    <path d={`M  ${UNIT_X} ${-UNIT_Y} L ${UNIT_X} ${UNIT_Y}`} />\n  </>\n);\n\nexport const roughComponent = (rc, ctx, x0, y0, element) => {\n  const { x, y, angle, ratio } = drawLinks(\n    rc,\n    ctx,\n    x0,\n    y0,\n    width,\n    height,\n    element\n  );\n\n  drawRoughCurrant(rc, ctx, x0, y0, angle, ratio, element);\n\n  rc.path(\n    `M ${rotation(-angle, x, y, -UNIT_X, UNIT_Y)}\n    L ${rotation(-angle, x, y, -UNIT_X, -UNIT_Y)}\n    M ${rotation(-angle, x, y, UNIT_X, UNIT_Y)}\n    L ${rotation(-angle, x, y, UNIT_X, -UNIT_Y)}\n    `\n  );\n};\n\nexport const drawer = (element) => {\n  return `to[C${getPathAttributes(element)}] `;\n};\n\nexport default withPathAttributes({ width, height })(C);\n","import React from \"react\";\nimport \"./style.scss\";\nimport { MULTIPLICATIVE_CONST, R_LEN, rotation } from \"utils\";\nimport {\n  withPathAttributes,\n  getPathAttributes,\n  drawLinks,\n} from \"./hoc/pathComponents\";\nimport { drawRoughCurrant } from \"atoms/currant\";\n\nconst height = 0.3;\nconst lower_coil_height = 0.15;\nconst width = 0.6;\nconst coils = 5;\nconst coil_aspect = 0.5;\n\nconst OTHER =\n  (0.5 * coil_aspect * width * R_LEN * MULTIPLICATIVE_CONST) / (coils - 1); //width of small coil\n\nconst STEP =\n  (width * R_LEN * MULTIPLICATIVE_CONST + (coils - 1) * 2 * OTHER) /\n  (2 * coils);\n\nconst UNIT_X = 0.5 * width * MULTIPLICATIVE_CONST * R_LEN;\nconst UNIT_Y_UP = 0.5 * height * MULTIPLICATIVE_CONST * R_LEN;\nconst UNIT_Y_DOWN = 0.5 * lower_coil_height * MULTIPLICATIVE_CONST * R_LEN;\n\nexport const getBoundingBox = () => ({\n  dx1: -UNIT_X,\n  dx2: UNIT_X,\n  dy1: -UNIT_Y_UP,\n  dy2: UNIT_Y_DOWN,\n});\n\nconst L = () => (\n  <>\n    <path\n      d={`M ${-UNIT_X} 0\n        ${[...Array(coils - 1)]\n          .map(\n            () =>\n              `a ${STEP} ${UNIT_Y_UP} 0 0 1 ${\n                2 * STEP\n              } 0 a ${OTHER} ${UNIT_Y_DOWN} 0 0 1 ${-2 * OTHER} 0 `\n          )\n          .join(\"\")}\n        a ${STEP} ${UNIT_Y_UP} 0 0 1 ${2 * STEP} 0`}\n    />\n  </>\n);\n\nexport const roughComponent = (rc, ctx, x0, y0, element) => {\n  const { x, y, angle, ratio } = drawLinks(\n    rc,\n    ctx,\n    x0,\n    y0,\n    width,\n    height,\n    element\n  );\n\n  drawRoughCurrant(rc, ctx, x0, y0, angle, ratio, element);\n\n  rc.path(\n    `M ${rotation(-angle, x, y, -UNIT_X, 0)}\n        ${[...Array(coils - 1)]\n          .map(\n            () =>\n              `a ${STEP} ${UNIT_Y_UP} ${angle} 0 ${\n                element.mirror ? \"0\" : \"1\"\n              } ${rotation(-angle, 0, 0, 2 * STEP, 0)}\n              a ${OTHER} ${UNIT_Y_DOWN} ${angle} 0 ${\n                element.mirror ? \"0\" : \"1\"\n              } ${rotation(-angle, 0, 0, -2 * OTHER, 0)} `\n          )\n          .join(\"\")}\n          a ${STEP} ${UNIT_Y_UP} ${angle} 0 ${\n      element.mirror ? \"0\" : \"1\"\n    } ${rotation(-angle, 0, 0, 2 * STEP, 0)}`\n  );\n};\n\nexport const drawer = (element) => {\n  return `to[L${getPathAttributes(element)}] `;\n};\n\nexport default withPathAttributes({ width, height })(L);\n","import React from \"react\";\nimport \"./style.scss\";\nimport { MULTIPLICATIVE_CONST, R_LEN, rotation } from \"utils\";\nimport {\n  withPathAttributes,\n  getPathAttributes,\n  drawLinks,\n} from \"./hoc/pathComponents\";\nimport { drawRoughCurrant } from \"atoms/currant\";\n\nconst height = 0.3;\nconst width = 0.8;\n\nconst UNIT_X = 0.5 * width * MULTIPLICATIVE_CONST * R_LEN;\nconst UNIT_Y = 0.5 * height * MULTIPLICATIVE_CONST * R_LEN;\n\nexport const getBoundingBox = () => ({\n  dx1: -UNIT_X,\n  dx2: UNIT_X,\n  dy1: -UNIT_Y,\n  dy2: UNIT_Y,\n});\n\nconst R = () => (\n  <path\n    d={`M ${(-6 / 6) * UNIT_X} 0 L ${(-5 / 6) * UNIT_X} ${-UNIT_Y} L ${\n      (-3 / 6) * UNIT_X\n    } ${UNIT_Y} L ${(-1 / 6) * UNIT_X} ${-UNIT_Y} L ${\n      (1 / 6) * UNIT_X\n    } ${UNIT_Y} L ${(3 / 6) * UNIT_X} ${-UNIT_Y} L ${\n      (5 / 6) * UNIT_X\n    } ${UNIT_Y} L ${(6 / 6) * UNIT_X} 0`}\n  />\n);\n\nexport const roughComponent = (rc, ctx, x0, y0, element) => {\n  const { x, y, angle, ratio } = drawLinks(\n    rc,\n    ctx,\n    x0,\n    y0,\n    width,\n    height,\n    element\n  );\n\n  drawRoughCurrant(rc, ctx, x0, y0, angle, ratio, element);\n\n  const xScale = element.invert ? -1 : 1;\n  const yScale = element.mirror ? -1 : 1;\n\n  rc.path(\n    `M ${rotation(-angle, x, y, -UNIT_X, 0, xScale, yScale)}\n    L ${rotation(-angle, x, y, (-5 / 6) * UNIT_X, -UNIT_Y, xScale, yScale)} \n    L ${rotation(-angle, x, y, (-3 / 6) * UNIT_X, UNIT_Y, xScale, yScale)} \n    L ${rotation(-angle, x, y, (-1 / 6) * UNIT_X, -UNIT_Y, xScale, yScale)} \n    L ${rotation(-angle, x, y, (1 / 6) * UNIT_X, UNIT_Y, xScale, yScale)} \n    L ${rotation(-angle, x, y, (3 / 6) * UNIT_X, -UNIT_Y, xScale, yScale)} \n    L ${rotation(-angle, x, y, (5 / 6) * UNIT_X, UNIT_Y, xScale, yScale)} \n    L ${rotation(-angle, x, y, UNIT_X, 0, xScale, yScale)}`\n  );\n};\n\nexport const drawer = (element) => {\n  return `to[R${getPathAttributes(element)}] `;\n};\n\nexport default withPathAttributes({ width, height })(R);\n","import React from \"react\";\nimport \"./style.scss\";\nimport { MULTIPLICATIVE_CONST, R_LEN, rotation } from \"utils\";\nimport {\n  withPathAttributes,\n  getPathAttributes,\n  drawLinks,\n} from \"./hoc/pathComponents\";\nimport { drawRoughCurrant } from \"atoms/currant\";\n\nconst height = 0.6;\nconst width = 0.3 * 0.33;\n\nconst UNIT_X = 0.5 * width * MULTIPLICATIVE_CONST * R_LEN;\nconst UNIT_Y = 0.5 * height * MULTIPLICATIVE_CONST * R_LEN;\n\nexport const getBoundingBox = () => ({\n  dx1: -UNIT_X,\n  dx2: UNIT_X,\n  dy1: -UNIT_Y,\n  dy2: UNIT_Y,\n});\n\nconst Battery1 = () => (\n  <>\n    <path d={`M ${-UNIT_X} ${-UNIT_Y} L ${-UNIT_X} ${UNIT_Y}`} />\n    <path d={`M ${UNIT_X} ${-0.5 * UNIT_Y}L ${UNIT_X} ${0.5 * UNIT_Y}`} />\n  </>\n);\n\nexport const roughComponent = (rc, ctx, x0, y0, element) => {\n  const { x, y, angle, ratio } = drawLinks(\n    rc,\n    ctx,\n    x0,\n    y0,\n    width,\n    height,\n    element\n  );\n  drawRoughCurrant(rc, ctx, x0, y0, angle, ratio, element);\n\n  const xScale = element.invert ? -1 : 1;\n  const yScale = element.mirror ? -1 : 1;\n\n  rc.path(\n    `M ${rotation(-angle, x, y, -UNIT_X, -UNIT_Y, xScale, yScale)}\n    L ${rotation(-angle, x, y, -UNIT_X, UNIT_Y, xScale, yScale)}\n    M ${rotation(-angle, x, y, UNIT_X, 0.5 * UNIT_Y, xScale, yScale)}\n    L ${rotation(-angle, x, y, UNIT_X, -0.5 * UNIT_Y, xScale, yScale)}\n    `\n  );\n};\n\nexport const drawer = (element) => {\n  return `to[battery1${getPathAttributes(element)}] `;\n};\n\nexport default withPathAttributes({ width, height })(Battery1);\n","import React from \"react\";\n\nimport \"components/style.scss\";\nimport { MULTIPLICATIVE_CONST, rotation } from \"utils\";\n\nconst dx = 0.1;\nconst dy = 0.04;\nconst ArrowEnd = ({ x, y, angle }) => (\n  <g\n    style={{\n      transform: `translate(${x}px , ${y}px) rotate(${angle}deg)`,\n    }}\n  >\n    <path\n      d={`M 0 0 L ${-dx * MULTIPLICATIVE_CONST} ${\n        dy * MULTIPLICATIVE_CONST\n      } L ${-dx * MULTIPLICATIVE_CONST} ${-dy * MULTIPLICATIVE_CONST} Z`}\n      className=\"fill\"\n    />\n  </g>\n);\n\nexport const drawRoughArrowEnd = (\n  rc,\n  x,\n  y,\n  angle,\n  x2,\n  y2,\n  theta,\n  xScale = 1,\n  yScale = 1\n) => {\n  const x0 =\n    x +\n    Math.cos((angle / 180) * Math.PI) * xScale * x2 -\n    Math.sin((angle / 180) * Math.PI) * yScale * y2;\n\n  const y0 =\n    y +\n    Math.sin((angle / 180) * Math.PI) * xScale * x2 +\n    Math.cos((-angle / 180) * Math.PI) * yScale * y2;\n\n  rc.path(`\n      M ${x0} ${y0}\n      L ${rotation(\n        -angle - theta,\n        x0,\n        y0,\n        -dx * MULTIPLICATIVE_CONST,\n        -dy * MULTIPLICATIVE_CONST,\n        xScale,\n        yScale\n      )}\n      L ${rotation(\n        -angle - theta,\n        x0,\n        y0,\n        -dx * MULTIPLICATIVE_CONST,\n        dy * MULTIPLICATIVE_CONST,\n        xScale,\n        yScale\n      )}\n      Z\n  `);\n};\nexport default ArrowEnd;\n","import React from \"react\";\nimport \"./style.scss\";\nimport {\n  MULTIPLICATIVE_CONST,\n  R_LEN,\n  default_path_options,\n  rotation,\n} from \"utils\";\nimport {\n  withPathAttributes,\n  getPathAttributes,\n  drawLinks,\n} from \"./hoc/pathComponents\";\nimport ArrowEnd, { drawRoughArrowEnd } from \"atoms/arrowEnd\";\n\nimport { drawRoughCurrant } from \"atoms/currant\";\n\nconst height = 0.35;\nconst width = 0.35;\n\nconst Arrow = ({ x, y, r, theta1, theta2 }) => {\n  const x1 = x + r * Math.cos((theta1 / 180) * Math.PI);\n  const y1 = y - r * Math.sin((theta1 / 180) * Math.PI);\n\n  const x2 = x + r * Math.cos((theta2 / 180) * Math.PI);\n  const y2 = y - r * Math.sin((theta2 / 180) * Math.PI);\n\n  return (\n    <>\n      <path\n        d={`M ${x1} ${y1} A ${r} ${r} 0 0 ${\n          theta1 < theta2 ? 0 : 1\n        } ${x2} ${y2} `}\n      />\n      <ArrowEnd x={x2} y={y2} angle={theta1 < theta2 ? 194 : 96} />\n    </>\n  );\n};\n\nexport const getBoundingBox = ({ withArrow = true }) => {\n  const height = withArrow ? 0.35 : 0.3;\n\n  const UNIT_X = 0.5 * width * MULTIPLICATIVE_CONST * R_LEN;\n  const UNIT_Y = 0.5 * height * MULTIPLICATIVE_CONST * R_LEN;\n  return {\n    dx1: -UNIT_X,\n    dx2: UNIT_X,\n    dy1: -UNIT_Y,\n    dy2: 0,\n  };\n};\n\nconst Switch = ({ isOpen = true, withArrow = true }) => {\n  const height = withArrow ? 0.35 : 0.3;\n\n  const UNIT_X = 0.5 * width * MULTIPLICATIVE_CONST * R_LEN;\n  const UNIT_Y = 0.5 * height * MULTIPLICATIVE_CONST * R_LEN;\n  if (withArrow) {\n    return (\n      <>\n        <Arrow\n          x={-UNIT_X}\n          y={0}\n          r={1.2 * UNIT_X}\n          theta1={isOpen ? -10 : 90}\n          theta2={isOpen ? 90 : -20}\n        />\n        <path d={`M ${-UNIT_X} 0 L ${0.6 * UNIT_X} ${-UNIT_Y}`} />\n      </>\n    );\n  }\n\n  return (\n    <path\n      d={`M ${-UNIT_X} 0 L ${0.9 * UNIT_X} ${-UNIT_Y} ${\n        isOpen\n          ? \"\"\n          : `M ${UNIT_X} 0 L ${0.2 * UNIT_X} 0 L ${0.2 * UNIT_X} ${-UNIT_Y}`\n      }`}\n    />\n  );\n};\n\nexport const roughComponent = (rc, ctx, x0, y0, element) => {\n  const { isOpen, withArrow } = element;\n  const height = withArrow ? 0.35 : 0.3;\n\n  const { x, y, angle, ratio } = drawLinks(\n    rc,\n    ctx,\n    x0,\n    y0,\n    width,\n    height,\n    element\n  );\n\n  drawRoughCurrant(rc, ctx, x0, y0, angle, ratio, element);\n\n  const xScale = element.invert ? -1 : 1;\n  const yScale = element.mirror ? -1 : 1;\n\n  const useNaiveCircleOrientation =\n    (element.invert && element.mirror) || (!element.invert && !element.mirror);\n\n  const UNIT_X = 0.5 * width * MULTIPLICATIVE_CONST * R_LEN;\n  const UNIT_Y = 0.5 * height * MULTIPLICATIVE_CONST * R_LEN;\n\n  if (!withArrow) {\n    rc.path(\n      `M ${rotation(-angle, x, y, -UNIT_X, 0, xScale, yScale)}\n        L ${rotation(-angle, x, y, 0.9 * UNIT_X, -UNIT_Y, xScale, yScale)}`\n    );\n    if (!isOpen) {\n      rc.path(\n        `M ${rotation(-angle, x, y, UNIT_X, 0, xScale, yScale)}\n          L ${rotation(-angle, x, y, 0.2 * UNIT_X, 0, xScale, yScale)} \n          L ${rotation(-angle, x, y, 0.2 * UNIT_X, -UNIT_Y, xScale, yScale)}`\n      );\n    }\n  } else {\n    rc.path(\n      `M ${rotation(-angle, x, y, -UNIT_X, 0, xScale, yScale)}\n        L ${rotation(-angle, x, y, 0.6 * UNIT_X, -UNIT_Y, xScale, yScale)}`\n    );\n\n    const cx = -UNIT_X;\n    const r = 1.2 * UNIT_X;\n    const theta1 = isOpen ? -10 : 90;\n    const theta2 = isOpen ? 90 : -20;\n\n    const x1 = cx + r * Math.cos((theta1 / 180) * Math.PI);\n    const y1 = -r * Math.sin((theta1 / 180) * Math.PI);\n\n    const x2 = cx + r * Math.cos((theta2 / 180) * Math.PI);\n    const y2 = -r * Math.sin((theta2 / 180) * Math.PI);\n\n    rc.path(\n      `M ${rotation(-angle, x, y, x1, y1, xScale, yScale)} A ${r} ${r} 1 0 ${\n        theta1 < theta2\n          ? useNaiveCircleOrientation\n            ? 0\n            : 1\n          : useNaiveCircleOrientation\n          ? 1\n          : 0\n      } ${rotation(-angle, x, y, x2, y2, xScale, yScale)}`\n    );\n\n    drawRoughArrowEnd(\n      rc,\n      x,\n      y,\n      angle,\n      x2,\n      y2,\n      theta1 < theta2\n        ? useNaiveCircleOrientation\n          ? 194\n          : 170\n        : useNaiveCircleOrientation\n        ? 96\n        : 70,\n      xScale,\n      yScale\n    );\n  }\n};\n\nexport const drawer = (element) => {\n  const { isOpen, withArrow } = element;\n  if (withArrow) {\n    return `to[${isOpen ? \"opening \" : \"\"}switch${getPathAttributes(\n      element\n    )}] `;\n  }\n  return `to[normal ${isOpen ? \"open\" : \"closed\"} switch${getPathAttributes(\n    element\n  )}] `;\n};\n\nexport const parameters = {\n  ...default_path_options,\n  isOpen: true,\n  withArrow: true,\n};\n\nexport default withPathAttributes({ width, height })(Switch);\n","import React from \"react\";\nimport { connect } from \"react-redux\";\nimport \"./style.scss\";\nimport CurrantArrow from \"atoms/currant\";\nimport Label from \"atoms/label\";\n\nimport { drawRoughCurrant } from \"atoms/currant\";\nimport { getPathAttributes } from \"./hoc/pathComponents\";\nimport { defaultCurrant } from \"utils\";\n\nconst mapStateToProps = (state, props) => {\n  return props.id\n    ? {\n        fromCoords: state.coordinates.byId[props.from],\n        toCoords: state.coordinates.byId[props.to],\n      }\n    : {};\n};\n\nconst Short = ({\n  fromCoords,\n  toCoords,\n  selected,\n  onMouseDown,\n  currant,\n  label,\n  annotation,\n}) => {\n  if (!fromCoords || !toCoords) {\n    return null;\n  }\n\n  const { x: xFrom, y: yFrom } = fromCoords;\n  const { x: xTo, y: yTo } = toCoords;\n\n  const d = Math.sqrt((xFrom - xTo) ** 2 + (yFrom - yTo) ** 2);\n  const ratio = 1; // ratio of the line use by connection\n  const angle = parseInt(\n    (180 * Math.atan2(yTo - yFrom, xTo - xFrom)) / Math.PI\n  );\n\n  return (\n    <g\n      onMouseDown={onMouseDown || null}\n      className={`component ${selected ? \"red\" : \"black\"}`}\n    >\n      <path d={`M ${xFrom} ${yFrom} L ${xTo} ${yTo}`} />\n\n      {currant && currant.show && (\n        <CurrantArrow\n          fromCoords={fromCoords}\n          toCoords={toCoords}\n          ratio={1}\n          angle={angle}\n          {...currant}\n        />\n      )}\n      {label && (\n        <Label\n          fromCoords={fromCoords}\n          toCoords={toCoords}\n          height={0}\n          angle={angle}\n          text={label}\n        />\n      )}\n      {annotation && (\n        <Label\n          fromCoords={fromCoords}\n          toCoords={toCoords}\n          height={0}\n          angle={angle}\n          text={annotation}\n          isAbove={false}\n        />\n      )}\n    </g>\n  );\n};\n\nexport const roughComponent = (rc, ctx, x0, y0, element) => {\n  const xFrom = element.fromCoords.x - x0;\n  const yFrom = element.fromCoords.y - y0;\n\n  const xTo = element.toCoords.x - x0;\n  const yTo = element.toCoords.y - y0;\n\n  rc.path(`M ${xFrom} ${yFrom} L ${xTo} ${yTo}`);\n\n  const angle = parseInt(\n    (180 * Math.atan2(yTo - yFrom, xTo - xFrom)) / Math.PI\n  );\n\n  drawRoughCurrant(rc, ctx, x0, y0, angle, 1, element);\n};\n\nexport const drawer = (element) => {\n  return `to[short${getPathAttributes(element)}] `;\n};\n\nexport const parameters = {\n  currant: { ...defaultCurrant },\n};\n\nexport default connect(mapStateToProps)(Short);\n","import React from \"react\";\nimport { connect } from \"react-redux\";\nimport \"./style.scss\";\n\nconst mapStateToProps = (state, props) => {\n  return props.id\n    ? {\n        fromCoords: state.coordinates.byId[props.from],\n        toCoords: state.coordinates.byId[props.to],\n      }\n    : {};\n};\n\nconst RightUp = ({ fromCoords, toCoords, selected, onMouseDown }) => {\n  if (!fromCoords || !toCoords) {\n    return null;\n  }\n\n  const { x: xFrom, y: yFrom } = fromCoords;\n  const { x: xTo, y: yTo } = toCoords;\n\n  return (\n    <g\n      onMouseDown={onMouseDown || null}\n      className={`component ${selected ? \"red\" : \"black\"}`}\n    >\n      <path d={`M ${xFrom} ${yFrom} L ${xTo} ${yFrom}L ${xTo} ${yTo}`} />\n    </g>\n  );\n};\n\nexport const roughComponent = (rc, ctx, x0, y0, element) => {\n  const xFrom = element.fromCoords.x - x0;\n  const yFrom = element.fromCoords.y - y0;\n\n  const xTo = element.toCoords.x - x0;\n  const yTo = element.toCoords.y - y0;\n\n  rc.path(`M ${xFrom} ${yFrom} L ${xTo} ${yFrom} L ${xTo} ${yTo}`);\n};\n\nexport const drawer = () => {\n  return `-| `;\n};\n\nexport const parameters = {};\n\nexport default connect(mapStateToProps)(RightUp);\n","import React from \"react\";\nimport { connect } from \"react-redux\";\nimport \"./style.scss\";\n\nconst mapStateToProps = (state, props) => {\n  return props.id\n    ? {\n        fromCoords: state.coordinates.byId[props.from],\n        toCoords: state.coordinates.byId[props.to],\n      }\n    : {};\n};\n\nexport const roughComponent = (rc, ctx, x0, y0, element) => {\n  const xFrom = element.fromCoords.x - x0;\n  const yFrom = element.fromCoords.y - y0;\n\n  const xTo = element.toCoords.x - x0;\n  const yTo = element.toCoords.y - y0;\n\n  rc.path(`M ${xFrom} ${yFrom} L ${xFrom} ${yTo}L ${xTo} ${yTo}`);\n};\n\nconst UpRight = ({ fromCoords, toCoords, selected, onMouseDown }) => {\n  if (!fromCoords || !toCoords) {\n    return null;\n  }\n\n  const { x: xFrom, y: yFrom } = fromCoords;\n  const { x: xTo, y: yTo } = toCoords;\n\n  return (\n    <g\n      onMouseDown={onMouseDown || null}\n      className={`component ${selected ? \"red\" : \"black\"}`}\n    >\n      <path d={`M ${xFrom} ${yFrom} L ${xFrom} ${yTo}L ${xTo} ${yTo}`} />\n    </g>\n  );\n};\n\nexport const drawer = () => {\n  return `|- `;\n};\n\nexport const parameters = {};\n\nexport default connect(mapStateToProps)(UpRight);\n","import React from \"react\";\nimport Lampe, {\n  drawer as lampeDrawer,\n  roughComponent as lampeRoughComponent,\n  getBoundingBox as lampeGetBoundingBox,\n} from \"./Lampe\";\nimport EmptyDiode, {\n  drawer as emptyDiodeDrawer,\n  roughComponent as emptyDiodeRoughComponent,\n  getBoundingBox as emptyDiodeGetBoundingBox,\n} from \"./empty_diode\";\nimport Pr, {\n  getAnchor as pR_getAnchor,\n  drawer as pRDrawer,\n  roughComponent as pRRoughComponent,\n  getBoundingBox as pRGetBoundingBox,\n  parameters as pRParameters,\n} from \"./pR\";\nimport Vcapacitor, {\n  drawer as vcapacitorDrawer,\n  roughComponent as vcapacitorRoughComponent,\n  getBoundingBox as vcapacitorGetBoundingBox,\n} from \"./vcapacitor\";\nimport NMOS, {\n  getAnchor as nmos_getAnchor,\n  drawer as nmosDrawer,\n  roughComponent as nmosRoughComponent,\n  getBoundingBox as nmosGetBoundingBox,\n} from \"./nmos\";\nimport OpAmp, {\n  getAnchor as op_amp_getAnchor,\n  drawer as op_ampDrawer,\n  roughComponent as op_ampRoughComponent,\n  getBoundingBox as op_ampGetBoundingBox,\n} from \"./op_amp\";\nimport VEE, {\n  getAnchor as vee_getAnchor,\n  drawer as veeDrawer,\n  roughComponent as veeRoughComponent,\n  getBoundingBox as veeGetBoundingBox,\n} from \"./vee\";\nimport VCC, {\n  getAnchor as vcc_getAnchor,\n  drawer as vccDrawer,\n  roughComponent as vccRoughComponent,\n  getBoundingBox as vccGetBoundingBox,\n} from \"./vcc\";\nimport Ground, {\n  getAnchor as ground_getAnchor,\n  drawer as groundDrawer,\n  roughComponent as groundRoughComponent,\n  getBoundingBox as groundGetBoundingBox,\n} from \"./ground\";\nimport C, {\n  drawer as cDrawer,\n  roughComponent as cRoughComponent,\n  getBoundingBox as cGetBoundingBox,\n} from \"./C\";\nimport L, {\n  drawer as lDrawer,\n  roughComponent as lRoughComponent,\n  getBoundingBox as lGetBoundingBox,\n} from \"./L\";\nimport R, {\n  drawer as rDrawer,\n  roughComponent as rRoughComponent,\n  getBoundingBox as rGetBoundingBox,\n} from \"./R\";\nimport Battery1, {\n  drawer as battery1Drawer,\n  roughComponent as battery1RoughComponent,\n  getBoundingBox as battery1GetBoundingBox,\n} from \"./battery1\";\nimport Switch, {\n  drawer as switchDrawer,\n  roughComponent as switchRoughComponent,\n  getBoundingBox as switchGetBoundingBox,\n  parameters as switchParameters,\n} from \"./switch\";\n\nimport Short, {\n  drawer as shortDrawer,\n  roughComponent as shortRoughComponent,\n  parameters as shortParameters,\n} from \"./short\";\nimport RightUp, {\n  drawer as rightUpDrawer,\n  roughComponent as rightUpRoughComponent,\n  parameters as rightUpParameters,\n} from \"./rightUp\";\nimport UpRight, {\n  drawer as upRightDrawer,\n  roughComponent as upRightRoughComponent,\n  parameters as upRightParameters,\n} from \"./upRight\";\nimport { pathGetBoundingBoxCenter } from \"components/hoc/pathComponents\";\n\nconst getAnchors = {\n  pR: (props) => pR_getAnchor(props),\n  nmos: (props) => nmos_getAnchor(props),\n  op_amp: (props) => op_amp_getAnchor(props),\n  vee: (props) => vee_getAnchor(props),\n  vcc: (props) => vcc_getAnchor(props),\n  ground: (props) => ground_getAnchor(props),\n};\n\nexport const pathOptions = {\n  pR: pRParameters,\n  switch: switchParameters,\n  short: shortParameters,\n  rightUp: rightUpParameters,\n  upRight: upRightParameters,\n};\n\nconst getDrawer = {\n  short: shortDrawer,\n  rightUp: rightUpDrawer,\n  upRight: upRightDrawer,\n  lampe: lampeDrawer,\n  \"empty led\": emptyDiodeDrawer,\n  pR: pRDrawer,\n  nmos: nmosDrawer,\n  op_amp: op_ampDrawer,\n  vee: veeDrawer,\n  vcc: vccDrawer,\n  ground: groundDrawer,\n  vcapacitor: vcapacitorDrawer,\n  C: cDrawer,\n  L: lDrawer,\n  R: rDrawer,\n  battery1: battery1Drawer,\n  switch: switchDrawer,\n};\n\nconst getRoughComponents = {\n  short: shortRoughComponent,\n  rightUp: rightUpRoughComponent,\n  upRight: upRightRoughComponent,\n  lampe: lampeRoughComponent,\n  \"empty led\": emptyDiodeRoughComponent,\n  pR: pRRoughComponent,\n  nmos: nmosRoughComponent,\n  op_amp: op_ampRoughComponent,\n  vee: veeRoughComponent,\n  vcc: vccRoughComponent,\n  ground: groundRoughComponent,\n  vcapacitor: vcapacitorRoughComponent,\n  C: cRoughComponent,\n  L: lRoughComponent,\n  R: rRoughComponent,\n  battery1: battery1RoughComponent,\n  switch: switchRoughComponent,\n};\n\nconst getBoundingBoxComponent = {\n  lampe: lampeGetBoundingBox,\n  \"empty led\": emptyDiodeGetBoundingBox,\n  pR: pRGetBoundingBox,\n  nmos: nmosGetBoundingBox,\n  op_amp: op_ampGetBoundingBox,\n  vee: veeGetBoundingBox,\n  vcc: vccGetBoundingBox,\n  ground: groundGetBoundingBox,\n  vcapacitor: vcapacitorGetBoundingBox,\n  C: cGetBoundingBox,\n  L: lGetBoundingBox,\n  R: rGetBoundingBox,\n  battery1: battery1GetBoundingBox,\n  switch: switchGetBoundingBox,\n};\n\nexport const getBoundingBox = (element, coordinateById) => {\n  if (element.position) {\n    const positionCoords = coordinateById[element.position];\n    return getBoundingBoxComponent[element.type]({\n      ...element,\n      positionCoords,\n    });\n  } else {\n    const fromCoords = coordinateById[element.from];\n    const toCoords = coordinateById[element.to];\n    switch (element.type) {\n      case \"short\":\n      case \"rightUp\":\n      case \"upRight\":\n        const { x, y } = fromCoords;\n        const { x: x2, y: y2 } = toCoords;\n        return { x, y, angle: 0, dx1: 0, dx2: x2 - x, dy1: 0, dy2: y2 - y };\n      default:\n        break;\n    }\n    const rep = {\n      ...pathGetBoundingBoxCenter({ fromCoords, toCoords }),\n      ...getBoundingBoxComponent[element.type](element),\n    };\n\n    const xScale = element.invert ? -1 : 1;\n    const yScale = element.mirror ? -1 : 1;\n    rep.dx1 = xScale * rep.dx1;\n    rep.dx2 = xScale * rep.dx2;\n    rep.dy1 = yScale * rep.dy1;\n    rep.dy2 = yScale * rep.dy2;\n\n    return rep;\n  }\n};\n\nexport const roughComponents = (rc, ctx, x0, y0, element) =>\n  getRoughComponents[element.type](rc, ctx, x0, y0, element);\n\nexport const getElementAnchors = (element) => {\n  return getAnchors[element.type] ? getAnchors[element.type](element) : [];\n};\n\nexport const drawElement = (element, position1, position2) => {\n  return getDrawer[element.type](element, position1, position2);\n};\n\nexport const isPath = {\n  short: true,\n  rightUp: true,\n  upRight: true,\n  lampe: true,\n  \"empty led\": true,\n  pR: true,\n  nmos: false,\n  op_amp: false,\n  vee: false,\n  vcc: false,\n  ground: false,\n  vcapacitor: true,\n  C: true,\n  L: true,\n  R: true,\n  battery1: true,\n  switch: true,\n};\n\nexport const isMultyPole = {\n  short: false,\n  rightUp: false,\n  upRight: false,\n  lampe: false,\n  \"empty led\": false,\n  pR: false,\n  nmos: true,\n  op_amp: true,\n  vee: false,\n  vcc: false,\n  ground: false,\n  vcapacitor: false,\n  C: false,\n  L: false,\n  R: false,\n  battery1: false,\n  switch: false,\n};\n\nconst svgComponents = {\n  short: (props) => <Short key={props.id} {...props} />,\n  rightUp: (props) => <RightUp key={props.id} {...props} />,\n  upRight: (props) => <UpRight key={props.id} {...props} />,\n  lampe: (props) => <Lampe key={props.id} {...props} />,\n  \"empty led\": (props) => <EmptyDiode key={props.id} {...props} />,\n  pR: (props) => <Pr key={props.id} {...props} />,\n  nmos: (props) => <NMOS key={props.id} {...props} />,\n  op_amp: (props) => <OpAmp key={props.id} {...props} />,\n  vee: (props) => <VEE key={props.id} {...props} />,\n  vcc: (props) => <VCC key={props.id} {...props} />,\n  ground: (props) => <Ground key={props.id} {...props} />,\n  vcapacitor: (props) => <Vcapacitor key={props.id} {...props} />,\n  C: (props) => <C key={props.id} {...props} />,\n  L: (props) => <L key={props.id} {...props} />,\n  R: (props) => <R key={props.id} {...props} />,\n  battery1: (props) => <Battery1 key={props.id} {...props} />,\n  switch: (props) => <Switch key={props.id} {...props} />,\n};\n\nexport const structure = {\n  bipoles: [\"lampe\", \"switch\", \"R\", \"C\", \"L\", \"empty led\", \"vcapacitor\", \"pR\"],\n  sources: [\"battery1\"],\n  references: [\"vee\", \"vcc\", \"ground\"],\n  transistors: [\"nmos\", \"op_amp\"],\n};\n\nexport default svgComponents;\n","import { getElementAnchors, isPath } from \"components\";\n\nexport const getAdhesivePoints = (elementType) => {\n  const adhesivePoints = [];\n  if (isPath[elementType]) {\n    adhesivePoints.push({\n      type: \"ANCHOR\",\n      id: null,\n      dx: 0,\n      dy: 0,\n    });\n  }\n\n  const elementAnchors = getElementAnchors({\n    type: elementType,\n    fromCoords: { x: 0, y: 0 },\n    toCoords: { x: 0, y: 0 },\n    positionCoords: { x: 0, y: 0 },\n  });\n\n  elementAnchors.forEach(({ x, y, name }) => {\n    adhesivePoints.push({\n      type: isPath[elementType] ? \"PATH\" : \"NODE\", // TODO use constant file\n      name: name,\n      id: null,\n      dx: -x,\n      dy: -y,\n    });\n  });\n\n  return adhesivePoints;\n};\n\nexport const componentUseThisAnchor = (element, anchorId) => {\n  if (element.from && element.from === anchorId) {\n    return true;\n  }\n  if (element.to && element.to === anchorId) {\n    return true;\n  }\n  if (element.position && element.position === anchorId) {\n    return true;\n  }\n  return false;\n};\n\nexport const replaceComponentAnchor = (\n  element,\n  previousAnchorId,\n  newAnchorId\n) => {\n  const newElement = { ...element };\n  if (element.from && element.from === previousAnchorId) {\n    newElement.from = newAnchorId;\n  }\n  if (element.to && element.to === previousAnchorId) {\n    newElement.to = newAnchorId;\n  }\n  if (element.position && element.position === previousAnchorId) {\n    newElement.position = newAnchorId;\n  }\n  return { ...newElement };\n};\n\nexport const isInRectangle = ({ x, y }, { x0, y0, x1, y1 }) => {\n  return (\n    Math.abs(x - x0) + Math.abs(x - x1) <= Math.abs(x1 - x0) &&\n    Math.abs(y - y0) + Math.abs(y - y1) <= Math.abs(y1 - y0)\n  );\n};\n\nexport const isAnchor = (state, id) =>\n  id !== null && state.coordinates.allIds.includes(id);\n","import { getElementAnchors } from \"components\";\n\nimport { replaceComponentAnchor } from \"./utils\";\n\nimport { MODE_DRAG, MODE_SELECT } from \"./interactionModes\";\n\nexport const startDragging = (state, action) => {\n  const coordinatesToMove = [];\n  const adhesivePoints = [];\n\n  state.selection.forEach((selectedId) => {\n    if (state.coordinates.allIds.includes(selectedId)) {\n      if (adhesivePoints.findIndex((elem) => elem.id === selectedId) === -1) {\n        adhesivePoints.push({\n          type: \"ANCHOR\",\n          id: selectedId,\n          dx: action.x - state.coordinates.byId[selectedId].x,\n          dy: action.y - state.coordinates.byId[selectedId].y,\n        });\n      }\n    } else if (state.components.allIds.includes(selectedId)) {\n      const coordinates = getElementAnchors({\n        ...state.components.byId[selectedId],\n        fromCoords:\n          state.components.byId[selectedId].from &&\n          state.coordinates.byId[state.components.byId[selectedId].from],\n        toCoords:\n          state.components.byId[selectedId].to &&\n          state.coordinates.byId[state.components.byId[selectedId].to],\n        positionCoords:\n          state.components.byId[selectedId].position &&\n          state.coordinates.byId[state.components.byId[selectedId].position],\n      });\n\n      coordinates.forEach(({ x, y, name }) => {\n        adhesivePoints.push({\n          type: state.components.byId[selectedId].position ? \"NODE\" : \"PATH\", // TODO use constant file\n          name: name,\n          id: selectedId,\n          dx: action.x - x,\n          dy: action.y - y,\n        });\n      });\n      if (\n        state.components.byId[selectedId].from &&\n        adhesivePoints.findIndex(\n          (elem) => elem.id === state.components.byId[selectedId].from\n        ) === -1\n      ) {\n        //the from anchor is new\n        const fromId = state.components.byId[selectedId].from;\n        adhesivePoints.push({\n          type: \"ANCHOR\", // TODO use constant file\n          id: fromId,\n          dx: action.x - state.coordinates.byId[fromId].x,\n          dy: action.y - state.coordinates.byId[fromId].y,\n        });\n      }\n      if (\n        state.components.byId[selectedId].to &&\n        adhesivePoints.findIndex(\n          (elem) => elem.id === state.components.byId[selectedId].to\n        ) === -1\n      ) {\n        //the to anchor is new\n        const toId = state.components.byId[selectedId].to;\n        adhesivePoints.push({\n          type: \"ANCHOR\",\n          id: toId,\n          dx: action.x - state.coordinates.byId[toId].x,\n          dy: action.y - state.coordinates.byId[toId].y,\n        });\n      }\n    }\n  });\n\n  const pile = [...state.selection];\n  const nodeSeen = [];\n  while (pile.length > 0) {\n    const selectedId = pile.pop();\n    if (state.components.allIds.includes(selectedId)) {\n      if (\n        state.components.byId[selectedId].from &&\n        !coordinatesToMove.includes(state.components.byId[selectedId].from)\n      ) {\n        coordinatesToMove.push(state.components.byId[selectedId].from);\n      }\n      if (\n        state.components.byId[selectedId].to &&\n        !coordinatesToMove.includes(state.components.byId[selectedId].to)\n      ) {\n        coordinatesToMove.push(state.components.byId[selectedId].to);\n      }\n      if (state.components.byId[selectedId].position) {\n        if (\n          !coordinatesToMove.includes(\n            state.components.byId[selectedId].position\n          )\n        ) {\n          pile.push(state.components.byId[selectedId].position);\n        }\n        if (!nodeSeen.includes(selectedId)) {\n          nodeSeen.push(selectedId);\n          state.weakLinks.forEach(({ anchorId, nodeId }) => {\n            if (\n              nodeId === selectedId &&\n              !coordinatesToMove.includes(anchorId)\n            ) {\n              pile.push(anchorId);\n            }\n          });\n        }\n      }\n    } else {\n      if (!coordinatesToMove.includes(selectedId)) {\n        coordinatesToMove.push(selectedId);\n\n        if (state.coordinates.byId[selectedId].isNodePosition) {\n          pile.push(state.coordinates.byId[selectedId].nodeId);\n        }\n      }\n    }\n  }\n\n  return {\n    ...state,\n    mode: MODE_DRAG,\n    coordinatesToMove: [...coordinatesToMove],\n    adhesivePoints: [...adhesivePoints],\n    originalPosition: { x: action.x, y: action.y },\n    alreadyMoved: { x: 0, y: 0 },\n    weakLinksToRemove: [\n      ...state.weakLinks\n        .filter(\n          ({ anchorId, nodeId }) =>\n            coordinatesToMove.includes(anchorId) &&\n            !coordinatesToMove.includes(state.components.byId[nodeId].position)\n        )\n        .map(({ anchorId, nodeId }) => anchorId + \"-\" + nodeId),\n    ],\n  };\n};\n\nexport const stopDragging = (state, action) => {\n  if (\n    state.currentMagnet.attractor &&\n    state.currentMagnet.attracted &&\n    state.currentMagnet.attracted.type === \"ANCHOR\" &&\n    state.currentMagnet.attractor.type === \"ANCHOR\"\n  ) {\n    // we need to fusion those coordinates\n    const anchorToRemoveID = state.currentMagnet.attracted.id;\n    const anchorToUseId = state.currentMagnet.attractor.id;\n\n    // remove anchor\n    const anchorToRemoveIDIndex = state.coordinates.allIds.findIndex(\n      (id) => id === anchorToRemoveID\n    );\n    const {\n      [anchorToRemoveID]: anchorToRemove,\n      ...remainingAnchors\n    } = state.coordinates.byId;\n\n    //const update elements\n    const newByIDElements = {};\n    state.components.allIds.forEach((id) => {\n      newByIDElements[id] = replaceComponentAnchor(\n        state.components.byId[id],\n        anchorToRemoveID,\n        anchorToUseId\n      );\n    });\n\n    return {\n      ...state,\n      coordinates: {\n        byId: { ...remainingAnchors },\n        allIds: [\n          ...state.coordinates.allIds.slice(0, anchorToRemoveIDIndex),\n          ...state.coordinates.allIds.slice(anchorToRemoveIDIndex + 1),\n        ],\n      },\n      components: {\n        ...state.components,\n        byId: { ...newByIDElements },\n      },\n      mode: MODE_SELECT,\n      coordinatesToMove: [],\n      originalPosition: {},\n      alreadyMoved: {},\n      weakLinksToRemove: [],\n      weakLinks: [\n        ...state.weakLinks.filter(\n          ({ anchorId, nodeId }) =>\n            !state.weakLinksToRemove.includes(anchorId + \"-\" + nodeId)\n        ),\n      ],\n    };\n  }\n\n  if (\n    state.currentMagnet.attractor &&\n    state.currentMagnet.attracted &&\n    state.currentMagnet.attracted.type !== \"PATH\" &&\n    state.currentMagnet.attractor.type !== \"PATH\"\n  ) {\n    const newWeakLink = [];\n\n    if (\n      state.currentMagnet.attracted.type === \"NODE\" &&\n      state.currentMagnet.attractor.type === \"ANCHOR\"\n    ) {\n      const nodeId = state.currentMagnet.attracted.id;\n      const anchorId = state.currentMagnet.attractor.id;\n      const name = state.currentMagnet.attracted.name;\n      newWeakLink.push({\n        anchorId: anchorId,\n        nodeId: nodeId,\n        name: name,\n      });\n    }\n    if (\n      state.currentMagnet.attracted.type === \"ANCHOR\" &&\n      state.currentMagnet.attractor.type === \"NODE\"\n    ) {\n      const nodeId = state.currentMagnet.attractor.id;\n      const anchorId = state.currentMagnet.attracted.id;\n      const name = state.currentMagnet.attractor.name;\n      newWeakLink.push({\n        anchorId: anchorId,\n        nodeId: nodeId,\n        name: name,\n      });\n    }\n    return {\n      ...state,\n      mode: MODE_SELECT,\n      coordinatesToMove: [],\n      originalPosition: {},\n      alreadyMoved: {},\n      weakLinksToRemove: [],\n      weakLinks: [\n        ...state.weakLinks.filter(\n          ({ anchorId, nodeId }) =>\n            !state.weakLinksToRemove.includes(anchorId + \"-\" + nodeId)\n        ),\n        ...newWeakLink,\n      ],\n    };\n  }\n\n  return {\n    ...state,\n    mode: MODE_SELECT,\n    coordinatesToMove: [],\n    originalPosition: {},\n    alreadyMoved: {},\n\n    weakLinksToRemove: [],\n\n    weakLinks: [\n      ...state.weakLinks.filter(\n        ({ anchorId, nodeId }) =>\n          !state.weakLinksToRemove.includes(anchorId + \"-\" + nodeId)\n      ),\n    ],\n  };\n};\n\nexport const updatePosition = (state, action) => {\n  const { x, y, shiftPress } = action;\n  const { x: originalX, y: originalY } = state.originalPosition;\n\n  let newMoveX, newMoveY;\n  // if shift is pressed only allow to move along x or y axis\n  if (shiftPress) {\n    if (Math.abs(x - originalX) > Math.abs(y - originalY)) {\n      newMoveX = x - originalX;\n      newMoveY = 0;\n    } else {\n      newMoveX = 0;\n      newMoveY = y - originalY;\n    }\n  } else {\n    newMoveX = x - originalX;\n    newMoveY = y - originalY;\n  }\n\n  const anchorById = state.coordinates.byId;\n  state.coordinatesToMove.forEach((anchorId) => {\n    anchorById[anchorId] = {\n      ...anchorById[anchorId],\n      x: anchorById[anchorId].x + newMoveX - state.alreadyMoved.x,\n      y: anchorById[anchorId].y + newMoveY - state.alreadyMoved.y,\n    };\n  });\n\n  return {\n    ...state,\n    coordinates: {\n      ...state.coordinates,\n      byId: { ...anchorById },\n    },\n    alreadyMoved: {\n      x: newMoveX,\n      y: newMoveY,\n    },\n  };\n};\n","import { componentUseThisAnchor } from \"./utils\";\n\nconst deleteElement = (state, action) => {\n  const selection = action.selection;\n\n  const componentIdsToRemove = state.components.allIds.filter((id) =>\n    selection.includes(id)\n  );\n\n  const componentIdsToKeep = state.components.allIds.filter(\n    (id) => !selection.includes(id)\n  );\n\n  const coordinateToRemove = [];\n\n  componentIdsToRemove.forEach((componentId) => {\n    const anchorToChange = [\"from\", \"to\", \"position\"]\n      .map((arg) => state.components.byId[componentId][arg])\n      .filter((id) => !!id);\n\n    // get the list of of ids of coordinates that are not anymore used by components\n    anchorToChange\n      .filter((anchorId) => {\n        return (\n          componentIdsToKeep.filter((elementId) =>\n            componentUseThisAnchor(state.components.byId[elementId], anchorId)\n          ).length === 0\n        );\n      })\n      .forEach((idToRemove) => coordinateToRemove.push(idToRemove));\n  });\n\n  const newState = {\n    ...state,\n    components: {\n      byId: { ...state.components.byId },\n      allIds: [...componentIdsToKeep],\n    },\n    coordinates: {\n      byId: { ...state.coordinates.byId },\n      allIds: [\n        ...state.coordinates.allIds.filter(\n          (id) => !coordinateToRemove.includes(id)\n        ),\n      ],\n    },\n    weakLinks: [\n      ...state.weakLinks.filter(\n        ({ anchorId, nodeId, name }) =>\n          !componentIdsToRemove.includes(nodeId) &&\n          !coordinateToRemove.includes(anchorId)\n      ),\n    ],\n  };\n  componentIdsToRemove.forEach((id) => delete newState.components.byId[id]);\n  coordinateToRemove.forEach((id) => delete newState.coordinates.byId[id]);\n\n  return {\n    ...newState,\n  };\n};\n\nexport default deleteElement;\n","import { getAdhesivePoints, isAnchor } from \"./utils\";\nimport { default_path_options } from \"utils\";\nimport { MODE_CREATE_PATH_ELEMENT } from \"./interactionModes\";\nimport { pathOptions } from \"components\";\nimport { v4 as uuid } from \"uuid\";\n\nexport const startCreatePathElement = (state, action) => {\n  return {\n    ...state,\n    selection: [],\n    adhesivePoints: [...getAdhesivePoints(action.elementType)],\n    mode: MODE_CREATE_PATH_ELEMENT,\n    newPath: {\n      ...state.newPath,\n      elementType: action.elementType,\n      isFromValidated: false,\n    },\n  };\n};\n\nexport const validateFirstStepPathElement = (state, action) => {\n  return {\n    ...state,\n    newPath: {\n      ...state.newPath,\n      attractorFrom: state.currentMagnet.attractor && {\n        ...state.currentMagnet.attractor,\n      },\n      to: { x: null, y: null },\n      attractorTo: null,\n      isFromValidated: true,\n      movedAfterFromCreation: false,\n    },\n  };\n};\n\nexport const invalidateFirstStepPathElement = (state, action) => {\n  if (state.newPath.movedAfterFromCreation && state.newPath.isFromValidated) {\n    return {\n      ...state,\n      newPath: {\n        ...state.newPath,\n        from: { ...state.newPath.to },\n        attractorFrom: state.newPath.attractorTo && {\n          ...state.newPath.attractorTo,\n        },\n        to: { x: null, y: null },\n        attractorTo: null,\n        isFromValidated: false,\n      },\n    };\n  } else {\n    return state;\n  }\n};\n\nexport const savePathElement = (state, action) => {\n  const attractorTo = state.currentMagnet.attractor && {\n    ...state.currentMagnet.attractor,\n  };\n  const { attractorFrom, from, to, elementType } = state.newPath;\n\n  const newId_element = uuid();\n\n  const fromAnchor =\n    attractorFrom && attractorFrom.type === \"ANCHOR\"\n      ? attractorFrom.id\n      : uuid();\n  const toAnchor =\n    attractorTo && attractorTo.type === \"ANCHOR\" ? attractorTo.id : uuid();\n\n  // create coordinates if necessary\n  let newAnchors = { ...state.coordinates };\n  if (!attractorFrom || attractorFrom.type !== \"ANCHOR\") {\n    newAnchors = {\n      byId: {\n        ...newAnchors.byId,\n        [fromAnchor]: {\n          id: fromAnchor,\n          x: from.x,\n          y: from.y,\n          shape: \"\",\n        },\n      },\n      allIds: [...newAnchors.allIds, fromAnchor],\n    };\n  }\n  if (!attractorTo || attractorTo.type !== \"ANCHOR\") {\n    newAnchors = {\n      byId: {\n        ...newAnchors.byId,\n        [toAnchor]: {\n          id: toAnchor,\n          x: to.x,\n          y: to.y,\n          shape: \"\",\n        },\n      },\n      allIds: [...newAnchors.allIds, toAnchor],\n    };\n  }\n\n  // create weak links if necessary\n  const newWeakLinks = [];\n  if (attractorFrom && attractorFrom.type === \"NODE\") {\n    newWeakLinks.push({\n      anchorId: fromAnchor,\n      nodeId: attractorFrom.id,\n      name: attractorFrom.name,\n    });\n  }\n  if (attractorTo && attractorTo.type === \"NODE\") {\n    newWeakLinks.push({\n      anchorId: toAnchor,\n      nodeId: attractorTo.id,\n      name: attractorTo.name,\n    });\n  }\n\n  return {\n    ...state,\n    currentMagnet: {\n      ...state.currentMagnet,\n      attractor: {\n        type: \"ANCHOR\",\n        id: toAnchor,\n      },\n    },\n    newPath: {\n      ...state.newPath,\n      isFromValidated: false,\n      from: {\n        ...to,\n      },\n      to: {\n        x: null,\n        y: null,\n      },\n    },\n    components: {\n      byId: {\n        ...state.components.byId,\n        [newId_element]: {\n          id: newId_element,\n          from: fromAnchor,\n          to: toAnchor,\n          type: elementType,\n          ...(pathOptions[elementType]\n            ? pathOptions[elementType]\n            : default_path_options),\n        },\n      },\n      allIds: [...state.components.allIds, newId_element],\n    },\n    coordinates: { ...newAnchors },\n    weakLinks: [...state.weakLinks, ...newWeakLinks],\n  };\n};\n\nexport const updatePosition = (state, action) => {\n  const { x, y, shiftPress } = action;\n\n  if (state.newPath.isFromValidated) {\n    if (shiftPress) {\n      const { x: xFrom, y: yFrom } = state.newPath.from;\n      if (Math.abs(x - xFrom) > Math.abs(y - yFrom)) {\n        return {\n          ...state,\n          newPath: {\n            ...state.newPath,\n            to: { x: x, y: yFrom },\n            movedAfterFromCreation: true,\n          },\n        };\n      } else {\n        return {\n          ...state,\n          newPath: {\n            ...state.newPath,\n            to: { x: xFrom, y: y },\n            movedAfterFromCreation: true,\n          },\n        };\n      }\n    }\n    return {\n      ...state,\n      newPath: {\n        ...state.newPath,\n        to: { x: x, y: y },\n        movedAfterFromCreation: true,\n      },\n    };\n  } else {\n    return {\n      ...state,\n      newPath: {\n        ...state.newPath,\n        from: { x: x, y: y },\n      },\n    };\n  }\n};\n","import { point_included, rect_included } from \"utils\";\n\nimport { MODE_SELECT, MODE_RECTANGLE_SELECTION } from \"./interactionModes\";\nimport { getBoundingBox } from \"components\";\n\nexport const updatePosition = (state, action) => {\n  const { x, y } = action;\n  const newRectangle = {\n    ...state.rectangleSelection,\n    x1: x,\n    y1: y,\n  };\n\n  return {\n    ...state,\n    selection: [\n      ...state.coordinates.allIds.filter((id) =>\n        point_included(newRectangle, state.coordinates.byId[id])\n      ),\n      ...state.components.allIds.filter((id) =>\n        rect_included(\n          newRectangle,\n          getBoundingBox(state.components.byId[id], state.coordinates.byId)\n        )\n      ),\n    ],\n    rectangleSelection: {\n      ...state.rectangleSelection,\n      x1: x,\n      y1: y,\n    },\n  };\n};\n\nexport const stopRectangleSelection = (state, action) => {\n  // add equality verification, if rectangle has no area it's probably a single click\n  // so we reset the selection\n  return {\n    ...state,\n    mode: MODE_SELECT,\n    rectangleSelection: {},\n    selection:\n      state.rectangleSelection.x0 === state.rectangleSelection.x1 ||\n      state.rectangleSelection.y0 === state.rectangleSelection.y1\n        ? []\n        : [...state.selection],\n  };\n};\n\nexport const startRectangleSelection = (state, action) => {\n  return {\n    ...state,\n    mode: MODE_RECTANGLE_SELECTION,\n    rectangleSelection: {\n      x0: action.x,\n      y0: action.y,\n      x1: action.x,\n      y1: action.y,\n    },\n  };\n};\n","import { MODE_CREATE_NODE_ELEMENT } from \"./interactionModes\";\n\nimport { getAdhesivePoints } from \"./utils\";\nimport { getElementAnchors, isMultyPole } from \"components\";\n\nimport { v4 as uuid } from \"uuid\";\n\nexport const updatePosition = (state, action) => {\n  const { x, y } = action;\n  return {\n    ...state,\n    newNode: {\n      ...state.newNode,\n      position: { x: x, y: y },\n    },\n  };\n};\n\nexport const startNodeCreation = (state, action) => {\n  return {\n    ...state,\n    selection: [],\n    adhesivePoints: [...getAdhesivePoints(action.elementType)],\n    mode: MODE_CREATE_NODE_ELEMENT,\n    newNode: {\n      elementType: action.elementType,\n      position: { x: null, y: null },\n      anchorsDelta: getElementAnchors({\n        type: action.elementType,\n        positionCoords: { x: 0, y: 0 },\n      }).map(({ x, y }) => ({ dx: -x, dy: -y })),\n    },\n  };\n};\n\nexport const saveNodeCreation = (state, action) => {\n  if (\n    state.mode === MODE_CREATE_NODE_ELEMENT &&\n    state.newNode.position.x !== null &&\n    state.newNode.position.y !== null\n  ) {\n    const newId_element = uuid();\n    const positionId = uuid();\n\n    return {\n      ...state,\n      newNode: {\n        ...state.newNode,\n        position: { x: null, y: null },\n      },\n      components: {\n        byId: {\n          ...state.components.byId,\n          [newId_element]: {\n            id: newId_element,\n            position: positionId,\n            type: state.newNode.elementType,\n            angle: 0,\n          },\n        },\n        allIds: [...state.components.allIds, newId_element],\n      },\n      coordinates: {\n        ...state.coordinates,\n        byId: {\n          ...state.coordinates.byId,\n          [positionId]: {\n            id: positionId,\n            x: state.newNode.position.x,\n            y: state.newNode.position.y,\n            isNodePosition: true,\n            nodeId: newId_element,\n          },\n        },\n      },\n    };\n  }\n  return state;\n};\n\nconst newPositions = (coordinates, toUpdate, deltaToAdd) => {\n  // this function update coordinates by a delta\n  const newAnchors = { ...coordinates };\n\n  toUpdate.forEach(({ anchorId, anchorName }) => {\n    newAnchors[anchorId] = {\n      ...newAnchors[anchorId],\n      x: newAnchors[anchorId].x + deltaToAdd[anchorName].dx,\n      y: newAnchors[anchorId].y + deltaToAdd[anchorName].dy,\n    };\n  });\n\n  return { ...newAnchors };\n};\n\nexport const rotateNode = (state, { id, value }) => {\n  // we prepare data for the update\n  // first we get coordinate of coordinates before and after rotation\n  const element = state.components.byId[id];\n\n  const positionCoords = state.coordinates.byId[element.position];\n  const prevAngle = element.angle;\n  const newAngle = value;\n\n  const prevAnchors = getElementAnchors({\n    ...element,\n    positionCoords: positionCoords,\n    angle: prevAngle,\n  });\n  const newAnchors = getElementAnchors({\n    ...element,\n    positionCoords: positionCoords,\n    angle: newAngle,\n  });\n\n  // Now we create a dictionary that for an anchor name return dx and dy the delta modification of the anchor\n  const deltaToAdd = {};\n  newAnchors.forEach(({ name, x, y }) => {\n    deltaToAdd[name] = { dx: x, dy: y };\n  });\n  prevAnchors.forEach(({ name, x, y }) => {\n    deltaToAdd[name].dx -= x;\n    deltaToAdd[name].dy -= y;\n  });\n\n  if (\n    state.rotationHelper &&\n    state.rotationHelper.id &&\n    state.rotationHelper.id === id\n  ) {\n    // the id is the same as before So we just need to do the update of coordinates\n\n    return {\n      ...state,\n      coordinates: {\n        ...state.coordinates,\n        byId: {\n          ...newPositions(\n            state.coordinates.byId,\n            state.rotationHelper.IdToUpdate,\n            deltaToAdd\n          ),\n        },\n      },\n      components: {\n        ...state.components,\n        byId: {\n          ...state.components.byId,\n          [id]: {\n            ...state.components.byId[id],\n            angle: newAngle,\n          },\n        },\n      },\n    };\n  } else {\n    const IdToUpdate = [];\n\n    // we will parse weakLinks to know what to update and what to remove\n    state.weakLinks.forEach(({ anchorId, nodeId, name }) => {\n      if (nodeId === id) {\n        // if child is path of mono pole\n        IdToUpdate.push({ anchorId, anchorName: name });\n      }\n    });\n\n    return {\n      ...state,\n      coordinates: {\n        ...state.coordinates,\n        byId: {\n          ...newPositions(state.coordinates.byId, IdToUpdate, deltaToAdd),\n        },\n      },\n      components: {\n        ...state.components,\n        byId: {\n          ...state.components.byId,\n          [id]: {\n            ...state.components.byId[id],\n            angle: newAngle,\n          },\n        },\n      },\n      rotationHelper: {\n        IdToUpdate: IdToUpdate,\n        id: id,\n      },\n    };\n  }\n};\n","import { componentUseThisAnchor, replaceComponentAnchor } from \"./utils\";\n\nimport { v4 as uuid } from \"uuid\";\n\nexport const stackAnchors = (state, action) => {\n  const coordinatesSelected = state.selection.filter(\n    (id) => id in state.coordinates.byId\n  );\n  const movedAnchors = [];\n  if (\n    coordinatesSelected.length <= 1 ||\n    ![\"U\", \"D\", \"L\", \"R\"].includes(action.direction)\n  ) {\n    return state;\n  } else {\n    const newPosition = {};\n\n    // We start by looping on selected element to find the min/max along x/y depending on the letter\n    coordinatesSelected.forEach((id, index) => {\n      const anchor = state.coordinates.byId[id];\n\n      switch (action.direction) {\n        case \"U\":\n          newPosition.y =\n            index === 0 ? anchor.y : Math.min(newPosition.y, anchor.y);\n          break;\n        case \"D\":\n          newPosition.y =\n            index === 0 ? anchor.y : Math.max(newPosition.y, anchor.y);\n          break;\n        case \"L\":\n          newPosition.x =\n            index === 0 ? anchor.x : Math.min(newPosition.x, anchor.x);\n          break;\n        case \"R\":\n          newPosition.x =\n            index === 0 ? anchor.x : Math.max(newPosition.x, anchor.x);\n          break;\n        default:\n          break;\n      }\n    });\n\n    // now we now the new x/y we change those positions\n    coordinatesSelected.forEach((id) => {\n      const anchor = state.coordinates.byId[id];\n\n      //  if the position is modified we just break all the weak lins associated\n      if (\n        (newPosition.x !== undefined && newPosition.x !== anchor.x) ||\n        (newPosition.y !== undefined && newPosition.y !== anchor.y)\n      ) {\n        movedAnchors.push(id);\n      }\n\n      state.coordinates.byId[id] = {\n        ...anchor,\n        ...newPosition,\n      };\n    });\n\n    return {\n      ...state,\n      coordinates: {\n        ...state.coordinates,\n        byId: { ...state.coordinates.byId },\n      },\n      weakLinks: [\n        ...state.weakLinks.filter(\n          ({ anchorId }) => !movedAnchors.includes(anchorId)\n        ),\n      ],\n    };\n  }\n};\n\nexport const splitAnchor = (state, action) => {\n  let anchorId = action.anchorId;\n  if (\n    !anchorId &&\n    state.selection.length === 1 &&\n    state.coordinates.allIds.includes(state.selection[0])\n  ) {\n    anchorId = state.selection[0];\n  }\n  if (anchorId && state.coordinates.allIds.includes(anchorId)) {\n    const componentsToChange = state.components.allIds.filter((id) =>\n      componentUseThisAnchor(state.components.byId[id], anchorId)\n    );\n    if (componentsToChange.length <= 1) {\n      return state;\n    }\n\n    const newAnchors = state.coordinates;\n    const newComponents = state.components.byId;\n    const newWeakLinks = [];\n    const weakLinksToCopy = state.weakLinks.filter(\n      ({ anchorId: linkedAnchorId }) => anchorId === linkedAnchorId\n    );\n\n    componentsToChange.slice(1).forEach((componentId) => {\n      const newAnchorId = uuid();\n\n      newComponents[componentId] = replaceComponentAnchor(\n        state.components.byId[componentId],\n        anchorId,\n        newAnchorId\n      );\n\n      newAnchors.allIds = [newAnchorId, ...newAnchors.allIds];\n      newAnchors.byId = {\n        ...newAnchors.byId,\n        [newAnchorId]: { ...newAnchors.byId[anchorId] },\n      };\n\n      weakLinksToCopy.forEach((linkToCopy) => {\n        newWeakLinks.push({ ...linkToCopy, anchorId: newAnchorId });\n      });\n    });\n\n    return {\n      ...state,\n      components: {\n        ...state.components,\n        byId: { ...newComponents },\n      },\n      coordinates: {\n        allIds: [...newAnchors.allIds],\n        byId: { ...newAnchors.byId },\n      },\n      weakLinks: [...state.weakLinks, ...newWeakLinks],\n    };\n  }\n  return state;\n};\n","import { createStore } from \"redux\";\n\nimport reducer_displayOptions from \"./displayOptions\";\nimport reducer_magnetsOptions from \"./magnetsOptions\";\n\nimport {\n  START_DRAGGING,\n  START_SELECT,\n  TOGGLE_SELECTION,\n  STOP_DRAGGING,\n  START_CREATE_PATH_ELEMENT,\n  START_CREATE_NODE_ELEMENT,\n  ELEMENT_CREATION_NEXT_STEP,\n  VALIDATE_FIRST_STEP_PATH_ELEMENT_CREATION,\n  INVALIDATE_FIRST_STEP_PATH_ELEMENT_CREATION,\n  SAVE_PATH_ELEMENT_CREATION,\n  UPDATE_POSITION,\n  SPLIT_ANCHOR,\n  START_RECTANGLE_SELECTION,\n  STOP_RECTANGLE_SELECTION,\n  STACK_SELECTED_ANCHORS,\n  DELETE_ELEMENT,\n  UPDATE_COMPONENT,\n  LOAD_PROJECT,\n} from \"redux/actions\";\n\nimport {\n  MODE_SELECT,\n  MODE_DRAG,\n  MODE_CREATE_PATH_ELEMENT,\n  MODE_CREATE_NODE_ELEMENT,\n  MODE_RECTANGLE_SELECTION,\n} from \"./interactionModes\";\n\nimport { initial_state } from \"./debugInitialState\";\n\nimport {\n  startDragging,\n  stopDragging,\n  updatePosition as draggingUpdatePosition,\n} from \"./dragging\";\n\nimport deleteElement from \"./delete\";\nimport {\n  startCreatePathElement,\n  validateFirstStepPathElement,\n  invalidateFirstStepPathElement,\n  savePathElement,\n  updatePosition as pathCreationUpdatePosition,\n} from \"./pathCreation\";\n\nimport {\n  stopRectangleSelection,\n  startRectangleSelection,\n  updatePosition as rectangleSelectionUpdatePosition,\n} from \"./rectangleSelection\";\n\nimport {\n  startNodeCreation,\n  saveNodeCreation,\n  updatePosition as nodeCreationUpdatePosition,\n  rotateNode,\n} from \"./nodeCreation\";\n\nimport { stackAnchors, splitAnchor } from \"./anchorHelper\";\nimport { MULTIPLICATIVE_CONST } from \"utils\";\n\nfunction update(state = initial_state, action) {\n  state = { ...reducer_displayOptions(state, action) };\n  state = { ...reducer_magnetsOptions(state, action) };\n\n  if (!(action.type === UPDATE_COMPONENT && action.name === \"angle\")) {\n    // we clean rotation helper after use of stop rotation\n    // TODO do it in a clean way (not mutating previous state)\n    state = { ...state, rotationHelper: null };\n  }\n  switch (action.type) {\n    case LOAD_PROJECT:\n      return {\n        ...initial_state,\n        components: { ...action.components },\n        coordinates: { ...action.coordinates },\n      };\n    case UPDATE_COMPONENT:\n      const { id, name, value } = action;\n      if (state.components.allIds.includes(id)) {\n        if (name === \"angle\") {\n          return rotateNode(state, action);\n        }\n        return {\n          ...state,\n          components: {\n            ...state.components,\n            byId: {\n              ...state.components.byId,\n              [id]: {\n                ...state.components.byId[id],\n                [name]: value,\n              },\n            },\n          },\n        };\n      }\n      if (state.coordinates.allIds.includes(id)) {\n        return {\n          ...state,\n          coordinates: {\n            ...state.coordinates,\n            byId: {\n              ...state.coordinates.byId,\n              [id]: {\n                ...state.coordinates.byId[id],\n                [name]: value,\n              },\n            },\n          },\n        };\n      }\n      return state;\n    case TOGGLE_SELECTION:\n      if (action.reset) {\n        return {\n          ...state,\n          selection: [action.objectId],\n        };\n      } else {\n        const index = state.selection.findIndex((x) => x === action.objectId);\n        if (index >= 0) {\n          return {\n            ...state,\n            selection: [\n              ...state.selection.slice(0, index),\n              ...state.selection.slice(index + 1),\n            ],\n          };\n        } else {\n          return {\n            ...state,\n            selection: [...state.selection, action.objectId],\n          };\n        }\n      }\n    case START_SELECT:\n      return {\n        ...state,\n        selection: [],\n        adhesivePoints: [],\n        mode: MODE_SELECT,\n      };\n\n    case START_DRAGGING:\n      return startDragging(state, action);\n\n    case STOP_DRAGGING:\n      return stopDragging(state, action);\n\n    case UPDATE_POSITION:\n      const { attractor, attracted } = action;\n\n      if (attractor === null && state.magnetsOptions.isGridAttracting) {\n        // if not already attracted by someone check the grid attraction\n\n        const { x, y } = action;\n\n        const refSpace = MULTIPLICATIVE_CONST * state.magnetsOptions.gridSpace;\n\n        if (state.mode === MODE_CREATE_PATH_ELEMENT) {\n          const modX = Math.abs(x) % refSpace;\n          const modY = Math.abs(y) % refSpace;\n\n          const R = 10;\n          if (\n            (modX <= R || modX >= refSpace - R) &&\n            (modY <= R || modY >= refSpace - R)\n          ) {\n            action.x = refSpace * Math.round(x / refSpace);\n            action.y = refSpace * Math.round(y / refSpace);\n          }\n        } else if (\n          state.mode === MODE_DRAG ||\n          state.mode === MODE_CREATE_NODE_ELEMENT\n        ) {\n          const adhesivePoints =\n            state.mode === MODE_DRAG\n              ? state.adhesivePoints\n              : state.newNode.anchorsDelta;\n\n          adhesivePoints.forEach(({ dx, dy }) => {\n            const xToTest = x - dx;\n            const yToTest = y - dy;\n\n            const modX = Math.abs(xToTest) % refSpace;\n            const modY = Math.abs(yToTest) % refSpace;\n\n            const R = 10;\n            if (\n              (modX <= R || modX >= refSpace - R) &&\n              (modY <= R || modY >= refSpace - R)\n            ) {\n              action.x =\n                x - (xToTest - refSpace * Math.round(xToTest / refSpace));\n              action.y =\n                y - (yToTest - refSpace * Math.round(yToTest / refSpace));\n            }\n          });\n        }\n      }\n      switch (state.mode) {\n        case MODE_DRAG:\n          return {\n            ...draggingUpdatePosition(state, action),\n            currentMagnet: { attractor, attracted },\n          };\n\n        case MODE_CREATE_PATH_ELEMENT:\n          return {\n            ...pathCreationUpdatePosition(state, action),\n            currentMagnet: { attractor, attracted },\n          };\n\n        case MODE_CREATE_NODE_ELEMENT:\n          return {\n            ...nodeCreationUpdatePosition(state, action),\n            currentMagnet: { attractor, attracted },\n          };\n\n        case MODE_RECTANGLE_SELECTION:\n          return {\n            ...rectangleSelectionUpdatePosition(state, action),\n            currentMagnet: { attractor, attracted },\n          };\n\n        default:\n          return {\n            ...state,\n            currentMagnet: { attractor, attracted },\n          };\n      }\n\n    case START_CREATE_PATH_ELEMENT:\n      return startCreatePathElement(state, action);\n\n    case START_CREATE_NODE_ELEMENT:\n      return startNodeCreation(state, action);\n\n    case ELEMENT_CREATION_NEXT_STEP:\n      return saveNodeCreation(state, action);\n\n    case VALIDATE_FIRST_STEP_PATH_ELEMENT_CREATION:\n      return validateFirstStepPathElement(state, action);\n\n    case INVALIDATE_FIRST_STEP_PATH_ELEMENT_CREATION:\n      return invalidateFirstStepPathElement(state, action);\n\n    case SAVE_PATH_ELEMENT_CREATION:\n      return savePathElement(state, action);\n\n    case SPLIT_ANCHOR:\n      return splitAnchor(state, action);\n\n    case START_RECTANGLE_SELECTION:\n      return startRectangleSelection(state, action);\n\n    case STOP_RECTANGLE_SELECTION:\n      return stopRectangleSelection(state, action);\n\n    case STACK_SELECTED_ANCHORS:\n      return stackAnchors(state, action);\n\n    case DELETE_ELEMENT:\n      return deleteElement(state, action);\n\n    default:\n      return state;\n  }\n}\n\n// Create a Redux store holding the state of your app.\n// Its API is { subscribe, dispatch, getState }.\nlet store = createStore(update);\n\nexport default store;\n","import React, { forwardRef } from \"react\";\n\nimport \"./style.scss\";\nimport { connect } from \"react-redux\";\nimport { MODE_SELECT } from \"redux/store/interactionModes\";\nimport { toggleSelection, startDragging } from \"redux/actions\";\n\nconst mapDispatchToProps = (dispatch, { svgRef, displayOptions }) => {\n  return {\n    toggleSelection: (objectId, reset) =>\n      dispatch(toggleSelection(objectId, reset)),\n    startDragging: (x, y) => {\n      const {\n        x: xOffset,\n        y: yOffset,\n        width: svgWidth,\n        height: svgHeight,\n      } = svgRef.current.getBoundingClientRect();\n      const {\n        x: SVG_X,\n        y: SVG_Y,\n        width: SVG_WIDTH,\n        height: SVG_HEIGHT,\n      } = displayOptions;\n\n      dispatch(\n        startDragging(\n          SVG_X + (x - xOffset) * (SVG_WIDTH / svgWidth),\n          SVG_Y + (y - yOffset) * (SVG_HEIGHT / svgHeight)\n        )\n      );\n    },\n  };\n};\nconst mapStateToProps = (state, { id }) => {\n  return id\n    ? {\n        x: state.coordinates.byId[id].x,\n        y: state.coordinates.byId[id].y,\n        shape: state.coordinates.byId[id].shape,\n        mode: state.mode,\n        selected: state.selection.includes(id),\n      }\n    : {};\n};\n\nconst Anchor = ({\n  id,\n  x,\n  y,\n  shape,\n  mode,\n  selected,\n  startDragging,\n  toggleSelection,\n}) => {\n  switch (shape) {\n    case \"d\":\n      return (\n        <path\n          d={`M ${x - 5} ${y} L ${x} ${y - 5} L ${x + 5} ${y} L ${x} ${\n            y + 5\n          } Z`}\n          className={`anchor full ${selected ? \"selected\" : \"\"} `}\n          onMouseDown={\n            mode === MODE_SELECT\n              ? (event) => {\n                  event.stopPropagation();\n                  if (!event.ctrlKey && selected) {\n                    startDragging(\n                      event.nativeEvent.clientX,\n                      event.nativeEvent.clientY\n                    );\n                  } else {\n                    toggleSelection(id, !event.ctrlKey);\n                  }\n                }\n              : null\n          }\n        />\n      );\n\n    default:\n      return (\n        <circle\n          cx={x}\n          cy={y}\n          r={5}\n          className={`anchor ${selected ? \"selected\" : \"\"} ${\n            shape === \"o\" ? \" empty\" : \"\"\n          }${shape === \"*\" ? \" full\" : \"\"}`}\n          onMouseDown={\n            mode === MODE_SELECT\n              ? (event) => {\n                  event.stopPropagation();\n                  if (!event.ctrlKey && selected) {\n                    startDragging(\n                      event.nativeEvent.clientX,\n                      event.nativeEvent.clientY\n                    );\n                  } else {\n                    toggleSelection(id, !event.ctrlKey);\n                  }\n                }\n              : null\n          }\n        />\n      );\n  }\n};\n\nexport const roughCoordinate = (rc, ctx, x0, y0, { x, y, shape }) => {\n  console.log(rc.gen.config.options.roughness / 2);\n  if (shape === \"o\") {\n    rc.circle(x - x0, y - y0, 10, {\n      fill: \"white\",\n      fillStyle: \"solid\",\n      roughness: rc.gen.config.options.roughness / 2,\n    });\n  }\n  if (shape === \"*\") {\n    rc.circle(x - x0, y - y0, 10, {\n      fill: \"black\",\n      fillStyle: \"solid\",\n      roughness: rc.gen.config.options.roughness / 2,\n    });\n  }\n  if (shape === \"d\") {\n    rc.path(\n      `M ${x - x0 - 5} ${y - y0}\n      L ${x - x0} ${y - y0 - 5}\n      L ${x - x0 + 5} ${y - y0}\n      L ${x - x0} ${y - y0 + 5}\n      Z`,\n      {\n        fill: \"black\",\n        fillStyle: \"solid\",\n        roughness: rc.gen.config.options.roughness / 2,\n      }\n    );\n  }\n};\nconst ConnectedAnchor = connect(mapStateToProps, mapDispatchToProps)(Anchor);\n\nexport default forwardRef((props, ref) => (\n  <ConnectedAnchor {...props} svgRef={ref} />\n));\n","import React, { useRef, useState, useEffect } from \"react\";\nimport rough from \"roughjs/bundled/rough.esm.js\";\n\nimport { roughComponents } from \"components\";\nimport { roughCoordinate } from \"atoms/anchor\";\n\nimport { connect } from \"react-redux\";\n\nimport Button from \"@material-ui/core/Button\";\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\nimport DialogContent from \"@material-ui/core/DialogContent\";\nimport DialogActions from \"@material-ui/core/DialogActions\";\nimport Slider from \"@material-ui/core/Slider\";\nimport Typography from \"@material-ui/core/Typography\";\n\nimport AutorenewIcon from \"@material-ui/icons/Autorenew\";\n\nconst mapStateToProps = (state) => {\n  return {\n    components: state.components,\n    coordinates: state.coordinates,\n  };\n};\n\nconst margin = 50;\nconst RoughDrawing = ({ components, coordinates }) => {\n  const canvasRef = useRef();\n  const [width, setWidth] = useState(0);\n  const [height, setHeight] = useState(0);\n  const [seed, setSeed] = useState(1);\n  const [roughness, setRoughness] = useState(1);\n\n  const [canvasURL, setCanvasURL] = useState();\n\n  useEffect(() => {\n    const svgBBox = document.getElementById(\"drawingArea\").getBBox();\n    setWidth(svgBBox.width);\n    setHeight(svgBBox.height);\n\n    // const rc = rough.canvas(canvasRef.current);\n    const rc = rough.canvas(document.getElementById(\"rough-canvas\"), {\n      options: { seed: seed, roughness: roughness, curveFitting: 1 },\n    });\n    const ctx = document.getElementById(\"rough-canvas\").getContext(\"2d\");\n\n    ctx.font = \"0.7cm IndieFlower\";\n\n    ctx.fillStyle = \"white\";\n    ctx.fillRect(0, 0, width + 2 * margin, height + 2 * margin);\n    ctx.fillStyle = \"black\";\n\n    components.allIds.forEach((id) => {\n      const element = components.byId[id];\n      element.positionCoords = element.position\n        ? coordinates.byId[element.position]\n        : undefined;\n      element.fromCoords = element.from\n        ? coordinates.byId[element.from]\n        : undefined;\n      element.toCoords = element.to ? coordinates.byId[element.to] : undefined;\n\n      roughComponents(rc, ctx, svgBBox.x - margin, svgBBox.y - margin, element);\n    });\n\n    coordinates.allIds.forEach((id) => {\n      const element = coordinates.byId[id];\n      roughCoordinate(rc, ctx, svgBBox.x - margin, svgBBox.y - margin, element);\n    });\n\n    setCanvasURL(\n      canvasRef.current\n        .toDataURL(\"image/jpg\")\n        .replace(\"image/png\", \"image/octet-stream\")\n    );\n  }, [\n    canvasRef.current,\n    width,\n    height,\n    components,\n    coordinates,\n    seed,\n    roughness,\n  ]);\n\n  const generateNewDrawing = () => setSeed(seed + 1);\n  return (\n    <>\n      <DialogTitle>Image Generator</DialogTitle>\n      <DialogContent>\n        <canvas\n          id=\"rough-canvas\"\n          ref={canvasRef}\n          width={width + 2 * margin}\n          height={height + 2 * margin}\n          style={{ width: \"100%\" }}\n        />\n      </DialogContent>\n      <DialogActions>\n        <div>\n          <Typography id=\"roughness-slider\" gutterBottom>\n            Roughness\n          </Typography>\n          <Slider\n            value={roughness}\n            onChange={(event, newValue) => setRoughness(newValue)}\n            aria-labelledby=\"roughness-slider\"\n            min={0}\n            max={5}\n            step={0.1}\n          />\n        </div>\n        <Button onClick={generateNewDrawing} variant=\"outlined\">\n          <AutorenewIcon />\n        </Button>\n        <Button\n          href={canvasURL}\n          download=\"circuit.png\"\n          variant=\"contained\"\n          color=\"primary\"\n        >\n          Download\n        </Button>\n      </DialogActions>\n    </>\n  );\n};\nexport default connect(mapStateToProps)(RoughDrawing);\n","import React from \"react\";\nimport { connect } from \"react-redux\";\n\nimport {\n  setZoom,\n  setModeMovePaper,\n  startSelect,\n  stackSelectedAnchors,\n  updateMagnetOption,\n  startCreatePathElement,\n} from \"redux/actions\";\nimport { MODE_MOVE_PAPER, MODE_SELECT } from \"redux/store/interactionModes\";\n\nimport SvgIcon from \"@material-ui/core/SvgIcon\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport Select from \"@material-ui/core/Select\";\nimport MenuItem from \"@material-ui/core/MenuItem\";\n\nimport ControlCameraIcon from \"@material-ui/icons/ControlCamera\";\nimport ZoomInIcon from \"@material-ui/icons/ZoomIn\";\nimport ZoomOutIcon from \"@material-ui/icons/ZoomOut\";\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n    startCreatePathElement: (name) => dispatch(startCreatePathElement(name)),\n    setZoom: (zoom) => dispatch(setZoom(zoom)),\n    setModeMovePaper: () => dispatch(setModeMovePaper()),\n    startSelect: () => dispatch(startSelect()),\n    stackSelectedAnchors: (direction) =>\n      dispatch(stackSelectedAnchors(direction)),\n    updateMagnetOption: (optionName, optionValue = null) =>\n      dispatch(updateMagnetOption(optionName, optionValue)),\n  };\n};\nconst mapStateToProps = (state) => {\n  return {\n    mode: state.mode,\n    zoom: state.displayOptions.zoom,\n    magnetsOptions: state.magnetsOptions,\n  };\n};\n\nconst ToolBar = ({\n  mode,\n  zoom,\n  magnetsOptions,\n  startCreatePathElement,\n  setZoom,\n  setModeMovePaper,\n  startSelect,\n  stackSelectedAnchors,\n  updateMagnetOption,\n}) => {\n  return (\n    <div\n      style={{\n        position: \"sticky\",\n        top: \"64px\",\n        padding: \"8px 2px\",\n        backgroundColor: \"#fafafa\",\n      }}\n    >\n      <IconButton\n        onMouseDown={(event) => {\n          startCreatePathElement(\"short\");\n          event.stopPropagation();\n        }}\n      >\n        <SvgIcon>\n          <circle cx=\"4\" cy=\"20\" r=\"2\" />\n          <circle cx=\"20\" cy=\"4\" r=\"2\" />\n          <path d=\"M 19.5,3.5 3.5,19.5 l 1,1 L 20.5,4.5 Z\" />\n        </SvgIcon>\n      </IconButton>\n      <IconButton\n        onMouseDown={(event) => {\n          startCreatePathElement(\"upRight\");\n          event.stopPropagation();\n        }}\n      >\n        <SvgIcon>\n          <circle cx=\"4\" cy=\"20\" r=\"2\" />\n          <circle cx=\"20\" cy=\"4\" r=\"2\" />\n          <path d=\"M 20,3.5 H 3.5 V 20 h 1 V 4.5 H 20 Z\" />\n        </SvgIcon>\n      </IconButton>\n      <IconButton\n        onMouseDown={(event) => {\n          startCreatePathElement(\"rightUp\");\n          event.stopPropagation();\n        }}\n      >\n        <SvgIcon>\n          <circle cx=\"4\" cy=\"20\" r=\"2\" />\n          <circle cx=\"20\" cy=\"4\" r=\"2\" />\n          <path d=\"M 5,20.5 20.5,20.5 l 0,-16.5 h -1 L 19.5,19.5 l -15.5,0 z\" />\n        </SvgIcon>\n      </IconButton>\n      |\n      <IconButton\n        color={mode === MODE_SELECT ? \"secondary\" : \"default\"}\n        onMouseDown={(event) => {\n          event.stopPropagation();\n          startSelect();\n        }}\n      >\n        <SvgIcon>\n          <path d=\"M10.07,14.27C10.57,14.03 11.16,14.25 11.4,14.75L13.7,19.74L15.5,18.89L13.19,13.91C12.95,13.41 13.17,12.81 13.67,12.58L13.95,12.5L16.25,12.05L8,5.12V15.9L9.82,14.43L10.07,14.27M13.64,21.97C13.14,22.21 12.54,22 12.31,21.5L10.13,16.76L7.62,18.78C7.45,18.92 7.24,19 7,19A1,1 0 0,1 6,18V3A1,1 0 0,1 7,2C7.24,2 7.47,2.09 7.64,2.23L7.65,2.22L19.14,11.86C19.57,12.22 19.62,12.85 19.27,13.27C19.12,13.45 18.91,13.57 18.7,13.61L15.54,14.23L17.74,18.96C18,19.46 17.76,20.05 17.26,20.28L13.64,21.97Z\" />\n        </SvgIcon>\n      </IconButton>\n      <IconButton\n        color={mode === MODE_MOVE_PAPER ? \"secondary\" : \"default\"}\n        onMouseDown={(event) => {\n          event.stopPropagation();\n          if (mode === MODE_MOVE_PAPER) {\n            startSelect();\n          } else {\n            setModeMovePaper();\n          }\n        }}\n      >\n        <ControlCameraIcon />\n      </IconButton>\n      <IconButton\n        disabled={zoom < 0.2}\n        onMouseDown={(event) => {\n          event.stopPropagation();\n          setZoom(zoom / 2);\n        }}\n      >\n        <ZoomOutIcon />\n      </IconButton>\n      {zoom}\n      <IconButton\n        disabled={zoom > 2}\n        onMouseDown={(event) => {\n          event.stopPropagation();\n          setZoom(zoom * 2);\n        }}\n      >\n        <ZoomInIcon />\n      </IconButton>\n      |\n      <IconButton\n        onMouseDown={(event) => {\n          event.stopPropagation();\n          stackSelectedAnchors(\"L\");\n        }}\n      >\n        <SvgIcon>\n          <path d=\"M22 13V19H6V13H22M6 5V11H16V5H6M2 2V22H4V2H2\" />\n        </SvgIcon>\n      </IconButton>\n      <IconButton\n        onMouseDown={(event) => {\n          event.stopPropagation();\n          stackSelectedAnchors(\"R\");\n        }}\n      >\n        <SvgIcon>\n          <path d=\"M18 13V19H2V13H18M8 5V11H18V5H8M20 2V22H22V2H20Z\" />\n        </SvgIcon>\n      </IconButton>\n      <IconButton\n        onMouseDown={(event) => {\n          event.stopPropagation();\n          stackSelectedAnchors(\"U\");\n        }}\n      >\n        <SvgIcon>\n          <path d=\"M11 22H5V6H11V22M19 6H13V16H19V6M22 2H2V4H22V2Z\" />\n        </SvgIcon>\n      </IconButton>\n      <IconButton\n        onMouseDown={(event) => {\n          event.stopPropagation();\n          stackSelectedAnchors(\"D\");\n        }}\n      >\n        <SvgIcon>\n          <path d=\"M11 18H5V2H11V18M19 8H13V18H19V8M22 20H2V22H22V20Z\" />\n        </SvgIcon>\n      </IconButton>\n      |\n      <IconButton\n        color={magnetsOptions.isGridAttracting ? \"secondary\" : \"default\"}\n        onMouseDown={(event) => {\n          event.stopPropagation();\n          updateMagnetOption(\"isGridAttracting\");\n        }}\n      >\n        <SvgIcon>\n          <path d=\"M0 6v1h24v-1ZM0 12v1h24v-1ZM0 18v1h24v-1Z\" />\n          <path d=\"M4 0h1v24h-1ZM11 0h1v24h-1ZM18 0h1v24h-1Z\" />\n          <circle cx={18.5} cy={18.5} r={3} />\n        </SvgIcon>\n      </IconButton>\n      <Select\n        value={magnetsOptions.gridSpace}\n        onChange={(event) =>\n          updateMagnetOption(\"gridSpace\", event.target.value)\n        }\n        onMouseDown={(event) => {\n          event.stopPropagation();\n        }}\n      >\n        <MenuItem value={0.5}>0.5cm</MenuItem>\n        <MenuItem value={1}>1cm</MenuItem>\n        <MenuItem value={2}>2cm</MenuItem>\n      </Select>\n      <IconButton\n        color={\n          magnetsOptions.isPathCoordinatesAttracting ? \"secondary\" : \"default\"\n        }\n        onMouseDown={(event) => {\n          event.stopPropagation();\n          updateMagnetOption(\"isPathCoordinatesAttracting\");\n        }}\n      >\n        <SvgIcon>\n          <path d=\"M4 11.5h20v1h-20Z\" />\n\n          <circle cx={2} cy={12} r={2} />\n          <circle cx={22} cy={12} r={2} />\n        </SvgIcon>\n      </IconButton>\n      <IconButton\n        color={magnetsOptions.isNodeAnchorsAttracting ? \"secondary\" : \"default\"}\n        onMouseDown={(event) => {\n          event.stopPropagation();\n          updateMagnetOption(\"isNodeAnchorsAttracting\");\n        }}\n      >\n        <SvgIcon>\n          <circle id=\"path858\" cx=\"2\" cy=\"16.5\" r=\"2\" />\n          <circle id=\"path834\" cx=\"2\" cy=\"7.5\" r=\"2\" />\n          <circle id=\"path838\" cx=\"22\" cy=\"12\" r=\"2\" />\n          <path d=\"m 22,11.5 v 1 L 18.5,12.5 7,21 7,17 H 2 V 16 H 7 L 7,8 H 2 v -1 L 7,7 7,3 18.5,11.5 Z\" />\n        </SvgIcon>\n      </IconButton>\n    </div>\n  );\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ToolBar);\n","import React, { forwardRef } from \"react\";\nimport svgComponents from \"components\";\nimport { connect } from \"react-redux\";\nimport { MODE_SELECT } from \"redux/store/interactionModes\";\nimport { toggleSelection, startDragging } from \"redux/actions\";\n\nconst mapDispatchToProps = (dispatch, { svgRef, displayOptions }) => {\n  return {\n    toggleSelection: (objectId, reset) =>\n      dispatch(toggleSelection(objectId, reset)),\n    startDragging: (x, y) => {\n      const {\n        x: xOffset,\n        y: yOffset,\n        width: svgWidth,\n        height: svgHeight,\n      } = svgRef.current.getBoundingClientRect();\n\n      const {\n        x: SVG_X,\n        y: SVG_Y,\n        width: SVG_WIDTH,\n        height: SVG_HEIGHT,\n        zoom,\n      } = displayOptions;\n\n      dispatch(\n        startDragging(\n          SVG_X + (x - xOffset) * (SVG_WIDTH / svgWidth),\n          SVG_Y + (y - yOffset) * (SVG_HEIGHT / svgHeight)\n        )\n      );\n    },\n  };\n};\nconst mapStateToProps = (state) => {\n  return {\n    components: state.components,\n    selection: state.selection,\n    mode: state.mode,\n  };\n};\n\nconst ComponentsDrawer = ({\n  components,\n  selection,\n  mode,\n  startDragging,\n  toggleSelection,\n}) => (\n  <>\n    {components.allIds.map(\n      (id) =>\n        components.byId[id].type &&\n        svgComponents[components.byId[id].type]({\n          ...components.byId[id],\n          onMouseDown:\n            mode === MODE_SELECT\n              ? (event) => {\n                  event.stopPropagation();\n                  if (\n                    !event.ctrlKey &&\n                    selection.includes(components.byId[id].id)\n                  ) {\n                    startDragging(\n                      event.nativeEvent.clientX,\n                      event.nativeEvent.clientY\n                    );\n                  } else {\n                    toggleSelection(components.byId[id].id, !event.ctrlKey);\n                  }\n                }\n              : null,\n          selected: selection.includes(components.byId[id].id),\n        })\n    )}\n  </>\n);\n\nconst ConnectedComponentsDrawer = connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(ComponentsDrawer);\n\nexport default forwardRef((props, ref) => (\n  <ConnectedComponentsDrawer {...props} svgRef={ref} />\n));\n","import React, { forwardRef } from \"react\";\nimport { connect } from \"react-redux\";\n\nimport Anchor from \"atoms/anchor\";\n\nconst mapStateToProps = (state) => {\n  return {\n    anchorIds: state.coordinates.allIds,\n  };\n};\n\nconst Anchors = ({ anchorIds, svgRef, displayOptions }) => (\n  <>\n    {anchorIds.map((id) => (\n      <Anchor key={id} id={id} ref={svgRef} displayOptions={displayOptions} />\n    ))}\n  </>\n);\n\nconst ConnectedAnchors = connect(mapStateToProps)(Anchors);\n\nexport default forwardRef((props, ref) => (\n  <ConnectedAnchors {...props} svgRef={ref} />\n));\n","import React, { useState } from \"react\";\nimport { connect } from \"react-redux\";\n\nimport { updatePosition, stopDragging } from \"redux/actions\";\nimport { MODE_DRAG } from \"redux/store/interactionModes\";\nconst mapDispatchToProps = (dispatch, { attractor, attracted }) => {\n  return {\n    updatePosition: (x, y) =>\n      dispatch(updatePosition({ x, y, attractor, attracted })),\n    stopDragging: () => dispatch(stopDragging()),\n  };\n};\n\nconst Magnet = ({\n  id,\n  x,\n  y,\n  dx,\n  dy,\n  color,\n  mode,\n  updatePosition,\n  stopDragging,\n}) => {\n  const [isUsed, setIsUsed] = useState(false);\n\n  return (\n    <>\n      {isUsed && (\n        <circle\n          cx={x}\n          cy={y}\n          r={5}\n          style={{\n            fill: \"none\",\n            stroke: \"red\",\n            strokeWidth: 2,\n          }}\n        />\n      )}\n      <circle\n        cx={x + dx}\n        cy={y + dy}\n        r={10}\n        style={{\n          fill: color || \"transparent\",\n        }}\n        onMouseEnter={(event) => {\n          event.stopPropagation();\n          updatePosition(x + dx, y + dy);\n          setIsUsed(true);\n        }}\n        onMouseLeave={() => setIsUsed(false)}\n        onMouseMove={\n          (event) => event.stopPropagation() //stop the propagation\n        }\n        onMouseUp={\n          mode === MODE_DRAG\n            ? (event) => {\n                event.stopPropagation();\n                stopDragging();\n              }\n            : null\n        }\n      />\n    </>\n  );\n};\n\nexport default connect(null, mapDispatchToProps)(Magnet);\n","import React from \"react\";\nimport { connect } from \"react-redux\";\n\nimport {\n  MODE_CREATE_PATH_ELEMENT,\n  MODE_CREATE_NODE_ELEMENT,\n  MODE_DRAG,\n} from \"redux/store/interactionModes\";\n\nimport Magnet from \"atoms/magnet\";\nimport { getElementAnchors } from \"components\";\n\nconst mapStateToProps = (state) => {\n  return {\n    coordinates: state.coordinates,\n    components: state.components,\n    mode: state.mode,\n    coordinatesToMove: state.coordinatesToMove,\n    selection: state.selection,\n    adhesivePoints: state.adhesivePoints || null,\n    ...state.magnetsOptions,\n  };\n};\n\nconst isMoving = (element, coordinatesToMove) => {\n  // help function to filter magnets\n  if (!coordinatesToMove) {\n    return false;\n  }\n  if (typeof element === \"string\" && coordinatesToMove.includes(element)) {\n    return true;\n  }\n  if (element.from && coordinatesToMove.includes(element.from)) {\n    return true;\n  }\n  if (element.to && coordinatesToMove.includes(element.to)) {\n    return true;\n  }\n  if (element.position && coordinatesToMove.includes(element.position)) {\n    return true;\n  }\n  return false;\n};\n\nconst Magnets = ({\n  mode,\n  coordinates,\n  components,\n  coordinatesToMove,\n  adhesivePoints,\n  isPathCoordinatesAttracting,\n  isNodeAnchorsAttracting,\n}) => {\n  // TODO : use a correct way to compute how many circle to draw\n  if (\n    mode !== MODE_DRAG &&\n    mode !== MODE_CREATE_NODE_ELEMENT &&\n    mode !== MODE_CREATE_PATH_ELEMENT\n  ) {\n    return null;\n  }\n\n  return (\n    <>\n      {isNodeAnchorsAttracting &&\n        components.allIds\n          .filter((id) => !isMoving(components.byId[id], coordinatesToMove))\n          .reduce(\n            (accumulator, id) => [\n              ...accumulator,\n              ...getElementAnchors({\n                ...components.byId[id],\n                fromCoords:\n                  components.byId[id].from &&\n                  coordinates.byId[components.byId[id].from],\n                toCoords:\n                  components.byId[id].to &&\n                  coordinates.byId[components.byId[id].to],\n                positionCoords:\n                  components.byId[id].position &&\n                  coordinates.byId[components.byId[id].position],\n              }).map(({ x, y, name }) =>\n                adhesivePoints.reduce(\n                  (\n                    accu,\n                    { type, dx, dy, name: nameAdhesive = \"\", id: idAdhesive }\n                  ) => {\n                    return [\n                      ...accu,\n                      <Magnet\n                        key={`${id}-${name}<-${idAdhesive}-${\n                          nameAdhesive || \"\"\n                        }`}\n                        x={x}\n                        dx={dx}\n                        y={y}\n                        dy={dy}\n                        mode={mode}\n                        attractor={{\n                          type: components.byId[id].position ? \"NODE\" : \"PATH\",\n                          name: name,\n                          id: id,\n                        }}\n                        attracted={{\n                          type: type,\n                          name: nameAdhesive,\n                          id: idAdhesive,\n                        }}\n                      />,\n                    ];\n                  },\n                  []\n                )\n              ),\n            ],\n            []\n          )}\n      {isPathCoordinatesAttracting &&\n        coordinates.allIds\n          .filter((id) => !isMoving(id, coordinatesToMove))\n          .map((id) =>\n            adhesivePoints.reduce(\n              (\n                accu,\n                { type, dx, dy, name: nameAdhesive = \"\", id: idAdhesive }\n              ) => {\n                return [\n                  ...accu,\n                  <Magnet\n                    key={`${id}<-${idAdhesive}-${nameAdhesive || \"\"}`}\n                    x={coordinates.byId[id].x}\n                    dx={dx}\n                    y={coordinates.byId[id].y}\n                    dy={dy}\n                    mode={mode}\n                    attractor={{ type: \"ANCHOR\", name: \"\", id: id }}\n                    attracted={{\n                      type: type,\n                      name: nameAdhesive,\n                      id: idAdhesive,\n                    }}\n                  />,\n                ];\n              },\n              []\n            )\n          )}\n    </>\n  );\n};\n\nexport default connect(mapStateToProps)(Magnets);\n","import React, { forwardRef } from \"react\";\nimport { connect } from \"react-redux\";\nimport components from \"components\";\nimport ToolBar from \"./toolbar\";\n\nimport {\n  updatePosition,\n  stopDragging,\n  validateFirstStepPathElementCreation,\n  invalidateFirstStepPathElementCreation,\n  savePathElementCreation,\n  nextStepOfElementCreation,\n  startRectangleSelection,\n  stopRectangleSelection,\n  startMovePaper,\n} from \"redux/actions\";\nimport {\n  MODE_DRAG,\n  MODE_CREATE_PATH_ELEMENT,\n  MODE_CREATE_NODE_ELEMENT,\n  MODE_SELECT,\n  MODE_RECTANGLE_SELECTION,\n  MODE_MOVE_PAPER,\n} from \"redux/store/interactionModes\";\n\nimport { MULTIPLICATIVE_CONST } from \"utils\";\n\nimport ComponentsDrawer from \"container/componentsDrawer\";\nimport Anchors from \"./anchors\";\nimport Magnets from \"./magnets\";\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n    updatePosition: (x, y, shiftPress) =>\n      dispatch(updatePosition({ x, y, shiftPress })),\n    stopDragging: () => dispatch(stopDragging()),\n    validateFirstStepPathElementCreation: () =>\n      dispatch(validateFirstStepPathElementCreation()),\n    invalidateFirstStepPathElementCreation: () =>\n      dispatch(invalidateFirstStepPathElementCreation()),\n    savePathElementCreation: () => dispatch(savePathElementCreation()),\n    nextStepOfElementCreation: () => dispatch(nextStepOfElementCreation()),\n    startRectangleSelection: (x, y) => dispatch(startRectangleSelection(x, y)),\n    stopRectangleSelection: () => dispatch(stopRectangleSelection()),\n    startMovePaper: (x, y) => dispatch(startMovePaper(x, y)),\n  };\n};\nconst mapStateToProps = (state) => {\n  return {\n    mode: state.mode,\n    newPath: state.newPath,\n    newNode: state.newNode,\n    rectangleSelection: state.rectangleSelection,\n    displayOptions: state.displayOptions,\n    isGridAttracting: state.magnetsOptions.isGridAttracting,\n    gridSpace: state.magnetsOptions.gridSpace,\n  };\n};\n\nconst Container = ({\n  svgRef,\n  mode,\n  newPath,\n  newNode,\n  rectangleSelection,\n  displayOptions,\n  isGridAttracting,\n  gridSpace,\n  stopDragging,\n  updatePosition,\n  validateFirstStepPathElementCreation,\n  invalidateFirstStepPathElementCreation,\n  savePathElementCreation,\n  nextStepOfElementCreation,\n  startRectangleSelection,\n  stopRectangleSelection,\n  startMovePaper,\n}) => {\n  const {\n    x: SVG_X,\n    y: SVG_Y,\n    width: SVG_WIDTH,\n    height: SVG_HEIGHT,\n  } = displayOptions;\n\n  const followMouse = (event) => {\n    const {\n      x: xOffset,\n      y: yOffset,\n      width: svgWidth,\n      height: svgHeight,\n    } = svgRef.current.getBoundingClientRect();\n\n    switch (mode) {\n      case MODE_DRAG:\n      case MODE_CREATE_PATH_ELEMENT:\n      case MODE_CREATE_NODE_ELEMENT:\n      case MODE_RECTANGLE_SELECTION:\n        updatePosition(\n          SVG_X +\n            (event.nativeEvent.clientX - xOffset) * (SVG_WIDTH / svgWidth),\n          SVG_Y +\n            (event.nativeEvent.clientY - yOffset) * (SVG_HEIGHT / svgHeight),\n          event.shiftKey\n        );\n        break;\n      default:\n        break;\n    }\n  };\n\n  const click = (event) => {\n    const {\n      x: xOffset,\n      y: yOffset,\n      width: svgWidth,\n      height: svgHeight,\n    } = svgRef.current.getBoundingClientRect();\n\n    switch (mode) {\n      case MODE_SELECT:\n        event.stopPropagation();\n        startRectangleSelection(\n          SVG_X +\n            (event.nativeEvent.clientX - xOffset) * (SVG_WIDTH / svgWidth),\n          SVG_Y +\n            (event.nativeEvent.clientY - yOffset) * (SVG_HEIGHT / svgHeight)\n        );\n        break;\n      case MODE_CREATE_PATH_ELEMENT:\n        event.stopPropagation();\n        if (newPath.isFromValidated) {\n          savePathElementCreation(\n            SVG_X +\n              (event.nativeEvent.clientX - xOffset) * (SVG_WIDTH / svgWidth),\n            SVG_Y +\n              (event.nativeEvent.clientY - yOffset) * (SVG_HEIGHT / svgHeight)\n          );\n        } else {\n          validateFirstStepPathElementCreation();\n        }\n        break;\n      case MODE_CREATE_NODE_ELEMENT:\n        event.stopPropagation();\n        nextStepOfElementCreation();\n        break;\n      case MODE_MOVE_PAPER:\n        event.stopPropagation();\n        startMovePaper(event.nativeEvent.clientX, event.nativeEvent.clientY);\n        break;\n      default:\n        break;\n    }\n  };\n\n  return (\n    <>\n      <ToolBar />\n      <svg\n        xmlns=\"http://www.w3.org/2000/svg\"\n        viewBox={`${SVG_X} ${SVG_Y} ${SVG_WIDTH} ${SVG_HEIGHT}`}\n        style={{ width: \"100%\", background: \"lightgray\" }}\n        onMouseMove={\n          mode === MODE_DRAG ||\n          mode === MODE_CREATE_PATH_ELEMENT ||\n          mode === MODE_CREATE_NODE_ELEMENT ||\n          mode === MODE_RECTANGLE_SELECTION\n            ? followMouse\n            : null\n        }\n        onMouseDown={click}\n        onMouseUp={\n          mode === MODE_DRAG\n            ? () => stopDragging()\n            : mode === MODE_RECTANGLE_SELECTION\n            ? (event) => {\n                event.stopPropagation();\n                stopRectangleSelection();\n              }\n            : null\n        }\n        ref={svgRef}\n      >\n        <defs>\n          <pattern\n            id=\"grid-magnets\"\n            x=\"-10\"\n            y=\"-10\"\n            width={gridSpace * MULTIPLICATIVE_CONST}\n            height={gridSpace * MULTIPLICATIVE_CONST}\n            patternUnits=\"userSpaceOnUse\"\n          >\n            <circle fill=\"gray\" cx=\"10\" cy=\"10\" r=\"3\"></circle>\n          </pattern>\n        </defs>\n        {isGridAttracting && (\n          <rect\n            x={SVG_X - 10}\n            y={SVG_Y - 10}\n            width=\"100%\"\n            height=\"100%\"\n            fill=\"url(#grid-magnets)\"\n          />\n        )}\n\n        <g id=\"drawingArea\">\n          <ComponentsDrawer ref={svgRef} displayOptions={displayOptions} />\n\n          {/* display the path element in during its creation */}\n\n          {mode === MODE_CREATE_PATH_ELEMENT && // the element\n            newPath &&\n            newPath.isFromValidated &&\n            newPath.to &&\n            newPath.to.x !== null &&\n            newPath.to.y !== null &&\n            newPath.from &&\n            newPath.from.x !== null &&\n            newPath.from.y !== null &&\n            components[newPath.elementType]({\n              fromCoords: newPath.from,\n              toCoords: newPath.to,\n            })}\n          {mode === MODE_CREATE_PATH_ELEMENT && //the anchor TO\n            newPath &&\n            newPath.isFromValidated &&\n            newPath.to.x !== null &&\n            newPath.to.y !== null && (\n              <circle cx={newPath.to.x} cy={newPath.to.y} r={5} />\n            )}\n          {mode === MODE_CREATE_PATH_ELEMENT && // the anchor FROM\n            newPath &&\n            newPath.from &&\n            newPath.from.x !== null &&\n            newPath.from.y !== null && (\n              <circle\n                cx={newPath.from.x}\n                cy={newPath.from.y}\n                r={5}\n                onMouseEnter={invalidateFirstStepPathElementCreation}\n              />\n            )}\n\n          {/* display the path element in during its creation */}\n\n          {mode === MODE_CREATE_NODE_ELEMENT && // the element\n            newNode &&\n            newNode.position &&\n            newNode.position.x !== null &&\n            newNode.position.y !== null &&\n            components[newNode.elementType]({\n              positionCoords: newNode.position,\n            })}\n          {mode === MODE_CREATE_NODE_ELEMENT && // the anchor POSITION\n            newNode &&\n            newNode.position &&\n            newNode.position.x !== null &&\n            newNode.position.y !== null && (\n              <circle cx={newNode.position.x} cy={newNode.position.y} r={5} />\n            )}\n\n          <Anchors ref={svgRef} displayOptions={displayOptions} />\n          <Magnets displayOptions={displayOptions} />\n\n          {mode === MODE_RECTANGLE_SELECTION && (\n            <path\n              d={`M ${rectangleSelection.x0} ${rectangleSelection.y0} L  ${rectangleSelection.x0} ${rectangleSelection.y1} L ${rectangleSelection.x1} ${rectangleSelection.y1} L  ${rectangleSelection.x1} ${rectangleSelection.y0} Z`}\n              style={{ fill: \"transparent\", stroke: \"red\", strokeWidth: 1 }}\n            />\n          )}\n        </g>\n      </svg>\n    </>\n  );\n};\n\nconst ConnectedContainer = connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(Container);\n\nexport default forwardRef((props, ref) => (\n  <ConnectedContainer {...props} svgRef={ref} />\n));\n","import { getElementAnchors } from \"components\";\nimport { MULTIPLICATIVE_CONST } from \"utils\";\n\nconst EPSILON = 0.01;\n\nexport const isNode = (element) => !!element.position;\n\nexport const isPath = (element) => !!element.to && !!element.from;\n\nexport const findCommonAnchor = (node1, node2) => {\n  // get two nodes element object\n  //   if they have anchors ate the same coordinate, it returns {parentAnchor, childAnchor}\n  //    - parentAnchor is the name of the node1 anchor\n  //    - childAnchor is the name of the node2 anchor\n  //   otherwise it reurns empty object\n\n  const anchors1 = getElementAnchors(node1);\n  const anchors2 = getElementAnchors(node2);\n\n  const rep = {};\n  anchors1.forEach(({ name: name1, x: x1, y: y1 }) => {\n    anchors2.forEach(({ name: name2, x: x2, y: y2 }) => {\n      if (Math.abs(x1 - x2) < EPSILON && Math.abs(y1 - y2) < EPSILON) {\n        rep.parentAnchor = name1;\n        rep.childAnchor = name2;\n      }\n    });\n  });\n\n  return rep;\n};\n\nexport const fillCoordWithAnchorsName = (\n  multipoleNodes,\n  coords,\n  nodeReference\n) => {\n  // Inputs :\n  //    - multiploeNodes is a list of nodes objects\n  //    - coords is an object of all the coords to use\n  //    - nodeReference is an object with information on nodes to draw\n  // If an anchor can be used as a coordinate, we givethe correct name to this coordinate\n\n  multipoleNodes.forEach((node) => {\n    const anchors = getElementAnchors(node);\n    anchors.forEach(({ name: anchorName, x, y }) => {\n      const coordId = getCoordId({ x, y });\n\n      if (coords[coordId] !== undefined && !coords[coordId].name) {\n        coords[coordId].name = `${nodeReference[node.id].name}.${anchorName}`;\n      }\n    });\n  });\n};\n\nexport const getPoles = ({ shape: shapeFrom }, { shape: shapeTo }) => {\n  // take in input coordinates objects fromCoords and toCoords of a path element\n  // return the string to set in order to have the correct shapes\n\n  // TODO could be improved : if for example the starting position is already a diamond, it should be -o and not d-o\n  const useStart = [\"*\", \"o\", \"d\"].includes(shapeFrom);\n  const useEnd = [\"*\", \"o\", \"d\"].includes(shapeTo);\n  if (useStart || useEnd) {\n    return `${useStart ? shapeFrom : \"\"}-${useEnd ? shapeTo : \"\"}`;\n  } else {\n    return \"\";\n  }\n};\n\nexport const simplifyNumber = (x) => {\n  // round number to 0.01 precision without useless 0\n  const rep = x.toFixed(2);\n  if (rep.slice(-3) === \".00\") {\n    return rep.slice(0, -3);\n  }\n  if (rep.slice(-1) === \"0\") {\n    return rep.slice(0, -1);\n  }\n  return rep;\n};\n\nexport const getCoordId = ({ x, y }) =>\n  `${typeof x === \"number\" ? x.toFixed(2) : x}-${\n    typeof y === \"number\" ? y.toFixed(2) : y\n  }`;\n\n// helper to write latex coordinate\nexport const getCoord = (x, y, coords, previousCoord) => {\n  const coordId = getCoordId({ x: x, y: y });\n\n  if (coords[coordId] && coords[coordId].name) {\n    return `(${coords[coordId].name})`;\n  }\n  if (previousCoord && previousCoord.x && previousCoord.y) {\n    if (previousCoord.x === x) {\n      return `++(0, ${simplifyNumber(\n        -(y - previousCoord.y) / MULTIPLICATIVE_CONST\n      )})`;\n    }\n    if (previousCoord.y === y) {\n      return `++(${simplifyNumber(\n        (x - previousCoord.x) / MULTIPLICATIVE_CONST\n      )}, 0)`;\n    }\n  }\n\n  return `(${simplifyNumber(x / MULTIPLICATIVE_CONST)}, ${simplifyNumber(\n    -y / MULTIPLICATIVE_CONST\n  )})`;\n};\n\n// function to filter elements in drawnElements from a listOfId\nexport const removeDrawnElements = (drawnElements) => (listeOfId) =>\n  listeOfId.filter((id) => !drawnElements[id]);\n\n// comparing function to decide which coordinate should be drawn first\nexport const compareCoord = (drawnElements, coords) => (coordId1, coordId2) => {\n  const { endingPaths: endingPaths1, nodeAssociated: nodeAssociated1 } = coords[\n    coordId1\n  ];\n  const { endingPaths: endingPaths2, nodeAssociated: nodeAssociated2 } = coords[\n    coordId2\n  ];\n\n  // we prefer starting from a coordinate with no arriving path element or as less a possible\n  if (\n    removeDrawnElements(drawnElements)(endingPaths1).length <\n    removeDrawnElements(drawnElements)(endingPaths2).length\n  ) {\n    return -1;\n  }\n  if (\n    removeDrawnElements(drawnElements)(endingPaths1).length >\n    removeDrawnElements(drawnElements)(endingPaths2).length\n  ) {\n    return 1;\n  }\n\n  // for equivalent number of arriving path, we prefer the one with the most important number of nodes\n  if (\n    removeDrawnElements(drawnElements)(nodeAssociated1).length >\n    removeDrawnElements(drawnElements)(nodeAssociated2).length\n  ) {\n    return -1;\n  }\n  if (\n    removeDrawnElements(drawnElements)(nodeAssociated1).length <\n    removeDrawnElements(drawnElements)(nodeAssociated2).length\n  ) {\n    return 1;\n  }\n  return 0;\n};\n","import { getPoles, getCoordId, getCoord, removeDrawnElements } from \"./utils\";\nimport { drawElement } from \"components\";\n// this function start from the coordinate \"startCoordId\" and follow a path by drawing components\nconst drawPathFromCoord = (\n  startCoordId,\n  coords,\n  state,\n  drawnElements,\n  nbOfCoordinateUsed\n) => {\n  const elementsToAdd = []; // list of the elements in the line to write\n  let previousCoord = {};\n\n  // variables to save some coordinates\n  let nbOfCreatedNames = 0;\n  let nextName = `point${nbOfCoordinateUsed + 1}`;\n\n  // create variable updatable\n  let currantCoordId = startCoordId;\n  let currantCoord = coords[currantCoordId];\n\n  // informations on the currant coord :\n  // path to start here, to finish here and node to draw here\n  let nextPaths = removeDrawnElements(drawnElements)(\n    currantCoord.startingPaths\n  );\n  let arrivingPaths = removeDrawnElements(drawnElements)(\n    currantCoord.endingPaths\n  );\n\n  let nextNode = removeDrawnElements(drawnElements)(\n    currantCoord.nodeAssociated\n  );\n\n  let coordIsNew = true; // this is for node because after drawing a node we are still at the same coordinate\n  while (nextPaths.length > 0 || nextNode.length > 0) {\n    // add draw if it's the beginning\n    if (elementsToAdd.length === 0) {\n      elementsToAdd.push(`\\\\draw `);\n    }\n\n    // add the coordinate if needed\n    if (coordIsNew) {\n      elementsToAdd.push(\n        `${getCoord(currantCoord.x, currantCoord.y, coords, previousCoord)} `\n      );\n      if (\n        !currantCoord.name &&\n        (nextPaths.length > 1 || arrivingPaths.length > 0)\n      ) {\n        //save name if we will need to start from here again or to arrive to here in the future\n        elementsToAdd.push(`coordinate(${nextName}) `);\n        coords[currantCoordId].name = nextName;\n\n        //get ready for next name\n        nbOfCreatedNames += 1;\n        nextName = `point${nbOfCoordinateUsed + nbOfCreatedNames + 1}`;\n      }\n    }\n\n    if (nextNode.length > 0) {\n      // create a node if possible\n      coordIsNew = false;\n      const nodeId = nextNode.pop();\n      const element = state.components.byId[nodeId];\n\n      elementsToAdd.push(`${drawElement(element)} `);\n      drawnElements[element.id] = true;\n    } else {\n      // create path if no more node is to draw\n      coordIsNew = true;\n      const element = state.components.byId[nextPaths[0]];\n\n      element.poles = getPoles(\n        state.coordinates.byId[element.from],\n        state.coordinates.byId[element.to]\n      );\n      elementsToAdd.push(drawElement(element));\n      drawnElements[element.id] = true;\n\n      // get information of the next coordinate\n      previousCoord = { ...currantCoord };\n\n      currantCoordId = getCoordId(state.coordinates.byId[element.to]);\n      currantCoord = coords[currantCoordId];\n      nextPaths = removeDrawnElements(drawnElements)(\n        currantCoord.startingPaths\n      );\n      arrivingPaths = removeDrawnElements(drawnElements)(\n        currantCoord.endingPaths\n      );\n      nextNode = removeDrawnElements(drawnElements)(\n        currantCoord.nodeAssociated\n      );\n    }\n  }\n\n  // We exit the while. So there is no elements to draw from the currant coordinate\n\n  if (elementsToAdd.length > 0) {\n    //check that we added something\n    if (coordIsNew) {\n      // if it's a new coordinate, we add it to the list\n      elementsToAdd.push(\n        `${getCoord(currantCoord.x, currantCoord.y, coords, previousCoord)} `\n      );\n      if (!currantCoord.name && arrivingPaths.length > 0) {\n        // we give it a name if needed\n        coords[currantCoordId].name = nextName;\n        elementsToAdd.push(`coordinate(${nextName}) `);\n        nbOfCreatedNames += 1;\n        nextName = `point${nbOfCoordinateUsed + nbOfCreatedNames + 1}`;\n      }\n    }\n\n    elementsToAdd.push(\";\"); //add the semi colon at the end of the line\n  }\n\n  // return the elements of the line and an indicator to update the number of coordinate saved\n  return [elementsToAdd, nbOfCreatedNames];\n};\n\nexport default drawPathFromCoord;\n","import { isMultyPole, getElementAnchors } from \"components\";\nimport { isPath, findCommonAnchor, getCoordId } from \"./utils\";\n\nconst initializeCoords = (state) => {\n  // dict created :\n  //\n  // coords = {[(x, y)]: {\n  //  x: number,\n  //  y: number,\n  //  name:null||str,\n  //  startingPaths: [list of elements id],\n  //  endingPaths: [list of elements id],\n  //  nodeAssociated: [list of elements id],\n  // }\n  //\n  // nodeReference = {\n  //   [nodeId]: {\n  //     name: null,\n  //     parent: null,\n  //     parentAnchor: null,\n  //     anchor: null,\n  //     associatedIds: [list of coordId relative to this node],\n  //   }\n  // }\n\n  const coords = {};\n  const nodeReference = {};\n\n  // check coord of all to[] element\n  state.components.allIds.forEach((id) => {\n    const element = state.components.byId[id];\n    if (isPath(element)) {\n      const fromCoord = state.coordinates.byId[element.from];\n      const toCoord = state.coordinates.byId[element.to];\n\n      const fromCoordId = getCoordId(fromCoord);\n      const toCoordId = getCoordId(toCoord);\n\n      if (coords[fromCoordId] === undefined) {\n        coords[fromCoordId] = {\n          x: fromCoord.x.toFixed(2),\n          y: fromCoord.y.toFixed(2),\n          name: null,\n          startingPaths: [element.id],\n          endingPaths: [],\n          nodeAssociated: [],\n        };\n      } else if (!coords[fromCoordId].startingPaths.includes(element.id)) {\n        coords[fromCoordId].startingPaths.push(element.id);\n      }\n\n      if (coords[toCoordId] === undefined) {\n        coords[toCoordId] = {\n          x: toCoord.x.toFixed(2),\n          y: toCoord.y.toFixed(2),\n          name: null,\n          endingPaths: [element.id],\n          startingPaths: [],\n          nodeAssociated: [],\n        };\n      } else if (!coords[toCoordId].endingPaths.includes(element.id)) {\n        coords[toCoordId].endingPaths.push(element.id);\n      }\n    } else {\n      nodeReference[element.id] = {\n        name: null,\n        parent: null,\n        parentAnchor: null,\n        anchor: null,\n        associatedIds: [],\n      };\n      if (!isMultyPole[element.type]) {\n        const positionCoord = state.coordinates.byId[element.position];\n        const positionCoordId = getCoordId(positionCoord);\n\n        if (coords[positionCoordId] === undefined) {\n          coords[positionCoordId] = {\n            x: positionCoord.x.toFixed(2),\n            y: positionCoord.y.toFixed(2),\n            name: null,\n            startingPaths: [],\n            endingPaths: [],\n            nodeAssociated: [element.id],\n          };\n        } else if (\n          !coords[positionCoordId].nodeAssociated.includes(element.id)\n        ) {\n          coords[positionCoordId].nodeAssociated.push(element.id);\n        }\n      }\n    }\n  });\n\n  const weakLinks = [...state.weakLinks];\n\n  // add node informations\n  state.weakLinks.forEach(({ anchorId, nodeId }) => {\n    const coord = state.coordinates.byId[anchorId];\n\n    if (\n      !coord.isNodePosition ||\n      !isMultyPole[\n        state.components.byId[state.coordinates.byId[anchorId].nodeId].type\n      ]\n    ) {\n      const coordId = getCoordId(coord);\n      if (!coords[coordId].nodeAssociated.includes(nodeId)) {\n        coords[coordId].nodeAssociated.push(nodeId);\n      }\n      if (!nodeReference[nodeId].associatedIds.includes(coordId)) {\n        nodeReference[nodeId].associatedIds.push(coordId);\n      }\n    }\n  });\n\n  const multipoleNodes = state.components.allIds.filter(\n    (id) => isMultyPole[state.components.byId[id].type]\n  );\n\n  multipoleNodes.forEach((parentNodeId, index) => {\n    const parent = { ...state.components.byId[parentNodeId] };\n    parent.positionCoords = { ...state.coordinates.byId[parent.position] };\n\n    // add multipole child (only those after in order to keep a directed tree structure)\n    multipoleNodes.slice(index + 1).forEach((childNodeIdId) => {\n      const child = { ...state.components.byId[childNodeIdId] };\n      child.positionCoords = { ...state.coordinates.byId[child.position] };\n\n      const { parentAnchor = null, childAnchor = null } = findCommonAnchor(\n        parent,\n        child\n      );\n\n      if (parentAnchor !== null && childAnchor !== null) {\n        nodeReference[childNodeIdId].parent = parentNodeId;\n        nodeReference[childNodeIdId].anchor = childAnchor;\n        nodeReference[childNodeIdId].parentAnchor = parentAnchor;\n        if (\n          !nodeReference[parentNodeId].associatedIds.includes(childNodeIdId)\n        ) {\n          nodeReference[parentNodeId].associatedIds.push(childNodeIdId);\n        }\n      }\n    });\n\n    // add link between coordinates and node anchors\n    Object.keys(coords).forEach((coordId) => {\n      const anchors = getElementAnchors(parent);\n\n      const { x: coordX, y: coordY } = coords[coordId];\n\n      anchors.forEach(({ x: anchorX, y: anchorY }) => {\n        if (\n          Math.abs(coordX - anchorX) < 0.01 &&\n          Math.abs(coordY - anchorY) < 0.01\n        ) {\n          if (!coords[coordId].nodeAssociated.includes(parent.id)) {\n            coords[coordId].nodeAssociated.push(parent.id);\n          }\n          if (!nodeReference[parent.id].associatedIds.includes(coordId)) {\n            nodeReference[parent.id].associatedIds.push(coordId);\n          }\n        }\n      });\n    });\n  });\n\n  return [coords, nodeReference];\n};\n\nexport default initializeCoords;\n","import { drawElement, isMultyPole } from \"components\";\nimport { isNode, fillCoordWithAnchorsName, compareCoord } from \"./utils\";\nimport drawPathFromCoord from \"./drawPath\";\nimport initializeCoords from \"./initializeCoords\";\n\n// =============================================\n// THIS IS A NIGHTMARE\n// FIRST THING TO REFACTO\n//  -> first idea : use auxiliary function with long names to be precise\n//  -> put every information in nodeRef and Coords.\n//          After there creation we should not need of the state anymore\n// ==============================================\n\nfunction getCircuitikz(state) {\n  const [coords, nodeReference] = initializeCoords(state);\n\n  const drawnElements = {}; //[id]:true when element of this id is drawn\n  let nbOfCoordinateUsed = 0; // counter to save coordinate with name : point1, point2, ...\n  const nodeNumberOfNames = {}; // conter for naming multi-pole (in order to start from 1 for each type of node) exemple: nmos1, pmos1, nmos2\n  const circuitText = [\"\\\\begin{circuitikz}\"];\n\n  // ========================\n  // 1. Draw multi-pole nodes\n  // ========================\n  const multiAnchorNodeIds = state.components.allIds\n    .filter((elementId) => {\n      // filter nodes to get only multi-pole\n      const element = state.components.byId[elementId];\n      return isNode(element) && isMultyPole[element.type];\n    })\n    .sort((id1, id2) => {\n      // sort them according to there dependencies\n      if (nodeReference[id1].parent === null) {\n        return -1; //if they are both null (without parent) id1 is preferred (so we do not need to check id2)\n      }\n      if (nodeReference[id2].parent === null) {\n        return 1; //if we are here, it's that id1 is not null. but id2 is so we prefer it\n      }\n      if (nodeReference[id2].parent === id1) {\n        //id1 is parent of id2\n        return -1; //so 1 must be printed before 2\n      }\n      if (nodeReference[id1].parent === id2) {\n        //id2 is parent of id1\n        return -1; //so 2 must be printed before 1\n      }\n      return -1;\n    });\n\n  multiAnchorNodeIds.forEach((elementId) => {\n    const element = state.components.byId[elementId];\n\n    // get parent information for positioning\n    const positionInformations = {};\n    if (nodeReference[elementId].parent !== null) {\n      positionInformations.position = `${\n        nodeReference[nodeReference[elementId].parent].name\n      }.${nodeReference[elementId].parentAnchor}`;\n\n      positionInformations.anchor = nodeReference[elementId].anchor;\n    } else {\n      positionInformations.x = state.coordinates.byId[element.position].x;\n      positionInformations.y = state.coordinates.byId[element.position].y;\n    }\n\n    // check if need to create name\n    const nameNeeded = nodeReference[elementId].associatedIds.length > 0;\n    if (nameNeeded) {\n      const name = `${element.type}${nodeNumberOfNames[element.type] || 1}`;\n\n      circuitText.push(drawElement(element, positionInformations, name));\n\n      nodeReference[element.id].name = name;\n      nodeNumberOfNames[element.type] =\n        (nodeNumberOfNames[element.type] || 1) + 1;\n    } else {\n      circuitText.push(drawElement(element, positionInformations));\n    }\n\n    drawnElements[elementId] = true; //note that this node is ok\n  });\n\n  // =====================================================\n  // 2. Associate anchor name to coordinates when possible\n  // =====================================================\n  // TODO : an good idea could be not to trust weak links but to compare anchor coordinate with used coordinates\n\n  const multipoleNodes = state.components.allIds\n    .filter((id) => isMultyPole[state.components.byId[id].type])\n    .map((id) => {\n      const node = { ...state.components.byId[id] };\n      node.positionCoords = { ...state.coordinates.byId[node.position] };\n      return node;\n    });\n\n  fillCoordWithAnchorsName(multipoleNodes, coords, nodeReference, state);\n\n  // ====================================\n  // 3. Draw path from multi-pole coordinates\n  // ====================================\n  multiAnchorNodeIds.forEach((nodeId) => {\n    nodeReference[nodeId].associatedIds.forEach((childId) => {\n      if (coords[childId] !== undefined) {\n        const [elementsToAdd, nbOfCreatedNames] = drawPathFromCoord(\n          childId,\n          coords,\n          state,\n          drawnElements,\n          nbOfCoordinateUsed\n        );\n\n        if (elementsToAdd.length > 0) {\n          nbOfCoordinateUsed += nbOfCreatedNames;\n          circuitText.push(elementsToAdd.join(\"\"));\n        }\n      }\n    });\n  });\n\n  // ===========================\n  // 4. Draw all remaining paths\n  // ===========================\n  const coordsToPlot = Object.keys(coords);\n  while (coordsToPlot.length > 0) {\n    // get coordinate id to start the path according to \"compareCoord\" function\n    const idToPlot = coordsToPlot.sort(compareCoord(drawElement, coords))[0];\n\n    //plot it\n    if (coords[idToPlot] !== undefined) {\n      const [elementsToAdd, nbOfCreatedNames] = drawPathFromCoord(\n        idToPlot,\n        coords,\n        state,\n        drawnElements,\n        nbOfCoordinateUsed\n      );\n\n      if (elementsToAdd.length > 0) {\n        nbOfCoordinateUsed += nbOfCreatedNames;\n        circuitText.push(elementsToAdd.join(\"\"));\n      } else {\n        // remove it from the list because there is no more things to draw from here\n        const index = coordsToPlot.indexOf(idToPlot);\n        coordsToPlot.splice(index, 1);\n      }\n    } else {\n      // remove it from the list because this coordinate does not exist\n      const index = coordsToPlot.indexOf(idToPlot);\n      coordsToPlot.splice(index, 1);\n    }\n  }\n  circuitText.push(\"\\\\end{circuitikz}\");\n\n  return circuitText;\n}\n\nexport default getCircuitikz;\n","import React from \"react\";\nimport { connect } from \"react-redux\";\n\nimport getCircuitikz from \"redux/store/getCircuitikz\";\n\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\nimport DialogContent from \"@material-ui/core/DialogContent\";\nimport DialogActions from \"@material-ui/core/DialogActions\";\nimport Button from \"@material-ui/core/Button\";\n\nconst copyCode = (code) => {\n  navigator.clipboard.writeText(code).then(\n    function () {},\n    function () {}\n  );\n};\n\nconst mapStateToProps = (state) => {\n  return { code: getCircuitikz(state) };\n};\n\nconst LatexDisplay = ({ code }) => (\n  <>\n    <DialogTitle>Your LaTEX code</DialogTitle>\n    <DialogContent>\n      <pre>\n        {code.slice(0, code.length - 1).join(\"\\n\\t\") +\n          \"\\n\" +\n          code[code.length - 1]}\n      </pre>\n    </DialogContent>\n    <DialogActions>\n      <Button\n        autoFocus\n        onClick={() => {\n          copyCode(\n            code.slice(0, code.length - 1).join(\"\\n\\t\") +\n              \"\\n\" +\n              code[code.length - 1]\n          );\n        }}\n      >\n        Copy\n      </Button>\n    </DialogActions>\n  </>\n);\n\nexport default connect(mapStateToProps, null)(LatexDisplay);\n","import React from \"react\";\nimport { connect } from \"react-redux\";\n\nimport { updateComponent } from \"redux/actions\";\n\nimport List from \"@material-ui/core/List\";\nimport ListItem from \"@material-ui/core/ListItem\";\nimport ListItemText from \"@material-ui/core/ListItemText\";\nimport ListItemSecondaryAction from \"@material-ui/core/ListItemSecondaryAction\";\n\nimport Input from \"@material-ui/core/Input\";\nimport Checkbox from \"@material-ui/core/Checkbox\";\nimport Switch from \"@material-ui/core/Switch\";\nimport FormControlLabel from \"@material-ui/core/FormControlLabel\";\nimport TextField from \"@material-ui/core/TextField\";\nimport Select from \"@material-ui/core/Select\";\nimport MenuItem from \"@material-ui/core/MenuItem\";\nimport SvgIcon from \"@material-ui/core/SvgIcon\";\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n    handleInputChange: (id, name) => (value) => (event) =>\n      dispatch(\n        updateComponent(id, name, value === null ? event.target.value : value)\n      ),\n  };\n};\n\nconst mapStateToProps = (state) => {\n  if (state.selection.length < 1) {\n    return {};\n  }\n  const idOfInterest = state.selection[0];\n\n  return {\n    id: idOfInterest,\n    options:\n      state.components.byId[idOfInterest] ||\n      state.coordinates.byId[idOfInterest] ||\n      {},\n  };\n};\n\nconst inputElement = {\n  label: (value, update) => (\n    <ListItem>\n      <TextField\n        label=\"Label\"\n        value={value}\n        onKeyDown={(e) => e.stopPropagation()}\n        onChangeCapture={update(null)}\n      />\n    </ListItem>\n  ),\n  annotation: (value, update) => (\n    <ListItem>\n      <TextField\n        label=\"Annotation\"\n        value={value}\n        onKeyDown={(e) => e.stopPropagation()}\n        onChangeCapture={update(null)}\n      />\n    </ListItem>\n  ),\n  angle: (value, update) => (\n    <ListItem button>\n      <ListItemText primary=\"rotation\" />\n      <ListItemSecondaryAction>\n        <Input\n          value={value || 0}\n          onKeyDown={(e) => e.stopPropagation()}\n          onChangeCapture={update(null)}\n          inputProps={{\n            step: 5,\n            min: -180,\n            max: 180,\n            type: \"number\",\n          }}\n        />\n      </ListItemSecondaryAction>\n    </ListItem>\n  ),\n  wiper_pos: (value, update) => (\n    <ListItem button>\n      <ListItemText primary=\"wiper position\" />\n      <ListItemSecondaryAction>\n        <Input\n          value={value || 0}\n          onKeyDown={(e) => e.stopPropagation()}\n          onChangeCapture={update(null)}\n          inputProps={{\n            step: 0.01,\n            min: 0,\n            max: 1,\n            type: \"number\",\n          }}\n        />\n      </ListItemSecondaryAction>\n    </ListItem>\n  ),\n  isOpen: (value, update) => (\n    <ListItem>\n      <FormControlLabel\n        control={\n          <Switch checked={value} onChange={update(!value)} name=\"isOpen\" />\n        }\n        label=\"isOpen\"\n      />\n    </ListItem>\n  ),\n  withArrow: (value, update) => (\n    <ListItem>\n      <FormControlLabel\n        control={\n          <Switch checked={value} onChange={update(!value)} name=\"withArrow\" />\n        }\n        label=\"withArrow\"\n      />\n    </ListItem>\n  ),\n  mirror: (value, update) => (\n    <ListItem>\n      <FormControlLabel\n        control={\n          <Switch checked={value} onChange={update(!value)} name=\"mirror\" />\n        }\n        label=\"mirror\"\n      />\n    </ListItem>\n  ),\n  invert: (value, update) => (\n    <ListItem>\n      <FormControlLabel\n        control={\n          <Switch checked={value} onChange={update(!value)} name=\"invert\" />\n        }\n        label=\"Invert\"\n      />\n    </ListItem>\n  ),\n  shape: (value, update) => (\n    <ListItem>\n      <ListItemText primary=\"shape\" />\n      <ListItemSecondaryAction>\n        <Select value={value} onChange={update(null)} autoFocus={true}>\n          <MenuItem value=\"\">\n            <SvgIcon></SvgIcon>\n          </MenuItem>\n          <MenuItem value=\"*\">\n            <SvgIcon>\n              <circle\n                cx={12}\n                cy={12}\n                r={5}\n                style={{ fill: \"black\", stroke: \"black\" }}\n              />\n            </SvgIcon>\n          </MenuItem>\n          <MenuItem value=\"o\">\n            <SvgIcon>\n              <circle\n                cx={12}\n                cy={12}\n                r={5}\n                style={{ fill: \"white\", stroke: \"black\", strokeWidth: 2 }}\n              />\n            </SvgIcon>\n          </MenuItem>\n          <MenuItem value=\"d\">\n            <SvgIcon>\n              <path\n                d={`M ${12 + 6} ${12}\n                  L ${12} ${12 + 6}\n                  L ${12 - 6} ${12}\n                  L ${12} ${12 - 6} Z`}\n                style={{ fill: \"black\", stroke: \"black\" }}\n              />\n            </SvgIcon>\n          </MenuItem>\n        </Select>\n      </ListItemSecondaryAction>\n    </ListItem>\n  ),\n  currant: (value, update) => (\n    <>\n      <ListItem button>\n        <ListItemText primary=\"Currant\" />\n        <ListItemSecondaryAction>\n          <Checkbox\n            checked={value.show}\n            onChange={update({ ...value, show: !value.show })}\n            inputProps={{ \"aria-label\": \"primary checkbox\" }}\n          />\n        </ListItemSecondaryAction>\n      </ListItem>\n      <ListItem>\n        <TextField\n          disabled={!value.show}\n          label=\"Currant name\"\n          value={value.currantText}\n          onKeyDown={(e) => e.stopPropagation()}\n          onChangeCapture={(e) =>\n            update({ ...value, currantText: e.target.value })()\n          }\n        />\n      </ListItem>\n      <ListItem>\n        <FormControlLabel\n          disabled={!value.show}\n          control={\n            <Switch\n              checked={value.currantIsForward}\n              onChange={update({\n                ...value,\n                currantIsForward: !value.currantIsForward,\n              })}\n              name=\"arrow direction\"\n            />\n          }\n          label=\"direction\"\n        />\n      </ListItem>\n      <ListItem>\n        <FormControlLabel\n          disabled={!value.show}\n          control={\n            <Switch\n              checked={value.currantIsAfter}\n              onChange={update({\n                ...value,\n                currantIsAfter: !value.currantIsAfter,\n              })}\n              name=\"currant position\"\n            />\n          }\n          label=\"arrow position\"\n        />\n      </ListItem>\n      <ListItem>\n        <FormControlLabel\n          disabled={!value.show}\n          control={\n            <Switch\n              checked={value.currantIsAbove}\n              onChange={update({\n                ...value,\n                currantIsAbove: !value.currantIsAbove,\n              })}\n              name=\"text position\"\n            />\n          }\n          label=\"text position\"\n        />\n      </ListItem>\n    </>\n  ),\n};\n\nconst ElementOptions = ({ handleInputChange, id, options = null }) => {\n  if (options === null) {\n    return null;\n  }\n  return (\n    <List>\n      {Object.keys(options)\n        .map((name) => [\n          name,\n          Object.keys(inputElement).findIndex((n) => n === name),\n        ])\n        .filter(([, index]) => index >= 0)\n        .sort(([, i1], [, i2]) => i1 - i2)\n        .map(([name]) => (\n          <div key={name}>\n            {inputElement[name](options[name], handleInputChange(id, name))}\n          </div>\n        ))}\n    </List>\n  );\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ElementOptions);\n","import React, { useState } from \"react\";\n\nimport { connect } from \"react-redux\";\nimport { startCreatePathElement, startCreateNodeElement } from \"redux/actions\";\n\nimport { isPath, structure } from \"components\";\n\nimport List from \"@material-ui/core/List\";\nimport ListItem from \"@material-ui/core/ListItem\";\nimport ListItemText from \"@material-ui/core/ListItemText\";\n\nimport ExpandLess from \"@material-ui/icons/ExpandLess\";\nimport ExpandMore from \"@material-ui/icons/ExpandMore\";\nimport Collapse from \"@material-ui/core/Collapse\";\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n    startCreatePathElement: (elementType) =>\n      dispatch(startCreatePathElement(elementType)),\n    startCreateNodeElement: (elementType) =>\n      dispatch(startCreateNodeElement(elementType)),\n  };\n};\n\nconst LeftMenu = ({ startCreatePathElement, startCreateNodeElement }) => {\n  const [openSection, setOpenSection] = useState();\n\n  return (\n    <List>\n      {Object.keys(structure).map((sectionName) => (\n        <div key={sectionName}>\n          <ListItem\n            button\n            onClick={() =>\n              setOpenSection(openSection === sectionName ? null : sectionName)\n            }\n          >\n            <ListItemText primary={sectionName} />\n            {openSection === sectionName ? <ExpandLess /> : <ExpandMore />}\n          </ListItem>\n          <Collapse\n            in={openSection === sectionName}\n            timeout=\"auto\"\n            unmountOnExit\n          >\n            <List>\n              {structure[sectionName].map((name) => (\n                <ListItem\n                  button\n                  key={name}\n                  onMouseDown={(event) => {\n                    event.stopPropagation();\n                    if (isPath[name]) {\n                      startCreatePathElement(name);\n                    } else {\n                      startCreateNodeElement(name);\n                    }\n                  }}\n                >\n                  <ListItemText\n                    primary={name}\n                    style={{ paddingLeft: \"20px\" }}\n                  />\n                </ListItem>\n              ))}\n            </List>\n          </Collapse>\n        </div>\n      ))}\n    </List>\n  );\n};\n\nexport default connect(null, mapDispatchToProps)(LeftMenu);\n","export default __webpack_public_path__ + \"static/media/options.0269d8f9.png\";","export default __webpack_public_path__ + \"static/media/save.4dd25b28.png\";","export default __webpack_public_path__ + \"static/media/selectElement.e081ff5c.png\";","import React, { useState } from \"react\";\n\nimport Dialog from \"@material-ui/core/Dialog\";\nimport DialogContent from \"@material-ui/core/DialogContent\";\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\nimport List from \"@material-ui/core/List\";\nimport ListItem from \"@material-ui/core/ListItem\";\nimport ListItemText from \"@material-ui/core/ListItemText\";\nimport MobileStepper from \"@material-ui/core/MobileStepper\";\nimport Button from \"@material-ui/core/Button\";\n\nimport HelpOutlineIcon from \"@material-ui/icons/HelpOutline\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport KeyboardArrowLeft from \"@material-ui/icons/KeyboardArrowLeft\";\nimport KeyboardArrowRight from \"@material-ui/icons/KeyboardArrowRight\";\n\nimport options from \"./options.png\";\nimport save from \"./save.png\";\nimport selectElement from \"./selectElement.png\";\n\nconst titles = [\n  \"Select components to draw from the left menu.\",\n  \"Modify properties of selected component with right menu\",\n  \"Save and Export your creation with latex, png or json\",\n  \"Some shortcut to simplify your experience\",\n];\n\nconst images = [selectElement, options, save];\n\nconst shortcuts = [\n  {\n    key: \"S\",\n    description: \"Split coordinate point in multiple points\",\n  },\n  {\n    key: \"Shift\",\n    description: \"Lock dragging along x or y axis\",\n  },\n  {\n    key: \"Ctrl\",\n    description: \"Allow to select multiple element\",\n  },\n  {\n    key: \"Suppr\",\n    description: \"Delete selected component (only one)\",\n  },\n  {\n    key: \"Arrows\",\n    description: \"Stack coordinates along given direction\",\n  },\n];\n\nconst HelpShortcut = ({ classes }) => {\n  const [showHelp, setShowHelp] = useState(!localStorage.getItem(\"dontShow\"));\n  const [helpStep, setHelpStep] = useState(\n    localStorage.getItem(\"helpStep\") || 0\n  );\n\n  const openHelp = () => setShowHelp(true);\n  const closeHelp = () => {\n    setShowHelp(false);\n    localStorage.setItem(\"dontShow\", true);\n  };\n\n  const next = () => {\n    setHelpStep(Math.min(3, helpStep + 1));\n    localStorage.setItem(\"dontShow\", Math.min(3, helpStep + 1));\n  };\n  const prev = () => {\n    setHelpStep(Math.max(0, helpStep - 1));\n    localStorage.setItem(\"dontShow\", Math.max(3, helpStep - 1));\n  };\n\n  return (\n    <>\n      <IconButton\n        edge=\"start\"\n        className={classes.menuButton}\n        color=\"inherit\"\n        aria-label=\"open drawer\"\n        onClick={openHelp}\n      >\n        <HelpOutlineIcon />\n      </IconButton>\n      <Dialog fullWidth maxWidth=\"sm\" open={showHelp} onClose={closeHelp}>\n        <DialogTitle>{titles[helpStep]}</DialogTitle>\n        <DialogContent>\n          {helpStep === 3 ? (\n            <List>\n              {shortcuts.map((shortcut) => (\n                <ListItem key={shortcut.key}>\n                  <ListItemText\n                    classes={{ primary: classes.keyboardDescription }}\n                    primary={shortcut.description}\n                  />\n                  <span className={classes.keyboardKey}>{shortcut.key}</span>\n                </ListItem>\n              ))}\n            </List>\n          ) : (\n            <img\n              src={images[helpStep]}\n              alt={titles[helpStep]}\n              style={{ width: \"100%\" }}\n            />\n          )}\n        </DialogContent>\n        <MobileStepper\n          variant=\"dots\"\n          steps={4}\n          position=\"static\"\n          activeStep={helpStep}\n          nextButton={\n            <Button size=\"small\" onClick={next} disabled={helpStep === 3}>\n              Next\n              <KeyboardArrowRight />\n            </Button>\n          }\n          backButton={\n            <Button size=\"small\" onClick={prev} disabled={helpStep === 0}>\n              <KeyboardArrowLeft />\n              Back\n            </Button>\n          }\n        />\n      </Dialog>\n    </>\n  );\n};\n\nexport default HelpShortcut;\n","import React, { useState, useRef, useEffect } from \"react\";\n\nimport { connect } from \"react-redux\";\n\nimport { loadProject } from \"redux/actions\";\n\nimport IconButton from \"@material-ui/core/IconButton\";\nimport Menu from \"@material-ui/core/Menu\";\nimport MenuItem from \"@material-ui/core/MenuItem\";\n\nimport FileCopyIcon from \"@material-ui/icons/FileCopy\";\n\nconst mapStateToProps = (state) => {\n  return {\n    components: state.components,\n    coordinates: state.coordinates,\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n    loadProject: ({ components, coordinates }) =>\n      dispatch(loadProject({ components, coordinates })),\n  };\n};\n\nconst FileManager = ({ components, coordinates, loadProject, ...props }) => {\n  const [isOpen, setIsOpen] = useState(false);\n  const anchorEl = useRef();\n  const [href, setHref] = useState(\"\");\n\n  useEffect(() => {\n    setHref(\n      \"data:text/json;charset=utf-8,\" +\n        encodeURIComponent(JSON.stringify({ components, coordinates }))\n    );\n  }, [components, coordinates]);\n\n  const open = () => setIsOpen(true);\n  const close = () => setIsOpen(false);\n\n  const handleUpload = (uploadedFile) => {\n    const fileReader = new FileReader();\n\n    fileReader.onloadend = () => {\n      try {\n        const data = JSON.parse(fileReader.result);\n        if (data.components && data.coordinates) {\n          loadProject(data);\n        }\n      } catch (e) {\n        console.log(\"not a json\");\n      }\n    };\n\n    if (uploadedFile !== undefined) fileReader.readAsText(uploadedFile);\n  };\n\n  return (\n    <>\n      <IconButton\n        {...props}\n        aria-controls=\"simple-menu\"\n        aria-haspopup=\"true\"\n        onClick={isOpen ? close : open}\n        ref={anchorEl}\n      >\n        <FileCopyIcon />\n      </IconButton>\n      <Menu anchorEl={anchorEl.current} open={isOpen} onClose={close}>\n        <div>\n          <input\n            id=\"contained-button-file\"\n            type=\"file\"\n            style={{ display: \"none\" }}\n            onChange={(e) => {\n              handleUpload(e.target.files[0]);\n            }}\n          />\n          <label htmlFor=\"contained-button-file\">\n            <MenuItem variant=\"contained\" color=\"primary\" component=\"span\">\n              Open\n            </MenuItem>\n          </label>\n        </div>\n        <MenuItem\n          component=\"a\"\n          color=\"primary\"\n          href={href}\n          download=\"circuit.physSchem\"\n        >\n          Save\n        </MenuItem>\n      </Menu>\n    </>\n  );\n};\nexport default connect(mapStateToProps, mapDispatchToProps)(FileManager);\n","import React, { useEffect, useState, useRef } from \"react\";\nimport { connect } from \"react-redux\";\n\nimport { Link as RouterLink } from \"react-router-dom\";\nimport Link from \"@material-ui/core/Link\";\n\nimport {\n  MODE_DRAG,\n  MODE_SELECT,\n  MODE_MOVE_PAPER,\n} from \"redux/store/interactionModes\";\n\nimport RoughDrawing from \"container/RoughDrawing\";\nimport Container from \"container/index.js\";\nimport LatexDisplay from \"container/latexDisplay\";\nimport ElementOptions from \"container/elementOptions\";\nimport LeftMenu from \"container/leftMenu\";\nimport Tutorial from \"container/tutorial\";\nimport FileManager from \"container/FileManager\";\n\nimport Drawer from \"@material-ui/core/Drawer\";\nimport AppBar from \"@material-ui/core/AppBar\";\nimport Toolbar from \"@material-ui/core/Toolbar\";\nimport Typography from \"@material-ui/core/Typography\";\n\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport CssBaseline from \"@material-ui/core/CssBaseline\";\n\nimport Button from \"@material-ui/core/Button\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport Dialog from \"@material-ui/core/Dialog\";\n\nimport PhotoLibraryIcon from \"@material-ui/icons/PhotoLibrary\";\n\nimport {\n  startSelect,\n  splitAnchor,\n  stackSelectedAnchors,\n  deleteElement,\n  movePaper,\n  endMovePaper,\n} from \"redux/actions\";\n\nconst drawerWidth = 180;\nconst optionDrawerWidth = 280;\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    display: \"flex\",\n  },\n  appBar: {\n    zIndex: theme.zIndex.drawer + 1,\n  },\n  toolBar: {\n    justifyContent: \"space-between\",\n  },\n  drawer: {\n    width: drawerWidth,\n    flexShrink: 0,\n  },\n  drawerPaper: {\n    width: drawerWidth,\n  },\n  drawerContainer: {\n    overflow: \"auto\",\n  },\n  optionDrawer: {},\n  optionDrawerPaper: { width: optionDrawerWidth },\n  content: {\n    flexGrow: 1,\n    padding: `${theme.spacing(8)} 0`,\n  },\n  menuButton: {\n    marginRight: theme.spacing(2),\n  },\n\n  keyboardKey: {\n    backgroundColor: \"#eee\",\n    borderRadius: \"3px\",\n    border: \"1px solid #b4b4b4\",\n    boxShadow:\n      \"0 1px 1px rgba(0, 0, 0, .2), 0 2px 0 0 rgba(255, 255, 255, .7) inset\",\n    color: \"#333\",\n    display: \"inline-block\",\n    fontSize: \"1.2em\",\n    fontWeight: 600,\n    lineHeight: 1,\n    padding: \"8px 8px\",\n  },\n  keyboardDescription: {\n    fontSize: \"1.1rem\",\n  },\n}));\n\nconst mapStateToProps = (state) => {\n  return {\n    mode: state.mode,\n    selection: state.selection,\n    isPaperDragged: state.displayOptions.dragging.isDragging,\n  };\n};\nconst mapDispatchToProps = (dispatch) => {\n  return {\n    startSelect: () => dispatch(startSelect()),\n    splitAnchor: () => dispatch(splitAnchor()),\n    stackSelectedAnchors: (direction) =>\n      dispatch(stackSelectedAnchors(direction)),\n    deleteElement: (selection) => {\n      dispatch(deleteElement(selection));\n    },\n    movePaper: (x, y) => dispatch(movePaper(x, y)),\n    endMovePaper: () => dispatch(endMovePaper()),\n  };\n};\n\nfunction App({\n  mode,\n  selection,\n  isPaperDragged,\n  startSelect,\n  splitAnchor,\n  stackSelectedAnchors,\n  deleteElement,\n  movePaper,\n  endMovePaper,\n}) {\n  const classes = useStyles();\n\n  const [showCode, setShowCode] = useState(false);\n  const [showRough, setShowRough] = useState(false);\n\n  const openRough = () => setShowRough(true);\n  const openCode = () => setShowCode(true);\n\n  const closeRough = () => setShowRough(false);\n  const closeCode = () => setShowCode(false);\n\n  const svgRef = useRef();\n\n  useEffect(() => {\n    const handleKeyDown = (event) => {\n      switch (event.key) {\n        case \"ArrowRight\":\n          stackSelectedAnchors(\"R\");\n          break;\n        case \"ArrowLeft\":\n          stackSelectedAnchors(\"L\");\n          break;\n        case \"ArrowUp\":\n          stackSelectedAnchors(\"U\");\n          break;\n        case \"ArrowDown\":\n          stackSelectedAnchors(\"D\");\n          break;\n        case \"s\":\n          splitAnchor();\n          break;\n        case \"Delete\":\n          deleteElement(selection);\n          break;\n        default:\n          console.log(event.key);\n          break;\n      }\n    };\n    document.addEventListener(\"keydown\", handleKeyDown);\n\n    return () => {\n      document.removeEventListener(\"keydown\", handleKeyDown);\n    };\n  }, [splitAnchor, stackSelectedAnchors, deleteElement, selection]);\n\n  const mouseMove = (event) => {\n    movePaper(event.nativeEvent.clientX, event.nativeEvent.clientY);\n  };\n  return (\n    // TODO : Proper listen key event\n    <div\n      className={classes.root}\n      tabIndex=\"0\"\n      onMouseDown={startSelect}\n      onMouseMove={\n        mode === MODE_MOVE_PAPER && isPaperDragged ? mouseMove : null\n      }\n      onMouseUp={\n        mode === MODE_MOVE_PAPER && isPaperDragged ? endMovePaper : null\n      }\n    >\n      <CssBaseline />\n\n      <AppBar position=\"fixed\" className={classes.appBar}>\n        <Toolbar className={classes.toolBar}>\n          <Link component={RouterLink} to=\"/home\" color=\"inherit\">\n            <Typography variant=\"h6\" noWrap>\n              Physic Schem\n            </Typography>\n          </Link>\n\n          <div>\n            <Tutorial classes={classes} />\n            <FileManager\n              edge=\"start\"\n              className={classes.menuButton}\n              color=\"inherit\"\n            />\n            <IconButton\n              edge=\"start\"\n              className={classes.menuButton}\n              color=\"inherit\"\n              aria-label=\"open rough drawer\"\n              onClick={openRough}\n            >\n              <PhotoLibraryIcon />\n            </IconButton>\n            <Button color=\"inherit\" variant=\"outlined\" onClick={openCode}>\n              LaTEX\n            </Button>\n          </div>\n        </Toolbar>\n      </AppBar>\n      <Drawer\n        className={classes.drawer}\n        variant=\"permanent\"\n        classes={{\n          paper: classes.drawerPaper,\n        }}\n      >\n        <Toolbar />\n        <div className={classes.drawerContainer}>\n          <LeftMenu />\n        </div>\n      </Drawer>\n      <Drawer\n        anchor=\"right\"\n        variant=\"persistent\"\n        open={\n          (mode === MODE_SELECT || mode === MODE_DRAG) && selection.length === 1\n        }\n        className={classes.optionDrawer}\n        classes={{\n          paper: classes.optionDrawerPaper,\n        }}\n        // catch mousedown in element options\n        onMouseDown={(event) => event.stopPropagation()}\n      >\n        <Toolbar />\n        <ElementOptions />\n      </Drawer>\n      <main className={classes.content}>\n        <Container ref={svgRef} />\n      </main>\n\n      <Dialog open={showCode} onClose={closeCode}>\n        <LatexDisplay />\n      </Dialog>\n      <Dialog maxWidth=\"lg\" open={showRough} onClose={closeRough}>\n        <RoughDrawing />\n      </Dialog>\n    </div>\n  );\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(App);\n","import React from \"react\";\n\nimport { Link as RouterLink } from \"react-router-dom\";\n\nimport Button from \"@material-ui/core/Button\";\nimport AppBar from \"@material-ui/core/AppBar\";\nimport Toolbar from \"@material-ui/core/Toolbar\";\nimport Typography from \"@material-ui/core/Typography\";\n\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport CssBaseline from \"@material-ui/core/CssBaseline\";\n\nconst useStyles = makeStyles((theme) => ({\n  appBar: {\n    zIndex: theme.zIndex.drawer + 1,\n  },\n  toolBar: {\n    justifyContent: \"space-between\",\n  },\n  content: {\n    padding: `${theme.spacing(4)}px ${theme.spacing(2)}px`,\n    display: \"inline-block\",\n    width: \"100%\",\n    backgroundColor: \"#daeeff\",\n\n    \"& h2\": {\n      fontSize: \"1.5rem\",\n      margin: \"0\",\n    },\n    \"& p\": {\n      fontSize: \"1.5rem\",\n      margin: \"0.5rem 1rem 1.5rem 1rem\",\n      textAlign: \"justify\",\n    },\n  },\n  header: {\n    padding: `${theme.spacing(8)}px 0`,\n    display: \"inline-block\",\n    width: \"100%\",\n    textAlign: \"center\",\n  },\n  headerTitle: {\n    margin: \"3em 1em 2em 1em\",\n    fontSize: \"1.5rem\",\n  },\n\n  callToActionContainer: {\n    display: \"flex\",\n    flexWrap: \"wrap\",\n    justifyContent: \"space-evenly\",\n    flex: \"1 1 200px\",\n    \"& a\": {\n      minWidth: \"10rem\",\n      margin: \"1rem\",\n    },\n  },\n}));\n\nconst Home = () => {\n  const classes = useStyles();\n\n  return (\n    <div tabIndex=\"0\">\n      <CssBaseline />\n\n      <AppBar position=\"fixed\" className={classes.appBar}>\n        <Toolbar className={classes.toolBar}>\n          <Typography variant=\"h6\" noWrap>\n            Physic Schem\n          </Typography>\n        </Toolbar>\n      </AppBar>\n      <div className={classes.header}>\n        <div className={classes.headerTitle}>\n          <h1>\n            <span style={{ fontSize: \"2rem\" }}>Physic Schem</span>, votre\n            générateur de schéma\n          </h1>\n        </div>\n        <div className={classes.callToActionContainer}>\n          <Button\n            component={RouterLink}\n            to=\"/\"\n            variant=\"contained\"\n            color=\"primary\"\n            size=\"large\"\n          >\n            Générateur\n          </Button>\n          <Button\n            component={RouterLink}\n            to=\"/tutorial\"\n            variant=\"contained\"\n            color=\"primary\"\n            size=\"large\"\n          >\n            Tuto\n          </Button>\n        </div>\n      </div>\n      <div className={classes.content}>\n        <h2>Des schémas beau facilement</h2>\n        <p>\n          Avec quoi faite vous vos schémas ? Paint ou Word ? Dans les deux cas,\n          tu dois souffrir, et le résultat ne peut qu'ptre décevant face à tous\n          les efforts mis en oeuvre. Ici tu pourras faire tes schémas rapidement\n          en ne te concentrant que sur le contenue de ton schéma. Une fois fini\n          exporte le en png pour ou en svg (fonctionnalité à venir). Ou mieux\n          encore récupère le code LaTeX associé.\n        </p>\n        <h2>Du code LaTeX?</h2>\n        <p>\n          Tu as déjà vue un cours de science que tu trouves magnifique ?\n          Probalement qu'il était écrit en LaTeX. Si tu veux toi aussi créer de\n          magnifiques documents, je te recommande ce{\" \"}\n          <a href=\"https://fr.wikibooks.org/wiki/LaTeX/G%C3%A9n%C3%A9ralit%C3%A9s\">\n            Wikibook\n          </a>{\" \"}\n          qui te donnera toutes les bases.\n        </p>\n      </div>\n    </div>\n  );\n};\n\nexport default Home;\n","import React from \"react\";\n\nimport styles from \"./index.module.scss\";\n\nimport svgComponents, { drawElement } from \"components\";\nimport Anchor from \"atoms/anchor\";\n\nimport { getPoles, getCoord } from \"redux/store/getCircuitikz/utils\";\n\nconst DrawSvg = ({\n  components,\n  coordinates,\n  width = 500,\n  height = 400,\n  drawGrid = true,\n}) => {\n  const Xpoints = drawGrid ? [...new Array(Math.floor(width / 100) + 1)] : [];\n  const Ypoints = drawGrid ? [...new Array(Math.floor(height / 100) + 1)] : [];\n\n  return (\n    <svg\n      xmlns=\"http://www.w3.org/2000/svg\"\n      viewBox={`0 ${-height} ${width} ${height}`}\n      className={styles.drawingArea}\n    >\n      {/* draw the grid */}\n      <>\n        {Xpoints.map((_, xIndex) => (\n          <path\n            key={`x-${xIndex}`}\n            d={`M ${xIndex * 100} 0 L ${xIndex * 100} ${-height}`}\n            className={styles.grid}\n          />\n        ))}\n        {Ypoints.map((_, yIndex) => (\n          <path\n            key={`y-${yIndex}`}\n            d={`M 0 ${-yIndex * 100} L ${width} ${-yIndex * 100}`}\n            className={styles.grid}\n          />\n        ))}\n      </>\n\n      {/* draw the elements */}\n      {Object.keys(components).map((id) => {\n        const { id: idComponent, ...componentProps } = components[id];\n\n        return svgComponents[componentProps.type]({\n          ...componentProps,\n          fromCoords: { ...coordinates[componentProps.from] },\n          toCoords: { ...coordinates[componentProps.to] },\n          positionCoords: { ...coordinates[componentProps.position] },\n          key: id,\n        });\n      })}\n      {Object.keys(coordinates).map((id) => {\n        const { id: idCoordinate, ...coordinateProps } = coordinates[id];\n        return <Anchor key={id} {...coordinateProps} />;\n      })}\n    </svg>\n  );\n};\n\nconst ShowLatexCode = ({ components, coordinates }) => {\n  const code = [\"\\\\begin{circuitikz}\"];\n\n  Object.keys(components).forEach((id) => {\n    const element = components[id];\n\n    const line = [\"\\\\draw\"];\n    if (element.from && element.to) {\n      const { x: xFrom, y: yFrom } = coordinates[element.from];\n      line.push(` ${getCoord(xFrom, yFrom, {}, {})}`);\n\n      element.poles = getPoles(\n        coordinates[element.from],\n        coordinates[element.to]\n      );\n\n      line.push(` ${drawElement(element)}`);\n      const { x: xTo, y: yTo } = coordinates[element.to];\n      line.push(` ${getCoord(xTo, yTo, {}, {})}`);\n    } else if (element.position) {\n      const { x, y } = coordinates[element.position];\n      line.push(` ${getCoord(x, y, {}, {})}`);\n      line.push(` ${drawElement(element)}`);\n    }\n    line.push(\";\");\n\n    code.push(line.join(\"\"));\n  });\n  code.push(\"\\\\end{circuitikz}\");\n\n  return (\n    <pre className={styles.latexArea}>\n      {code.slice(0, code.length - 1).join(\"\\n\\t\") +\n        \"\\n\" +\n        code[code.length - 1]}\n    </pre>\n  );\n};\n\nconst Displayer = ({\n  components,\n  coordinates,\n  svgOption = {},\n  latexOption = {},\n}) => (\n  <div className={styles.showArea}>\n    <ShowLatexCode\n      components={components}\n      coordinates={coordinates}\n      {...latexOption}\n    />\n    <DrawSvg components={components} coordinates={coordinates} {...svgOption} />\n  </div>\n);\nexport default Displayer;\n","import React, { useState } from \"react\";\nimport Displayer from \"../interaction\";\nimport styles from \"./index.module.scss\";\n\nimport ButtonGroup from \"@material-ui/core/ButtonGroup\";\nimport Button from \"@material-ui/core/Button\";\nimport CachedIcon from \"@material-ui/icons/Cached\";\n\nconst default_components = {\n  id1: {\n    id: \"id1\",\n    from: \"coord1\",\n    to: \"coord2\",\n    type: \"R\",\n    currant: {\n      show: true,\n      currantText: \"i1\",\n      currantIsForward: true,\n      currantIsAbove: true,\n      currantIsAfter: true,\n    },\n    label: \"\",\n    annotation: \"\",\n    mirror: false,\n    invert: false,\n  },\n};\nconst default_coordinates = {\n  coord1: {\n    id: \"coord1\",\n    x: 100,\n    y: -100,\n    shape: \"o\",\n  },\n  coord2: {\n    id: \"coord2\",\n    x: 400,\n    y: -100,\n    shape: \"*\",\n  },\n};\n\nconst Explanation = () => {\n  const [components, setComponents] = useState(default_components);\n  const [coordinates, setCoordinates] = useState(default_coordinates);\n  const [left2right, setLeft2right] = useState(true);\n\n  const setCurrantDirection = (value) => () => {\n    setComponents({\n      ...components,\n      [\"id1\"]: {\n        ...components.id1,\n        [\"currant\"]: {\n          ...components.id1.currant,\n          [\"currantIsForward\"]: value,\n        },\n      },\n    });\n  };\n\n  const setCurrantXPosition = (value) => () => {\n    setComponents({\n      ...components,\n      [\"id1\"]: {\n        ...components.id1,\n        [\"currant\"]: {\n          ...components.id1.currant,\n          [\"currantIsAfter\"]: value,\n        },\n      },\n    });\n  };\n\n  const setCurrantYPosition = (value) => () => {\n    setComponents({\n      ...components,\n      [\"id1\"]: {\n        ...components.id1,\n        [\"currant\"]: {\n          ...components.id1.currant,\n          [\"currantIsAbove\"]: value,\n        },\n      },\n    });\n  };\n\n  const switchPoisitions = () => {\n    const left = {\n      x: default_coordinates.coord1.x,\n      y: default_coordinates.coord1.y,\n    };\n    const right = {\n      x: default_coordinates.coord2.x,\n      y: default_coordinates.coord2.y,\n    };\n    setCoordinates({\n      ...coordinates,\n      coord1: { ...coordinates.coord1, ...(left2right ? right : left) },\n      coord2: { ...coordinates.coord2, ...(left2right ? left : right) },\n    });\n    setLeft2right(!left2right);\n  };\n\n  const isForard = components.id1.currant.currantIsForward;\n  const isAfter = components.id1.currant.currantIsAfter;\n  const isAbove = components.id1.currant.currantIsAbove;\n\n  return (\n    <div className={styles.root}>\n      <div className={styles.options}>\n        <label>sens du courant</label>\n        <ButtonGroup\n          color=\"primary\"\n          size=\"medium\"\n          aria-label=\"outlined primary button group\"\n        >\n          <Button\n            variant={isForard ? \"contained\" : \"outlined\"}\n            onClick={setCurrantDirection(true)}\n          >\n            direct\n          </Button>\n          <Button\n            variant={!isForard ? \"contained\" : \"outlined\"}\n            onClick={setCurrantDirection(false)}\n          >\n            indirect\n          </Button>\n        </ButtonGroup>\n\n        <label>position de la fléche</label>\n        <ButtonGroup\n          color=\"primary\"\n          size=\"medium\"\n          aria-label=\"outlined primary button group\"\n        >\n          <Button\n            variant={isAfter ? \"contained\" : \"outlined\"}\n            onClick={setCurrantXPosition(true)}\n          >\n            après\n          </Button>\n          <Button\n            variant={!isAfter ? \"contained\" : \"outlined\"}\n            onClick={setCurrantXPosition(false)}\n          >\n            avant\n          </Button>\n        </ButtonGroup>\n\n        <label>position du text</label>\n        <ButtonGroup\n          color=\"primary\"\n          size=\"medium\"\n          aria-label=\"outlined primary button group\"\n        >\n          <Button\n            variant={isAbove ? \"contained\" : \"outlined\"}\n            onClick={setCurrantYPosition(true)}\n          >\n            haut\n          </Button>\n          <Button\n            variant={!isAbove ? \"contained\" : \"outlined\"}\n            onClick={setCurrantYPosition(false)}\n          >\n            bas\n          </Button>\n        </ButtonGroup>\n\n        <label>changer le sens</label>\n        <Button onClick={switchPoisitions} variant=\"outlined\">\n          <CachedIcon />\n        </Button>\n      </div>\n      <div className={styles.drawing}>\n        <Displayer\n          components={components}\n          coordinates={coordinates}\n          svgOption={{ width: 500, height: 200 }}\n        />\n      </div>\n    </div>\n  );\n};\n\nexport default Explanation;\n","import React, { useState } from \"react\";\nimport Displayer from \"../interaction\";\nimport styles from \"./index.module.scss\";\n\nimport Slider from \"@material-ui/core/Slider\";\nimport Button from \"@material-ui/core/Button\";\nimport CachedIcon from \"@material-ui/icons/Cached\";\n\nconst components = {\n  id1: {\n    id: \"id1\",\n    from: \"coord1\",\n    to: \"coord2\",\n    type: \"R\",\n    currant: {\n      show: false,\n      currantText: \"i1\",\n      currantIsForward: true,\n      currantIsAbove: true,\n      currantIsAfter: true,\n    },\n    label: \"\",\n    annotation: \"\",\n    mirror: false,\n    invert: false,\n  },\n};\n\nconst getCoordinates = ({ x1, x2, y1, y2 }) => ({\n  coord1: {\n    id: \"coord1\",\n    x: x1 * 100,\n    y: -y1 * 100,\n    shape: \"\",\n  },\n  coord2: {\n    id: \"coord2\",\n    x: x2 * 100,\n    y: -y2 * 100,\n    shape: \"\",\n  },\n});\n\nconst default_x1 = 1;\nconst default_y1 = 1;\nconst default_x2 = 4;\nconst default_y2 = 1;\n\nconst maxX = 5;\nconst maxY = 2;\nconst xMarks = [\n  { value: 0, label: 0 },\n  { value: 1, label: 1 },\n  { value: 2, label: 2 },\n  { value: 3, label: 3 },\n  { value: 4, label: 4 },\n  { value: 5, label: 5 },\n];\nconst yMarks = [\n  { value: 0, label: 0 },\n  { value: 1, label: 1 },\n  { value: 2, label: 2 },\n];\nconst Explanation = () => {\n  const [x1, setX1] = useState(default_x1);\n  const [y1, setY1] = useState(default_y1);\n  const [x2, setX2] = useState(default_x2);\n  const [y2, setY2] = useState(default_y2);\n\n  return (\n    <div className={styles.root}>\n      <div className={styles.options}>\n        <ul>\n          <li>\n            <h4>premier point</h4>\n            <label>x</label>\n            <Slider\n              defaultValue={default_x1}\n              step={0.1}\n              min={0}\n              max={maxX}\n              valueLabelDisplay=\"auto\"\n              marks={xMarks}\n              value={x1}\n              onChange={(event, newValue) => setX1(newValue)}\n            />\n            <label>y</label>\n            <Slider\n              defaultValue={default_y1}\n              step={0.1}\n              min={0}\n              max={maxY}\n              valueLabelDisplay=\"auto\"\n              marks={yMarks}\n              value={y1}\n              onChange={(event, newValue) => setY1(newValue)}\n            />\n          </li>\n          <li>\n            <h4>deuxième point</h4>\n            <label>x</label>\n            <Slider\n              defaultValue={default_x2}\n              step={0.1}\n              min={0}\n              max={maxX}\n              valueLabelDisplay=\"auto\"\n              marks={xMarks}\n              value={x2}\n              onChange={(event, newValue) => setX2(newValue)}\n            />\n            <label>y</label>\n            <Slider\n              defaultValue={default_y2}\n              step={0.1}\n              min={0}\n              max={maxY}\n              valueLabelDisplay=\"auto\"\n              marks={yMarks}\n              value={y2}\n              onChange={(event, newValue) => setY2(newValue)}\n            />\n          </li>\n        </ul>\n      </div>\n      <div className={styles.drawing}>\n        <Displayer\n          components={components}\n          coordinates={getCoordinates({ x1, x2, y1, y2 })}\n          svgOption={{ width: maxX * 100, height: maxY * 100 }}\n        />\n      </div>\n    </div>\n  );\n};\n\nexport default Explanation;\n","import React, { useState } from \"react\";\nimport Displayer from \"../interaction\";\nimport styles from \"./index.module.scss\";\n\nimport FormControl from \"@material-ui/core/FormControl\";\nimport InputLabel from \"@material-ui/core/InputLabel\";\nimport Select from \"@material-ui/core/Select\";\nimport MenuItem from \"@material-ui/core/MenuItem\";\nimport TextField from \"@material-ui/core/TextField\";\n\nconst coordinates = {\n  coord1: {\n    id: \"coord1\",\n    x: 100,\n    y: -100,\n    shape: \"\",\n  },\n  coord2: {\n    id: \"coord2\",\n    x: 400,\n    y: -100,\n    shape: \"\",\n  },\n};\n\nconst multCoordinates = {\n  coord0: {\n    id: \"coord0\",\n    x: 400,\n    y: -100,\n    shape: \"\",\n  },\n  coord1: {\n    id: \"coord1\",\n    x: 700,\n    y: -100,\n    shape: \"\",\n  },\n  coord2: {\n    id: \"coord2\",\n    x: 700,\n    y: -400,\n    shape: \"\",\n  },\n  coord3: {\n    id: \"coord3\",\n    x: 400,\n    y: -400,\n    shape: \"\",\n  },\n  coord4: {\n    id: \"coord4\",\n    x: 100,\n    y: -400,\n    shape: \"\",\n  },\n  coord5: {\n    id: \"coord5\",\n    x: 100,\n    y: -100,\n    shape: \"\",\n  },\n};\n\nconst getComponents = (type, label = \"\", annotation = \"\") => ({\n  id1: {\n    id: \"id1\",\n    from: \"coord1\",\n    to: \"coord2\",\n    type: type,\n    currant: {\n      show: false,\n      currantText: \"i1\",\n      currantIsForward: true,\n      currantIsAbove: true,\n      currantIsAfter: true,\n    },\n    label: label,\n    annotation: annotation,\n    mirror: false,\n    invert: false,\n  },\n});\n\nconst getMultipleComponents = (type, label = \"\", annotation = \"\") => {\n  const rep = {};\n\n  [1, 2, 3, 4, 5].forEach((nb) => {\n    const id = `id${nb}`;\n\n    rep[id] = {\n      id: id,\n      from: \"coord0\",\n      to: `coord${nb}`,\n      type: type,\n      currant: {\n        show: false,\n        currantText: \"i1\",\n        currantIsForward: true,\n        currantIsAbove: true,\n        currantIsAfter: true,\n      },\n      label: label,\n      annotation: annotation,\n      mirror: false,\n      invert: false,\n    };\n  });\n  console.log(rep);\n  return rep;\n};\n\nconst components_available = {\n  R: \"resistance : R\",\n  lampe: \"lampe : lamp\",\n  battery1: \"batterie : battery1\",\n  L: \"bobine : L\",\n  C: \"condensateur : C\",\n  \"empty led\": \"led : empty diode\",\n  pR: \"potential resistor (pR)\",\n  vcapacitor: \"variable capacitor\",\n};\n\nconst Explanation = ({\n  withAnnotations = false,\n  withMultipleComponents = false,\n}) => {\n  const [element_type, setType] = useState(\"R\");\n\n  const [label, SetLabel] = useState(\"R1\");\n  const [annotation, SetAnnotation] = useState(\"hello world\");\n\n  return (\n    <div className={styles.root}>\n      <div className={styles.options}>\n        <FormControl className={styles.selector}>\n          <InputLabel id=\"select-component-to-draw\">\n            Type de composant\n          </InputLabel>\n          <Select\n            labelId=\"select-component-to-draw\"\n            id=\"demo-simple-select\"\n            value={element_type}\n            onChange={(event) => setType(event.target.value)}\n          >\n            {Object.keys(components_available).map((type_el) => (\n              <MenuItem value={type_el} key={type_el}>\n                {components_available[type_el]}\n              </MenuItem>\n            ))}\n          </Select>\n        </FormControl>\n        {withAnnotations && (\n          <>\n            <TextField\n              value={label}\n              onChange={(event) => SetLabel(event.target.value)}\n              label=\"label\"\n              className={styles.textInput}\n            />\n            <TextField\n              value={annotation}\n              onChange={(event) => SetAnnotation(event.target.value)}\n              label=\"annotation\"\n              className={styles.textInput}\n            />\n          </>\n        )}\n      </div>\n      <div className={styles.drawing}>\n        <Displayer\n          components={\n            withMultipleComponents\n              ? getMultipleComponents(\n                  element_type,\n                  withAnnotations ? label : \"\",\n                  withAnnotations ? annotation : \"\"\n                )\n              : getComponents(\n                  element_type,\n                  withAnnotations ? label : \"\",\n                  withAnnotations ? annotation : \"\"\n                )\n          }\n          coordinates={withMultipleComponents ? multCoordinates : coordinates}\n          svgOption={{\n            width: withMultipleComponents ? 800 : 500,\n            height: withMultipleComponents ? 500 : 200,\n          }}\n        />\n      </div>\n    </div>\n  );\n};\n\nexport default Explanation;\n","import React, { useState } from \"react\";\nimport Displayer from \"../interaction\";\nimport styles from \"./index.module.scss\";\n\nimport FormControl from \"@material-ui/core/FormControl\";\nimport InputLabel from \"@material-ui/core/InputLabel\";\nimport Select from \"@material-ui/core/Select\";\nimport MenuItem from \"@material-ui/core/MenuItem\";\n\nconst components = {\n  id1: {\n    id: \"id1\",\n    from: \"coord1\",\n    to: \"coord2\",\n    type: \"R\",\n    currant: {\n      show: false,\n      currantText: \"i1\",\n      currantIsForward: true,\n      currantIsAbove: true,\n      currantIsAfter: true,\n    },\n    label: \"\",\n    annotation: \"\",\n    mirror: false,\n    invert: false,\n  },\n};\n\nconst getCoordinates = (shape1, shape2) => ({\n  coord1: {\n    id: \"coord1\",\n    x: 100,\n    y: -100,\n    shape: shape1,\n  },\n  coord2: {\n    id: \"coord2\",\n    x: 400,\n    y: -100,\n    shape: shape2,\n  },\n});\n\nconst Explanation = () => {\n  const [shape1, setShape1] = useState(\"*\");\n  const [shape2, setShape2] = useState(\"*\");\n\n  return (\n    <div className={styles.root}>\n      <div className={styles.options}>\n        <FormControl className={styles.selector}>\n          <InputLabel id=\"input-for-shape1\">decoration 1</InputLabel>\n          <Select\n            labelId=\"input-for-shape1\"\n            value={shape1}\n            onChange={(event) => setShape1(event.target.value)}\n          >\n            <MenuItem value={\"rien\"}>rien</MenuItem>\n            <MenuItem value={\"*\"}>*</MenuItem>\n            <MenuItem value={\"o\"}>o</MenuItem>\n            <MenuItem value={\"d\"}>d</MenuItem>\n          </Select>\n        </FormControl>\n        <FormControl className={styles.selector}>\n          <InputLabel id=\"input-for-shape2\">decoration 2</InputLabel>\n          <Select\n            labelId=\"input-for-shape2\"\n            value={shape2}\n            onChange={(event) => setShape2(event.target.value)}\n          >\n            <MenuItem value={\"rien\"}>rien</MenuItem>\n            <MenuItem value={\"*\"}>*</MenuItem>\n            <MenuItem value={\"o\"}>o</MenuItem>\n            <MenuItem value={\"d\"}>d</MenuItem>\n          </Select>\n        </FormControl>\n      </div>\n      <div className={styles.drawing}>\n        <Displayer\n          components={components}\n          coordinates={getCoordinates(shape1, shape2)}\n          svgOption={{ width: 500, height: 200 }}\n        />\n      </div>\n    </div>\n  );\n};\n\nexport default Explanation;\n","import React from \"react\";\nimport classes from \"./index.module.scss\";\n\nimport { Link as RouterLink } from \"react-router-dom\";\nimport Link from \"@material-ui/core/Link\";\n\nimport AppBar from \"@material-ui/core/AppBar\";\nimport Toolbar from \"@material-ui/core/Toolbar\";\nimport Typography from \"@material-ui/core/Typography\";\n\nimport ExplanationCurrant from \"tutorial/currantExplanation\";\nimport ExplanationPosition from \"tutorial/positionExplanation\";\nimport ExplanationBipoles from \"tutorial/bipoleExplanation\";\nimport ExplanationDecoraion from \"tutorial/decorationExplanation\";\n\nconst Tuto = () => (\n  // TODO : Proper listen key event\n  <div>\n    <AppBar position=\"fixed\" className={classes.appBar}>\n      <Toolbar className={classes.toolBar}>\n        <Link component={RouterLink} to=\"/home\" color=\"inherit\">\n          <Typography variant=\"h6\" noWrap>\n            Physic Schem\n          </Typography>\n        </Link>\n      </Toolbar>\n    </AppBar>\n    <div className={classes.contentContainer}>\n      <div className={classes.content}>\n        <h2>Importer circuitikz</h2>\n        <p>\n          Première chose à faire, importer le package circuitikz. Pour cela rien\n          de plus simple, vous ajoutez <code>{\"\\\\usepackage{circuitikz}\"}</code>{\" \"}\n          dans l'entête de votre document LaTeX. Pour être précis, là où il y a\n          toutes les autres lignes commençant par{\" \"}\n          <code>{\"\\\\usepackage{...}\"}</code>.\n        </p>\n        <pre className={classes.latexArea}>{\"\\\\usepackage{circuitikz}\"}</pre>\n        <p>\n          Et voilà, vous êtes prêt à utiliser circuitikz. Pour cela, à\n          l'interieur du document ouvrez une zone de dessin avec{\" \"}\n          <code>{\"\\\\begin{circuitikz}\"}</code>, et fermez là comme d'habitude\n          avec <code>{\"\\\\end{circuitikz}\"}</code>. Votre code devrait ressembler\n          à ceci :\n        </p>\n        <pre>\n          {\n            \"\\\\documentclass{article}\\n\\n\\\\usepackage[utf8]{inputenc}\\n\\\\usepackage{circuitikz}\\n\\n\\\\title{Mon document}\\n\\n\\\\begin{document}\\n\\n\\\\begin{circuitikz}\\n\\t% ici je met mon code\\n\\\\end{circuitikz}\\n\\n\\\\end{document}\"\n          }\n        </pre>\n        <h2>Dessiner une résistance</h2>\n        <ExplanationPosition />\n        <h2>Dessiner d'autres dipôles</h2>\n        <ExplanationBipoles />\n        <h2>Annoter ses composants</h2>\n        <ExplanationBipoles withAnnotations />\n        <ExplanationBipoles withAnnotations withMultipleComponents />\n        <h2>Un peu d'esthétisme aux extrémités</h2>\n        <ExplanationDecoraion />\n        <h2>Ajouter du courant</h2>\n        <p>\n          Il est assez courant de vouloir dessiner les courant passant à travers\n          un composant. Pour cela rien de plus simple, il suffit d'ajouter\n          <code>i=i1</code> et vous voila avec un magnifique courant nomé i1.\n          Rest à savoir si vous voulez afficher le nom au dessus (grace à{\" \"}\n          <code>^</code> ) ou en dessous (avec <code>_</code> ) du fil. La\n          fléche va-t-elle vers l'avant ( <code>{\">\"}</code> ) ou l'arrière ({\" \"}\n          <code>{\"<\"}</code> ). Enfin faut-il mettre la fléche avant ou après le\n          composant ? our cette dernière, c'est un peu plus compliqué. Si on\n          veut la flèche avant le composant, il faut mettre le chevron ({\" \"}\n          <code>{\">\"}</code> ou <code>{\"<\"}</code>) qui symbolise la fléche\n          avant l'indicateur du text ( <code>^</code> ou <code>_</code> ). Et\n          inversement pour place la flèche après le composant.\n        </p>\n        <p>\n          Je vous laisse tester, ca sera plus simple comme ça. Attention, si\n          vous inverser l'ordre des coordonnées, c'est comme si vous faisiez\n          faire un tour à 180° à votre composant. Tous sera donc inversé.\n        </p>\n        <ExplanationCurrant />\n        <h2>Dessiner un monopôle</h2>\n        <h2>Et des multipôles</h2>\n        <h2>Utiliser les points d'intérêt des multipôles</h2>\n        <h2>Utiliser des coordonnées relatives</h2>\n      </div>\n    </div>\n  </div>\n);\n\nexport default Tuto;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { Provider } from \"react-redux\";\nimport store from \"redux/store\";\n\nimport \"./index.css\";\nimport App from \"pages/App\";\nimport Home from \"pages/Home\";\nimport Tuto from \"pages/Tuto\";\nimport * as serviceWorker from \"./serviceWorker\";\n\nimport { ThemeProvider, createMuiTheme } from \"@material-ui/core/styles\";\n\nimport { BrowserRouter as Router, Switch, Route, Link } from \"react-router-dom\";\n\nconst theme = createMuiTheme({\n  palette: {\n    primary: {\n      main: \"#1565c0\",\n    },\n    secondary: {\n      main: \"#42a5f5\",\n    },\n  },\n});\n\nReactDOM.render(\n  <React.StrictMode>\n    <ThemeProvider theme={theme}>\n      <Provider store={store}>\n        <Router>\n          <p id=\"load-font\">aaa</p>\n          <Switch>\n            <Route path=\"/home\">\n              <Home />\n            </Route>\n            <Route path=\"/tutorial\">\n              <Tuto />\n            </Route>\n            <Route path=\"/\">\n              <App />\n            </Route>\n          </Switch>\n        </Router>\n      </Provider>\n    </ThemeProvider>\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"bipoleExplanation_root__2R8T5\",\"options\":\"bipoleExplanation_options__25ilS\",\"selector\":\"bipoleExplanation_selector__2Ix49\",\"textInput\":\"bipoleExplanation_textInput__3U68Q\",\"drawing\":\"bipoleExplanation_drawing__1Pd5L\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"appBar\":\"Tuto_appBar__-bG7R\",\"toolBar\":\"Tuto_toolBar__966vL\",\"contentContainer\":\"Tuto_contentContainer__3Ifj3\",\"content\":\"Tuto_content__1QDJ5\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"showArea\":\"interaction_showArea__day5R\",\"latexArea\":\"interaction_latexArea__17zOU\",\"drawingArea\":\"interaction_drawingArea__3BxWM\",\"grid\":\"interaction_grid__1kng6\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"decorationExplanation_root__3BR-z\",\"options\":\"decorationExplanation_options__1G_D7\",\"selector\":\"decorationExplanation_selector__2f59d\",\"drawing\":\"decorationExplanation_drawing__1lxOG\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"currantExplanation_root__2TfJI\",\"options\":\"currantExplanation_options__3-RjQ\",\"drawing\":\"currantExplanation_drawing__3sVgR\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"positionExplanation_root__35BOl\",\"options\":\"positionExplanation_options__2XpaL\",\"drawing\":\"positionExplanation_drawing__3nv14\"};"],"sourceRoot":""}