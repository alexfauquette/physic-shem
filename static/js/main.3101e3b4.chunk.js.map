{"version":3,"sources":["tutorial/index.module.scss","redux/actions/index.js","redux/store/interactionModes.js","redux/store/displayOptions.js","redux/store/magnetsOptions.js","redux/actions/messages.js","redux/store/debugInitialState.js","utils/maths.js","utils/svgToCanvas.js","utils/constantes.js","atoms/currant.js","atoms/label.js","atoms/arrowEnd.js","atoms/tension.js","components/hoc/pathComponents.js","components/Lampe.js","components/empty_diode.js","components/pR.js","components/vcapacitor.js","redux/store/getCircuitikz/utils.js","components/nmos.js","components/op_amp.js","components/vee.js","components/vcc.js","components/ground.js","components/C.js","components/L.js","components/R.js","components/battery1.js","components/switch.js","components/short.js","components/rightUp.js","components/upRight.js","components/sourcess/index.js","components/index.js","redux/store/utils.js","redux/store/dragging.js","redux/store/delete.js","redux/store/pathCreation.js","redux/store/rectangleSelection.js","redux/store/nodeCreation.js","redux/store/anchorHelper.js","redux/store/index.js","i18n.js","atoms/anchor.js","container/RoughDrawing.js","container/toolbar.js","container/componentsDrawer.js","container/anchors.js","atoms/magnet.js","container/magnets.js","container/index.js","redux/store/getCircuitikz/drawPath.js","redux/store/getCircuitikz/initializeCoords.js","redux/store/getCircuitikz/index.js","container/latexDisplay.js","container/elementOptions.js","container/leftMenu.js","container/tutorial/options.png","container/tutorial/save.png","container/tutorial/selectElement.png","container/tutorial/index.js","redux/apiInteractions/index.js","container/FileManager.js","pages/App.js","pages/Home.js","tutorial/interaction/index.js","tutorial/currantExplanation/index.js","tutorial/positionExplanation/index.js","tutorial/bipoleExplanation/index.js","tutorial/decorationExplanation/index.js","tutorial/monopoleExplanation/index.js","tutorial/multipoleExplanation/index.js","tutorial/anchorExplanation/index.js","pages/Tuto/index.js","atoms/CircuitCard.js","pages/Catalogue.js","container/serverMessages.js","serviceWorker.js","index.js","pages/Tuto/index.module.scss"],"names":["module","exports","START_DRAGGING","startDragging","x","y","type","STOP_DRAGGING","stopDragging","UPDATE_POSITION","updatePosition","attractor","attracted","shiftPress","START_SELECT","startSelect","TOGGLE_SELECTION","toggleSelection","objectId","reset","START_CREATE_PATH_ELEMENT","startCreatePathElement","elementType","VALIDATE_FIRST_STEP_PATH_ELEMENT_CREATION","INVALIDATE_FIRST_STEP_PATH_ELEMENT_CREATION","SAVE_PATH_ELEMENT_CREATION","START_CREATE_NODE_ELEMENT","ELEMENT_CREATION_NEXT_STEP","SPLIT_ANCHOR","START_RECTANGLE_SELECTION","STOP_RECTANGLE_SELECTION","STACK_SELECTED_ANCHORS","stackSelectedAnchors","direction","DELETE_ELEMENT","UPDATE_COMPONENT","ZOOM","START_MOVE_PAPER","MOVE_PAPER","END_MOVE_PAPER","SET_MODE_MOVE_PAPER","UPDATE_MAGNET_OPTION","updateMagnetOption","optionName","optionValue","LOAD_PROJECT","loadProject","components","coordinates","id","username","circuitname","LIST_PROJECTS","listProjects","jsonRep","projects","map","date","MODE_SELECT","MODE_DRAG","MODE_CREATE_PATH_ELEMENT","MODE_CREATE_NODE_ELEMENT","MODE_RECTANGLE_SELECTION","MODE_MOVE_PAPER","default_displayOptions","zoom","width","height","dragging","isDragging","x0","y0","reducer_displayOptions","state","action","mode","newZoom","newWidth","newHeight","displayOptions","newX","newY","movePaper","toggleDragging","reducer_magnetsOptions","magnetsOptions","CLOSE_MESSAGE","closeMessage","REMOVE_MESSAGE","removeMessage","OPEN_MESSAGE","openMessage","severity","text","initial_state","isGridAttracting","gridSpace","isPathCoordinatesAttracting","isNodeAnchorsAttracting","currentProject","selection","adhesivePoints","weakLinks","currentMagnet","byId","allIds","rotation","angle","xScale","yScale","Math","cos","PI","sin","translateSVGbaseline2Canvas","baseline","hanging","middle","translateSVGalign2Canvas","start","end","MULTIPLICATIVE_CONST","R_LEN","defaultCurrant","show","currantText","currantIsForward","currantIsAbove","currantIsAfter","default_path_options","currant","label","annotation","mirror","invert","getTextAnchor","textAnchor","alignmentBaseline","drawRoughCurrant","rc","ctx","ratio","element","fromCoords","toCoords","xFrom","xTo","yFrom","yTo","xI","yI","theta","path","xText","yText","textAlign","textBaseline","fillText","CurrantArrow","style","fill","stroke","d","transform","transformOrigin","random","isAbove","rotationAngle","gap","drawRoughLabel","from","to","xL","yL","save","translate","rotate","restore","Label","drawRoughArrowEnd","dy","ArrowEnd","className","bump","Tension","isDirect","xM","yM","xArrow1","yArrow1","xArrow2","yArrow2","xArrow_m","yArrow_m","mapStateToProps","props","withPathAttributes","isVoltageSource","component","connect","selected","onMouseDown","voltageName","voltageIsDown","voltageIsDirect","sqrt","parseInt","atan2","drawLinks","drawRoughTension","getPathAttributes","currantAttribute","position","getCurrantAttribute","getLabelAttribute","getAnnotationAttribute","voltage","getVoltageAttribute","poles","R","r","toFixed","cx","cy","UNIT_X","UNIT_Y","UNIT_Y2","parameters","wiper_pos","STEP","capacitor_width","getPoles","shapeFrom","shape","shapeTo","useStart","includes","useEnd","simplifyNumber","rep","slice","getCoordId","round","getCoord","coords","previousCoord","coordId","name","removeDrawnElements","drawnElements","listeOfId","filter","compareCoord","coordId1","coordId2","endingPaths1","endingPaths","nodeAssociated1","nodeAssociated","endingPaths2","nodeAssociated2","length","getElementTranslation","positionAnchor","positionCoords","showHandles","xAnchor","yAnchor","deltaX","deltaY","base_height","gate_height","strokeWidth","upX","upY","input_height","port_width","OTHER","UNIT_Y_DOWN","Array","coils","join","Arrow","theta1","theta2","x1","y1","x2","y2","isOpen","withArrow","SOURCE_HEIGHT","SOURCE_WIDTH","OO_SOURCE_CIRCLE_OFFSET","O_Source","OO_Source","OO_SOURCE_CIRCLE_SIZE","V_SourceComponent","I_SourceComponent","V_OO_SourceComponent","I_OO_SourceComponent","getBoundingBox","dx1","dx2","dy1","dy2","roughComponent","circle","drawer","sourceName","getAnchors","pR","pR_getAnchor","nmos","dx","Cgap","Bgap","Egap","radAngle","Crad","Brad","Erad","distanceC","distanceB","distanceE","nmos_getAnchor","op_amp","anchorRad","distance","op_amp_getAnchor","vee","vee_getAnchor","vcc","vcc_getAnchor","ground","ground_getAnchor","pathOptions","pRParameters","switch","switchParameters","short","shortParameters","rightUp","upRight","voosource","voltageSourceParameters","vsource","getDrawer","lampe","positionInformations","anchor","coord","parseFloat","vcapacitor","C","L","battery1","sourcesDrawer","isource","ioosource","getRoughComponents","useNaiveCircleOrientation","xEnd","yEnd","sourceRoughComponent","getBoundingBoxComponent","sourcesBoundingBoxe","coordinateById","pathGetBoundingBoxCenter","roughComponents","getElementAnchors","drawElement","position1","position2","isPath","isMultyPole","structure","bipoles","sources","references","transistors","svgComponents","getAdhesivePoints","push","forEach","componentUseThisAnchor","anchorId","replaceComponentAnchor","previousAnchorId","newAnchorId","newElement","coordinatesToMove","selectedId","findIndex","elem","fromId","toId","pile","nodeSeen","pop","nodeId","isNodePosition","originalPosition","alreadyMoved","weakLinksToRemove","anchorToRemoveID","anchorToUseId","anchorToRemoveIDIndex","remainingAnchors","newByIDElements","newWeakLink","newMoveX","newMoveY","originalX","originalY","abs","anchorById","deleteElement","componentIdsToRemove","componentIdsToKeep","coordinateToRemove","componentId","arg","elementId","idToRemove","newState","newPath","isFromValidated","validateFirstStepPathElement","attractorFrom","attractorTo","movedAfterFromCreation","invalidateFirstStepPathElement","savePathElement","newId_element","uuid","fromAnchor","toAnchor","newAnchors","newWeakLinks","newRectangle","rectangleSelection","maxX","max","minX","min","maxY","minY","point_included","xa","ya","xb","yb","xc","yc","xd","yd","rect_included","stopRectangleSelection","startRectangleSelection","newNode","startNodeCreation","anchorsDelta","saveNodeCreation","positionId","newPositions","toUpdate","deltaToAdd","anchorName","rotateNode","value","prevAngle","newAngle","prevAnchors","rotationHelper","IdToUpdate","stackAnchors","coordinatesSelected","movedAnchors","newPosition","index","undefined","splitAnchor","componentsToChange","newComponents","weakLinksToCopy","linkedAnchorId","linkToCopy","composedEnhancer","composeWithDevTools","applyMiddleware","thunkMiddleware","store","createStore","messages","refSpace","modX","modY","xToTest","yToTest","draggingUpdatePosition","pathCreationUpdatePosition","nodeCreationUpdatePosition","rectangleSelectionUpdatePosition","i18n","use","Backend","LanguageDetector","initReactI18next","init","fallbackLng","lng","debug","process","preload","react","useSuspense","interpolation","escapeValue","backend","loadPath","roughCoordinate","fillStyle","roughness","gen","config","options","ConnectedAnchor","dispatch","svgRef","current","getBoundingClientRect","xOffset","yOffset","svgWidth","svgHeight","SVG_X","SVG_Y","SVG_WIDTH","SVG_HEIGHT","event","stopPropagation","ctrlKey","nativeEvent","clientX","clientY","forwardRef","ref","margin","canvasRef","useRef","useState","setWidth","setHeight","seed","setSeed","setRoughness","canvasURL","setCanvasURL","useEffect","svgBBox","document","getElementById","getBBox","rough","canvas","curveFitting","getContext","font","fillRect","toDataURL","replace","DialogTitle","DialogContent","DialogActions","Typography","gutterBottom","Slider","onChange","newValue","aria-labelledby","step","Button","onClick","variant","href","download","color","useStyles","makeStyles","root","top","padding","backgroundColor","setZoom","setModeMovePaper","classes","IconButton","SvgIcon","disabled","Select","target","MenuItem","ConnectedComponentsDrawer","ConnectedAnchors","anchorIds","isUsed","setIsUsed","onMouseEnter","onMouseLeave","onMouseMove","onMouseUp","isMoving","reduce","accumulator","accu","nameAdhesive","idAdhesive","ConnectedContainer","validateFirstStepPathElementCreation","invalidateFirstStepPathElementCreation","savePathElementCreation","nextStepOfElementCreation","startMovePaper","xmlns","viewBox","background","shiftKey","patternUnits","drawPathFromCoord","startCoordId","nbOfCoordinateUsed","elementsToAdd","nbOfCreatedNames","nextName","currantCoordId","currantCoord","nextPaths","startingPaths","arrivingPaths","nextNode","coordIsNew","initializeCoords","nodeReference","fromCoord","toCoord","fromCoordId","toCoordId","parent","parentAnchor","associatedIds","positionCoord","positionCoordId","multipoleNodes","parentNodeId","childNodeIdId","child","node1","node2","anchors1","anchors2","name1","name2","childAnchor","findCommonAnchor","Object","keys","anchors","coordX","coordY","anchorX","anchorY","getCircuitikz","nodeNumberOfNames","circuitText","multiAnchorNodeIds","isNode","sort","id1","id2","node","fillCoordWithAnchorsName","childId","coordsToPlot","idToPlot","indexOf","splice","code","autoFocus","navigator","clipboard","writeText","then","copyCode","inputElement","update","ListItem","TextField","onKeyDown","e","onChangeCapture","button","ListItemText","primary","ListItemSecondaryAction","Input","inputProps","FormControlLabel","control","checked","Checkbox","idOfInterest","handleInputChange","updateComponent","List","n","startCreateNodeElement","openSection","setOpenSection","sectionName","Collapse","in","timeout","unmountOnExit","paddingLeft","titles","images","selectElement","shortcuts","key","description","HelpShortcut","useTranslation","t","ready","localStorage","getItem","showHelp","setShowHelp","helpStep","setHelpStep","edge","menuButton","aria-label","Dialog","fullWidth","maxWidth","open","onClose","setItem","shortcut","keyboardDescription","keyboardKey","src","alt","MobileStepper","steps","activeStep","nextButton","size","backButton","SUCCESS","extractData","response","a","json","returnedData","ok","SaveOnline","toDelete","setOpen","updateProject","saveProject","deleteProject","history","useHistory","canvasUrl","setCanvasUrl","erase","setErase","setCircuitname","setUsername","password1","setPassword1","password2","setPassword2","useCallback","canvasNode","height_ratio","width_ratio","scale","console","log","error","helperText","fd","FormData","append","dataURI","byteString","split","atob","unescape","mimeString","ia","Uint8Array","i","charCodeAt","Blob","dataURItoBlob","password","formData","display","getState","JSON","stringify","fetch","method","body","data","headers","openDialogue","setOpenDialogue","setIsOpen","setToDelete","anchorEl","setHref","encodeURIComponent","close","aria-controls","aria-haspopup","Menu","ListSubheader","uploadedFile","fileReader","FileReader","onloadend","parse","result","readAsText","handleUpload","files","htmlFor","Divider","theme","appBar","zIndex","toolBar","justifyContent","flexShrink","drawerPaper","drawerContainer","overflow","optionDrawer","optionDrawerPaper","content","flexGrow","spacing","marginRight","borderRadius","border","boxShadow","fontSize","fontWeight","lineHeight","isPaperDragged","endMovePaper","getProject","showCode","setShowCode","showRough","setShowRough","schemId","useParams","handleKeyDown","addEventListener","removeEventListener","tabIndex","CssBaseline","AppBar","Toolbar","Link","RouterLink","noWrap","Drawer","paper","header","headerTitle","callToActionContainer","flexWrap","flex","minWidth","Home","DrawSvg","drawGrid","Xpoints","floor","Ypoints","_","xIndex","styles","gridLine","yIndex","componentProps","coordinateProps","ShowLatexCode","useRelativeCoord","coordinates_info","line","Displayer","svgOption","latexOption","default_components","default_coordinates","coord1","coord2","Explanation","setComponents","setCoordinates","left2right","setLeft2right","setCurrantDirection","setCurrantXPosition","setCurrantYPosition","isForard","isAfter","optionsColumn","ButtonGroup","left","right","drawing","getCoordinates","xMarks","yMarks","setX1","setY1","setX2","setY2","defaultValue","valueLabelDisplay","marks","multCoordinates","coord0","coord3","coord4","coord5","getComponents","getMultipleComponents","nb","components_available","withAnnotations","withMultipleComponents","element_type","setType","SetLabel","SetAnnotation","FormControl","selector","InputLabel","labelId","type_el","textInput","shape1","shape2","setShape1","setShape2","decorationSelector","withAngle","withPosition","setAngle","setX","setY","valueLabelFormat","anchorInfo","withAnchor","setAnchor","availableAnchors","setAvailableAnchors","getUsedAnchors","coordP1","coordP2","coordOut1","coordOut2","default_bipole","id3","Tuto","contentContainer","Trans","i18nKey","c","latexArea","card","marginBottom","newSchemaText","image","backgroundSize","cardTitle","cardInfo","fontStyle","CircuitCard","Card","CardActionArea","CardContent","CardMedia","title","reverse","marginTop","cardGroup","gridGap","gridTemplateColumns","getProjects","closeAndDeleteMessage","setTimeout","Snackbar","anchorOrigin","vertical","horizontal","autoHideDuration","elevation","Boolean","window","location","hostname","match","ReactGA","initialize","pageview","ScrollToTop","pathname","useLocation","scrollTo","createMuiTheme","palette","main","secondary","ReactDOM","render","StrictMode","ThemeProvider","serviceWorker","registration","unregister","catch","message"],"mappings":"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","file":"static/js/main.3101e3b4.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"tutorial_root__r29D_\",\"optionsLine\":\"tutorial_optionsLine__14Jtd\",\"optionsColumn\":\"tutorial_optionsColumn__2QfMO\",\"options\":\"tutorial_options__1cHH6\",\"selector\":\"tutorial_selector__3tVFf\",\"decorationSelector\":\"tutorial_decorationSelector__3qRet\",\"textInput\":\"tutorial_textInput__1cnxq\",\"drawing\":\"tutorial_drawing__3ZuBS\",\"gridLine\":\"tutorial_gridLine__x6ZZX\"};","export const START_DRAGGING = \"START_DRAGGING\";\nexport function startDragging(x, y) {\n  return {\n    type: START_DRAGGING,\n    x,\n    y,\n  };\n}\n\nexport const STOP_DRAGGING = \"STOP_DRAGGING\";\nexport function stopDragging() {\n  return {\n    type: STOP_DRAGGING,\n  };\n}\n\nexport const UPDATE_POSITION = \"UPDATE_POSITION\";\nexport function updatePosition({ x, y, attractor, attracted, shiftPress }) {\n  // TODO : id should be remove\n  return {\n    type: UPDATE_POSITION,\n    x,\n    y,\n    attractor: attractor || null,\n    attracted: attracted || null,\n    shiftPress,\n  };\n}\n\nexport const START_SELECT = \"START_SELECT\";\nexport function startSelect() {\n  return {\n    type: START_SELECT,\n  };\n}\n\nexport const TOGGLE_SELECTION = \"TOGGLE_SELECTION\";\nexport function toggleSelection(objectId, reset) {\n  return {\n    type: TOGGLE_SELECTION,\n    objectId,\n    reset,\n  };\n}\n\nexport const START_CREATE_PATH_ELEMENT = \"START_CREATE_PATH_ELEMENT\";\nexport function startCreatePathElement(elementType) {\n  return {\n    type: START_CREATE_PATH_ELEMENT,\n    elementType,\n  };\n}\n\nexport const VALIDATE_FIRST_STEP_PATH_ELEMENT_CREATION =\n  \"VALIDATE_FIRST_STEP_PATH_ELEMENT_CREATION\";\nexport function validateFirstStepPathElementCreation() {\n  return {\n    type: VALIDATE_FIRST_STEP_PATH_ELEMENT_CREATION,\n  };\n}\n\nexport const INVALIDATE_FIRST_STEP_PATH_ELEMENT_CREATION =\n  \"INVALIDATE_FIRST_STEP_PATH_ELEMENT_CREATION\";\nexport function invalidateFirstStepPathElementCreation() {\n  return {\n    type: INVALIDATE_FIRST_STEP_PATH_ELEMENT_CREATION,\n  };\n}\n\nexport const SAVE_PATH_ELEMENT_CREATION = \"SAVE_PATH_ELEMENT_CREATION\";\nexport function savePathElementCreation() {\n  return {\n    type: SAVE_PATH_ELEMENT_CREATION,\n  };\n}\n\nexport const START_CREATE_NODE_ELEMENT = \"START_CREATE_NODE_ELEMENT\";\nexport function startCreateNodeElement(elementType) {\n  return {\n    type: START_CREATE_NODE_ELEMENT,\n    elementType,\n  };\n}\n\nexport const ELEMENT_CREATION_NEXT_STEP = \"ELEMENT_CREATION_NEXT_STEP\";\nexport function nextStepOfElementCreation() {\n  return {\n    type: ELEMENT_CREATION_NEXT_STEP,\n  };\n}\n\nexport const SPLIT_ANCHOR = \"SPLIT_ANCHOR\";\nexport function splitAnchor(anchorId) {\n  return {\n    type: SPLIT_ANCHOR,\n    anchorId: anchorId || null,\n  };\n}\n\nexport const START_RECTANGLE_SELECTION = \"START_RECTANGLE_SELECTION\";\nexport function startRectangleSelection(x, y) {\n  return {\n    type: START_RECTANGLE_SELECTION,\n    x,\n    y,\n  };\n}\n\nexport const STOP_RECTANGLE_SELECTION = \"STOP_RECTANGLE_SELECTION\";\nexport function stopRectangleSelection() {\n  return {\n    type: STOP_RECTANGLE_SELECTION,\n  };\n}\n\nexport const STACK_SELECTED_ANCHORS = \"STACK_SELECTED_ANCHORS\";\nexport function stackSelectedAnchors(direction) {\n  return {\n    type: STACK_SELECTED_ANCHORS,\n    direction,\n  };\n}\n\nexport const DELETE_ELEMENT = \"DELETE_ELEMENT\";\nexport function deleteElement(selection) {\n  return {\n    type: DELETE_ELEMENT,\n    selection,\n  };\n}\n\nexport const UPDATE_COMPONENT = \"UPDATE_COMPONENT\";\nexport function updateComponent(id, name, value) {\n  return {\n    type: UPDATE_COMPONENT,\n    id,\n    name,\n    value,\n  };\n}\n\nexport const ZOOM = \"ZOOM\";\nexport function setZoom(zoom) {\n  return {\n    type: ZOOM,\n    zoom,\n  };\n}\n\nexport const START_MOVE_PAPER = \"START_MOVE_PAPER\";\nexport function startMovePaper(x, y) {\n  return {\n    type: START_MOVE_PAPER,\n    x,\n    y,\n  };\n}\n\nexport const MOVE_PAPER = \"MOVE_PAPER\";\nexport function movePaper(x, y) {\n  return {\n    type: MOVE_PAPER,\n    x,\n    y,\n  };\n}\n\nexport const END_MOVE_PAPER = \"END_MOVE_PAPER\";\nexport function endMovePaper() {\n  return {\n    type: END_MOVE_PAPER,\n  };\n}\n\nexport const SET_MODE_MOVE_PAPER = \"SET_MODE_MOVE_PAPER\";\nexport function setModeMovePaper() {\n  return {\n    type: SET_MODE_MOVE_PAPER,\n  };\n}\n\nexport const UPDATE_MAGNET_OPTION = \"UPDATE_MAGNET_OPTION\";\nexport function updateMagnetOption(optionName, optionValue) {\n  return {\n    type: UPDATE_MAGNET_OPTION,\n    optionName,\n    optionValue,\n  };\n}\n\nexport const LOAD_PROJECT = \"LOAD_PROJECT\";\nexport function loadProject({\n  components,\n  coordinates,\n  id = \"\",\n  username = \"\",\n  circuitname = \"\",\n}) {\n  return {\n    type: LOAD_PROJECT,\n    id,\n    username,\n    circuitname,\n    components,\n    coordinates,\n  };\n}\n\nexport const LIST_PROJECTS = \"LIST_PROJECTS\";\nexport function listProjects(jsonRep) {\n  return {\n    type: LIST_PROJECTS,\n    projects: jsonRep.map(({ id, username, circuitname, date }) => ({\n      id,\n      username,\n      circuitname,\n      date,\n    })),\n  };\n}\n","export const MODE_SELECT = \"MODE_SELECT\";\nexport const MODE_DRAG = \"MODE_DRAG\";\nexport const MODE_CREATE_PATH_ELEMENT = \"MODE_CREATE_PATH_ELEMENT\";\nexport const MODE_CREATE_NODE_ELEMENT = \"MODE_CREATE_NODE_ELEMENT\";\nexport const MODE_RECTANGLE_SELECTION = \"MODE_RECTANGLE_SELECTION\";\n\n// for dragging the all svg\nexport const MODE_MOVE_PAPER = \"MODE_MOVE_PAPER\";\n","import {\n  ZOOM,\n  START_MOVE_PAPER,\n  MOVE_PAPER,\n  END_MOVE_PAPER,\n  SET_MODE_MOVE_PAPER,\n} from \"redux/actions\";\nimport { MODE_MOVE_PAPER } from \"./interactionModes\";\n\n// If we want to use A4 format (not sure it's useful)\n// const PAGE_WIDTH = 2100;\n// const PAGE_HEIGHT = 2970;\nconst PAGE_WIDTH = 800;\nconst PAGE_HEIGHT = 500;\n\nexport const default_displayOptions = {\n  x: 0,\n  y: 0,\n  zoom: 1,\n  width: PAGE_WIDTH,\n  height: PAGE_HEIGHT,\n  dragging: {\n    isDragging: false,\n    x0: null,\n    y0: null,\n  },\n};\n\nconst zoom = (state, action) => {\n  const newZoom = action.zoom;\n  const newWidth = PAGE_WIDTH / newZoom;\n  const newHeight = PAGE_HEIGHT / newZoom;\n\n  const { x, y, width, height } = state.displayOptions;\n\n  // this do the center on the middle (no useful until SVG heigh is fixed to fit the screen size)\n  const newX = x + width / 2 - newWidth / 2;\n  const newY = y + height / 2 - newHeight / 2;\n\n  return {\n    ...state,\n    displayOptions: {\n      ...state.displayOptions,\n      x: newX,\n      y: newY,\n      zoom: newZoom,\n      width: newWidth,\n      height: newHeight,\n    },\n  };\n};\n\nconst toggleDragging = (state, action) => {\n  const { x = null, y = null } = action;\n  return {\n    ...state,\n    displayOptions: {\n      ...state.displayOptions,\n      dragging: {\n        isDragging: !state.displayOptions.dragging.isDragging,\n        x0: x,\n        y0: y,\n      },\n    },\n  };\n};\n\nconst movePaper = (state, action) => {\n  const { x, y } = action;\n  const { x0, y0 } = state.displayOptions.dragging;\n  return {\n    ...state,\n    displayOptions: {\n      ...state.displayOptions,\n      x: state.displayOptions.x + (x0 - x) / state.displayOptions.zoom,\n      y: state.displayOptions.y + (y0 - y) / state.displayOptions.zoom,\n      dragging: {\n        ...state.displayOptions.dragging,\n        x0: x,\n        y0: y,\n      },\n    },\n  };\n};\n\nconst reducer_displayOptions = (state, action) => {\n  switch (action.type) {\n    case SET_MODE_MOVE_PAPER:\n      return { ...state, mode: MODE_MOVE_PAPER };\n    case ZOOM:\n      return zoom(state, action);\n    case MOVE_PAPER:\n      return movePaper(state, action);\n    case START_MOVE_PAPER:\n    case END_MOVE_PAPER:\n      return toggleDragging(state, action);\n    default:\n      return state;\n  }\n};\nexport default reducer_displayOptions;\n","import { UPDATE_MAGNET_OPTION } from \"redux/actions\";\n\nexport const default_magnetsOptions = {\n  isGridAttracting: true,\n  gridSpace: 1,\n  isPathCoordinatesAttracting: true,\n  isNodeAnchorsAttracting: true,\n};\n\nconst reducer_magnetsOptions = (state, action) => {\n  const { type, optionName, optionValue = null } = action;\n  switch (type) {\n    case UPDATE_MAGNET_OPTION:\n      if (optionValue === null) {\n        return {\n          ...state,\n          magnetsOptions: {\n            ...state.magnetsOptions,\n            [optionName]: !state.magnetsOptions[optionName],\n          },\n        };\n      } else {\n        return {\n          ...state,\n          magnetsOptions: {\n            ...state.magnetsOptions,\n            [optionName]: optionValue,\n          },\n        };\n      }\n    default:\n      return state;\n  }\n};\nexport default reducer_magnetsOptions;\n","export const CLOSE_MESSAGE = \"CLOSE_MESSAGE\";\nexport function closeMessage(id) {\n  return {\n    type: CLOSE_MESSAGE,\n    id,\n  };\n}\n\nexport const REMOVE_MESSAGE = \"REMOVE_MESSAGE\";\nexport function removeMessage(id) {\n  return {\n    type: REMOVE_MESSAGE,\n    id,\n  };\n}\n\nexport const OPEN_MESSAGE = \"OPEN_MESSAGE\";\nexport function openMessage({ id, severity, text }) {\n  return {\n    type: OPEN_MESSAGE,\n    id,\n    severity,\n    text,\n  };\n}\n\nexport const closeAndDeleteMessage = (id) => async (dispatch, getState) => {\n  dispatch(closeMessage(id));\n\n  setTimeout(() => {\n    dispatch(removeMessage(id));\n  }, 1000);\n};\n","import { MODE_SELECT } from \"./interactionModes\";\nimport { default_displayOptions } from \"./displayOptions\";\nimport { default_magnetsOptions } from \"./magnetsOptions\";\n\nexport const initial_state = {\n  displayOptions: default_displayOptions,\n  magnetsOptions: default_magnetsOptions,\n  mode: MODE_SELECT,\n  currentProject: {\n    id: \"\",\n    username: \"\",\n    circuitname: \"\",\n  },\n  selection: [],\n  adhesivePoints: [],\n  weakLinks: [],\n  currentMagnet: {\n    attractor: null,\n    attracted: null,\n  },\n  components: {\n    byId: {},\n    allIds: [],\n  },\n  coordinates: {\n    byId: {},\n    allIds: [],\n  },\n};\n","export const rotation = (angle, x0, y0, x, y, xScale = 1, yScale = 1) => {\n  return `${\n    x0 +\n    Math.cos((-angle / 180) * Math.PI) * xScale * x -\n    Math.sin((-angle / 180) * Math.PI) * yScale * y\n  } ${\n    y0 +\n    Math.sin((-angle / 180) * Math.PI) * xScale * x +\n    Math.cos((-angle / 180) * Math.PI) * yScale * y\n  }`;\n};\n\nexport const point_included = ({ x0, y0, x1, y1 }, { x, y }) => {\n  const maxX = Math.max(x0, x1);\n  const minX = Math.min(x0, x1);\n\n  const maxY = Math.max(y0, y1);\n  const minY = Math.min(y0, y1);\n\n  if (x < minX || x > maxX) {\n    return false;\n  }\n  if (y < minY || y > maxY) {\n    return false;\n  }\n  return true;\n};\n\nexport const rect_included = (\n  { x0, y0, x1, y1 },\n  { x, y, angle, dx1, dx2, dy1, dy2 }\n) => {\n  const maxX = Math.max(x0, x1);\n  const minX = Math.min(x0, x1);\n\n  const maxY = Math.max(y0, y1);\n  const minY = Math.min(y0, y1);\n\n  const xa =\n    x +\n    Math.cos((-angle / 180) * Math.PI) * dx1 -\n    Math.sin((-angle / 180) * Math.PI) * dy1;\n  if (xa < minX || xa > maxX) {\n    return false;\n  }\n\n  const ya =\n    y +\n    Math.sin((-angle / 180) * Math.PI) * dx1 +\n    Math.cos((-angle / 180) * Math.PI) * dy1;\n  if (ya < minY || ya > maxY) {\n    return false;\n  }\n\n  const xb =\n    x +\n    Math.cos((-angle / 180) * Math.PI) * dx2 -\n    Math.sin((-angle / 180) * Math.PI) * dy1;\n  if (xb < minX || xb > maxX) {\n    return false;\n  }\n\n  const yb =\n    y +\n    Math.sin((-angle / 180) * Math.PI) * dx2 +\n    Math.cos((-angle / 180) * Math.PI) * dy1;\n  if (yb < minY || yb > maxY) {\n    return false;\n  }\n\n  const xc =\n    x +\n    Math.cos((-angle / 180) * Math.PI) * dx1 -\n    Math.sin((-angle / 180) * Math.PI) * dy2;\n  if (xc < minX || xc > maxX) {\n    return false;\n  }\n\n  const yc =\n    y +\n    Math.sin((-angle / 180) * Math.PI) * dx1 +\n    Math.cos((-angle / 180) * Math.PI) * dy2;\n  if (yc < minY || yc > maxY) {\n    return false;\n  }\n\n  const xd =\n    x +\n    Math.cos((-angle / 180) * Math.PI) * dx2 -\n    Math.sin((-angle / 180) * Math.PI) * dy2;\n  if (xd < minX || xd > maxX) {\n    return false;\n  }\n\n  const yd =\n    y +\n    Math.sin((-angle / 180) * Math.PI) * dx2 +\n    Math.cos((-angle / 180) * Math.PI) * dy2;\n  if (yd < minY || yd > maxY) {\n    return false;\n  }\n\n  return true;\n};\n","export const translateSVGbaseline2Canvas = {\n  baseline: \"bottom\",\n  hanging: \"top\",\n  middle: \"middle\",\n};\n\nexport const translateSVGalign2Canvas = {\n  start: \"start\",\n  end: \"end\",\n  middle: \"center\",\n};\n","// this factor is used to get a good ratio between coordinates and line width\nexport const MULTIPLICATIVE_CONST = 100;\n\nexport const R_LEN = 1.4;\n\nexport const defaultCurrant = {\n  show: false,\n  currantText: \"\",\n  currantIsForward: true,\n  currantIsAbove: true,\n  currantIsAfter: true,\n};\n\nexport const default_path_options = {\n  currant: defaultCurrant,\n  label: \"\",\n  annotation: \"\",\n  mirror: false,\n  invert: false,\n};\n","import React from \"react\";\nimport {\n  rotation,\n  translateSVGbaseline2Canvas,\n  translateSVGalign2Canvas,\n} from \"utils\";\n\nconst getTextAnchor = (angle, currantIsAbove) => {\n  if (-5 < angle && angle < 5) {\n    return {\n      textAnchor: \"middle\",\n      alignmentBaseline: currantIsAbove ? \"baseline\" : \"hanging\",\n    };\n  }\n  if (-86 < angle && angle <= -5) {\n    return {\n      textAnchor: currantIsAbove ? \"end\" : \"start\",\n      alignmentBaseline: currantIsAbove ? \"baseline\" : \"hanging\",\n    };\n  }\n  if (-95 < angle && angle <= -86) {\n    return {\n      textAnchor: currantIsAbove ? \"end\" : \"start\",\n      alignmentBaseline: \"middle\",\n    };\n  }\n  if (-176 < angle && angle <= -95) {\n    return {\n      textAnchor: currantIsAbove ? \"end\" : \"start\",\n      alignmentBaseline: currantIsAbove ? \"hanging\" : \"baseline\",\n    };\n  }\n\n  if (angle >= 5 && angle < 86) {\n    return {\n      textAnchor: currantIsAbove ? \"start\" : \"end\",\n      alignmentBaseline: currantIsAbove ? \"baseline\" : \"hanging\",\n    };\n  }\n  if (angle >= 86 && angle < 95) {\n    return {\n      textAnchor: currantIsAbove ? \"start\" : \"end\",\n      alignmentBaseline: \"middle\",\n    };\n  }\n  if (angle >= 95 && angle < 176) {\n    return {\n      textAnchor: currantIsAbove ? \"start\" : \"end\",\n      alignmentBaseline: currantIsAbove ? \"hanging\" : \"baseline\",\n    };\n  }\n  return {\n    textAnchor: \"middle\",\n    alignmentBaseline: currantIsAbove ? \"hanging\" : \"baseline\",\n  };\n};\n\nexport const getCurrantAttribute = ({\n  show,\n  currantText,\n  currantIsForward,\n  currantIsAbove,\n  currantIsAfter,\n}) => {\n  if (!show) {\n    return \"\";\n  }\n  const text = currantText || \"$$$$\";\n  if (!currantIsAfter) {\n    const position = currantIsAbove ? \"^\" : \"_\";\n    const direction = currantIsForward ? \">\" : \"<\";\n    return `i${direction}${position}=${text}`;\n  } else {\n    const position = currantIsAbove ? \"^\" : \"_\";\n    const direction = currantIsForward ? \">\" : \"<\";\n    return `i${position}${direction}=${text}`;\n  }\n};\n\nconst CurrantArrow = ({\n  fromCoords,\n  toCoords,\n  currantText,\n  ratio = null,\n  angle = null,\n  currantIsForward = true,\n  currantIsAbove = true,\n  currantIsAfter = true,\n}) => {\n  if (!fromCoords || !toCoords || angle === null || ratio === null) {\n    return null;\n  }\n  const { x: xFrom, y: yFrom } = fromCoords;\n  const { x: xTo, y: yTo } = toCoords;\n\n  const xI = currantIsAfter\n    ? xTo + (ratio * (xFrom - xTo)) / 2\n    : xFrom + (ratio * (xTo - xFrom)) / 2;\n  const yI = currantIsAfter\n    ? yTo + (ratio * (yFrom - yTo)) / 2\n    : yFrom + (ratio * (yTo - yFrom)) / 2;\n  const rI = 15;\n\n  return (\n    <g\n      style={{\n        fill: \"black\",\n        stroke: \"none\",\n      }}\n    >\n      <path\n        d={`M ${xI + 0.5 * rI} ${yI} L  ${xI - 0.5 * rI} ${yI + 0.5 * rI} L  ${\n          xI - 0.5 * rI\n        } ${yI - 0.5 * rI} Z`}\n        style={{\n          transform: `rotate(${angle + (currantIsForward ? 0 : 180)}deg)`,\n          transformOrigin: `${xI}px ${yI}px`,\n        }}\n      />\n      <text\n        key={Math.random()}\n        x={\n          xI -\n          (currantIsAbove ? -0.5 * rI : 0.5 * rI) *\n            Math.sin((angle / 180) * Math.PI)\n        }\n        y={\n          yI +\n          (currantIsAbove ? -0.5 * rI : 0.5 * rI) *\n            Math.cos((angle / 180) * Math.PI)\n        }\n        style={{ ...getTextAnchor(angle, currantIsAbove) }}\n      >\n        {currantText}\n      </text>\n    </g>\n  );\n};\n\nexport const drawRoughCurrant = (rc, ctx, x0, y0, angle, ratio, element) => {\n  const {\n    fromCoords,\n    toCoords,\n    currant: {\n      show,\n      currantText,\n      currantIsForward = true,\n      currantIsAbove = true,\n      currantIsAfter = true,\n    },\n  } = element;\n\n  if (!show) {\n    return null;\n  }\n\n  const xFrom = fromCoords.x - x0;\n  const xTo = toCoords.x - x0;\n  const yFrom = fromCoords.y - y0;\n  const yTo = toCoords.y - y0;\n\n  const xI = currantIsAfter\n    ? xTo + (ratio * (xFrom - xTo)) / 2\n    : xFrom + (ratio * (xTo - xFrom)) / 2;\n  const yI = currantIsAfter\n    ? yTo + (ratio * (yFrom - yTo)) / 2\n    : yFrom + (ratio * (yTo - yFrom)) / 2;\n  const rI = 15;\n\n  const theta = -angle + (currantIsForward ? 0 : 180);\n  rc.path(\n    `M ${rotation(theta, xI, yI, -0.5 * rI, 0.5 * rI)}\n    L ${rotation(theta, xI, yI, 0.5 * rI, 0)}\n    L ${rotation(theta, xI, yI, -0.5 * rI, -0.5 * rI)}\n    Z\n    `\n  );\n\n  if (!currantText) {\n    return null;\n  }\n  const xText =\n    xI -\n    (currantIsAbove ? -0.5 * rI : 0.5 * rI) * Math.sin((angle / 180) * Math.PI);\n\n  const yText =\n    yI +\n    (currantIsAbove ? -0.5 * rI : 0.5 * rI) * Math.cos((angle / 180) * Math.PI);\n\n  const { textAnchor, alignmentBaseline } = getTextAnchor(\n    angle,\n    currantIsAbove\n  );\n\n  ctx.textAlign = translateSVGalign2Canvas[textAnchor];\n  ctx.textBaseline = translateSVGbaseline2Canvas[alignmentBaseline];\n  ctx.fillText(currantText, xText, yText);\n};\n\nexport default CurrantArrow;\n","import React from \"react\";\nimport { translateSVGbaseline2Canvas, translateSVGalign2Canvas } from \"utils\";\n\nexport const getTextAnchor = (angle, isAbove, x, y) => {\n  if (-20 < angle && angle < 20) {\n    return {\n      textAnchor: \"middle\",\n      alignmentBaseline: isAbove ? \"baseline\" : \"hanging\",\n    };\n  }\n  if (-110 < angle && angle < -70) {\n    return {\n      textAnchor: isAbove ? \"end\" : \"start\",\n      alignmentBaseline: \"middle\",\n    };\n  }\n  if (70 < angle && angle < 110) {\n    return {\n      textAnchor: isAbove ? \"start\" : \"end\",\n      alignmentBaseline: \"middle\",\n    };\n  }\n  if (angle < -160 || angle > 160) {\n    return {\n      textAnchor: \"middle\",\n      alignmentBaseline: isAbove ? \"hanging\" : \"baseline\",\n    };\n  }\n  if (angle <= -20 && angle >= -70) {\n    return {\n      // textAnchor: isAbove ? \"end\" : \"start\",\n      textAnchor: \"middle\",\n      alignmentBaseline: isAbove ? \"baseline\" : \"hanging\",\n      transform: `rotate(${angle}deg)`,\n      transformOrigin: `${x}px ${y}px`,\n      rotationAngle: angle,\n    };\n  }\n  if (angle >= 20 && angle <= 70) {\n    return {\n      // textAnchor: isAbove ? \"start\" : \"end\",\n      textAnchor: \"middle\",\n      alignmentBaseline: isAbove ? \"baseline\" : \"hanging\",\n      transform: `rotate(${angle}deg)`,\n      transformOrigin: `${x}px ${y}px`,\n      rotationAngle: angle,\n    };\n  }\n  if (angle <= -110 && angle >= -160) {\n    return {\n      // textAnchor: isAbove ? \"end\" : \"start\",\n      textAnchor: \"middle\",\n      alignmentBaseline: isAbove ? \"hanging\" : \"baseline\",\n      transform: `rotate(${angle + 180}deg)`,\n      transformOrigin: `${x}px ${y}px`,\n      rotationAngle: angle + 180,\n    };\n  }\n  if (angle >= 110 && angle <= 160) {\n    return {\n      // textAnchor: isAbove ? \"start\" : \"end\",\n      textAnchor: \"middle\",\n      alignmentBaseline: isAbove ? \"hanging\" : \"baseline\",\n      transform: `rotate(${angle + 180}deg)`,\n      transformOrigin: `${x}px ${y}px`,\n      rotationAngle: angle + 180,\n    };\n  }\n};\n\nexport const getLabelAttribute = (text, isAbove = true) => {\n  if (!text) {\n    return \"\";\n  }\n  if (!isAbove) {\n    return `l_=${text}`;\n  } else {\n    return `l=${text}`;\n  }\n};\nexport const getAnnotationAttribute = (text, isAbove = false) => {\n  if (!text) {\n    return \"\";\n  }\n  if (!isAbove) {\n    return `a=${text}`;\n  } else {\n    return `a^=${text}`;\n  }\n};\n\nconst gap = 10;\n\nconst Label = ({\n  fromCoords,\n  toCoords,\n  angle = null,\n  height = null,\n  text,\n  isAbove = true,\n}) => {\n  if (!fromCoords || !toCoords || !text || angle === null || height === null) {\n    return null;\n  }\n  const { x: xFrom, y: yFrom } = fromCoords;\n  const { x: xTo, y: yTo } = toCoords;\n\n  const xL =\n    (xFrom + xTo) / 2 +\n    (isAbove ? height + gap : -(height + gap)) *\n      Math.sin((angle / 180) * Math.PI);\n  const yL =\n    (yFrom + yTo) / 2 +\n    (isAbove ? -(height + gap) : height + gap) *\n      Math.cos((angle / 180) * Math.PI);\n\n  return (\n    <g\n      style={{\n        fill: \"black\",\n        stroke: \"none\",\n      }}\n    >\n      <text\n        key={Math.random()}\n        x={xL}\n        y={yL}\n        style={{ ...getTextAnchor(angle, isAbove, xL, yL) }}\n      >\n        {text}\n      </text>\n    </g>\n  );\n};\n\nexport const drawRoughLabel = ({\n  ctx,\n  text,\n  from,\n  to,\n  angle,\n  isAbove,\n  height,\n}) => {\n  const { x: xFrom, y: yFrom } = from;\n  const { x: xTo, y: yTo } = to;\n\n  const xL =\n    (xFrom + xTo) / 2 +\n    (isAbove ? height + gap : -(height + gap)) *\n      Math.sin((angle / 180) * Math.PI);\n  const yL =\n    (yFrom + yTo) / 2 +\n    (isAbove ? -(height + gap) : height + gap) *\n      Math.cos((angle / 180) * Math.PI);\n\n  const { textAnchor, alignmentBaseline, rotationAngle = 0 } = getTextAnchor(\n    angle,\n    isAbove,\n    0,\n    0\n  );\n\n  ctx.save();\n\n  ctx.textAlign = translateSVGalign2Canvas[textAnchor];\n  ctx.textBaseline = translateSVGbaseline2Canvas[alignmentBaseline];\n\n  ctx.translate(xL, yL);\n  ctx.rotate((rotationAngle * Math.PI) / 180);\n\n  ctx.fillText(text, 0, 0);\n\n  ctx.restore();\n};\nexport default Label;\n","import React from \"react\";\n\nimport \"components/style.scss\";\nimport { MULTIPLICATIVE_CONST, rotation } from \"utils\";\n\nconst dx = 0.1;\nconst dy = 0.04;\nconst ArrowEnd = ({ x, y, angle }) => (\n  <g\n    style={{\n      transform: `translate(${x}px , ${y}px) rotate(${angle}deg)`,\n    }}\n  >\n    <path\n      d={`M 0 0 L ${-dx * MULTIPLICATIVE_CONST} ${\n        dy * MULTIPLICATIVE_CONST\n      } L ${-dx * MULTIPLICATIVE_CONST} ${-dy * MULTIPLICATIVE_CONST} Z`}\n      className=\"fill\"\n    />\n  </g>\n);\n\nexport const drawRoughArrowEnd = (rc, x, y, angle, xScale, yScale) => {\n  rc.path(`\n      M ${rotation(\n        angle,\n        x,\n        y,\n        -dx * MULTIPLICATIVE_CONST,\n        dy * MULTIPLICATIVE_CONST,\n        xScale,\n        yScale\n      )}\n  L ${x} ${y}\n      L ${rotation(\n        angle,\n        x,\n        y,\n        -dx * MULTIPLICATIVE_CONST,\n        -dy * MULTIPLICATIVE_CONST,\n        xScale,\n        yScale\n      )}\n      \n  `);\n};\nexport default ArrowEnd;\n","import React from \"react\";\nimport { translateSVGbaseline2Canvas, translateSVGalign2Canvas } from \"utils\";\nimport { getTextAnchor } from \"./label\";\nimport ArrowEnd, { drawRoughArrowEnd } from \"./arrowEnd\";\n\nconst bump = 1.5;\n\nconst Tension = ({\n  fromCoords,\n  toCoords,\n  angle = null,\n  height = null,\n  text,\n  isAbove = true,\n  isDirect = true,\n}) => {\n  if (!fromCoords || !toCoords || !text || angle === null || height === null) {\n    return null;\n  }\n  const { x: xFrom, y: yFrom } = fromCoords;\n  const { x: xTo, y: yTo } = toCoords;\n\n  const xM = (xFrom + xTo) / 2;\n  const yM = (yFrom + yTo) / 2;\n\n  const xArrow1 =\n    xM -\n    bump * height * Math.cos(((angle + (isAbove ? 60 : -60)) / 180) * Math.PI);\n  const yArrow1 =\n    yM -\n    bump * height * Math.sin(((angle + (isAbove ? 60 : -60)) / 180) * Math.PI);\n\n  const xArrow2 =\n    xM -\n    bump *\n      height *\n      Math.cos(((angle + (isAbove ? 120 : -120)) / 180) * Math.PI);\n  const yArrow2 =\n    yM -\n    bump *\n      height *\n      Math.sin(((angle + (isAbove ? 120 : -120)) / 180) * Math.PI);\n\n  const xArrow_m =\n    xM -\n    bump * height * Math.cos(((angle + (isAbove ? 90 : -90)) / 180) * Math.PI);\n  const yArrow_m =\n    yM -\n    bump * height * Math.sin(((angle + (isAbove ? 90 : -90)) / 180) * Math.PI);\n\n  return (\n    <>\n      <text\n        key={Math.random()}\n        x={xArrow_m}\n        y={yArrow_m}\n        style={{\n          fill: \"black\",\n          stroke: \"none\",\n          ...getTextAnchor(angle, isAbove, xArrow_m, yArrow_m),\n        }}\n      >\n        {text}\n      </text>\n      <path d={`M ${xArrow1} ${yArrow1} L ${xArrow2} ${yArrow2} `} />\n      <ArrowEnd\n        x={isDirect ? xArrow2 : xArrow1}\n        y={isDirect ? yArrow2 : yArrow1}\n        angle={isDirect ? angle : 180 + angle}\n      />\n    </>\n  );\n};\n\nexport const drawRoughTension = ({\n  ctx,\n  rc,\n  text,\n  from,\n  to,\n  angle,\n  isAbove,\n  isDirect,\n  height,\n}) => {\n  if (!text) {\n    return null;\n  }\n\n  const { x: xFrom, y: yFrom } = from;\n  const { x: xTo, y: yTo } = to;\n\n  const xM = (xFrom + xTo) / 2;\n  const yM = (yFrom + yTo) / 2;\n\n  const xArrow1 =\n    xM -\n    bump * height * Math.cos(((angle + (isAbove ? 60 : -60)) / 180) * Math.PI);\n  const yArrow1 =\n    yM -\n    bump * height * Math.sin(((angle + (isAbove ? 60 : -60)) / 180) * Math.PI);\n\n  const xArrow2 =\n    xM -\n    bump *\n      height *\n      Math.cos(((angle + (isAbove ? 120 : -120)) / 180) * Math.PI);\n  const yArrow2 =\n    yM -\n    bump *\n      height *\n      Math.sin(((angle + (isAbove ? 120 : -120)) / 180) * Math.PI);\n\n  const xArrow_m =\n    xM -\n    bump * height * Math.cos(((angle + (isAbove ? 90 : -90)) / 180) * Math.PI);\n  const yArrow_m =\n    yM -\n    bump * height * Math.sin(((angle + (isAbove ? 90 : -90)) / 180) * Math.PI);\n\n  const { textAnchor, alignmentBaseline, rotationAngle = 0 } = getTextAnchor(\n    angle,\n    isAbove,\n    0,\n    0\n  );\n\n  ctx.save();\n\n  ctx.textAlign = translateSVGalign2Canvas[textAnchor];\n  ctx.textBaseline = translateSVGbaseline2Canvas[alignmentBaseline];\n\n  ctx.translate(xArrow_m, yArrow_m);\n  ctx.rotate((rotationAngle * Math.PI) / 180);\n\n  ctx.fillText(text, 0, 0);\n\n  ctx.restore();\n\n  rc.path(`M ${xArrow1} ${yArrow1} L ${xArrow2} ${yArrow2}`);\n\n  drawRoughArrowEnd(\n    rc,\n    isDirect ? xArrow2 : xArrow1,\n    isDirect ? yArrow2 : yArrow1,\n    isDirect ? -angle : 180 - angle\n  );\n};\n\nexport const getVoltageAttribute = ({\n  voltageName,\n  voltageIsDown,\n  voltageIsDirect,\n}) => {\n  if (!voltageName) {\n    return \"\";\n  }\n  if (voltageIsDown && voltageIsDirect) {\n    return `v_=${voltageName}`;\n  }\n  if (voltageIsDown && !voltageIsDirect) {\n    return `v_<=${voltageName}`;\n  }\n  if (!voltageIsDown && !voltageIsDirect) {\n    return `v<=${voltageName}`;\n  }\n  return `v=${voltageName}`;\n};\nexport default Tension;\n","import React from \"react\";\nimport { connect } from \"react-redux\";\nimport { MULTIPLICATIVE_CONST, R_LEN } from \"utils\";\nimport CurrantArrow, { getCurrantAttribute } from \"atoms/currant\";\nimport Label, {\n  getLabelAttribute,\n  getAnnotationAttribute,\n  drawRoughLabel,\n} from \"atoms/label\";\nimport Tension, { drawRoughTension, getVoltageAttribute } from \"atoms/tension\";\n\nexport const pathGetBoundingBoxCenter = ({ fromCoords, toCoords }) => {\n  const { x: xFrom, y: yFrom } = fromCoords;\n  const { x: xTo, y: yTo } = toCoords;\n  const angle = parseInt(\n    (180 * Math.atan2(yTo - yFrom, xTo - xFrom)) / Math.PI\n  );\n\n  return { x: (xTo + xFrom) / 2, y: (yTo + yFrom) / 2, angle };\n};\nconst mapStateToProps = (state, props) => {\n  return props.id\n    ? {\n        fromCoords: state.coordinates.byId[props.from],\n        toCoords: state.coordinates.byId[props.to],\n      }\n    : {};\n};\n\n// TODO : should allow to have heighTop and heighBottom (cf pR component problem)\n// or a ratio between top and bottom to share the complete heigh\nexport const withPathAttributes = ({\n  height = 1,\n  width = 1,\n  isVoltageSource = false,\n}) => (component) =>\n  connect(mapStateToProps)((props) => {\n    const {\n      fromCoords,\n      toCoords,\n      selected,\n      onMouseDown,\n      currant,\n      label,\n      annotation,\n      mirror,\n      invert,\n      voltageName = null,\n      voltageIsDown = false,\n      voltageIsDirect = true,\n    } = props;\n\n    if (!fromCoords || !toCoords) {\n      return null;\n    }\n\n    const { x: xFrom, y: yFrom } = fromCoords;\n    const { x: xTo, y: yTo } = toCoords;\n\n    const d = Math.sqrt((xFrom - xTo) ** 2 + (yFrom - yTo) ** 2);\n    const ratio = (d - width * MULTIPLICATIVE_CONST * R_LEN) / (2 * d); // ratio of the line use by connection\n    const angle = parseInt(\n      (180 * Math.atan2(yTo - yFrom, xTo - xFrom)) / Math.PI\n    );\n\n    return (\n      <g\n        onMouseDown={onMouseDown || null}\n        className={`component ${selected ? \"red\" : \"black\"}`}\n      >\n        <g\n          style={{\n            transform: `translate(${(xFrom + xTo) / 2}px , ${\n              (yFrom + yTo) / 2\n            }px) rotate(${angle}deg)${mirror ? \"scaleY(-1)\" : \"\"}${\n              invert ? \"scaleX(-1)\" : \"\"\n            }`,\n          }}\n        >\n          {component({\n            ...props,\n            x: (xFrom + xTo) / 2,\n            y: (yFrom + yTo) / 2,\n            angle: angle,\n          })}\n        </g>\n\n        {/* draw the line between anchors and the component */}\n        <path\n          d={`M ${xFrom} ${yFrom} L ${xFrom + ratio * (xTo - xFrom)} ${\n            yFrom + ratio * (yTo - yFrom)\n          }`}\n        />\n        <path\n          d={`M ${xTo} ${yTo} L ${xTo + ratio * (xFrom - xTo)} ${\n            yTo + ratio * (yFrom - yTo)\n          }`}\n        />\n\n        {currant && currant.show && (\n          <CurrantArrow\n            fromCoords={fromCoords}\n            toCoords={toCoords}\n            ratio={ratio}\n            angle={angle}\n            {...currant}\n          />\n        )}\n        {label && (\n          <Label\n            fromCoords={fromCoords}\n            toCoords={toCoords}\n            height={0.5 * height * MULTIPLICATIVE_CONST * R_LEN}\n            angle={angle}\n            text={label}\n          />\n        )}\n        {voltageName && (\n          <Tension\n            fromCoords={fromCoords}\n            toCoords={toCoords}\n            height={0.5 * height * MULTIPLICATIVE_CONST * R_LEN}\n            angle={angle}\n            text={voltageName}\n            isAbove={!voltageIsDown}\n            isDirect={voltageIsDirect}\n          />\n        )}\n        {annotation && (\n          <Label\n            fromCoords={fromCoords}\n            toCoords={toCoords}\n            height={0.5 * height * MULTIPLICATIVE_CONST * R_LEN}\n            angle={angle}\n            text={annotation}\n            isAbove={false}\n          />\n        )}\n      </g>\n    );\n  });\n\nexport const drawLinks = (rc, ctx, x0, y0, width, height, element) => {\n  const { x: xFrom, y: yFrom } = element.fromCoords;\n  const { x: xTo, y: yTo } = element.toCoords;\n\n  const x = (xFrom + xTo) / 2 - x0;\n  const y = (yFrom + yTo) / 2 - y0;\n\n  const d = Math.sqrt((xFrom - xTo) ** 2 + (yFrom - yTo) ** 2);\n  const ratio = (d - width * MULTIPLICATIVE_CONST * R_LEN) / (2 * d); // ratio of the line use by connection\n  const angle = parseInt(\n    (180 * Math.atan2(yTo - yFrom, xTo - xFrom)) / Math.PI\n  );\n\n  rc.path(\n    `M ${xFrom - x0} ${yFrom - y0}\n    L ${xFrom + ratio * (xTo - xFrom) - x0} ${\n      yFrom + ratio * (yTo - yFrom) - y0\n    }\n    M ${xTo - x0} ${yTo - y0}\n    L ${xTo + ratio * (xFrom - xTo) - x0} ${yTo + ratio * (yFrom - yTo) - y0}`\n  );\n\n  const {\n    label = null,\n    annotation = null,\n    voltageName = null,\n    voltageIsDown = false,\n    voltageIsDirect = true,\n  } = element;\n\n  if (voltageName !== null) {\n    drawRoughTension({\n      ctx,\n      rc,\n      text: voltageName,\n      from: { x: xFrom - x0, y: yFrom - y0 },\n      to: { x: xTo - x0, y: yTo - y0 },\n      angle,\n      isAbove: !voltageIsDown,\n      isDirect: voltageIsDirect,\n      height: 0.5 * height * MULTIPLICATIVE_CONST * R_LEN,\n    });\n  }\n\n  if (label !== null) {\n    drawRoughLabel({\n      ctx,\n      text: label,\n      from: { x: xFrom - x0, y: yFrom - y0 },\n      to: { x: xTo - x0, y: yTo - y0 },\n      angle,\n      isAbove: true,\n      height: 0.5 * height * MULTIPLICATIVE_CONST * R_LEN,\n    });\n  }\n  if (annotation !== null) {\n    drawRoughLabel({\n      ctx,\n      text: annotation,\n      from: { x: xFrom - x0, y: yFrom - y0 },\n      to: { x: xTo - x0, y: yTo - y0 },\n      angle,\n      isAbove: false,\n      height: 0.5 * height * MULTIPLICATIVE_CONST * R_LEN,\n    });\n  }\n\n  return { x, y, angle, ratio };\n};\n\nexport const getPathAttributes = (element) => {\n  const currantAttribute = getCurrantAttribute(element.currant);\n  const label = getLabelAttribute(element.label);\n  const annotation = getAnnotationAttribute(element.annotation);\n  const voltage = getVoltageAttribute(element);\n\n  return `${label ? `, ${label}` : \"\"}${annotation ? `, ${annotation}` : \"\"}${\n    currantAttribute ? `, ${currantAttribute}` : \"\"\n  }${voltage ? `, ${voltage}` : \"\"}${element.mirror ? \", mirror\" : \"\"}${\n    element.invert ? \", invert\" : \"\"\n  }${element.poles ? `, ${element.poles}` : \"\"}`;\n};\n","import React from \"react\";\nimport \"./style.scss\";\nimport { MULTIPLICATIVE_CONST, R_LEN, rotation } from \"utils\";\nimport {\n  withPathAttributes,\n  getPathAttributes,\n  drawLinks,\n} from \"./hoc/pathComponents\";\nimport { drawRoughCurrant } from \"atoms/currant\";\n\nconst width = 0.6;\nconst height = 0.6;\nconst R = 0.6 * 0.5 * MULTIPLICATIVE_CONST * R_LEN;\nconst r = (0.7071 * R).toFixed(3);\n\nexport const getBoundingBox = () => ({\n  dx1: -R,\n  dx2: R,\n  dy1: -R,\n  dy2: R,\n});\n\nconst Lampe = () => (\n  <>\n    <circle cx={0} cy={0} r={R} />\n    <path d={`M -${r} -${r} L ${r} ${r} M -${r} ${r} L ${r} -${r}`} />\n  </>\n);\n\nexport const roughComponent = (rc, ctx, x0, y0, element) => {\n  const { x, y, angle, ratio } = drawLinks(\n    rc,\n    ctx,\n    x0,\n    y0,\n    width,\n    height,\n    element\n  );\n\n  drawRoughCurrant(rc, ctx, x0, y0, angle, ratio, element);\n\n  rc.path(\n    `M ${rotation(-angle, x, y, r, r)}\n    L ${rotation(-angle, x, y, -r, -r)}\n    M ${rotation(-angle, x, y, r, -r)}\n    L ${rotation(-angle, x, y, -r, r)}\n    `\n  );\n  rc.circle(x, y, 2 * R);\n};\n\nexport const drawer = (element) => {\n  return `to[lamp${getPathAttributes(element)}] `;\n};\n\nexport default withPathAttributes({ width, height })(Lampe);\n","import React from \"react\";\nimport \"./style.scss\";\nimport { MULTIPLICATIVE_CONST, R_LEN, rotation } from \"utils\";\nimport {\n  withPathAttributes,\n  getPathAttributes,\n  drawLinks,\n} from \"./hoc/pathComponents\";\nimport { drawRoughCurrant } from \"atoms/currant\";\n\nconst height = 0.5;\nconst width = 0.4;\n\nconst UNIT_X = 0.5 * width * MULTIPLICATIVE_CONST * R_LEN;\nconst UNIT_Y = 0.5 * height * MULTIPLICATIVE_CONST * R_LEN;\n\nexport const getBoundingBox = () => ({\n  dx1: -UNIT_X,\n  dx2: UNIT_X,\n  dy1: -UNIT_Y,\n  dy2: UNIT_Y,\n});\n\nconst EmptyDiode = () => (\n  <>\n    <path\n      d={`M ${UNIT_X} 0 L ${-UNIT_X} ${-UNIT_Y} L ${-UNIT_X} ${UNIT_Y} Z`}\n      style={{ fill: \"transparent\" }}\n    />\n    <path d={`M ${UNIT_X} ${UNIT_Y} L ${UNIT_X} ${-UNIT_Y}`} />\n  </>\n);\n\nexport const roughComponent = (rc, ctx, x0, y0, element) => {\n  const { x, y, angle, ratio } = drawLinks(\n    rc,\n    ctx,\n    x0,\n    y0,\n    width,\n    height,\n    element\n  );\n\n  drawRoughCurrant(rc, ctx, x0, y0, angle, ratio, element);\n\n  const xScale = element.invert ? -1 : 1;\n  const yScale = element.mirror ? -1 : 1;\n\n  rc.path(\n    `M ${rotation(-angle, x, y, UNIT_X, 0, xScale, yScale)}\n    L ${rotation(-angle, x, y, -UNIT_X, -UNIT_Y, xScale, yScale)}\n    L ${rotation(-angle, x, y, -UNIT_X, UNIT_Y, xScale, yScale)}\n    Z\n    M ${rotation(-angle, x, y, UNIT_X, UNIT_Y, xScale, yScale)}\n    L ${rotation(-angle, x, y, UNIT_X, -UNIT_Y, xScale, yScale)}\n    `\n  );\n};\n\nexport const drawer = (element) => {\n  return `to[empty diode${getPathAttributes(element)}] `;\n};\n\nexport default withPathAttributes({ width, height })(EmptyDiode);\n","import React from \"react\";\nimport \"./style.scss\";\nimport {\n  MULTIPLICATIVE_CONST,\n  R_LEN,\n  rotation,\n  default_path_options,\n} from \"utils\";\nimport {\n  withPathAttributes,\n  getPathAttributes,\n  drawLinks,\n} from \"./hoc/pathComponents\";\nimport { drawRoughCurrant } from \"atoms/currant\";\n\nconst height = 0.8;\nconst height_2 = 0.3;\nconst width = 0.8;\n\nconst UNIT_X = 0.5 * width * MULTIPLICATIVE_CONST * R_LEN;\nconst UNIT_Y2 = 0.5 * height_2 * MULTIPLICATIVE_CONST * R_LEN;\nconst UNIT_Y = 0.5 * height * MULTIPLICATIVE_CONST * R_LEN;\n\nexport const getBoundingBox = () => ({\n  dx1: -UNIT_X,\n  dx2: UNIT_X,\n  dy1: -UNIT_Y,\n  dy2: UNIT_Y2,\n});\n\nexport const getAnchor = ({ fromCoords, toCoords }) => {\n  const { x: xFrom, y: yFrom } = fromCoords;\n  const { x: xTo, y: yTo } = toCoords;\n\n  const angle = Math.atan2(yTo - yFrom, xTo - xFrom);\n\n  const x = (xFrom + xTo) / 2 + 55 * Math.sin(angle);\n  const y = (yFrom + yTo) / 2 - 55 * Math.cos(angle);\n  return [{ name: \"wiper\", x, y }];\n};\n\nconst PR = ({ wiper_pos = 0.5 }) => (\n  <>\n    <path\n      d={`M ${(-6 / 6) * UNIT_X} 0 L ${(-5 / 6) * UNIT_X} ${-UNIT_Y2} L ${\n        (-3 / 6) * UNIT_X\n      } ${UNIT_Y2} L ${(-1 / 6) * UNIT_X} ${-UNIT_Y2} L ${\n        (1 / 6) * UNIT_X\n      } ${UNIT_Y2} L ${(3 / 6) * UNIT_X} ${-UNIT_Y2} L ${\n        (5 / 6) * UNIT_X\n      } ${UNIT_Y2} L ${(6 / 6) * UNIT_X} 0`}\n    />\n    <path\n      d={`M ${-(0.5 - wiper_pos) * 2 * UNIT_X} ${-UNIT_Y} L ${\n        -(0.5 - wiper_pos) * 2 * UNIT_X\n      } ${-UNIT_Y2}`}\n    />\n  </>\n);\n\nexport const roughComponent = (rc, ctx, x0, y0, element) => {\n  const { x, y, angle, ratio } = drawLinks(\n    rc,\n    ctx,\n    x0,\n    y0,\n    width,\n    height,\n    element\n  );\n\n  drawRoughCurrant(rc, ctx, x0, y0, angle, ratio, element);\n\n  const xScale = element.invert ? -1 : 1;\n  const yScale = element.mirror ? -1 : 1;\n\n  const { wiper_pos } = element;\n  rc.path(\n    `M ${rotation(-angle, x, y, -UNIT_X, 0, xScale, yScale)}\n    L ${rotation(-angle, x, y, (-5 / 6) * UNIT_X, -UNIT_Y2, xScale, yScale)}\n    L ${rotation(-angle, x, y, (-3 / 6) * UNIT_X, UNIT_Y2, xScale, yScale)}\n    L ${rotation(-angle, x, y, (-1 / 6) * UNIT_X, -UNIT_Y2, xScale, yScale)}\n    L ${rotation(-angle, x, y, (1 / 6) * UNIT_X, UNIT_Y2, xScale, yScale)}\n    L ${rotation(-angle, x, y, (3 / 6) * UNIT_X, -UNIT_Y2, xScale, yScale)}\n    L ${rotation(-angle, x, y, (5 / 6) * UNIT_X, UNIT_Y2, xScale, yScale)}\n    L ${rotation(-angle, x, y, UNIT_X, 0, xScale, yScale)}\n    M ${rotation(\n      -angle,\n      x,\n      y,\n      -(0.5 - wiper_pos) * 2 * UNIT_X,\n      -UNIT_Y,\n      xScale,\n      yScale\n    )}\n    L ${rotation(\n      -angle,\n      x,\n      y,\n      -(0.5 - wiper_pos) * 2 * UNIT_X,\n      -UNIT_Y2,\n      xScale,\n      yScale\n    )}`\n  );\n};\n\nexport const drawer = (element) => {\n  return `to[pR${getPathAttributes(element)}] `;\n};\n\nexport const parameters = {\n  ...default_path_options,\n  wiper_pos: 0.5,\n};\n\nexport default withPathAttributes({ width, height })(PR);\n","import React from \"react\";\nimport \"./style.scss\";\nimport { MULTIPLICATIVE_CONST, R_LEN, rotation } from \"utils\";\nimport {\n  withPathAttributes,\n  getPathAttributes,\n  drawLinks,\n} from \"./hoc/pathComponents\";\nimport { drawRoughCurrant } from \"atoms/currant\";\n\nconst height = 0.6;\nconst width = 0.5;\nconst capacitor_width = 0.4;\n\nconst UNIT_X = 0.5 * width * MULTIPLICATIVE_CONST * R_LEN;\nconst UNIT_Y = 0.5 * height * MULTIPLICATIVE_CONST * R_LEN;\n\nconst STEP = capacitor_width * UNIT_X;\n\nexport const getBoundingBox = () => ({\n  dx1: -UNIT_X,\n  dx2: UNIT_X,\n  dy1: -UNIT_Y,\n  dy2: UNIT_Y,\n});\n\nconst Vcapacitor = () => (\n  <>\n    <path d={`M  ${-STEP} ${-UNIT_Y} L ${-STEP} ${UNIT_Y}`} />\n    <path d={`M  ${STEP} ${-UNIT_Y} L ${STEP} ${UNIT_Y}`} />\n    <path d={`M ${-UNIT_X} ${-UNIT_Y} L ${UNIT_X} ${UNIT_Y}`} />\n  </>\n);\n\nexport const roughComponent = (rc, ctx, x0, y0, element) => {\n  const { x, y, angle, ratio } = drawLinks(\n    rc,\n    ctx,\n    x0,\n    y0,\n    capacitor_width / 2,\n    height,\n    element\n  );\n\n  drawRoughCurrant(rc, ctx, x0, y0, angle, ratio, element);\n\n  const xScale = element.invert ? -1 : 1;\n  const yScale = element.mirror ? -1 : 1;\n\n  rc.path(\n    `M ${rotation(-angle, x, y, -STEP, UNIT_Y, xScale, yScale)}\n    L ${rotation(-angle, x, y, -STEP, -UNIT_Y, xScale, yScale)}\n    M ${rotation(-angle, x, y, STEP, UNIT_Y, xScale, yScale)}\n    L ${rotation(-angle, x, y, STEP, -UNIT_Y, xScale, yScale)}\n    M ${rotation(-angle, x, y, -UNIT_X, -UNIT_Y, xScale, yScale)}\n    L ${rotation(-angle, x, y, UNIT_X, UNIT_Y, xScale, yScale)}\n    `\n  );\n};\n\nexport const drawer = (element) => {\n  return `to[variable capacitor${getPathAttributes(element)}] `;\n};\n\nexport default withPathAttributes({ width: capacitor_width / 2, height })(\n  Vcapacitor\n);\n","import { getElementAnchors } from \"components\";\nimport { MULTIPLICATIVE_CONST } from \"utils\";\n\nconst EPSILON = 0.01;\n\nexport const isNode = (element) => !!element.position;\n\nexport const isPath = (element) => !!element.to && !!element.from;\n\nexport const findCommonAnchor = (node1, node2) => {\n  // get two nodes element object\n  //   if they have anchors ate the same coordinate, it returns {parentAnchor, childAnchor}\n  //    - parentAnchor is the name of the node1 anchor\n  //    - childAnchor is the name of the node2 anchor\n  //   otherwise it reurns empty object\n\n  const anchors1 = getElementAnchors(node1);\n  const anchors2 = getElementAnchors(node2);\n\n  const rep = {};\n  anchors1.forEach(({ name: name1, x: x1, y: y1 }) => {\n    anchors2.forEach(({ name: name2, x: x2, y: y2 }) => {\n      if (\n        Math.round(x1) === Math.round(x2) &&\n        Math.round(y1) === Math.round(y2)\n      ) {\n        rep.parentAnchor = name1;\n        rep.childAnchor = name2;\n      }\n    });\n  });\n\n  return rep;\n};\n\nexport const fillCoordWithAnchorsName = (\n  multipoleNodes,\n  coords,\n  nodeReference\n) => {\n  // Inputs :\n  //    - multiploeNodes is a list of nodes objects\n  //    - coords is an object of all the coords to use\n  //    - nodeReference is an object with information on nodes to draw\n  // If an anchor can be used as a coordinate, we givethe correct name to this coordinate\n\n  multipoleNodes.forEach((node) => {\n    const anchors = getElementAnchors(node);\n    anchors.forEach(({ name: anchorName, x, y }) => {\n      const coordId = getCoordId({ x, y });\n\n      if (coords[coordId] !== undefined && !coords[coordId].name) {\n        coords[coordId].name = `${nodeReference[node.id].name}.${anchorName}`;\n      }\n    });\n  });\n};\n\nexport const getPoles = ({ shape: shapeFrom }, { shape: shapeTo }) => {\n  // take in input coordinates objects fromCoords and toCoords of a path element\n  // return the string to set in order to have the correct shapes\n\n  // TODO could be improved : if for example the starting position is already a diamond, it should be -o and not d-o\n  const useStart = [\"*\", \"o\", \"d\"].includes(shapeFrom);\n  const useEnd = [\"*\", \"o\", \"d\"].includes(shapeTo);\n  if (useStart || useEnd) {\n    return `${useStart ? shapeFrom : \"\"}-${useEnd ? shapeTo : \"\"}`;\n  } else {\n    return \"\";\n  }\n};\n\nexport const simplifyNumber = (x) => {\n  // round number to 0.01 precision without useless 0\n  const rep = x.toFixed(2);\n  if (rep.slice(-3) === \".00\") {\n    return rep.slice(0, -3);\n  }\n  if (rep.slice(-1) === \"0\") {\n    return rep.slice(0, -1);\n  }\n  return rep;\n};\n\nexport const getCoordId = ({ x, y }) =>\n  `${typeof x === \"number\" ? Math.round(x) : x}-${\n    typeof y === \"number\" ? Math.round(y) : y\n  }`;\n\n// helper to write latex coordinate\nexport const getCoord = (x, y, coords, previousCoord) => {\n  const coordId = getCoordId({ x: x, y: y });\n\n  if (coords[coordId] && coords[coordId].name) {\n    return `(${coords[coordId].name})`;\n  }\n\n  if (previousCoord && previousCoord.x && previousCoord.y) {\n    if (previousCoord.x === x) {\n      return `++(0, ${simplifyNumber(\n        -(y - previousCoord.y) / MULTIPLICATIVE_CONST\n      )})`;\n    }\n    if (previousCoord.y === y) {\n      return `++(${simplifyNumber(\n        (x - previousCoord.x) / MULTIPLICATIVE_CONST\n      )}, 0)`;\n    }\n  }\n\n  return `(${simplifyNumber(x / MULTIPLICATIVE_CONST)}, ${simplifyNumber(\n    -y / MULTIPLICATIVE_CONST\n  )})`;\n};\n\n// function to filter elements in drawnElements from a listOfId\nexport const removeDrawnElements = (drawnElements) => (listeOfId) =>\n  listeOfId.filter((id) => !drawnElements[id]);\n\n// comparing function to decide which coordinate should be drawn first\nexport const compareCoord = (drawnElements, coords) => (coordId1, coordId2) => {\n  const { endingPaths: endingPaths1, nodeAssociated: nodeAssociated1 } = coords[\n    coordId1\n  ];\n  const { endingPaths: endingPaths2, nodeAssociated: nodeAssociated2 } = coords[\n    coordId2\n  ];\n\n  // we prefer starting from a coordinate with no arriving path element or as less a possible\n  if (\n    removeDrawnElements(drawnElements)(endingPaths1).length <\n    removeDrawnElements(drawnElements)(endingPaths2).length\n  ) {\n    return -1;\n  }\n  if (\n    removeDrawnElements(drawnElements)(endingPaths1).length >\n    removeDrawnElements(drawnElements)(endingPaths2).length\n  ) {\n    return 1;\n  }\n\n  // for equivalent number of arriving path, we prefer the one with the most important number of nodes\n  if (\n    removeDrawnElements(drawnElements)(nodeAssociated1).length >\n    removeDrawnElements(drawnElements)(nodeAssociated2).length\n  ) {\n    return -1;\n  }\n  if (\n    removeDrawnElements(drawnElements)(nodeAssociated1).length <\n    removeDrawnElements(drawnElements)(nodeAssociated2).length\n  ) {\n    return 1;\n  }\n  return 0;\n};\n","import React from \"react\";\nimport { connect } from \"react-redux\";\nimport \"./style.scss\";\n\nimport { MULTIPLICATIVE_CONST, R_LEN, rotation } from \"utils\";\nimport { getCoord } from \"redux/store/getCircuitikz/utils\";\n\nconst width = 0.7;\nconst gate_height = 0.35;\nconst base_height = 0.5;\n// const conn_height = 0;\nconst height = 1.1;\nconst base_width = 0.5;\nconst gate_width = 0.62;\n// const arrow_pos = 0.6;\n// const bodydiode_scale = 0.3;\n// const bodydiode_distance = 0.3;\n// const bodydiode_conn = 0.6;\n// const curr_direction = 1;\n\nconst UNIT_X = width * MULTIPLICATIVE_CONST * R_LEN;\nconst UNIT_Y = 0.5 * height * MULTIPLICATIVE_CONST * R_LEN;\n\nconst getElementTranslation = (positionAnchor) => {\n  switch (positionAnchor) {\n    case \"B\":\n      return { x: UNIT_X, y: 0 };\n    case \"C\":\n      return { x: 0, y: UNIT_Y };\n    case \"E\":\n      return { x: 0, y: -UNIT_Y };\n    default:\n      return { x: 0, y: 0 };\n  }\n};\n\nexport const getBoundingBox = ({ angle = 0, positionCoords }) => {\n  return {\n    x: positionCoords.x,\n    y: positionCoords.y,\n    angle,\n    dx1: -UNIT_X,\n    dx2: 0,\n    dy1: -UNIT_Y,\n    dy2: UNIT_Y,\n  };\n};\n\nexport const getAnchor = ({ positionAnchor, angle = 0, positionCoords }) => {\n  const { x, y } = positionCoords;\n\n  const { x: dx, y: dy } = getElementTranslation(positionAnchor);\n\n  const Cgap = getElementTranslation(\"C\");\n  const Bgap = getElementTranslation(\"B\");\n  const Egap = getElementTranslation(\"E\");\n  const radAngle = (Math.PI * angle) / 180;\n\n  const Crad = Math.atan2(dy - Cgap.y, dx - Cgap.x);\n  const Brad = Math.atan2(dy - Bgap.y, dx - Bgap.x);\n  const Erad = Math.atan2(dy - Egap.y, dx - Egap.x);\n\n  const distanceC = Math.sqrt((Cgap.x - dx) ** 2 + (Cgap.y - dy) ** 2);\n  const distanceB = Math.sqrt((Bgap.x - dx) ** 2 + (Bgap.y - dy) ** 2);\n  const distanceE = Math.sqrt((Egap.x - dx) ** 2 + (Egap.y - dy) ** 2);\n\n  return [\n    {\n      name: \"C\",\n      x: x + Math.cos(-radAngle + Crad) * distanceC,\n      y: y + Math.sin(-radAngle + Crad) * distanceC,\n    },\n    {\n      name: \"B\",\n      x: x + Math.cos(-radAngle + Brad) * distanceB,\n      y: y + Math.sin(-radAngle + Brad) * distanceB,\n    },\n    {\n      name: \"E\",\n      x: x + Math.cos(-radAngle + Erad) * distanceE,\n      y: y + Math.sin(-radAngle + Erad) * distanceE,\n    },\n  ];\n};\n\n// If id => it's from scene\n// If no id => it's from adding\nconst mapStateToProps = (state, props) => {\n  return props.id\n    ? {\n        mode: state.mode,\n        // allows to create components directly without using the store\n        positionCoords: state.coordinates.byId[props.position],\n      }\n    : {};\n};\n\nconst NMOS = ({\n  positionCoords,\n  positionAnchor = \"\",\n  angle = 0,\n  mode,\n  selected,\n  showHandles,\n  id,\n  onMouseDown,\n}) => {\n  if (!positionCoords) {\n    return null;\n  }\n  const { x: xAnchor, y: yAnchor } = positionCoords;\n  const { x: deltaX, y: deltaY } = getElementTranslation(positionAnchor);\n\n  return (\n    <g\n      onMouseDown={onMouseDown || null}\n      className={`component ${selected ? \"red\" : \"black\"}`}\n    >\n      <g\n        style={{\n          transform: `translate(${xAnchor}px , ${yAnchor}px) rotate(${-angle}deg)`,\n        }}\n      >\n        <g\n          style={{\n            transform: `translate(${deltaX}px , ${deltaY}px)`,\n          }}\n        >\n          <path\n            d={`M ${0} ${-UNIT_Y} \n                  L ${0} ${-gate_height * UNIT_Y}\n                  L ${-base_width * UNIT_X} ${-gate_height * UNIT_Y}`}\n          />\n          <path\n            d={`M ${-base_width * UNIT_X} ${-base_height * UNIT_Y}\n                  L ${-base_width * UNIT_X} ${base_height * UNIT_Y}\n                  L ${-base_width * UNIT_X} ${gate_height * UNIT_Y}\n                  L ${0} ${gate_height * UNIT_Y}\n                  L ${0} ${UNIT_Y}`}\n          />\n          <path\n            d={`M ${-gate_width * UNIT_X} ${-gate_height * UNIT_Y}\n                  L ${-gate_width * UNIT_X} ${gate_height * UNIT_Y}`}\n            style={{ strokeWidth: 2 }}\n          />\n          <path\n            d={`M ${-gate_width * UNIT_X} 0\n                      L ${-UNIT_X} 0`}\n          />\n        </g>\n      </g>\n    </g>\n  );\n};\n\nexport const roughComponent = (rc, ctx, x0, y0, element) => {\n  const x = element.positionCoords.x - x0;\n  const y = element.positionCoords.y - y0;\n\n  const { angle } = element;\n\n  rc.path(\n    `M ${rotation(angle, x, y, 0, -UNIT_Y)} \n      L ${rotation(angle, x, y, 0, -gate_height * UNIT_Y)}\n      L ${rotation(angle, x, y, -base_width * UNIT_X, -gate_height * UNIT_Y)}\n      M ${rotation(angle, x, y, -base_width * UNIT_X, -base_height * UNIT_Y)}\n      L ${rotation(angle, x, y, -base_width * UNIT_X, +base_height * UNIT_Y)}\n      L ${rotation(angle, x, y, -base_width * UNIT_X, +gate_height * UNIT_Y)}\n      L ${rotation(angle, x, y, 0, gate_height * UNIT_Y)}\n      L ${rotation(angle, x, y, 0, UNIT_Y)}\n      M ${rotation(angle, x, y, -gate_width * UNIT_X, -gate_height * UNIT_Y)}\n      L ${rotation(angle, x, y, -gate_width * UNIT_X, +gate_height * UNIT_Y)}\n      M ${rotation(angle, x, y, -gate_width * UNIT_X, 0)}\n      L ${rotation(angle, x, y, -UNIT_X, 0)}`\n  );\n};\n\nexport const drawer = (element, positionInformations, name = null) => {\n  const { x, y, position, anchor } = positionInformations;\n\n  const coord = position ? `(${position})` : getCoord(x, y, {}, {});\n\n  return `\\\\draw ${coord} node[nmos${anchor ? `, anchor=${anchor}` : \"\"}${\n    element.angle && parseFloat(element.angle) !== 0\n      ? `, rotate=${element.angle}`\n      : \"\"\n  }]${name ? `(${name})` : \"\"}{};`;\n};\n\nexport default connect(mapStateToProps)(NMOS);\n","import React from \"react\";\nimport { connect } from \"react-redux\";\nimport \"./style.scss\";\n\nimport { MULTIPLICATIVE_CONST, R_LEN, rotation } from \"utils\";\nimport { getCoord } from \"redux/store/getCircuitikz/utils\";\n\nconst width = 1.7; // Total width\nconst port_width = 0.7; // Terminals length\nconst height = 1.4; // Total height\nconst input_height = 0.5; // Input port vertical separation\nconst up_pos = 0.45; // Top and bottom anchor position\n// const font = \\pgf@circ@font@tenbm // Absolute font size needed!\n\nconst UNIT_X = 0.5 * width * MULTIPLICATIVE_CONST * R_LEN;\nconst UNIT_Y = 0.5 * height * MULTIPLICATIVE_CONST * R_LEN;\n\nconst getElementTranslation = (positionAnchor) => {\n  const upX = (1 - 2 * up_pos) * (port_width * UNIT_X);\n  const upY = (1 - up_pos) * UNIT_Y;\n  switch (positionAnchor) {\n    case \"+\":\n      return { x: UNIT_X, y: -input_height * UNIT_Y };\n    case \"-\":\n      return { x: UNIT_X, y: input_height * UNIT_Y };\n    case \"up\":\n      return { x: upX, y: upY };\n    case \"down\":\n      return { x: upX, y: -upY };\n    case \"out\":\n      return { x: -UNIT_X, y: 0 };\n    default:\n      return { x: 0, y: 0 };\n  }\n};\n\nexport const getBoundingBox = ({ angle = 0, positionCoords }) => {\n  return {\n    x: positionCoords.x,\n    y: positionCoords.y,\n    angle,\n    dx1: -UNIT_X,\n    dx2: UNIT_X,\n    dy1: -UNIT_Y,\n    dy2: UNIT_Y,\n  };\n};\n\nexport const getAnchor = ({ positionAnchor, angle = 0, positionCoords }) => {\n  const { x, y } = positionCoords;\n\n  const { x: dx, y: dy } = getElementTranslation(positionAnchor);\n\n  return [\"+\", \"-\", \"up\", \"down\", \"out\"].map((name) => {\n    const gap = getElementTranslation(name);\n\n    const radAngle = (Math.PI * angle) / 180;\n\n    const anchorRad = Math.atan2(dy - gap.y, dx - gap.x);\n    const distance = Math.sqrt((gap.x - dx) ** 2 + (gap.y - dy) ** 2);\n    return {\n      name: name,\n      x: x + Math.cos(-radAngle + anchorRad) * distance,\n      y: y + Math.sin(-radAngle + anchorRad) * distance,\n    };\n  });\n};\n\n// If id => it's from scene\n// If no id => it's from adding\nconst mapStateToProps = (state, props) => {\n  return props.id\n    ? {\n        mode: state.mode,\n        // allows to create components directly without using the store\n        positionCoords: state.coordinates.byId[props.position],\n      }\n    : {};\n};\n\nconst OpAmp = ({\n  positionCoords,\n  positionAnchor = \"\",\n  angle = 0,\n  selected,\n\n  onMouseDown,\n}) => {\n  if (!positionCoords) {\n    return null;\n  }\n  const { x: xAnchor, y: yAnchor } = positionCoords;\n  const { x: deltaX, y: deltaY } = getElementTranslation(positionAnchor);\n\n  return (\n    <g\n      onMouseDown={onMouseDown || null}\n      className={`component ${selected ? \"red\" : \"black\"}`}\n    >\n      <g\n        style={{\n          transform: `translate(${xAnchor}px , ${yAnchor}px) rotate(${-angle}deg)`,\n        }}\n      >\n        <g\n          style={{\n            transform: `translate(${deltaX}px , ${deltaY}px)`,\n          }}\n        >\n          {/* Triangle */}\n          <path\n            d={`M ${port_width * UNIT_X} 0\n            L ${-port_width * UNIT_X} ${UNIT_Y}\n            L ${-port_width * UNIT_X} ${-UNIT_Y}\n            Z`}\n            style={{ fill: \"transparent\" }}\n          />\n          {/* % Negative input terminal */}\n          <path\n            d={`M ${-UNIT_X} ${-input_height * UNIT_Y}\n               L ${-port_width * UNIT_X} ${-input_height * UNIT_Y}`}\n          />\n          <path\n            d={`M ${-port_width * UNIT_X + 10} ${-input_height * UNIT_Y} L ${\n              -port_width * UNIT_X + 30\n            } ${-input_height * UNIT_Y}`}\n          />\n\n          {/* % Positive input terminal */}\n          <path\n            d={`M ${-UNIT_X} ${input_height * UNIT_Y}\n                L ${-port_width * UNIT_X} ${input_height * UNIT_Y}`}\n          />\n          <path\n            d={`M ${-port_width * UNIT_X + 10} ${input_height * UNIT_Y}\n              L ${-port_width * UNIT_X + 30} ${input_height * UNIT_Y}\n              M ${-port_width * UNIT_X + 20} ${input_height * UNIT_Y - 10}\n              L ${-port_width * UNIT_X + 20} ${input_height * UNIT_Y + 10}`}\n          />\n\n          {/* % Output terminal */}\n          <path\n            d={`M ${UNIT_X} 0\n                L ${port_width * UNIT_X} 0`}\n          />\n        </g>\n      </g>\n    </g>\n  );\n};\n\nexport const roughComponent = (rc, ctx, x0, y0, element) => {\n  const x = element.positionCoords.x - x0;\n  const y = element.positionCoords.y - y0;\n\n  const { angle } = element;\n\n  rc.path(\n    `M ${rotation(angle, x, y, port_width * UNIT_X, 0)} \n      L ${rotation(angle, x, y, -port_width * UNIT_X, UNIT_Y)}\n      L ${rotation(angle, x, y, -port_width * UNIT_X, -UNIT_Y)}\n      Z\n      M ${rotation(angle, x, y, -UNIT_X, -input_height * UNIT_Y)}\n      L ${rotation(angle, x, y, -port_width * UNIT_X, -input_height * UNIT_Y)}\n      M ${rotation(angle, x, y, -UNIT_X, input_height * UNIT_Y)}\n      L ${rotation(angle, x, y, -port_width * UNIT_X, input_height * UNIT_Y)}\n      M ${rotation(angle, x, y, UNIT_X, 0)}\n      L ${rotation(angle, x, y, port_width * UNIT_X, 0)}\n      M ${rotation(\n        angle,\n        x,\n        y,\n        -port_width * UNIT_X + 10,\n        -input_height * UNIT_Y\n      )}\n      L ${rotation(\n        angle,\n        x,\n        y,\n        -port_width * UNIT_X + 30,\n        -input_height * UNIT_Y\n      )}\n      M ${rotation(\n        angle,\n        x,\n        y,\n        -port_width * UNIT_X + 10,\n        input_height * UNIT_Y\n      )}\n      L ${rotation(\n        angle,\n        x,\n        y,\n        -port_width * UNIT_X + 30,\n        input_height * UNIT_Y\n      )}\n      M ${rotation(\n        angle,\n        x,\n        y,\n        -port_width * UNIT_X + 20,\n        input_height * UNIT_Y - 10\n      )}\n      L ${rotation(\n        angle,\n        x,\n        y,\n        -port_width * UNIT_X + 20,\n        input_height * UNIT_Y + 10\n      )}`\n  );\n};\n\nexport const drawer = (element, positionInformations, name = null) => {\n  const { x, y, position, anchor } = positionInformations;\n\n  const coord = position ? `(${position})` : getCoord(x, y, {}, {});\n\n  return `\\\\draw ${coord} node[op amp${anchor ? `, anchor=${anchor}` : \"\"}${\n    element.angle && parseFloat(element.angle) !== 0\n      ? `, rotate=${element.angle}`\n      : \"\"\n  }]${name ? `(${name})` : \"\"}{};`;\n};\n\nexport default connect(mapStateToProps)(OpAmp);\n","import React from \"react\";\nimport { connect } from \"react-redux\";\nimport \"./style.scss\";\n\nimport { MULTIPLICATIVE_CONST, R_LEN, rotation } from \"utils\";\n\nconst width = 0.2;\nconst STEP = width * R_LEN * MULTIPLICATIVE_CONST;\n\nexport const getBoundingBox = ({ angle = 0, positionCoords }) => {\n  return {\n    x: positionCoords.x,\n    y: positionCoords.y,\n    angle,\n    dx1: 0.5 * STEP,\n    dx2: -0.5 * STEP,\n    dy1: 0,\n    dy2: 1.5 * STEP,\n  };\n};\n\nexport const getAnchor = ({ positionCoords }) => {\n  const { x, y } = positionCoords;\n\n  return [\n    {\n      name: \"C\",\n      x: x,\n      y: y,\n    },\n  ];\n};\n\n// If id => it's from scene\n// If no id => it's from adding\nconst mapStateToProps = (state, props) => {\n  return props.id\n    ? {\n        // allows to create components directly without using the store\n        positionCoords: state.coordinates.byId[props.position],\n      }\n    : {};\n};\n\nconst VEE = ({ positionCoords, angle = 0, selected, onMouseDown }) => {\n  if (!positionCoords) {\n    return null;\n  }\n  const { x: xAnchor, y: yAnchor } = positionCoords;\n\n  return (\n    <g\n      onMouseDown={onMouseDown || null}\n      className={`component ${selected ? \"red\" : \"black\"}`}\n    >\n      <g\n        style={{\n          transform: `translate(${xAnchor}px , ${yAnchor}px) rotate(${-angle}deg)`,\n        }}\n      >\n        <path\n          d={`M ${-0.5 * STEP} ${0.8 * STEP}\n                L 0 ${1.5 * STEP}\n                L ${0.5 * STEP} ${0.8 * STEP}`}\n        />\n        <path\n          d={`M 0 0\n                L 0 ${1.5 * STEP}`}\n        />\n      </g>\n    </g>\n  );\n};\n\nexport const roughComponent = (rc, ctx, x0, y0, element) => {\n  const x = element.positionCoords.x - x0;\n  const y = element.positionCoords.y - y0;\n\n  const { angle } = element;\n\n  rc.path(\n    `M ${rotation(angle, x, y, -0.5 * STEP, 0.8 * STEP)} \n      L ${rotation(angle, x, y, 0, 1.5 * STEP)}\n      L ${rotation(angle, x, y, 0.5 * STEP, 0.8 * STEP)}\n      M ${rotation(angle, x, y, 0, 0)} \n      L ${rotation(angle, x, y, 0, 1.5 * STEP)}`\n  );\n};\n\nexport const drawer = (element) => {\n  return `node[vee${\n    element.angle && element.angle !== 0 ? \" ,rotate=\" + element.angle : \"\"\n  }]{}`;\n};\n\nexport default connect(mapStateToProps)(VEE);\n","import React from \"react\";\nimport { connect } from \"react-redux\";\nimport \"./style.scss\";\n\nimport { MULTIPLICATIVE_CONST, R_LEN, rotation } from \"utils\";\n\nconst width = 0.2;\n\nconst STEP = width * R_LEN * MULTIPLICATIVE_CONST;\n\nexport const getBoundingBox = ({ angle = 0, positionCoords }) => {\n  return {\n    x: positionCoords.x,\n    y: positionCoords.y,\n    angle,\n    dx1: 0.5 * STEP,\n    dx2: -0.5 * STEP,\n    dy1: 0,\n    dy2: -1.5 * STEP,\n  };\n};\n\nexport const getAnchor = ({ positionCoords }) => {\n  const { x, y } = positionCoords;\n\n  return [\n    {\n      name: \"C\",\n      x: x,\n      y: y,\n    },\n  ];\n};\n\n// If id => it's from scene\n// If no id => it's from adding\nconst mapStateToProps = (state, props) => {\n  return props.id\n    ? {\n        // allows to create components directly without using the store\n        positionCoords: state.coordinates.byId[props.position],\n      }\n    : {};\n};\n\nconst VCC = ({ positionCoords, angle = 0, selected, onMouseDown }) => {\n  if (!positionCoords) {\n    return null;\n  }\n  const { x: xAnchor, y: yAnchor } = positionCoords;\n\n  return (\n    <g\n      onMouseDown={onMouseDown || null}\n      className={`component ${selected ? \"red\" : \"black\"}`}\n    >\n      <g\n        style={{\n          transform: `translate(${xAnchor}px , ${yAnchor}px) rotate(${-angle}deg)`,\n        }}\n      >\n        <path\n          d={`M ${-0.5 * STEP} ${-0.8 * STEP}\n                L 0 ${-1.5 * STEP}\n                L ${0.5 * STEP} ${-0.8 * STEP}`}\n        />\n        <path\n          d={`M 0 0\n                L 0 ${-1.5 * STEP}`}\n        />\n      </g>\n    </g>\n  );\n};\n\nexport const roughComponent = (rc, ctx, x0, y0, element) => {\n  const x = element.positionCoords.x - x0;\n  const y = element.positionCoords.y - y0;\n\n  const { angle } = element;\n\n  rc.path(\n    `M ${rotation(angle, x, y, -0.5 * STEP, -0.8 * STEP)} \n      L ${rotation(angle, x, y, 0, -1.5 * STEP)}\n      L ${rotation(angle, x, y, 0.5 * STEP, -0.8 * STEP)}\n      M ${rotation(angle, x, y, 0, 0)} \n      L ${rotation(angle, x, y, 0, -1.5 * STEP)}`\n  );\n};\n\nexport const drawer = (element) => {\n  return `node[vcc${\n    element.angle && element.angle !== 0 ? \" ,rotate=\" + element.angle : \"\"\n  }]{}`;\n};\n\nexport default connect(mapStateToProps)(VCC);\n","import React from \"react\";\nimport { connect } from \"react-redux\";\nimport \"./style.scss\";\n\nimport { MULTIPLICATIVE_CONST, R_LEN, rotation } from \"utils\";\n\nconst width = 0.25;\nconst STEP = width * R_LEN * MULTIPLICATIVE_CONST;\n\nexport const getBoundingBox = ({ angle = 0, positionCoords }) => {\n  return {\n    x: positionCoords.x,\n    y: positionCoords.y,\n    angle,\n    dx1: 0.6 * STEP,\n    dx2: -0.6 * STEP,\n    dy1: 0,\n    dy2: 1.6 * STEP,\n  };\n};\n\nexport const getAnchor = ({ positionCoords }) => {\n  const { x, y } = positionCoords;\n\n  return [\n    {\n      name: \"C\",\n      x: x,\n      y: y,\n    },\n  ];\n};\n\n// If id => it's from scene\n// If no id => it's from adding\nconst mapStateToProps = (state, props) => {\n  return props.id\n    ? {\n        // allows to create components directly without using the store\n        positionCoords: state.coordinates.byId[props.position],\n      }\n    : {};\n};\n\nconst Ground = ({ positionCoords, angle = 0, selected, onMouseDown }) => {\n  if (!positionCoords) {\n    return null;\n  }\n  const { x: xAnchor, y: yAnchor } = positionCoords;\n\n  return (\n    <g\n      onMouseDown={onMouseDown || null}\n      className={`component ${selected ? \"red\" : \"black\"}`}\n    >\n      <g\n        style={{\n          transform: `translate(${xAnchor}px , ${yAnchor}px) rotate(${-angle}deg)`,\n        }}\n      >\n        <path\n          d={`M ${-0.6 * STEP} ${1.2 * STEP} L ${0.6 * STEP} ${1.2 * STEP}\n          M ${-0.4 * STEP} ${1.4 * STEP} L ${0.4 * STEP} ${1.4 * STEP}\n          M ${-0.25 * STEP} ${1.6 * STEP} L ${0.25 * STEP} ${1.6 * STEP}`}\n        />\n        <path\n          d={`M 0 0\n                L 0 ${1.2 * STEP}`}\n        />\n      </g>\n    </g>\n  );\n};\n\nexport const roughComponent = (rc, ctx, x0, y0, element) => {\n  const x = element.positionCoords.x - x0;\n  const y = element.positionCoords.y - y0;\n\n  const { angle } = element;\n\n  rc.path(\n    `M ${rotation(angle, x, y, -0.6 * STEP, 1.2 * STEP)}\n     L ${rotation(angle, x, y, 0.6 * STEP, 1.2 * STEP)}\n     M ${rotation(angle, x, y, -0.4 * STEP, 1.4 * STEP)}\n     L ${rotation(angle, x, y, 0.4 * STEP, 1.4 * STEP)}\n     M ${rotation(angle, x, y, -0.25 * STEP, 1.6 * STEP)}\n     L ${rotation(angle, x, y, 0.25 * STEP, 1.6 * STEP)}\n     M ${rotation(angle, x, y, 0, 0)} \n     L ${rotation(angle, x, y, 0, 1.2 * STEP)}`\n  );\n};\n\nexport const drawer = (element) => {\n  return `node[ground${\n    element.angle && element.angle !== 0 ? \" ,rotate=\" + element.angle : \"\"\n  }]{}`;\n};\n\nexport default connect(mapStateToProps)(Ground);\n","import React from \"react\";\nimport \"./style.scss\";\nimport { MULTIPLICATIVE_CONST, R_LEN, rotation } from \"utils\";\nimport {\n  withPathAttributes,\n  getPathAttributes,\n  drawLinks,\n} from \"./hoc/pathComponents\";\nimport { drawRoughCurrant } from \"atoms/currant\";\n\nconst height = 0.6;\nconst width = 0.2;\n\nconst UNIT_X = 0.5 * width * MULTIPLICATIVE_CONST * R_LEN;\nconst UNIT_Y = 0.5 * height * MULTIPLICATIVE_CONST * R_LEN;\n\nexport const getBoundingBox = () => ({\n  dx1: -UNIT_X,\n  dx2: UNIT_X,\n  dy1: -UNIT_Y,\n  dy2: UNIT_Y,\n});\n\nexport const getAnchor = ({ fromCoords, toCoords }) => {\n  const { x: xFrom, y: yFrom } = fromCoords;\n  const { x: xTo, y: yTo } = toCoords;\n\n  const angle = Math.atan2(yTo - yFrom, xTo - xFrom);\n\n  const x = (xFrom + xTo) / 2 + 55 * Math.sin(angle);\n  const y = (yFrom + yTo) / 2 - 55 * Math.cos(angle);\n  return [{ name: \"wiper\", x, y }];\n};\n\nconst C = () => (\n  <>\n    <path d={`M  ${-UNIT_X} ${-UNIT_Y} L ${-UNIT_X} ${UNIT_Y}`} />\n    <path d={`M  ${UNIT_X} ${-UNIT_Y} L ${UNIT_X} ${UNIT_Y}`} />\n  </>\n);\n\nexport const roughComponent = (rc, ctx, x0, y0, element) => {\n  const { x, y, angle, ratio } = drawLinks(\n    rc,\n    ctx,\n    x0,\n    y0,\n    width,\n    height,\n    element\n  );\n\n  drawRoughCurrant(rc, ctx, x0, y0, angle, ratio, element);\n\n  rc.path(\n    `M ${rotation(-angle, x, y, -UNIT_X, UNIT_Y)}\n    L ${rotation(-angle, x, y, -UNIT_X, -UNIT_Y)}\n    M ${rotation(-angle, x, y, UNIT_X, UNIT_Y)}\n    L ${rotation(-angle, x, y, UNIT_X, -UNIT_Y)}\n    `\n  );\n};\n\nexport const drawer = (element) => {\n  return `to[C${getPathAttributes(element)}] `;\n};\n\nexport default withPathAttributes({ width, height })(C);\n","import React from \"react\";\nimport \"./style.scss\";\nimport { MULTIPLICATIVE_CONST, R_LEN, rotation } from \"utils\";\nimport {\n  withPathAttributes,\n  getPathAttributes,\n  drawLinks,\n} from \"./hoc/pathComponents\";\nimport { drawRoughCurrant } from \"atoms/currant\";\n\nconst height = 0.3;\nconst lower_coil_height = 0.15;\nconst width = 0.6;\nconst coils = 5;\nconst coil_aspect = 0.5;\n\nconst OTHER =\n  (0.5 * coil_aspect * width * R_LEN * MULTIPLICATIVE_CONST) / (coils - 1); //width of small coil\n\nconst STEP =\n  (width * R_LEN * MULTIPLICATIVE_CONST + (coils - 1) * 2 * OTHER) /\n  (2 * coils);\n\nconst UNIT_X = 0.5 * width * MULTIPLICATIVE_CONST * R_LEN;\nconst UNIT_Y_UP = 0.5 * height * MULTIPLICATIVE_CONST * R_LEN;\nconst UNIT_Y_DOWN = 0.5 * lower_coil_height * MULTIPLICATIVE_CONST * R_LEN;\n\nexport const getBoundingBox = () => ({\n  dx1: -UNIT_X,\n  dx2: UNIT_X,\n  dy1: -UNIT_Y_UP,\n  dy2: UNIT_Y_DOWN,\n});\n\nconst L = () => (\n  <>\n    <path\n      d={`M ${-UNIT_X} 0\n        ${[...Array(coils - 1)]\n          .map(\n            () =>\n              `a ${STEP} ${UNIT_Y_UP} 0 0 1 ${\n                2 * STEP\n              } 0 a ${OTHER} ${UNIT_Y_DOWN} 0 0 1 ${-2 * OTHER} 0 `\n          )\n          .join(\"\")}\n        a ${STEP} ${UNIT_Y_UP} 0 0 1 ${2 * STEP} 0`}\n    />\n  </>\n);\n\nexport const roughComponent = (rc, ctx, x0, y0, element) => {\n  const { x, y, angle, ratio } = drawLinks(\n    rc,\n    ctx,\n    x0,\n    y0,\n    width,\n    height,\n    element\n  );\n\n  drawRoughCurrant(rc, ctx, x0, y0, angle, ratio, element);\n\n  rc.path(\n    `M ${rotation(-angle, x, y, -UNIT_X, 0)}\n        ${[...Array(coils - 1)]\n          .map(\n            () =>\n              `a ${STEP} ${UNIT_Y_UP} ${angle} 0 ${\n                element.mirror ? \"0\" : \"1\"\n              } ${rotation(-angle, 0, 0, 2 * STEP, 0)}\n              a ${OTHER} ${UNIT_Y_DOWN} ${angle} 0 ${\n                element.mirror ? \"0\" : \"1\"\n              } ${rotation(-angle, 0, 0, -2 * OTHER, 0)} `\n          )\n          .join(\"\")}\n          a ${STEP} ${UNIT_Y_UP} ${angle} 0 ${\n      element.mirror ? \"0\" : \"1\"\n    } ${rotation(-angle, 0, 0, 2 * STEP, 0)}`\n  );\n};\n\nexport const drawer = (element) => {\n  return `to[L${getPathAttributes(element)}] `;\n};\n\nexport default withPathAttributes({ width, height })(L);\n","import React from \"react\";\nimport \"./style.scss\";\nimport { MULTIPLICATIVE_CONST, R_LEN, rotation } from \"utils\";\nimport {\n  withPathAttributes,\n  getPathAttributes,\n  drawLinks,\n} from \"./hoc/pathComponents\";\nimport { drawRoughCurrant } from \"atoms/currant\";\n\nconst height = 0.3;\nconst width = 0.8;\n\nconst UNIT_X = 0.5 * width * MULTIPLICATIVE_CONST * R_LEN;\nconst UNIT_Y = 0.5 * height * MULTIPLICATIVE_CONST * R_LEN;\n\nexport const getBoundingBox = () => ({\n  dx1: -UNIT_X,\n  dx2: UNIT_X,\n  dy1: -UNIT_Y,\n  dy2: UNIT_Y,\n});\n\nconst R = () => (\n  <path\n    d={`M ${(-6 / 6) * UNIT_X} 0 L ${(-5 / 6) * UNIT_X} ${-UNIT_Y} L ${\n      (-3 / 6) * UNIT_X\n    } ${UNIT_Y} L ${(-1 / 6) * UNIT_X} ${-UNIT_Y} L ${\n      (1 / 6) * UNIT_X\n    } ${UNIT_Y} L ${(3 / 6) * UNIT_X} ${-UNIT_Y} L ${\n      (5 / 6) * UNIT_X\n    } ${UNIT_Y} L ${(6 / 6) * UNIT_X} 0`}\n  />\n);\n\nexport const roughComponent = (rc, ctx, x0, y0, element) => {\n  const { x, y, angle, ratio } = drawLinks(\n    rc,\n    ctx,\n    x0,\n    y0,\n    width,\n    height,\n    element\n  );\n\n  drawRoughCurrant(rc, ctx, x0, y0, angle, ratio, element);\n\n  const xScale = element.invert ? -1 : 1;\n  const yScale = element.mirror ? -1 : 1;\n\n  rc.path(\n    `M ${rotation(-angle, x, y, -UNIT_X, 0, xScale, yScale)}\n    L ${rotation(-angle, x, y, (-5 / 6) * UNIT_X, -UNIT_Y, xScale, yScale)} \n    L ${rotation(-angle, x, y, (-3 / 6) * UNIT_X, UNIT_Y, xScale, yScale)} \n    L ${rotation(-angle, x, y, (-1 / 6) * UNIT_X, -UNIT_Y, xScale, yScale)} \n    L ${rotation(-angle, x, y, (1 / 6) * UNIT_X, UNIT_Y, xScale, yScale)} \n    L ${rotation(-angle, x, y, (3 / 6) * UNIT_X, -UNIT_Y, xScale, yScale)} \n    L ${rotation(-angle, x, y, (5 / 6) * UNIT_X, UNIT_Y, xScale, yScale)} \n    L ${rotation(-angle, x, y, UNIT_X, 0, xScale, yScale)}`\n  );\n};\n\nexport const drawer = (element) => {\n  return `to[R${getPathAttributes(element)}] `;\n};\n\nexport default withPathAttributes({ width, height })(R);\n","import React from \"react\";\nimport \"./style.scss\";\nimport { MULTIPLICATIVE_CONST, R_LEN, rotation } from \"utils\";\nimport {\n  withPathAttributes,\n  getPathAttributes,\n  drawLinks,\n} from \"./hoc/pathComponents\";\nimport { drawRoughCurrant } from \"atoms/currant\";\n\nconst height = 0.6;\nconst width = 0.3 * 0.33;\n\nconst UNIT_X = 0.5 * width * MULTIPLICATIVE_CONST * R_LEN;\nconst UNIT_Y = 0.5 * height * MULTIPLICATIVE_CONST * R_LEN;\n\nexport const getBoundingBox = () => ({\n  dx1: -UNIT_X,\n  dx2: UNIT_X,\n  dy1: -UNIT_Y,\n  dy2: UNIT_Y,\n});\n\nconst Battery1 = () => (\n  <>\n    <path\n      d={`\n      M ${-UNIT_X} ${-UNIT_Y}\n      L ${-UNIT_X} ${UNIT_Y}\n      M ${UNIT_X} ${-0.5 * UNIT_Y}\n      L ${UNIT_X} ${0.5 * UNIT_Y}`}\n    />\n  </>\n);\n\nexport const roughComponent = (rc, ctx, x0, y0, element) => {\n  const { x, y, angle, ratio } = drawLinks(\n    rc,\n    ctx,\n    x0,\n    y0,\n    width,\n    height,\n    element\n  );\n  drawRoughCurrant(rc, ctx, x0, y0, angle, ratio, element);\n\n  const xScale = element.invert ? -1 : 1;\n  const yScale = element.mirror ? -1 : 1;\n\n  rc.path(\n    `M ${rotation(-angle, x, y, -UNIT_X, -UNIT_Y, xScale, yScale)}\n    L ${rotation(-angle, x, y, -UNIT_X, UNIT_Y, xScale, yScale)}\n    M ${rotation(-angle, x, y, UNIT_X, 0.5 * UNIT_Y, xScale, yScale)}\n    L ${rotation(-angle, x, y, UNIT_X, -0.5 * UNIT_Y, xScale, yScale)}\n    `\n  );\n};\n\nexport const drawer = (element) => {\n  return `to[battery1${getPathAttributes(element)}] `;\n};\n\nexport default withPathAttributes({ width, height })(Battery1);\n","import React from \"react\";\nimport \"./style.scss\";\nimport {\n  MULTIPLICATIVE_CONST,\n  R_LEN,\n  default_path_options,\n  rotation,\n} from \"utils\";\nimport {\n  withPathAttributes,\n  getPathAttributes,\n  drawLinks,\n} from \"./hoc/pathComponents\";\nimport ArrowEnd, { drawRoughArrowEnd } from \"atoms/arrowEnd\";\n\nimport { drawRoughCurrant } from \"atoms/currant\";\n\nconst height = 0.35;\nconst width = 0.35;\n\nconst Arrow = ({ x, y, r, theta1, theta2 }) => {\n  const x1 = x + r * Math.cos((theta1 / 180) * Math.PI);\n  const y1 = y - r * Math.sin((theta1 / 180) * Math.PI);\n\n  const x2 = x + r * Math.cos((theta2 / 180) * Math.PI);\n  const y2 = y - r * Math.sin((theta2 / 180) * Math.PI);\n\n  return (\n    <>\n      <path\n        d={`M ${x1} ${y1} A ${r} ${r} 0 0 ${\n          theta1 < theta2 ? 0 : 1\n        } ${x2} ${y2} `}\n      />\n      <ArrowEnd x={x2} y={y2} angle={theta1 < theta2 ? 194 : 96} />\n    </>\n  );\n};\n\nexport const getBoundingBox = ({ withArrow = true }) => {\n  const height = withArrow ? 0.35 : 0.3;\n\n  const UNIT_X = 0.5 * width * MULTIPLICATIVE_CONST * R_LEN;\n  const UNIT_Y = 0.5 * height * MULTIPLICATIVE_CONST * R_LEN;\n  return {\n    dx1: -UNIT_X,\n    dx2: UNIT_X,\n    dy1: -UNIT_Y,\n    dy2: 0,\n  };\n};\n\nconst Switch = ({ isOpen = true, withArrow = true }) => {\n  const height = withArrow ? 0.35 : 0.3;\n\n  const UNIT_X = 0.5 * width * MULTIPLICATIVE_CONST * R_LEN;\n  const UNIT_Y = 0.5 * height * MULTIPLICATIVE_CONST * R_LEN;\n  if (withArrow) {\n    return (\n      <>\n        <Arrow\n          x={-UNIT_X}\n          y={0}\n          r={1.2 * UNIT_X}\n          theta1={isOpen ? -10 : 90}\n          theta2={isOpen ? 90 : -20}\n        />\n        <path d={`M ${-UNIT_X} 0 L ${0.6 * UNIT_X} ${-UNIT_Y}`} />\n      </>\n    );\n  }\n\n  return (\n    <path\n      d={`M ${-UNIT_X} 0 L ${0.9 * UNIT_X} ${-UNIT_Y} ${\n        isOpen\n          ? \"\"\n          : `M ${UNIT_X} 0 L ${0.2 * UNIT_X} 0 L ${0.2 * UNIT_X} ${-UNIT_Y}`\n      }`}\n    />\n  );\n};\n\nexport const roughComponent = (rc, ctx, x0, y0, element) => {\n  const { isOpen, withArrow } = element;\n  const height = withArrow ? 0.35 : 0.3;\n\n  const { x, y, angle, ratio } = drawLinks(\n    rc,\n    ctx,\n    x0,\n    y0,\n    width,\n    height,\n    element\n  );\n\n  drawRoughCurrant(rc, ctx, x0, y0, angle, ratio, element);\n\n  const xScale = element.invert ? -1 : 1;\n  const yScale = element.mirror ? -1 : 1;\n\n  const useNaiveCircleOrientation =\n    (element.invert && element.mirror) || (!element.invert && !element.mirror);\n\n  const UNIT_X = 0.5 * width * MULTIPLICATIVE_CONST * R_LEN;\n  const UNIT_Y = 0.5 * height * MULTIPLICATIVE_CONST * R_LEN;\n\n  if (!withArrow) {\n    rc.path(\n      `M ${rotation(-angle, x, y, -UNIT_X, 0, xScale, yScale)}\n        L ${rotation(-angle, x, y, 0.9 * UNIT_X, -UNIT_Y, xScale, yScale)}`\n    );\n    if (!isOpen) {\n      rc.path(\n        `M ${rotation(-angle, x, y, UNIT_X, 0, xScale, yScale)}\n          L ${rotation(-angle, x, y, 0.2 * UNIT_X, 0, xScale, yScale)} \n          L ${rotation(-angle, x, y, 0.2 * UNIT_X, -UNIT_Y, xScale, yScale)}`\n      );\n    }\n  } else {\n    rc.path(\n      `M ${rotation(-angle, x, y, -UNIT_X, 0, xScale, yScale)}\n        L ${rotation(-angle, x, y, 0.6 * UNIT_X, -UNIT_Y, xScale, yScale)}`\n    );\n\n    const cx = -UNIT_X;\n    const r = 1.2 * UNIT_X;\n    const theta1 = isOpen ? -10 : 90;\n    const theta2 = isOpen ? 90 : -20;\n\n    const x1 = cx + r * Math.cos((theta1 / 180) * Math.PI);\n    const y1 = -r * Math.sin((theta1 / 180) * Math.PI);\n\n    const x2 = cx + r * Math.cos((theta2 / 180) * Math.PI);\n    const y2 = -r * Math.sin((theta2 / 180) * Math.PI);\n\n    rc.path(\n      `M ${rotation(-angle, x, y, x1, y1, xScale, yScale)} A ${r} ${r} 1 0 ${\n        theta1 < theta2\n          ? useNaiveCircleOrientation\n            ? 0\n            : 1\n          : useNaiveCircleOrientation\n          ? 1\n          : 0\n      } ${rotation(-angle, x, y, x2, y2, xScale, yScale)}`\n    );\n\n    const xEnd =\n      x +\n      Math.cos((angle / 180) * Math.PI) * xScale * x2 -\n      Math.sin((angle / 180) * Math.PI) * yScale * y2;\n\n    const yEnd =\n      y +\n      Math.sin((angle / 180) * Math.PI) * xScale * x2 +\n      Math.cos((angle / 180) * Math.PI) * yScale * y2;\n\n    drawRoughArrowEnd(\n      rc,\n      xEnd,\n      yEnd,\n      -angle -\n        (theta1 < theta2\n          ? useNaiveCircleOrientation\n            ? 194\n            : 170\n          : useNaiveCircleOrientation\n          ? 96\n          : 70),\n      xScale,\n      yScale\n    );\n  }\n};\n\nexport const drawer = (element) => {\n  const { isOpen, withArrow } = element;\n  if (withArrow) {\n    return `to[${isOpen ? \"opening \" : \"\"}switch${getPathAttributes(\n      element\n    )}] `;\n  }\n  return `to[normal ${isOpen ? \"open\" : \"closed\"} switch${getPathAttributes(\n    element\n  )}] `;\n};\n\nexport const parameters = {\n  ...default_path_options,\n  isOpen: true,\n  withArrow: true,\n};\n\nexport default withPathAttributes({ width, height })(Switch);\n","import React from \"react\";\nimport { connect } from \"react-redux\";\nimport \"./style.scss\";\nimport CurrantArrow from \"atoms/currant\";\nimport Label from \"atoms/label\";\n\nimport { drawRoughCurrant } from \"atoms/currant\";\nimport { getPathAttributes } from \"./hoc/pathComponents\";\nimport { defaultCurrant } from \"utils\";\n\nconst mapStateToProps = (state, props) => {\n  return props.id\n    ? {\n        fromCoords: state.coordinates.byId[props.from],\n        toCoords: state.coordinates.byId[props.to],\n      }\n    : {};\n};\n\nconst Short = ({\n  fromCoords,\n  toCoords,\n  selected,\n  onMouseDown,\n  currant,\n  label,\n  annotation,\n}) => {\n  if (!fromCoords || !toCoords) {\n    return null;\n  }\n\n  const { x: xFrom, y: yFrom } = fromCoords;\n  const { x: xTo, y: yTo } = toCoords;\n\n  const d = Math.sqrt((xFrom - xTo) ** 2 + (yFrom - yTo) ** 2);\n  const ratio = 1; // ratio of the line use by connection\n  const angle = parseInt(\n    (180 * Math.atan2(yTo - yFrom, xTo - xFrom)) / Math.PI\n  );\n\n  return (\n    <g\n      onMouseDown={onMouseDown || null}\n      className={`component ${selected ? \"red\" : \"black\"}`}\n    >\n      <path d={`M ${xFrom} ${yFrom} L ${xTo} ${yTo}`} />\n\n      {currant && currant.show && (\n        <CurrantArrow\n          fromCoords={fromCoords}\n          toCoords={toCoords}\n          ratio={1}\n          angle={angle}\n          {...currant}\n        />\n      )}\n      {label && (\n        <Label\n          fromCoords={fromCoords}\n          toCoords={toCoords}\n          height={0}\n          angle={angle}\n          text={label}\n        />\n      )}\n      {annotation && (\n        <Label\n          fromCoords={fromCoords}\n          toCoords={toCoords}\n          height={0}\n          angle={angle}\n          text={annotation}\n          isAbove={false}\n        />\n      )}\n    </g>\n  );\n};\n\nexport const roughComponent = (rc, ctx, x0, y0, element) => {\n  const xFrom = element.fromCoords.x - x0;\n  const yFrom = element.fromCoords.y - y0;\n\n  const xTo = element.toCoords.x - x0;\n  const yTo = element.toCoords.y - y0;\n\n  rc.path(`M ${xFrom} ${yFrom} L ${xTo} ${yTo}`);\n\n  const angle = parseInt(\n    (180 * Math.atan2(yTo - yFrom, xTo - xFrom)) / Math.PI\n  );\n\n  drawRoughCurrant(rc, ctx, x0, y0, angle, 1, element);\n};\n\nexport const drawer = (element) => {\n  return `to[short${getPathAttributes(element)}] `;\n};\n\nexport const parameters = {\n  currant: { ...defaultCurrant },\n};\n\nexport default connect(mapStateToProps)(Short);\n","import React from \"react\";\nimport { connect } from \"react-redux\";\nimport \"./style.scss\";\n\nconst mapStateToProps = (state, props) => {\n  return props.id\n    ? {\n        fromCoords: state.coordinates.byId[props.from],\n        toCoords: state.coordinates.byId[props.to],\n      }\n    : {};\n};\n\nconst RightUp = ({ fromCoords, toCoords, selected, onMouseDown }) => {\n  if (!fromCoords || !toCoords) {\n    return null;\n  }\n\n  const { x: xFrom, y: yFrom } = fromCoords;\n  const { x: xTo, y: yTo } = toCoords;\n\n  return (\n    <g\n      onMouseDown={onMouseDown || null}\n      className={`component ${selected ? \"red\" : \"black\"}`}\n    >\n      <path d={`M ${xFrom} ${yFrom} L ${xTo} ${yFrom}L ${xTo} ${yTo}`} />\n    </g>\n  );\n};\n\nexport const roughComponent = (rc, ctx, x0, y0, element) => {\n  const xFrom = element.fromCoords.x - x0;\n  const yFrom = element.fromCoords.y - y0;\n\n  const xTo = element.toCoords.x - x0;\n  const yTo = element.toCoords.y - y0;\n\n  rc.path(`M ${xFrom} ${yFrom} L ${xTo} ${yFrom} L ${xTo} ${yTo}`);\n};\n\nexport const drawer = () => {\n  return `-| `;\n};\n\nexport const parameters = {};\n\nexport default connect(mapStateToProps)(RightUp);\n","import React from \"react\";\nimport { connect } from \"react-redux\";\nimport \"./style.scss\";\n\nconst mapStateToProps = (state, props) => {\n  return props.id\n    ? {\n        fromCoords: state.coordinates.byId[props.from],\n        toCoords: state.coordinates.byId[props.to],\n      }\n    : {};\n};\n\nexport const roughComponent = (rc, ctx, x0, y0, element) => {\n  const xFrom = element.fromCoords.x - x0;\n  const yFrom = element.fromCoords.y - y0;\n\n  const xTo = element.toCoords.x - x0;\n  const yTo = element.toCoords.y - y0;\n\n  rc.path(`M ${xFrom} ${yFrom} L ${xFrom} ${yTo}L ${xTo} ${yTo}`);\n};\n\nconst UpRight = ({ fromCoords, toCoords, selected, onMouseDown }) => {\n  if (!fromCoords || !toCoords) {\n    return null;\n  }\n\n  const { x: xFrom, y: yFrom } = fromCoords;\n  const { x: xTo, y: yTo } = toCoords;\n\n  return (\n    <g\n      onMouseDown={onMouseDown || null}\n      className={`component ${selected ? \"red\" : \"black\"}`}\n    >\n      <path d={`M ${xFrom} ${yFrom} L ${xFrom} ${yTo}L ${xTo} ${yTo}`} />\n    </g>\n  );\n};\n\nexport const drawer = () => {\n  return `|- `;\n};\n\nexport const parameters = {};\n\nexport default connect(mapStateToProps)(UpRight);\n","import React from \"react\";\nimport \"../style.scss\";\nimport {\n  MULTIPLICATIVE_CONST,\n  R_LEN,\n  rotation,\n  default_path_options,\n} from \"utils\";\nimport {\n  withPathAttributes,\n  getPathAttributes,\n  drawLinks,\n} from \"../hoc/pathComponents\";\nimport { drawRoughCurrant } from \"atoms/currant\";\n\nconst SOURCE_HEIGHT = 0.6;\nconst SOURCE_WIDTH = 0.6;\n\n// const OO_SOURCE_HEIGHT = 0.6;\n// const OO_SOURCE_WIDTH = 0.6;\n\nconst UNIT_X = 0.5 * SOURCE_WIDTH * MULTIPLICATIVE_CONST * R_LEN;\nconst UNIT_Y = 0.5 * SOURCE_HEIGHT * MULTIPLICATIVE_CONST * R_LEN;\n\n// sum must be equal to 1\nconst OO_SOURCE_CIRCLE_SIZE = 0.65;\nconst OO_SOURCE_CIRCLE_OFFSET = 0.35;\n\nconst O_Source = (type = \"v\") => () => (\n  <>\n    <circle cx={0} cy={0} r={UNIT_X} />\n    {type === \"v\" ? (\n      <path d={`M -${UNIT_X} 0 L ${UNIT_X} 0`} />\n    ) : (\n      <path d={`M 0 ${UNIT_X} L 0 -${UNIT_X}`} />\n    )}\n  </>\n);\n\nconst OO_Source = () => (\n  <>\n    <circle\n      cx={-OO_SOURCE_CIRCLE_OFFSET * UNIT_X}\n      cy={0}\n      r={OO_SOURCE_CIRCLE_SIZE * UNIT_X}\n    />\n    <circle\n      cx={OO_SOURCE_CIRCLE_OFFSET * UNIT_X}\n      cy={0}\n      r={OO_SOURCE_CIRCLE_SIZE * UNIT_X}\n    />\n  </>\n);\n\nexport const V_SourceComponent = withPathAttributes({\n  width: SOURCE_WIDTH,\n  height: SOURCE_HEIGHT,\n  isVoltageSource: true,\n})(O_Source(\"v\"));\nexport const I_SourceComponent = withPathAttributes({\n  width: SOURCE_WIDTH,\n  height: SOURCE_HEIGHT,\n  isVoltageSource: true,\n})(O_Source(\"i\"));\nexport const V_OO_SourceComponent = withPathAttributes({\n  width: SOURCE_WIDTH,\n  height: SOURCE_HEIGHT,\n  isVoltageSource: true,\n})(OO_Source);\nexport const I_OO_SourceComponent = withPathAttributes({\n  width: SOURCE_WIDTH,\n  height: SOURCE_HEIGHT,\n})(OO_Source);\n\nexport const getBoundingBox = () => ({\n  dx1: -UNIT_X,\n  dx2: UNIT_X,\n  dy1: -UNIT_Y,\n  dy2: UNIT_Y,\n});\n\nexport const roughComponent = (type) => (rc, ctx, x0, y0, element) => {\n  const { x, y, angle, ratio } = drawLinks(\n    rc,\n    ctx,\n    x0,\n    y0,\n    SOURCE_WIDTH,\n    SOURCE_HEIGHT,\n    element\n  );\n\n  drawRoughCurrant(rc, ctx, x0, y0, angle, ratio, element);\n\n  if (type === \"vsource\") {\n    rc.circle(x, y, 2 * UNIT_X);\n    rc.path(\n      `M ${rotation(-angle, x, y, -UNIT_X, 0)}\n      L ${rotation(-angle, x, y, UNIT_X, 0)}`\n    );\n  }\n  if (type === \"isource\") {\n    rc.circle(x, y, 2 * UNIT_X);\n    rc.path(\n      `M ${rotation(-angle, x, y, 0, -UNIT_X)}\n      L ${rotation(-angle, x, y, 0, UNIT_X)}`\n    );\n  }\n  if (type === \"ioosource\" || type === \"voosource\") {\n    const x1 =\n      x + Math.cos((Math.PI * angle) / 180) * OO_SOURCE_CIRCLE_OFFSET * UNIT_X;\n    const y1 =\n      y + Math.sin((Math.PI * angle) / 180) * OO_SOURCE_CIRCLE_OFFSET * UNIT_X;\n\n    const x2 =\n      x - Math.cos((Math.PI * angle) / 180) * OO_SOURCE_CIRCLE_OFFSET * UNIT_X;\n    const y2 =\n      y - Math.sin((Math.PI * angle) / 180) * OO_SOURCE_CIRCLE_OFFSET * UNIT_X;\n\n    rc.circle(x1, y1, 2 * OO_SOURCE_CIRCLE_SIZE * UNIT_X);\n    rc.circle(x2, y2, 2 * OO_SOURCE_CIRCLE_SIZE * UNIT_X);\n  }\n};\n\nexport const drawer = (sourceName) => (element) => {\n  if (sourceName === \"vsource\" || sourceName === \"voosource\") {\n    return `to[${sourceName}${getPathAttributes({\n      ...element,\n      label: \"\",\n    })}] `;\n  }\n  return `to[${sourceName}${getPathAttributes({ ...element })}] `;\n};\n\nexport const parameters = {\n  ...default_path_options,\n  voltageName: \"\",\n  voltageIsDown: false,\n  voltageIsDirect: true,\n};\n","import React from \"react\";\nimport Lampe, {\n  drawer as lampeDrawer,\n  roughComponent as lampeRoughComponent,\n  getBoundingBox as lampeGetBoundingBox,\n} from \"./Lampe\";\nimport EmptyDiode, {\n  drawer as emptyDiodeDrawer,\n  roughComponent as emptyDiodeRoughComponent,\n  getBoundingBox as emptyDiodeGetBoundingBox,\n} from \"./empty_diode\";\nimport Pr, {\n  getAnchor as pR_getAnchor,\n  drawer as pRDrawer,\n  roughComponent as pRRoughComponent,\n  getBoundingBox as pRGetBoundingBox,\n  parameters as pRParameters,\n} from \"./pR\";\nimport Vcapacitor, {\n  drawer as vcapacitorDrawer,\n  roughComponent as vcapacitorRoughComponent,\n  getBoundingBox as vcapacitorGetBoundingBox,\n} from \"./vcapacitor\";\nimport NMOS, {\n  getAnchor as nmos_getAnchor,\n  drawer as nmosDrawer,\n  roughComponent as nmosRoughComponent,\n  getBoundingBox as nmosGetBoundingBox,\n} from \"./nmos\";\nimport OpAmp, {\n  getAnchor as op_amp_getAnchor,\n  drawer as op_ampDrawer,\n  roughComponent as op_ampRoughComponent,\n  getBoundingBox as op_ampGetBoundingBox,\n} from \"./op_amp\";\nimport VEE, {\n  getAnchor as vee_getAnchor,\n  drawer as veeDrawer,\n  roughComponent as veeRoughComponent,\n  getBoundingBox as veeGetBoundingBox,\n} from \"./vee\";\nimport VCC, {\n  getAnchor as vcc_getAnchor,\n  drawer as vccDrawer,\n  roughComponent as vccRoughComponent,\n  getBoundingBox as vccGetBoundingBox,\n} from \"./vcc\";\nimport Ground, {\n  getAnchor as ground_getAnchor,\n  drawer as groundDrawer,\n  roughComponent as groundRoughComponent,\n  getBoundingBox as groundGetBoundingBox,\n} from \"./ground\";\nimport C, {\n  drawer as cDrawer,\n  roughComponent as cRoughComponent,\n  getBoundingBox as cGetBoundingBox,\n} from \"./C\";\nimport L, {\n  drawer as lDrawer,\n  roughComponent as lRoughComponent,\n  getBoundingBox as lGetBoundingBox,\n} from \"./L\";\nimport R, {\n  drawer as rDrawer,\n  roughComponent as rRoughComponent,\n  getBoundingBox as rGetBoundingBox,\n} from \"./R\";\nimport Battery1, {\n  drawer as battery1Drawer,\n  roughComponent as battery1RoughComponent,\n  getBoundingBox as battery1GetBoundingBox,\n} from \"./battery1\";\nimport Switch, {\n  drawer as switchDrawer,\n  roughComponent as switchRoughComponent,\n  getBoundingBox as switchGetBoundingBox,\n  parameters as switchParameters,\n} from \"./switch\";\n\nimport Short, {\n  drawer as shortDrawer,\n  roughComponent as shortRoughComponent,\n  parameters as shortParameters,\n} from \"./short\";\nimport RightUp, {\n  drawer as rightUpDrawer,\n  roughComponent as rightUpRoughComponent,\n  parameters as rightUpParameters,\n} from \"./rightUp\";\nimport UpRight, {\n  drawer as upRightDrawer,\n  roughComponent as upRightRoughComponent,\n  parameters as upRightParameters,\n} from \"./upRight\";\nimport {\n  V_SourceComponent,\n  I_SourceComponent,\n  V_OO_SourceComponent,\n  I_OO_SourceComponent,\n  getBoundingBox as sourcesBoundingBoxe,\n  drawer as sourcesDrawer,\n  roughComponent as sourceRoughComponent,\n  parameters as voltageSourceParameters,\n} from \"./sourcess\";\n\nimport { pathGetBoundingBoxCenter } from \"components/hoc/pathComponents\";\n\nconst getAnchors = {\n  pR: (props) => pR_getAnchor(props),\n  nmos: (props) => nmos_getAnchor(props),\n  op_amp: (props) => op_amp_getAnchor(props),\n  vee: (props) => vee_getAnchor(props),\n  vcc: (props) => vcc_getAnchor(props),\n  ground: (props) => ground_getAnchor(props),\n};\n\nexport const pathOptions = {\n  pR: pRParameters,\n  switch: switchParameters,\n  short: shortParameters,\n  rightUp: rightUpParameters,\n  upRight: upRightParameters,\n  voosource: voltageSourceParameters,\n  vsource: voltageSourceParameters,\n};\n\nconst getDrawer = {\n  short: shortDrawer,\n  rightUp: rightUpDrawer,\n  upRight: upRightDrawer,\n  lampe: lampeDrawer,\n  \"empty led\": emptyDiodeDrawer,\n  pR: pRDrawer,\n  nmos: nmosDrawer,\n  op_amp: op_ampDrawer,\n  vee: veeDrawer,\n  vcc: vccDrawer,\n  ground: groundDrawer,\n  vcapacitor: vcapacitorDrawer,\n  C: cDrawer,\n  L: lDrawer,\n  R: rDrawer,\n  battery1: battery1Drawer,\n  switch: switchDrawer,\n  vsource: sourcesDrawer(\"vsource\"),\n  isource: sourcesDrawer(\"isource\"),\n  voosource: sourcesDrawer(\"voosource\"),\n  ioosource: sourcesDrawer(\"ioosource\"),\n};\n\nconst getRoughComponents = {\n  short: shortRoughComponent,\n  rightUp: rightUpRoughComponent,\n  upRight: upRightRoughComponent,\n  lampe: lampeRoughComponent,\n  \"empty led\": emptyDiodeRoughComponent,\n  pR: pRRoughComponent,\n  nmos: nmosRoughComponent,\n  op_amp: op_ampRoughComponent,\n  vee: veeRoughComponent,\n  vcc: vccRoughComponent,\n  ground: groundRoughComponent,\n  vcapacitor: vcapacitorRoughComponent,\n  C: cRoughComponent,\n  L: lRoughComponent,\n  R: rRoughComponent,\n  battery1: battery1RoughComponent,\n  switch: switchRoughComponent,\n  vsource: sourceRoughComponent(\"vsource\"),\n  isource: sourceRoughComponent(\"isource\"),\n  voosource: sourceRoughComponent(\"voosource\"),\n  ioosource: sourceRoughComponent(\"ioosource\"),\n};\n\nconst getBoundingBoxComponent = {\n  lampe: lampeGetBoundingBox,\n  \"empty led\": emptyDiodeGetBoundingBox,\n  pR: pRGetBoundingBox,\n  nmos: nmosGetBoundingBox,\n  op_amp: op_ampGetBoundingBox,\n  vee: veeGetBoundingBox,\n  vcc: vccGetBoundingBox,\n  ground: groundGetBoundingBox,\n  vcapacitor: vcapacitorGetBoundingBox,\n  C: cGetBoundingBox,\n  L: lGetBoundingBox,\n  R: rGetBoundingBox,\n  battery1: battery1GetBoundingBox,\n  switch: switchGetBoundingBox,\n  vsource: sourcesBoundingBoxe,\n  isource: sourcesBoundingBoxe,\n  voosource: sourcesBoundingBoxe,\n  ioosource: sourcesBoundingBoxe,\n};\n\nexport const getBoundingBox = (element, coordinateById) => {\n  if (element.position) {\n    const positionCoords = coordinateById[element.position];\n    return getBoundingBoxComponent[element.type]({\n      ...element,\n      positionCoords,\n    });\n  } else {\n    const fromCoords = coordinateById[element.from];\n    const toCoords = coordinateById[element.to];\n    switch (element.type) {\n      case \"short\":\n      case \"rightUp\":\n      case \"upRight\":\n        const { x, y } = fromCoords;\n        const { x: x2, y: y2 } = toCoords;\n        return { x, y, angle: 0, dx1: 0, dx2: x2 - x, dy1: 0, dy2: y2 - y };\n      default:\n        break;\n    }\n    const rep = {\n      ...pathGetBoundingBoxCenter({ fromCoords, toCoords }),\n      ...getBoundingBoxComponent[element.type](element),\n    };\n\n    const xScale = element.invert ? -1 : 1;\n    const yScale = element.mirror ? -1 : 1;\n    rep.dx1 = xScale * rep.dx1;\n    rep.dx2 = xScale * rep.dx2;\n    rep.dy1 = yScale * rep.dy1;\n    rep.dy2 = yScale * rep.dy2;\n\n    return rep;\n  }\n};\n\nexport const roughComponents = (rc, ctx, x0, y0, element) =>\n  getRoughComponents[element.type](rc, ctx, x0, y0, element);\n\nexport const getElementAnchors = (element) => {\n  return getAnchors[element.type] ? getAnchors[element.type](element) : [];\n};\n\nexport const drawElement = (element, position1, position2) => {\n  return getDrawer[element.type](element, position1, position2);\n};\n\nexport const isPath = {\n  short: true,\n  rightUp: true,\n  upRight: true,\n  lampe: true,\n  \"empty led\": true,\n  pR: true,\n  nmos: false,\n  op_amp: false,\n  vee: false,\n  vcc: false,\n  ground: false,\n  vcapacitor: true,\n  C: true,\n  L: true,\n  R: true,\n  battery1: true,\n  switch: true,\n  vsource: true,\n  isource: true,\n  voosource: true,\n  ioosource: true,\n};\n\nexport const isMultyPole = {\n  short: false,\n  rightUp: false,\n  upRight: false,\n  lampe: false,\n  \"empty led\": false,\n  pR: false,\n  nmos: true,\n  op_amp: true,\n  vee: false,\n  vcc: false,\n  ground: false,\n  vcapacitor: false,\n  C: false,\n  L: false,\n  R: false,\n  battery1: false,\n  switch: false,\n  vsource: false,\n  isource: false,\n  voosource: false,\n  ioosource: false,\n};\n\nconst svgComponents = {\n  short: (props) => <Short key={props.id} {...props} />,\n  rightUp: (props) => <RightUp key={props.id} {...props} />,\n  upRight: (props) => <UpRight key={props.id} {...props} />,\n  lampe: (props) => <Lampe key={props.id} {...props} />,\n  \"empty led\": (props) => <EmptyDiode key={props.id} {...props} />,\n  pR: (props) => <Pr key={props.id} {...props} />,\n  nmos: (props) => <NMOS key={props.id} {...props} />,\n  op_amp: (props) => <OpAmp key={props.id} {...props} />,\n  vee: (props) => <VEE key={props.id} {...props} />,\n  vcc: (props) => <VCC key={props.id} {...props} />,\n  ground: (props) => <Ground key={props.id} {...props} />,\n  vcapacitor: (props) => <Vcapacitor key={props.id} {...props} />,\n  C: (props) => <C key={props.id} {...props} />,\n  L: (props) => <L key={props.id} {...props} />,\n  R: (props) => <R key={props.id} {...props} />,\n  battery1: (props) => <Battery1 key={props.id} {...props} />,\n  switch: (props) => <Switch key={props.id} {...props} />,\n  vsource: (props) => <V_SourceComponent key={props.id} {...props} />,\n  isource: (props) => <I_SourceComponent key={props.id} {...props} />,\n  voosource: (props) => <V_OO_SourceComponent key={props.id} {...props} />,\n  ioosource: (props) => <I_OO_SourceComponent key={props.id} {...props} />,\n};\n\nexport const structure = {\n  bipoles: [\"lampe\", \"switch\", \"R\", \"C\", \"L\", \"empty led\", \"vcapacitor\", \"pR\"],\n  sources: [\"battery1\", \"vsource\", \"isource\", \"voosource\", \"ioosource\"],\n  references: [\"vee\", \"vcc\", \"ground\"],\n  transistors: [\"nmos\", \"op_amp\"],\n};\n\nexport default svgComponents;\n","import { getElementAnchors, isPath } from \"components\";\n\nexport const getAdhesivePoints = (elementType) => {\n  const adhesivePoints = [];\n  if (isPath[elementType]) {\n    adhesivePoints.push({\n      type: \"ANCHOR\",\n      id: null,\n      dx: 0,\n      dy: 0,\n    });\n  }\n\n  const elementAnchors = getElementAnchors({\n    type: elementType,\n    fromCoords: { x: 0, y: 0 },\n    toCoords: { x: 0, y: 0 },\n    positionCoords: { x: 0, y: 0 },\n  });\n\n  elementAnchors.forEach(({ x, y, name }) => {\n    adhesivePoints.push({\n      type: isPath[elementType] ? \"PATH\" : \"NODE\", // TODO use constant file\n      name: name,\n      id: null,\n      dx: -x,\n      dy: -y,\n    });\n  });\n\n  return adhesivePoints;\n};\n\nexport const componentUseThisAnchor = (element, anchorId) => {\n  if (element.from && element.from === anchorId) {\n    return true;\n  }\n  if (element.to && element.to === anchorId) {\n    return true;\n  }\n  if (element.position && element.position === anchorId) {\n    return true;\n  }\n  return false;\n};\n\nexport const replaceComponentAnchor = (\n  element,\n  previousAnchorId,\n  newAnchorId\n) => {\n  const newElement = { ...element };\n  if (element.from && element.from === previousAnchorId) {\n    newElement.from = newAnchorId;\n  }\n  if (element.to && element.to === previousAnchorId) {\n    newElement.to = newAnchorId;\n  }\n  if (element.position && element.position === previousAnchorId) {\n    newElement.position = newAnchorId;\n  }\n  return { ...newElement };\n};\n\nexport const isInRectangle = ({ x, y }, { x0, y0, x1, y1 }) => {\n  return (\n    Math.abs(x - x0) + Math.abs(x - x1) <= Math.abs(x1 - x0) &&\n    Math.abs(y - y0) + Math.abs(y - y1) <= Math.abs(y1 - y0)\n  );\n};\n\nexport const isAnchor = (state, id) =>\n  id !== null && state.coordinates.allIds.includes(id);\n","import { getElementAnchors } from \"components\";\n\nimport { replaceComponentAnchor } from \"./utils\";\n\nimport { MODE_DRAG, MODE_SELECT } from \"./interactionModes\";\n\nexport const startDragging = (state, action) => {\n  const coordinatesToMove = [];\n  const adhesivePoints = [];\n\n  state.selection.forEach((selectedId) => {\n    if (state.coordinates.allIds.includes(selectedId)) {\n      if (adhesivePoints.findIndex((elem) => elem.id === selectedId) === -1) {\n        adhesivePoints.push({\n          type: \"ANCHOR\",\n          id: selectedId,\n          dx: action.x - state.coordinates.byId[selectedId].x,\n          dy: action.y - state.coordinates.byId[selectedId].y,\n        });\n      }\n    } else if (state.components.allIds.includes(selectedId)) {\n      const coordinates = getElementAnchors({\n        ...state.components.byId[selectedId],\n        fromCoords:\n          state.components.byId[selectedId].from &&\n          state.coordinates.byId[state.components.byId[selectedId].from],\n        toCoords:\n          state.components.byId[selectedId].to &&\n          state.coordinates.byId[state.components.byId[selectedId].to],\n        positionCoords:\n          state.components.byId[selectedId].position &&\n          state.coordinates.byId[state.components.byId[selectedId].position],\n      });\n\n      coordinates.forEach(({ x, y, name }) => {\n        adhesivePoints.push({\n          type: state.components.byId[selectedId].position ? \"NODE\" : \"PATH\", // TODO use constant file\n          name: name,\n          id: selectedId,\n          dx: action.x - x,\n          dy: action.y - y,\n        });\n      });\n      if (\n        state.components.byId[selectedId].from &&\n        adhesivePoints.findIndex(\n          (elem) => elem.id === state.components.byId[selectedId].from\n        ) === -1\n      ) {\n        //the from anchor is new\n        const fromId = state.components.byId[selectedId].from;\n        adhesivePoints.push({\n          type: \"ANCHOR\", // TODO use constant file\n          id: fromId,\n          dx: action.x - state.coordinates.byId[fromId].x,\n          dy: action.y - state.coordinates.byId[fromId].y,\n        });\n      }\n      if (\n        state.components.byId[selectedId].to &&\n        adhesivePoints.findIndex(\n          (elem) => elem.id === state.components.byId[selectedId].to\n        ) === -1\n      ) {\n        //the to anchor is new\n        const toId = state.components.byId[selectedId].to;\n        adhesivePoints.push({\n          type: \"ANCHOR\",\n          id: toId,\n          dx: action.x - state.coordinates.byId[toId].x,\n          dy: action.y - state.coordinates.byId[toId].y,\n        });\n      }\n    }\n  });\n\n  const pile = [...state.selection];\n  const nodeSeen = [];\n  while (pile.length > 0) {\n    const selectedId = pile.pop();\n    if (state.components.allIds.includes(selectedId)) {\n      if (\n        state.components.byId[selectedId].from &&\n        !coordinatesToMove.includes(state.components.byId[selectedId].from)\n      ) {\n        coordinatesToMove.push(state.components.byId[selectedId].from);\n      }\n      if (\n        state.components.byId[selectedId].to &&\n        !coordinatesToMove.includes(state.components.byId[selectedId].to)\n      ) {\n        coordinatesToMove.push(state.components.byId[selectedId].to);\n      }\n      if (state.components.byId[selectedId].position) {\n        if (\n          !coordinatesToMove.includes(\n            state.components.byId[selectedId].position\n          )\n        ) {\n          pile.push(state.components.byId[selectedId].position);\n        }\n        if (!nodeSeen.includes(selectedId)) {\n          nodeSeen.push(selectedId);\n          state.weakLinks.forEach(({ anchorId, nodeId }) => {\n            if (\n              nodeId === selectedId &&\n              !coordinatesToMove.includes(anchorId)\n            ) {\n              pile.push(anchorId);\n            }\n          });\n        }\n      }\n    } else {\n      if (!coordinatesToMove.includes(selectedId)) {\n        coordinatesToMove.push(selectedId);\n\n        if (state.coordinates.byId[selectedId].isNodePosition) {\n          pile.push(state.coordinates.byId[selectedId].nodeId);\n        }\n      }\n    }\n  }\n\n  return {\n    ...state,\n    mode: MODE_DRAG,\n    coordinatesToMove: [...coordinatesToMove],\n    adhesivePoints: [...adhesivePoints],\n    originalPosition: { x: action.x, y: action.y },\n    alreadyMoved: { x: 0, y: 0 },\n    weakLinksToRemove: [\n      ...state.weakLinks\n        .filter(\n          ({ anchorId, nodeId }) =>\n            coordinatesToMove.includes(anchorId) &&\n            !coordinatesToMove.includes(state.components.byId[nodeId].position)\n        )\n        .map(({ anchorId, nodeId }) => anchorId + \"-\" + nodeId),\n    ],\n  };\n};\n\nexport const stopDragging = (state, action) => {\n  if (\n    state.currentMagnet.attractor &&\n    state.currentMagnet.attracted &&\n    state.currentMagnet.attracted.type === \"ANCHOR\" &&\n    state.currentMagnet.attractor.type === \"ANCHOR\"\n  ) {\n    // we need to fusion those coordinates\n    const anchorToRemoveID = state.currentMagnet.attracted.id;\n    const anchorToUseId = state.currentMagnet.attractor.id;\n\n    // remove anchor\n    const anchorToRemoveIDIndex = state.coordinates.allIds.findIndex(\n      (id) => id === anchorToRemoveID\n    );\n    const {\n      [anchorToRemoveID]: anchorToRemove,\n      ...remainingAnchors\n    } = state.coordinates.byId;\n\n    //const update elements\n    const newByIDElements = {};\n    state.components.allIds.forEach((id) => {\n      newByIDElements[id] = replaceComponentAnchor(\n        state.components.byId[id],\n        anchorToRemoveID,\n        anchorToUseId\n      );\n    });\n\n    return {\n      ...state,\n      coordinates: {\n        byId: { ...remainingAnchors },\n        allIds: [\n          ...state.coordinates.allIds.slice(0, anchorToRemoveIDIndex),\n          ...state.coordinates.allIds.slice(anchorToRemoveIDIndex + 1),\n        ],\n      },\n      components: {\n        ...state.components,\n        byId: { ...newByIDElements },\n      },\n      mode: MODE_SELECT,\n      coordinatesToMove: [],\n      originalPosition: {},\n      alreadyMoved: {},\n      weakLinksToRemove: [],\n      weakLinks: [\n        ...state.weakLinks.filter(\n          ({ anchorId, nodeId }) =>\n            !state.weakLinksToRemove.includes(anchorId + \"-\" + nodeId)\n        ),\n      ],\n    };\n  }\n\n  if (\n    state.currentMagnet.attractor &&\n    state.currentMagnet.attracted &&\n    state.currentMagnet.attracted.type !== \"PATH\" &&\n    state.currentMagnet.attractor.type !== \"PATH\"\n  ) {\n    const newWeakLink = [];\n\n    if (\n      state.currentMagnet.attracted.type === \"NODE\" &&\n      state.currentMagnet.attractor.type === \"ANCHOR\"\n    ) {\n      const nodeId = state.currentMagnet.attracted.id;\n      const anchorId = state.currentMagnet.attractor.id;\n      const name = state.currentMagnet.attracted.name;\n      newWeakLink.push({\n        anchorId: anchorId,\n        nodeId: nodeId,\n        name: name,\n      });\n    }\n    if (\n      state.currentMagnet.attracted.type === \"ANCHOR\" &&\n      state.currentMagnet.attractor.type === \"NODE\"\n    ) {\n      const nodeId = state.currentMagnet.attractor.id;\n      const anchorId = state.currentMagnet.attracted.id;\n      const name = state.currentMagnet.attractor.name;\n      newWeakLink.push({\n        anchorId: anchorId,\n        nodeId: nodeId,\n        name: name,\n      });\n    }\n    return {\n      ...state,\n      mode: MODE_SELECT,\n      coordinatesToMove: [],\n      originalPosition: {},\n      alreadyMoved: {},\n      weakLinksToRemove: [],\n      weakLinks: [\n        ...state.weakLinks.filter(\n          ({ anchorId, nodeId }) =>\n            !state.weakLinksToRemove.includes(anchorId + \"-\" + nodeId)\n        ),\n        ...newWeakLink,\n      ],\n    };\n  }\n\n  return {\n    ...state,\n    mode: MODE_SELECT,\n    coordinatesToMove: [],\n    originalPosition: {},\n    alreadyMoved: {},\n\n    weakLinksToRemove: [],\n\n    weakLinks: [\n      ...state.weakLinks.filter(\n        ({ anchorId, nodeId }) =>\n          !state.weakLinksToRemove.includes(anchorId + \"-\" + nodeId)\n      ),\n    ],\n  };\n};\n\nexport const updatePosition = (state, action) => {\n  const { x, y, shiftPress } = action;\n  const { x: originalX, y: originalY } = state.originalPosition;\n\n  let newMoveX, newMoveY;\n  // if shift is pressed only allow to move along x or y axis\n  if (shiftPress) {\n    if (Math.abs(x - originalX) > Math.abs(y - originalY)) {\n      newMoveX = x - originalX;\n      newMoveY = 0;\n    } else {\n      newMoveX = 0;\n      newMoveY = y - originalY;\n    }\n  } else {\n    newMoveX = x - originalX;\n    newMoveY = y - originalY;\n  }\n\n  const anchorById = state.coordinates.byId;\n  state.coordinatesToMove.forEach((anchorId) => {\n    anchorById[anchorId] = {\n      ...anchorById[anchorId],\n      x: anchorById[anchorId].x + newMoveX - state.alreadyMoved.x,\n      y: anchorById[anchorId].y + newMoveY - state.alreadyMoved.y,\n    };\n  });\n\n  return {\n    ...state,\n    coordinates: {\n      ...state.coordinates,\n      byId: { ...anchorById },\n    },\n    alreadyMoved: {\n      x: newMoveX,\n      y: newMoveY,\n    },\n  };\n};\n","import { componentUseThisAnchor } from \"./utils\";\n\nconst deleteElement = (state, action) => {\n  const selection = action.selection;\n\n  const componentIdsToRemove = state.components.allIds.filter((id) =>\n    selection.includes(id)\n  );\n\n  const componentIdsToKeep = state.components.allIds.filter(\n    (id) => !selection.includes(id)\n  );\n\n  const coordinateToRemove = [];\n\n  componentIdsToRemove.forEach((componentId) => {\n    const anchorToChange = [\"from\", \"to\", \"position\"]\n      .map((arg) => state.components.byId[componentId][arg])\n      .filter((id) => !!id);\n\n    // get the list of of ids of coordinates that are not anymore used by components\n    anchorToChange\n      .filter((anchorId) => {\n        return (\n          componentIdsToKeep.filter((elementId) =>\n            componentUseThisAnchor(state.components.byId[elementId], anchorId)\n          ).length === 0\n        );\n      })\n      .forEach((idToRemove) => coordinateToRemove.push(idToRemove));\n  });\n\n  const newState = {\n    ...state,\n    components: {\n      byId: { ...state.components.byId },\n      allIds: [...componentIdsToKeep],\n    },\n    coordinates: {\n      byId: { ...state.coordinates.byId },\n      allIds: [\n        ...state.coordinates.allIds.filter(\n          (id) => !coordinateToRemove.includes(id)\n        ),\n      ],\n    },\n    weakLinks: [\n      ...state.weakLinks.filter(\n        ({ anchorId, nodeId, name }) =>\n          !componentIdsToRemove.includes(nodeId) &&\n          !coordinateToRemove.includes(anchorId)\n      ),\n    ],\n  };\n  componentIdsToRemove.forEach((id) => delete newState.components.byId[id]);\n  coordinateToRemove.forEach((id) => delete newState.coordinates.byId[id]);\n\n  return {\n    ...newState,\n  };\n};\n\nexport default deleteElement;\n","import { getAdhesivePoints, isAnchor } from \"./utils\";\nimport { default_path_options } from \"utils\";\nimport { MODE_CREATE_PATH_ELEMENT } from \"./interactionModes\";\nimport { pathOptions } from \"components\";\nimport { v4 as uuid } from \"uuid\";\n\nexport const startCreatePathElement = (state, action) => {\n  return {\n    ...state,\n    selection: [],\n    adhesivePoints: [...getAdhesivePoints(action.elementType)],\n    mode: MODE_CREATE_PATH_ELEMENT,\n    newPath: {\n      ...state.newPath,\n      elementType: action.elementType,\n      isFromValidated: false,\n    },\n  };\n};\n\nexport const validateFirstStepPathElement = (state, action) => {\n  return {\n    ...state,\n    newPath: {\n      ...state.newPath,\n      attractorFrom: state.currentMagnet.attractor && {\n        ...state.currentMagnet.attractor,\n      },\n      to: { x: null, y: null },\n      attractorTo: null,\n      isFromValidated: true,\n      movedAfterFromCreation: false,\n    },\n  };\n};\n\nexport const invalidateFirstStepPathElement = (state, action) => {\n  if (state.newPath.movedAfterFromCreation && state.newPath.isFromValidated) {\n    return {\n      ...state,\n      newPath: {\n        ...state.newPath,\n        from: { ...state.newPath.to },\n        attractorFrom: state.newPath.attractorTo && {\n          ...state.newPath.attractorTo,\n        },\n        to: { x: null, y: null },\n        attractorTo: null,\n        isFromValidated: false,\n      },\n    };\n  } else {\n    return state;\n  }\n};\n\nexport const savePathElement = (state, action) => {\n  const attractorTo = state.currentMagnet.attractor && {\n    ...state.currentMagnet.attractor,\n  };\n  const { attractorFrom, from, to, elementType } = state.newPath;\n\n  const newId_element = uuid();\n\n  const fromAnchor =\n    attractorFrom && attractorFrom.type === \"ANCHOR\"\n      ? attractorFrom.id\n      : uuid();\n  const toAnchor =\n    attractorTo && attractorTo.type === \"ANCHOR\" ? attractorTo.id : uuid();\n\n  // create coordinates if necessary\n  let newAnchors = { ...state.coordinates };\n  if (!attractorFrom || attractorFrom.type !== \"ANCHOR\") {\n    newAnchors = {\n      byId: {\n        ...newAnchors.byId,\n        [fromAnchor]: {\n          id: fromAnchor,\n          x: from.x,\n          y: from.y,\n          shape: \"\",\n        },\n      },\n      allIds: [...newAnchors.allIds, fromAnchor],\n    };\n  }\n  if (!attractorTo || attractorTo.type !== \"ANCHOR\") {\n    newAnchors = {\n      byId: {\n        ...newAnchors.byId,\n        [toAnchor]: {\n          id: toAnchor,\n          x: to.x,\n          y: to.y,\n          shape: \"\",\n        },\n      },\n      allIds: [...newAnchors.allIds, toAnchor],\n    };\n  }\n\n  // create weak links if necessary\n  const newWeakLinks = [];\n  if (attractorFrom && attractorFrom.type === \"NODE\") {\n    newWeakLinks.push({\n      anchorId: fromAnchor,\n      nodeId: attractorFrom.id,\n      name: attractorFrom.name,\n    });\n  }\n  if (attractorTo && attractorTo.type === \"NODE\") {\n    newWeakLinks.push({\n      anchorId: toAnchor,\n      nodeId: attractorTo.id,\n      name: attractorTo.name,\n    });\n  }\n\n  return {\n    ...state,\n    currentMagnet: {\n      ...state.currentMagnet,\n      attractor: {\n        type: \"ANCHOR\",\n        id: toAnchor,\n      },\n    },\n    newPath: {\n      ...state.newPath,\n      isFromValidated: false,\n      from: {\n        ...to,\n      },\n      to: {\n        x: null,\n        y: null,\n      },\n    },\n    components: {\n      byId: {\n        ...state.components.byId,\n        [newId_element]: {\n          id: newId_element,\n          from: fromAnchor,\n          to: toAnchor,\n          type: elementType,\n          ...(pathOptions[elementType]\n            ? pathOptions[elementType]\n            : default_path_options),\n        },\n      },\n      allIds: [...state.components.allIds, newId_element],\n    },\n    coordinates: { ...newAnchors },\n    weakLinks: [...state.weakLinks, ...newWeakLinks],\n  };\n};\n\nexport const updatePosition = (state, action) => {\n  const { x, y, shiftPress } = action;\n\n  if (state.newPath.isFromValidated) {\n    if (shiftPress) {\n      const { x: xFrom, y: yFrom } = state.newPath.from;\n      if (Math.abs(x - xFrom) > Math.abs(y - yFrom)) {\n        return {\n          ...state,\n          newPath: {\n            ...state.newPath,\n            to: { x: x, y: yFrom },\n            movedAfterFromCreation: true,\n          },\n        };\n      } else {\n        return {\n          ...state,\n          newPath: {\n            ...state.newPath,\n            to: { x: xFrom, y: y },\n            movedAfterFromCreation: true,\n          },\n        };\n      }\n    }\n    return {\n      ...state,\n      newPath: {\n        ...state.newPath,\n        to: { x: x, y: y },\n        movedAfterFromCreation: true,\n      },\n    };\n  } else {\n    return {\n      ...state,\n      newPath: {\n        ...state.newPath,\n        from: { x: x, y: y },\n      },\n    };\n  }\n};\n","import { point_included, rect_included } from \"utils\";\n\nimport { MODE_SELECT, MODE_RECTANGLE_SELECTION } from \"./interactionModes\";\nimport { getBoundingBox } from \"components\";\n\nexport const updatePosition = (state, action) => {\n  const { x, y } = action;\n  const newRectangle = {\n    ...state.rectangleSelection,\n    x1: x,\n    y1: y,\n  };\n\n  return {\n    ...state,\n    selection: [\n      ...state.coordinates.allIds.filter((id) =>\n        point_included(newRectangle, state.coordinates.byId[id])\n      ),\n      ...state.components.allIds.filter((id) =>\n        rect_included(\n          newRectangle,\n          getBoundingBox(state.components.byId[id], state.coordinates.byId)\n        )\n      ),\n    ],\n    rectangleSelection: {\n      ...state.rectangleSelection,\n      x1: x,\n      y1: y,\n    },\n  };\n};\n\nexport const stopRectangleSelection = (state, action) => {\n  // add equality verification, if rectangle has no area it's probably a single click\n  // so we reset the selection\n  return {\n    ...state,\n    mode: MODE_SELECT,\n    rectangleSelection: {},\n    selection:\n      state.rectangleSelection.x0 === state.rectangleSelection.x1 ||\n      state.rectangleSelection.y0 === state.rectangleSelection.y1\n        ? []\n        : [...state.selection],\n  };\n};\n\nexport const startRectangleSelection = (state, action) => {\n  return {\n    ...state,\n    mode: MODE_RECTANGLE_SELECTION,\n    rectangleSelection: {\n      x0: action.x,\n      y0: action.y,\n      x1: action.x,\n      y1: action.y,\n    },\n  };\n};\n","import { MODE_CREATE_NODE_ELEMENT } from \"./interactionModes\";\n\nimport { getAdhesivePoints } from \"./utils\";\nimport { getElementAnchors, isMultyPole } from \"components\";\n\nimport { v4 as uuid } from \"uuid\";\n\nexport const updatePosition = (state, action) => {\n  const { x, y } = action;\n  return {\n    ...state,\n    newNode: {\n      ...state.newNode,\n      position: { x: x, y: y },\n    },\n  };\n};\n\nexport const startNodeCreation = (state, action) => {\n  return {\n    ...state,\n    selection: [],\n    adhesivePoints: [...getAdhesivePoints(action.elementType)],\n    mode: MODE_CREATE_NODE_ELEMENT,\n    newNode: {\n      elementType: action.elementType,\n      position: { x: null, y: null },\n      anchorsDelta: getElementAnchors({\n        type: action.elementType,\n        positionCoords: { x: 0, y: 0 },\n      }).map(({ x, y }) => ({ dx: -x, dy: -y })),\n    },\n  };\n};\n\nexport const saveNodeCreation = (state, action) => {\n  if (\n    state.mode === MODE_CREATE_NODE_ELEMENT &&\n    state.newNode.position.x !== null &&\n    state.newNode.position.y !== null\n  ) {\n    const newId_element = uuid();\n    const positionId = uuid();\n\n    return {\n      ...state,\n      newNode: {\n        ...state.newNode,\n        position: { x: null, y: null },\n      },\n      components: {\n        byId: {\n          ...state.components.byId,\n          [newId_element]: {\n            id: newId_element,\n            position: positionId,\n            type: state.newNode.elementType,\n            angle: 0,\n          },\n        },\n        allIds: [...state.components.allIds, newId_element],\n      },\n      coordinates: {\n        ...state.coordinates,\n        byId: {\n          ...state.coordinates.byId,\n          [positionId]: {\n            id: positionId,\n            x: state.newNode.position.x,\n            y: state.newNode.position.y,\n            isNodePosition: true,\n            nodeId: newId_element,\n          },\n        },\n      },\n    };\n  }\n  return state;\n};\n\nconst newPositions = (coordinates, toUpdate, deltaToAdd) => {\n  // this function update coordinates by a delta\n  const newAnchors = { ...coordinates };\n\n  toUpdate.forEach(({ anchorId, anchorName }) => {\n    newAnchors[anchorId] = {\n      ...newAnchors[anchorId],\n      x: newAnchors[anchorId].x + deltaToAdd[anchorName].dx,\n      y: newAnchors[anchorId].y + deltaToAdd[anchorName].dy,\n    };\n  });\n\n  return { ...newAnchors };\n};\n\nexport const rotateNode = (state, { id, value }) => {\n  // we prepare data for the update\n  // first we get coordinate of coordinates before and after rotation\n  const element = state.components.byId[id];\n\n  const positionCoords = state.coordinates.byId[element.position];\n  const prevAngle = element.angle;\n  const newAngle = value;\n\n  const prevAnchors = getElementAnchors({\n    ...element,\n    positionCoords: positionCoords,\n    angle: prevAngle,\n  });\n  const newAnchors = getElementAnchors({\n    ...element,\n    positionCoords: positionCoords,\n    angle: newAngle,\n  });\n\n  // Now we create a dictionary that for an anchor name return dx and dy the delta modification of the anchor\n  const deltaToAdd = {};\n  newAnchors.forEach(({ name, x, y }) => {\n    deltaToAdd[name] = { dx: x, dy: y };\n  });\n  prevAnchors.forEach(({ name, x, y }) => {\n    deltaToAdd[name].dx -= x;\n    deltaToAdd[name].dy -= y;\n  });\n\n  if (\n    state.rotationHelper &&\n    state.rotationHelper.id &&\n    state.rotationHelper.id === id\n  ) {\n    // the id is the same as before So we just need to do the update of coordinates\n\n    return {\n      ...state,\n      coordinates: {\n        ...state.coordinates,\n        byId: {\n          ...newPositions(\n            state.coordinates.byId,\n            state.rotationHelper.IdToUpdate,\n            deltaToAdd\n          ),\n        },\n      },\n      components: {\n        ...state.components,\n        byId: {\n          ...state.components.byId,\n          [id]: {\n            ...state.components.byId[id],\n            angle: newAngle,\n          },\n        },\n      },\n    };\n  } else {\n    const IdToUpdate = [];\n\n    // we will parse weakLinks to know what to update and what to remove\n    state.weakLinks.forEach(({ anchorId, nodeId, name }) => {\n      if (nodeId === id) {\n        // if child is path of mono pole\n        IdToUpdate.push({ anchorId, anchorName: name });\n      }\n    });\n\n    return {\n      ...state,\n      coordinates: {\n        ...state.coordinates,\n        byId: {\n          ...newPositions(state.coordinates.byId, IdToUpdate, deltaToAdd),\n        },\n      },\n      components: {\n        ...state.components,\n        byId: {\n          ...state.components.byId,\n          [id]: {\n            ...state.components.byId[id],\n            angle: newAngle,\n          },\n        },\n      },\n      rotationHelper: {\n        IdToUpdate: IdToUpdate,\n        id: id,\n      },\n    };\n  }\n};\n","import { componentUseThisAnchor, replaceComponentAnchor } from \"./utils\";\n\nimport { v4 as uuid } from \"uuid\";\n\nexport const stackAnchors = (state, action) => {\n  const coordinatesSelected = state.selection.filter(\n    (id) => id in state.coordinates.byId\n  );\n  const movedAnchors = [];\n  if (\n    coordinatesSelected.length <= 1 ||\n    ![\"U\", \"D\", \"L\", \"R\"].includes(action.direction)\n  ) {\n    return state;\n  } else {\n    const newPosition = {};\n\n    // We start by looping on selected element to find the min/max along x/y depending on the letter\n    coordinatesSelected.forEach((id, index) => {\n      const anchor = state.coordinates.byId[id];\n\n      switch (action.direction) {\n        case \"U\":\n          newPosition.y =\n            index === 0 ? anchor.y : Math.min(newPosition.y, anchor.y);\n          break;\n        case \"D\":\n          newPosition.y =\n            index === 0 ? anchor.y : Math.max(newPosition.y, anchor.y);\n          break;\n        case \"L\":\n          newPosition.x =\n            index === 0 ? anchor.x : Math.min(newPosition.x, anchor.x);\n          break;\n        case \"R\":\n          newPosition.x =\n            index === 0 ? anchor.x : Math.max(newPosition.x, anchor.x);\n          break;\n        default:\n          break;\n      }\n    });\n\n    // now we now the new x/y we change those positions\n    coordinatesSelected.forEach((id) => {\n      const anchor = state.coordinates.byId[id];\n\n      //  if the position is modified we just break all the weak lins associated\n      if (\n        (newPosition.x !== undefined && newPosition.x !== anchor.x) ||\n        (newPosition.y !== undefined && newPosition.y !== anchor.y)\n      ) {\n        movedAnchors.push(id);\n      }\n\n      state.coordinates.byId[id] = {\n        ...anchor,\n        ...newPosition,\n      };\n    });\n\n    return {\n      ...state,\n      coordinates: {\n        ...state.coordinates,\n        byId: { ...state.coordinates.byId },\n      },\n      weakLinks: [\n        ...state.weakLinks.filter(\n          ({ anchorId }) => !movedAnchors.includes(anchorId)\n        ),\n      ],\n    };\n  }\n};\n\nexport const splitAnchor = (state, action) => {\n  let anchorId = action.anchorId;\n  if (\n    !anchorId &&\n    state.selection.length === 1 &&\n    state.coordinates.allIds.includes(state.selection[0])\n  ) {\n    anchorId = state.selection[0];\n  }\n  if (anchorId && state.coordinates.allIds.includes(anchorId)) {\n    const componentsToChange = state.components.allIds.filter((id) =>\n      componentUseThisAnchor(state.components.byId[id], anchorId)\n    );\n    if (componentsToChange.length <= 1) {\n      return state;\n    }\n\n    const newAnchors = state.coordinates;\n    const newComponents = state.components.byId;\n    const newWeakLinks = [];\n    const weakLinksToCopy = state.weakLinks.filter(\n      ({ anchorId: linkedAnchorId }) => anchorId === linkedAnchorId\n    );\n\n    componentsToChange.slice(1).forEach((componentId) => {\n      const newAnchorId = uuid();\n\n      newComponents[componentId] = replaceComponentAnchor(\n        state.components.byId[componentId],\n        anchorId,\n        newAnchorId\n      );\n\n      newAnchors.allIds = [newAnchorId, ...newAnchors.allIds];\n      newAnchors.byId = {\n        ...newAnchors.byId,\n        [newAnchorId]: { ...newAnchors.byId[anchorId] },\n      };\n\n      weakLinksToCopy.forEach((linkToCopy) => {\n        newWeakLinks.push({ ...linkToCopy, anchorId: newAnchorId });\n      });\n    });\n\n    return {\n      ...state,\n      components: {\n        ...state.components,\n        byId: { ...newComponents },\n      },\n      coordinates: {\n        allIds: [...newAnchors.allIds],\n        byId: { ...newAnchors.byId },\n      },\n      weakLinks: [...state.weakLinks, ...newWeakLinks],\n    };\n  }\n  return state;\n};\n","import { createStore, applyMiddleware } from \"redux\";\nimport thunkMiddleware from \"redux-thunk\";\nimport { composeWithDevTools } from \"redux-devtools-extension\";\n\nimport reducer_displayOptions from \"./displayOptions\";\nimport reducer_magnetsOptions from \"./magnetsOptions\";\n\nimport {\n  START_DRAGGING,\n  START_SELECT,\n  TOGGLE_SELECTION,\n  STOP_DRAGGING,\n  START_CREATE_PATH_ELEMENT,\n  START_CREATE_NODE_ELEMENT,\n  ELEMENT_CREATION_NEXT_STEP,\n  VALIDATE_FIRST_STEP_PATH_ELEMENT_CREATION,\n  INVALIDATE_FIRST_STEP_PATH_ELEMENT_CREATION,\n  SAVE_PATH_ELEMENT_CREATION,\n  UPDATE_POSITION,\n  SPLIT_ANCHOR,\n  START_RECTANGLE_SELECTION,\n  STOP_RECTANGLE_SELECTION,\n  STACK_SELECTED_ANCHORS,\n  DELETE_ELEMENT,\n  UPDATE_COMPONENT,\n  LOAD_PROJECT,\n  LIST_PROJECTS,\n} from \"redux/actions\";\nimport {\n  CLOSE_MESSAGE,\n  REMOVE_MESSAGE,\n  OPEN_MESSAGE,\n} from \"redux/actions/messages\";\n\nimport {\n  MODE_SELECT,\n  MODE_DRAG,\n  MODE_CREATE_PATH_ELEMENT,\n  MODE_CREATE_NODE_ELEMENT,\n  MODE_RECTANGLE_SELECTION,\n} from \"./interactionModes\";\n\nimport { initial_state } from \"./debugInitialState\";\n\nimport {\n  startDragging,\n  stopDragging,\n  updatePosition as draggingUpdatePosition,\n} from \"./dragging\";\n\nimport deleteElement from \"./delete\";\nimport {\n  startCreatePathElement,\n  validateFirstStepPathElement,\n  invalidateFirstStepPathElement,\n  savePathElement,\n  updatePosition as pathCreationUpdatePosition,\n} from \"./pathCreation\";\n\nimport {\n  stopRectangleSelection,\n  startRectangleSelection,\n  updatePosition as rectangleSelectionUpdatePosition,\n} from \"./rectangleSelection\";\n\nimport {\n  startNodeCreation,\n  saveNodeCreation,\n  updatePosition as nodeCreationUpdatePosition,\n  rotateNode,\n} from \"./nodeCreation\";\n\nimport { stackAnchors, splitAnchor } from \"./anchorHelper\";\nimport { MULTIPLICATIVE_CONST } from \"utils\";\n\nfunction update(state = initial_state, action) {\n  state = { ...reducer_displayOptions(state, action) };\n  state = { ...reducer_magnetsOptions(state, action) };\n\n  if (!(action.type === UPDATE_COMPONENT && action.name === \"angle\")) {\n    // we clean rotation helper after use of stop rotation\n    // TODO do it in a clean way (not mutating previous state)\n    state = { ...state, rotationHelper: null };\n  }\n  switch (action.type) {\n    case LOAD_PROJECT:\n      return {\n        ...initial_state,\n        components: { ...action.components },\n        coordinates: { ...action.coordinates },\n        currentProject: {\n          id: action.id,\n          username: action.username,\n          circuitname: action.circuitname,\n        },\n      };\n    case LIST_PROJECTS:\n      return {\n        ...state,\n        projects: [...action.projects],\n      };\n\n    case CLOSE_MESSAGE: {\n      if (!(action.id in state.messages)) {\n        return state;\n      }\n      const { id } = action;\n      return {\n        ...state,\n        messages: {\n          ...state.messages,\n          [id]: { ...state.messages[id], show: false },\n        },\n      };\n    }\n    case REMOVE_MESSAGE: {\n      if (!(action.id in state.messages)) {\n        return state;\n      }\n      const messages = { ...state.messages };\n      delete messages[action.id];\n      return {\n        ...state,\n        messages: { ...messages },\n      };\n    }\n    case OPEN_MESSAGE: {\n      const { id, text, severity } = action;\n      return {\n        ...state,\n        messages: { ...state.messages, [id]: { text, severity, show: true } },\n      };\n    }\n\n    case UPDATE_COMPONENT:\n      const { id, name, value } = action;\n      if (state.components.allIds.includes(id)) {\n        if (name === \"angle\") {\n          return rotateNode(state, action);\n        }\n        return {\n          ...state,\n          components: {\n            ...state.components,\n            byId: {\n              ...state.components.byId,\n              [id]: {\n                ...state.components.byId[id],\n                [name]: value,\n              },\n            },\n          },\n        };\n      }\n      if (state.coordinates.allIds.includes(id)) {\n        return {\n          ...state,\n          coordinates: {\n            ...state.coordinates,\n            byId: {\n              ...state.coordinates.byId,\n              [id]: {\n                ...state.coordinates.byId[id],\n                [name]: value,\n              },\n            },\n          },\n        };\n      }\n      return state;\n    case TOGGLE_SELECTION:\n      if (action.reset) {\n        return {\n          ...state,\n          selection: [action.objectId],\n        };\n      } else {\n        const index = state.selection.findIndex((x) => x === action.objectId);\n        if (index >= 0) {\n          return {\n            ...state,\n            selection: [\n              ...state.selection.slice(0, index),\n              ...state.selection.slice(index + 1),\n            ],\n          };\n        } else {\n          return {\n            ...state,\n            selection: [...state.selection, action.objectId],\n          };\n        }\n      }\n    case START_SELECT:\n      return {\n        ...state,\n        selection: [],\n        adhesivePoints: [],\n        mode: MODE_SELECT,\n      };\n\n    case START_DRAGGING:\n      return startDragging(state, action);\n\n    case STOP_DRAGGING:\n      return stopDragging(state, action);\n\n    case UPDATE_POSITION:\n      const { attractor, attracted } = action;\n\n      if (attractor === null && state.magnetsOptions.isGridAttracting) {\n        // if not already attracted by someone check the grid attraction\n\n        const { x, y } = action;\n\n        const refSpace = MULTIPLICATIVE_CONST * state.magnetsOptions.gridSpace;\n\n        if (state.mode === MODE_CREATE_PATH_ELEMENT) {\n          const modX = Math.abs(x) % refSpace;\n          const modY = Math.abs(y) % refSpace;\n\n          const R = 10;\n          if (\n            (modX <= R || modX >= refSpace - R) &&\n            (modY <= R || modY >= refSpace - R)\n          ) {\n            action.x = refSpace * Math.round(x / refSpace);\n            action.y = refSpace * Math.round(y / refSpace);\n          }\n        } else if (\n          state.mode === MODE_DRAG ||\n          state.mode === MODE_CREATE_NODE_ELEMENT\n        ) {\n          const adhesivePoints =\n            state.mode === MODE_DRAG\n              ? state.adhesivePoints\n              : state.newNode.anchorsDelta;\n\n          adhesivePoints.forEach(({ dx, dy }) => {\n            const xToTest = x - dx;\n            const yToTest = y - dy;\n\n            const modX = Math.abs(xToTest) % refSpace;\n            const modY = Math.abs(yToTest) % refSpace;\n\n            const R = 10;\n            if (\n              (modX <= R || modX >= refSpace - R) &&\n              (modY <= R || modY >= refSpace - R)\n            ) {\n              action.x =\n                x - (xToTest - refSpace * Math.round(xToTest / refSpace));\n              action.y =\n                y - (yToTest - refSpace * Math.round(yToTest / refSpace));\n            }\n          });\n        }\n      }\n      switch (state.mode) {\n        case MODE_DRAG:\n          return {\n            ...draggingUpdatePosition(state, action),\n            currentMagnet: { attractor, attracted },\n          };\n\n        case MODE_CREATE_PATH_ELEMENT:\n          return {\n            ...pathCreationUpdatePosition(state, action),\n            currentMagnet: { attractor, attracted },\n          };\n\n        case MODE_CREATE_NODE_ELEMENT:\n          return {\n            ...nodeCreationUpdatePosition(state, action),\n            currentMagnet: { attractor, attracted },\n          };\n\n        case MODE_RECTANGLE_SELECTION:\n          return {\n            ...rectangleSelectionUpdatePosition(state, action),\n            currentMagnet: { attractor, attracted },\n          };\n\n        default:\n          return {\n            ...state,\n            currentMagnet: { attractor, attracted },\n          };\n      }\n\n    case START_CREATE_PATH_ELEMENT:\n      return startCreatePathElement(state, action);\n\n    case START_CREATE_NODE_ELEMENT:\n      return startNodeCreation(state, action);\n\n    case ELEMENT_CREATION_NEXT_STEP:\n      return saveNodeCreation(state, action);\n\n    case VALIDATE_FIRST_STEP_PATH_ELEMENT_CREATION:\n      return validateFirstStepPathElement(state, action);\n\n    case INVALIDATE_FIRST_STEP_PATH_ELEMENT_CREATION:\n      return invalidateFirstStepPathElement(state, action);\n\n    case SAVE_PATH_ELEMENT_CREATION:\n      return savePathElement(state, action);\n\n    case SPLIT_ANCHOR:\n      return splitAnchor(state, action);\n\n    case START_RECTANGLE_SELECTION:\n      return startRectangleSelection(state, action);\n\n    case STOP_RECTANGLE_SELECTION:\n      return stopRectangleSelection(state, action);\n\n    case STACK_SELECTED_ANCHORS:\n      return stackAnchors(state, action);\n\n    case DELETE_ELEMENT:\n      return deleteElement(state, action);\n\n    default:\n      return state;\n  }\n}\n\n// Create a Redux store holding the state of your app.\n// Its API is { subscribe, dispatch, getState }.\n\nconst composedEnhancer = composeWithDevTools(applyMiddleware(thunkMiddleware));\n\n// The store now has the ability to accept thunk functions in `dispatch`\nlet store = createStore(update, composedEnhancer);\n\nexport default store;\n","import i18n from \"i18next\";\nimport { initReactI18next } from \"react-i18next\";\n\nimport Backend from \"i18next-http-backend\";\nimport LanguageDetector from \"i18next-browser-languagedetector\";\n// don't want to use this?\n// have a look at the Quick start guide\n// for passing in lng and translations on init\n\ni18n\n  // load translation using http -> see /public/locales (i.e. https://github.com/i18next/react-i18next/tree/master/example/react/public/locales)\n  // learn more: https://github.com/i18next/i18next-http-backend\n  .use(Backend)\n  // detect user language\n  // learn more: https://github.com/i18next/i18next-browser-languageDetector\n  .use(LanguageDetector)\n  // pass the i18n instance to react-i18next.\n  .use(initReactI18next)\n  // init i18next\n  // for all options read: https://www.i18next.com/overview/configuration-options\n  .init({\n    fallbackLng: \"en\",\n    lng: [\"fr\", \"en\"],\n    debug: process.env.NODE_ENV === \"production\",\n    preload: [\"fr\"],\n    react: {\n      useSuspense: false,\n    },\n    interpolation: {\n      escapeValue: false, // not needed for react as it escapes by default\n    },\n    backend: {\n      loadPath: `${process.env.REACT_APP_I18N_LOCATION}/{{lng}}/{{ns}}.json`,\n    },\n  });\n\nexport default i18n;\n","import React, { forwardRef } from \"react\";\n\nimport \"./style.scss\";\nimport { connect } from \"react-redux\";\nimport { MODE_SELECT } from \"redux/store/interactionModes\";\nimport { toggleSelection, startDragging } from \"redux/actions\";\n\nconst mapDispatchToProps = (dispatch, { svgRef, displayOptions }) => {\n  return {\n    toggleSelection: (objectId, reset) =>\n      dispatch(toggleSelection(objectId, reset)),\n    startDragging: (x, y) => {\n      const {\n        x: xOffset,\n        y: yOffset,\n        width: svgWidth,\n        height: svgHeight,\n      } = svgRef.current.getBoundingClientRect();\n      const {\n        x: SVG_X,\n        y: SVG_Y,\n        width: SVG_WIDTH,\n        height: SVG_HEIGHT,\n      } = displayOptions;\n\n      dispatch(\n        startDragging(\n          SVG_X + (x - xOffset) * (SVG_WIDTH / svgWidth),\n          SVG_Y + (y - yOffset) * (SVG_HEIGHT / svgHeight)\n        )\n      );\n    },\n  };\n};\nconst mapStateToProps = (state, { id }) => {\n  return id\n    ? {\n        x: state.coordinates.byId[id].x,\n        y: state.coordinates.byId[id].y,\n        shape: state.coordinates.byId[id].shape,\n        mode: state.mode,\n        selected: state.selection.includes(id),\n      }\n    : {};\n};\n\nconst Anchor = ({\n  id,\n  x,\n  y,\n  shape,\n  mode,\n  selected,\n  startDragging,\n  toggleSelection,\n}) => {\n  switch (shape) {\n    case \"d\":\n      return (\n        <path\n          d={`M ${x - 5} ${y} L ${x} ${y - 5} L ${x + 5} ${y} L ${x} ${\n            y + 5\n          } Z`}\n          className={`anchor full ${selected ? \"selected\" : \"\"} `}\n          onMouseDown={\n            mode === MODE_SELECT\n              ? (event) => {\n                  event.stopPropagation();\n                  if (!event.ctrlKey && selected) {\n                    startDragging(\n                      event.nativeEvent.clientX,\n                      event.nativeEvent.clientY\n                    );\n                  } else {\n                    toggleSelection(id, !event.ctrlKey);\n                  }\n                }\n              : null\n          }\n        />\n      );\n\n    default:\n      return (\n        <circle\n          cx={x}\n          cy={y}\n          r={5}\n          className={`anchor ${selected ? \"selected\" : \"\"} ${\n            shape === \"o\" ? \" empty\" : \"\"\n          }${shape === \"*\" ? \" full\" : \"\"}`}\n          onMouseDown={\n            mode === MODE_SELECT\n              ? (event) => {\n                  event.stopPropagation();\n                  if (!event.ctrlKey && selected) {\n                    startDragging(\n                      event.nativeEvent.clientX,\n                      event.nativeEvent.clientY\n                    );\n                  } else {\n                    toggleSelection(id, !event.ctrlKey);\n                  }\n                }\n              : null\n          }\n        />\n      );\n  }\n};\n\nexport const roughCoordinate = (rc, ctx, x0, y0, { x, y, shape }) => {\n  if (shape === \"o\") {\n    rc.circle(x - x0, y - y0, 10, {\n      fill: \"white\",\n      fillStyle: \"solid\",\n      roughness: rc.gen.config.options.roughness / 2,\n    });\n  }\n  if (shape === \"*\") {\n    rc.circle(x - x0, y - y0, 10, {\n      fill: \"black\",\n      fillStyle: \"solid\",\n      roughness: rc.gen.config.options.roughness / 2,\n    });\n  }\n  if (shape === \"d\") {\n    rc.path(\n      `M ${x - x0 - 5} ${y - y0}\n      L ${x - x0} ${y - y0 - 5}\n      L ${x - x0 + 5} ${y - y0}\n      L ${x - x0} ${y - y0 + 5}\n      Z`,\n      {\n        fill: \"black\",\n        fillStyle: \"solid\",\n        roughness: rc.gen.config.options.roughness / 2,\n      }\n    );\n  }\n};\nconst ConnectedAnchor = connect(mapStateToProps, mapDispatchToProps)(Anchor);\n\nexport default forwardRef((props, ref) => (\n  <ConnectedAnchor {...props} svgRef={ref} />\n));\n","import React, { useRef, useState, useEffect } from \"react\";\nimport rough from \"roughjs/bundled/rough.esm.js\";\n\nimport { roughComponents } from \"components\";\nimport { roughCoordinate } from \"atoms/anchor\";\n\nimport { connect } from \"react-redux\";\n\nimport Button from \"@material-ui/core/Button\";\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\nimport DialogContent from \"@material-ui/core/DialogContent\";\nimport DialogActions from \"@material-ui/core/DialogActions\";\nimport Slider from \"@material-ui/core/Slider\";\nimport Typography from \"@material-ui/core/Typography\";\n\nimport AutorenewIcon from \"@material-ui/icons/Autorenew\";\n\nconst mapStateToProps = (state) => {\n  return {\n    components: state.components,\n    coordinates: state.coordinates,\n  };\n};\n\nconst margin = 50;\nconst RoughDrawing = ({ components, coordinates }) => {\n  const canvasRef = useRef();\n  const [width, setWidth] = useState(0);\n  const [height, setHeight] = useState(0);\n  const [seed, setSeed] = useState(1);\n  const [roughness, setRoughness] = useState(1);\n\n  const [canvasURL, setCanvasURL] = useState();\n\n  useEffect(() => {\n    const svgBBox = document.getElementById(\"drawingArea\").getBBox();\n    setWidth(svgBBox.width);\n    setHeight(svgBBox.height);\n\n    // const rc = rough.canvas(canvasRef.current);\n    const rc = rough.canvas(document.getElementById(\"rough-canvas\"), {\n      options: { seed: seed, roughness: roughness, curveFitting: 1 },\n    });\n    const ctx = document.getElementById(\"rough-canvas\").getContext(\"2d\");\n\n    ctx.font = \"0.7cm IndieFlower\";\n\n    ctx.fillStyle = \"white\";\n    ctx.fillRect(0, 0, width + 2 * margin, height + 2 * margin);\n    ctx.fillStyle = \"black\";\n\n    components.allIds.forEach((id) => {\n      const element = components.byId[id];\n      element.positionCoords = element.position\n        ? coordinates.byId[element.position]\n        : undefined;\n      element.fromCoords = element.from\n        ? coordinates.byId[element.from]\n        : undefined;\n      element.toCoords = element.to ? coordinates.byId[element.to] : undefined;\n\n      roughComponents(rc, ctx, svgBBox.x - margin, svgBBox.y - margin, element);\n    });\n\n    coordinates.allIds.forEach((id) => {\n      const element = coordinates.byId[id];\n      roughCoordinate(rc, ctx, svgBBox.x - margin, svgBBox.y - margin, element);\n    });\n\n    setCanvasURL(\n      canvasRef.current\n        .toDataURL(\"image/jpg\")\n        .replace(\"image/png\", \"image/octet-stream\")\n    );\n  }, [\n    canvasRef.current,\n    width,\n    height,\n    components,\n    coordinates,\n    seed,\n    roughness,\n  ]);\n\n  const generateNewDrawing = () => setSeed(seed + 1);\n  return (\n    <>\n      <DialogTitle>Image Generator</DialogTitle>\n      <DialogContent>\n        <canvas\n          id=\"rough-canvas\"\n          ref={canvasRef}\n          width={width + 2 * margin}\n          height={height + 2 * margin}\n          style={{ width: \"100%\" }}\n        />\n      </DialogContent>\n      <DialogActions>\n        <div>\n          <Typography id=\"roughness-slider\" gutterBottom>\n            Roughness\n          </Typography>\n          <Slider\n            value={roughness}\n            onChange={(event, newValue) => setRoughness(newValue)}\n            aria-labelledby=\"roughness-slider\"\n            min={0}\n            max={5}\n            step={0.1}\n          />\n        </div>\n        <Button onClick={generateNewDrawing} variant=\"outlined\">\n          <AutorenewIcon />\n        </Button>\n        <Button\n          href={canvasURL}\n          download=\"circuit.png\"\n          variant=\"contained\"\n          color=\"primary\"\n        >\n          Download\n        </Button>\n      </DialogActions>\n    </>\n  );\n};\nexport default connect(mapStateToProps)(RoughDrawing);\n","import React from \"react\";\nimport { connect } from \"react-redux\";\nimport { makeStyles } from \"@material-ui/core/styles\";\n\nimport {\n  setZoom,\n  setModeMovePaper,\n  startSelect,\n  stackSelectedAnchors,\n  updateMagnetOption,\n  startCreatePathElement,\n} from \"redux/actions\";\nimport { MODE_MOVE_PAPER, MODE_SELECT } from \"redux/store/interactionModes\";\n\nimport SvgIcon from \"@material-ui/core/SvgIcon\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport Select from \"@material-ui/core/Select\";\nimport MenuItem from \"@material-ui/core/MenuItem\";\n\nimport ControlCameraIcon from \"@material-ui/icons/ControlCamera\";\nimport ZoomInIcon from \"@material-ui/icons/ZoomIn\";\nimport ZoomOutIcon from \"@material-ui/icons/ZoomOut\";\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n    startCreatePathElement: (name) => dispatch(startCreatePathElement(name)),\n    setZoom: (zoom) => dispatch(setZoom(zoom)),\n    setModeMovePaper: () => dispatch(setModeMovePaper()),\n    startSelect: () => dispatch(startSelect()),\n    stackSelectedAnchors: (direction) =>\n      dispatch(stackSelectedAnchors(direction)),\n    updateMagnetOption: (optionName, optionValue = null) =>\n      dispatch(updateMagnetOption(optionName, optionValue)),\n  };\n};\nconst mapStateToProps = (state) => {\n  return {\n    mode: state.mode,\n    zoom: state.displayOptions.zoom,\n    magnetsOptions: state.magnetsOptions,\n  };\n};\n\nconst useStyles = makeStyles(() => ({\n  root: {\n    position: \"sticky\",\n    top: \"64px\",\n    padding: \"8px 2px\",\n    backgroundColor: \"#fafafa\",\n    \"& path\": { fill: \"inherit\" },\n  },\n}));\n\nconst ToolBar = ({\n  mode,\n  zoom,\n  magnetsOptions,\n  startCreatePathElement,\n  setZoom,\n  setModeMovePaper,\n  startSelect,\n  stackSelectedAnchors,\n  updateMagnetOption,\n}) => {\n  const classes = useStyles();\n\n  return (\n    <div className={classes.root}>\n      <IconButton\n        onMouseDown={(event) => {\n          startCreatePathElement(\"short\");\n          event.stopPropagation();\n        }}\n      >\n        <SvgIcon>\n          <circle cx=\"4\" cy=\"20\" r=\"2\" />\n          <circle cx=\"20\" cy=\"4\" r=\"2\" />\n          <path d=\"M 19.5,3.5 3.5,19.5 l 1,1 L 20.5,4.5 Z\" />\n        </SvgIcon>\n      </IconButton>\n      <IconButton\n        onMouseDown={(event) => {\n          startCreatePathElement(\"upRight\");\n          event.stopPropagation();\n        }}\n      >\n        <SvgIcon>\n          <circle cx=\"4\" cy=\"20\" r=\"2\" />\n          <circle cx=\"20\" cy=\"4\" r=\"2\" />\n          <path d=\"M 20,3.5 H 3.5 V 20 h 1 V 4.5 H 20 Z\" />\n        </SvgIcon>\n      </IconButton>\n      <IconButton\n        onMouseDown={(event) => {\n          startCreatePathElement(\"rightUp\");\n          event.stopPropagation();\n        }}\n      >\n        <SvgIcon>\n          <circle cx=\"4\" cy=\"20\" r=\"2\" />\n          <circle cx=\"20\" cy=\"4\" r=\"2\" />\n          <path d=\"M 5,20.5 20.5,20.5 l 0,-16.5 h -1 L 19.5,19.5 l -15.5,0 z\" />\n        </SvgIcon>\n      </IconButton>\n      |\n      <IconButton\n        color={mode === MODE_SELECT ? \"secondary\" : \"default\"}\n        onMouseDown={(event) => {\n          event.stopPropagation();\n          startSelect();\n        }}\n      >\n        <SvgIcon>\n          <path d=\"M10.07,14.27C10.57,14.03 11.16,14.25 11.4,14.75L13.7,19.74L15.5,18.89L13.19,13.91C12.95,13.41 13.17,12.81 13.67,12.58L13.95,12.5L16.25,12.05L8,5.12V15.9L9.82,14.43L10.07,14.27M13.64,21.97C13.14,22.21 12.54,22 12.31,21.5L10.13,16.76L7.62,18.78C7.45,18.92 7.24,19 7,19A1,1 0 0,1 6,18V3A1,1 0 0,1 7,2C7.24,2 7.47,2.09 7.64,2.23L7.65,2.22L19.14,11.86C19.57,12.22 19.62,12.85 19.27,13.27C19.12,13.45 18.91,13.57 18.7,13.61L15.54,14.23L17.74,18.96C18,19.46 17.76,20.05 17.26,20.28L13.64,21.97Z\" />\n        </SvgIcon>\n      </IconButton>\n      <IconButton\n        color={mode === MODE_MOVE_PAPER ? \"secondary\" : \"default\"}\n        onMouseDown={(event) => {\n          event.stopPropagation();\n          if (mode === MODE_MOVE_PAPER) {\n            startSelect();\n          } else {\n            setModeMovePaper();\n          }\n        }}\n      >\n        <ControlCameraIcon />\n      </IconButton>\n      <IconButton\n        disabled={zoom < 0.2}\n        onMouseDown={(event) => {\n          event.stopPropagation();\n          setZoom(zoom / 2);\n        }}\n      >\n        <ZoomOutIcon />\n      </IconButton>\n      {zoom}\n      <IconButton\n        disabled={zoom > 2}\n        onMouseDown={(event) => {\n          event.stopPropagation();\n          setZoom(zoom * 2);\n        }}\n      >\n        <ZoomInIcon />\n      </IconButton>\n      |\n      <IconButton\n        onMouseDown={(event) => {\n          event.stopPropagation();\n          stackSelectedAnchors(\"L\");\n        }}\n      >\n        <SvgIcon>\n          <path d=\"M22 13V19H6V13H22M6 5V11H16V5H6M2 2V22H4V2H2\" />\n        </SvgIcon>\n      </IconButton>\n      <IconButton\n        onMouseDown={(event) => {\n          event.stopPropagation();\n          stackSelectedAnchors(\"R\");\n        }}\n      >\n        <SvgIcon>\n          <path d=\"M18 13V19H2V13H18M8 5V11H18V5H8M20 2V22H22V2H20Z\" />\n        </SvgIcon>\n      </IconButton>\n      <IconButton\n        onMouseDown={(event) => {\n          event.stopPropagation();\n          stackSelectedAnchors(\"U\");\n        }}\n      >\n        <SvgIcon>\n          <path d=\"M11 22H5V6H11V22M19 6H13V16H19V6M22 2H2V4H22V2Z\" />\n        </SvgIcon>\n      </IconButton>\n      <IconButton\n        onMouseDown={(event) => {\n          event.stopPropagation();\n          stackSelectedAnchors(\"D\");\n        }}\n      >\n        <SvgIcon>\n          <path d=\"M11 18H5V2H11V18M19 8H13V18H19V8M22 20H2V22H22V20Z\" />\n        </SvgIcon>\n      </IconButton>\n      |\n      <IconButton\n        color={magnetsOptions.isGridAttracting ? \"secondary\" : \"default\"}\n        onMouseDown={(event) => {\n          event.stopPropagation();\n          updateMagnetOption(\"isGridAttracting\");\n        }}\n      >\n        <SvgIcon>\n          <path d=\"M0 6v1h24v-1ZM0 12v1h24v-1ZM0 18v1h24v-1Z\" />\n          <path d=\"M4 0h1v24h-1ZM11 0h1v24h-1ZM18 0h1v24h-1Z\" />\n          <circle cx={18.5} cy={18.5} r={3} />\n        </SvgIcon>\n      </IconButton>\n      <Select\n        value={magnetsOptions.gridSpace}\n        onChange={(event) =>\n          updateMagnetOption(\"gridSpace\", event.target.value)\n        }\n        onMouseDown={(event) => {\n          event.stopPropagation();\n        }}\n      >\n        <MenuItem value={0.5}>0.5cm</MenuItem>\n        <MenuItem value={1}>1cm</MenuItem>\n        <MenuItem value={2}>2cm</MenuItem>\n      </Select>\n      <IconButton\n        color={\n          magnetsOptions.isPathCoordinatesAttracting ? \"secondary\" : \"default\"\n        }\n        onMouseDown={(event) => {\n          event.stopPropagation();\n          updateMagnetOption(\"isPathCoordinatesAttracting\");\n        }}\n      >\n        <SvgIcon>\n          <path d=\"M4 11.5h20v1h-20Z\" />\n          <circle cx={2} cy={12} r={2} />\n          <circle cx={22} cy={12} r={2} />\n        </SvgIcon>\n      </IconButton>\n      <IconButton\n        color={magnetsOptions.isNodeAnchorsAttracting ? \"secondary\" : \"default\"}\n        onMouseDown={(event) => {\n          event.stopPropagation();\n          updateMagnetOption(\"isNodeAnchorsAttracting\");\n        }}\n      >\n        <SvgIcon>\n          <circle id=\"path858\" cx=\"2\" cy=\"16.5\" r=\"2\" />\n          <circle id=\"path834\" cx=\"2\" cy=\"7.5\" r=\"2\" />\n          <circle id=\"path838\" cx=\"22\" cy=\"12\" r=\"2\" />\n          <path d=\"m 22,11.5 v 1 L 18.5,12.5 7,21 7,17 H 2 V 16 H 7 L 7,8 H 2 v -1 L 7,7 7,3 18.5,11.5 Z\" />\n        </SvgIcon>\n      </IconButton>\n    </div>\n  );\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ToolBar);\n","import React, { forwardRef } from \"react\";\nimport svgComponents from \"components\";\nimport { connect } from \"react-redux\";\nimport { MODE_SELECT } from \"redux/store/interactionModes\";\nimport { toggleSelection, startDragging } from \"redux/actions\";\n\nconst mapDispatchToProps = (dispatch, { svgRef, displayOptions }) => {\n  return {\n    toggleSelection: (objectId, reset) =>\n      dispatch(toggleSelection(objectId, reset)),\n    startDragging: (x, y) => {\n      const {\n        x: xOffset,\n        y: yOffset,\n        width: svgWidth,\n        height: svgHeight,\n      } = svgRef.current.getBoundingClientRect();\n\n      const {\n        x: SVG_X,\n        y: SVG_Y,\n        width: SVG_WIDTH,\n        height: SVG_HEIGHT,\n        zoom,\n      } = displayOptions;\n\n      dispatch(\n        startDragging(\n          SVG_X + (x - xOffset) * (SVG_WIDTH / svgWidth),\n          SVG_Y + (y - yOffset) * (SVG_HEIGHT / svgHeight)\n        )\n      );\n    },\n  };\n};\nconst mapStateToProps = (state) => {\n  return {\n    components: state.components,\n    selection: state.selection,\n    mode: state.mode,\n  };\n};\n\nconst ComponentsDrawer = ({\n  components,\n  selection,\n  mode,\n  startDragging,\n  toggleSelection,\n}) => (\n  <>\n    {components.allIds.map(\n      (id) =>\n        components.byId[id].type &&\n        svgComponents[components.byId[id].type]({\n          ...components.byId[id],\n          onMouseDown:\n            mode === MODE_SELECT\n              ? (event) => {\n                  event.stopPropagation();\n                  if (\n                    !event.ctrlKey &&\n                    selection.includes(components.byId[id].id)\n                  ) {\n                    startDragging(\n                      event.nativeEvent.clientX,\n                      event.nativeEvent.clientY\n                    );\n                  } else {\n                    toggleSelection(components.byId[id].id, !event.ctrlKey);\n                  }\n                }\n              : null,\n          selected: selection.includes(components.byId[id].id),\n        })\n    )}\n  </>\n);\n\nconst ConnectedComponentsDrawer = connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(ComponentsDrawer);\n\nexport default forwardRef((props, ref) => (\n  <ConnectedComponentsDrawer {...props} svgRef={ref} />\n));\n","import React, { forwardRef } from \"react\";\nimport { connect } from \"react-redux\";\n\nimport Anchor from \"atoms/anchor\";\n\nconst mapStateToProps = (state) => {\n  return {\n    anchorIds: state.coordinates.allIds,\n  };\n};\n\nconst Anchors = ({ anchorIds, svgRef, displayOptions }) => (\n  <>\n    {anchorIds.map((id) => (\n      <Anchor key={id} id={id} ref={svgRef} displayOptions={displayOptions} />\n    ))}\n  </>\n);\n\nconst ConnectedAnchors = connect(mapStateToProps)(Anchors);\n\nexport default forwardRef((props, ref) => (\n  <ConnectedAnchors {...props} svgRef={ref} />\n));\n","import React, { useState } from \"react\";\nimport { connect } from \"react-redux\";\n\nimport { updatePosition, stopDragging } from \"redux/actions\";\nimport { MODE_DRAG } from \"redux/store/interactionModes\";\nconst mapDispatchToProps = (dispatch, { attractor, attracted }) => {\n  return {\n    updatePosition: (x, y) =>\n      dispatch(updatePosition({ x, y, attractor, attracted })),\n    stopDragging: () => dispatch(stopDragging()),\n  };\n};\n\nconst Magnet = ({\n  id,\n  x,\n  y,\n  dx,\n  dy,\n  color,\n  mode,\n  updatePosition,\n  stopDragging,\n}) => {\n  const [isUsed, setIsUsed] = useState(false);\n\n  return (\n    <>\n      {isUsed && (\n        <circle\n          cx={x}\n          cy={y}\n          r={5}\n          style={{\n            fill: \"none\",\n            stroke: \"red\",\n            strokeWidth: 2,\n          }}\n        />\n      )}\n      <circle\n        cx={x + dx}\n        cy={y + dy}\n        r={10}\n        style={{\n          fill: color || \"transparent\",\n        }}\n        onMouseEnter={(event) => {\n          event.stopPropagation();\n          updatePosition(x + dx, y + dy);\n          setIsUsed(true);\n        }}\n        onMouseLeave={() => setIsUsed(false)}\n        onMouseMove={\n          (event) => event.stopPropagation() //stop the propagation\n        }\n        onMouseUp={\n          mode === MODE_DRAG\n            ? (event) => {\n                event.stopPropagation();\n                stopDragging();\n              }\n            : null\n        }\n      />\n    </>\n  );\n};\n\nexport default connect(null, mapDispatchToProps)(Magnet);\n","import React from \"react\";\nimport { connect } from \"react-redux\";\n\nimport {\n  MODE_CREATE_PATH_ELEMENT,\n  MODE_CREATE_NODE_ELEMENT,\n  MODE_DRAG,\n} from \"redux/store/interactionModes\";\n\nimport Magnet from \"atoms/magnet\";\nimport { getElementAnchors } from \"components\";\n\nconst mapStateToProps = (state) => {\n  return {\n    coordinates: state.coordinates,\n    components: state.components,\n    mode: state.mode,\n    coordinatesToMove: state.coordinatesToMove,\n    selection: state.selection,\n    adhesivePoints: state.adhesivePoints || null,\n    ...state.magnetsOptions,\n  };\n};\n\nconst isMoving = (element, coordinatesToMove) => {\n  // help function to filter magnets\n  if (!coordinatesToMove) {\n    return false;\n  }\n  if (typeof element === \"string\" && coordinatesToMove.includes(element)) {\n    return true;\n  }\n  if (element.from && coordinatesToMove.includes(element.from)) {\n    return true;\n  }\n  if (element.to && coordinatesToMove.includes(element.to)) {\n    return true;\n  }\n  if (element.position && coordinatesToMove.includes(element.position)) {\n    return true;\n  }\n  return false;\n};\n\nconst Magnets = ({\n  mode,\n  coordinates,\n  components,\n  coordinatesToMove,\n  adhesivePoints,\n  isPathCoordinatesAttracting,\n  isNodeAnchorsAttracting,\n}) => {\n  // TODO : use a correct way to compute how many circle to draw\n  if (\n    mode !== MODE_DRAG &&\n    mode !== MODE_CREATE_NODE_ELEMENT &&\n    mode !== MODE_CREATE_PATH_ELEMENT\n  ) {\n    return null;\n  }\n\n  return (\n    <>\n      {isNodeAnchorsAttracting &&\n        components.allIds\n          .filter((id) => !isMoving(components.byId[id], coordinatesToMove))\n          .reduce(\n            (accumulator, id) => [\n              ...accumulator,\n              ...getElementAnchors({\n                ...components.byId[id],\n                fromCoords:\n                  components.byId[id].from &&\n                  coordinates.byId[components.byId[id].from],\n                toCoords:\n                  components.byId[id].to &&\n                  coordinates.byId[components.byId[id].to],\n                positionCoords:\n                  components.byId[id].position &&\n                  coordinates.byId[components.byId[id].position],\n              }).map(({ x, y, name }) =>\n                adhesivePoints.reduce(\n                  (\n                    accu,\n                    { type, dx, dy, name: nameAdhesive = \"\", id: idAdhesive }\n                  ) => {\n                    return [\n                      ...accu,\n                      <Magnet\n                        key={`${id}-${name}<-${idAdhesive}-${\n                          nameAdhesive || \"\"\n                        }`}\n                        x={x}\n                        dx={dx}\n                        y={y}\n                        dy={dy}\n                        mode={mode}\n                        attractor={{\n                          type: components.byId[id].position ? \"NODE\" : \"PATH\",\n                          name: name,\n                          id: id,\n                        }}\n                        attracted={{\n                          type: type,\n                          name: nameAdhesive,\n                          id: idAdhesive,\n                        }}\n                      />,\n                    ];\n                  },\n                  []\n                )\n              ),\n            ],\n            []\n          )}\n      {isPathCoordinatesAttracting &&\n        coordinates.allIds\n          .filter((id) => !isMoving(id, coordinatesToMove))\n          .map((id) =>\n            adhesivePoints.reduce(\n              (\n                accu,\n                { type, dx, dy, name: nameAdhesive = \"\", id: idAdhesive }\n              ) => {\n                return [\n                  ...accu,\n                  <Magnet\n                    key={`${id}<-${idAdhesive}-${nameAdhesive || \"\"}`}\n                    x={coordinates.byId[id].x}\n                    dx={dx}\n                    y={coordinates.byId[id].y}\n                    dy={dy}\n                    mode={mode}\n                    attractor={{ type: \"ANCHOR\", name: \"\", id: id }}\n                    attracted={{\n                      type: type,\n                      name: nameAdhesive,\n                      id: idAdhesive,\n                    }}\n                  />,\n                ];\n              },\n              []\n            )\n          )}\n    </>\n  );\n};\n\nexport default connect(mapStateToProps)(Magnets);\n","import React, { forwardRef } from \"react\";\nimport { connect } from \"react-redux\";\nimport components from \"components\";\nimport ToolBar from \"./toolbar\";\n\nimport {\n  updatePosition,\n  stopDragging,\n  validateFirstStepPathElementCreation,\n  invalidateFirstStepPathElementCreation,\n  savePathElementCreation,\n  nextStepOfElementCreation,\n  startRectangleSelection,\n  stopRectangleSelection,\n  startMovePaper,\n} from \"redux/actions\";\nimport {\n  MODE_DRAG,\n  MODE_CREATE_PATH_ELEMENT,\n  MODE_CREATE_NODE_ELEMENT,\n  MODE_SELECT,\n  MODE_RECTANGLE_SELECTION,\n  MODE_MOVE_PAPER,\n} from \"redux/store/interactionModes\";\n\nimport { MULTIPLICATIVE_CONST } from \"utils\";\n\nimport ComponentsDrawer from \"container/componentsDrawer\";\nimport Anchors from \"./anchors\";\nimport Magnets from \"./magnets\";\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n    updatePosition: (x, y, shiftPress) =>\n      dispatch(updatePosition({ x, y, shiftPress })),\n    stopDragging: () => dispatch(stopDragging()),\n    validateFirstStepPathElementCreation: () =>\n      dispatch(validateFirstStepPathElementCreation()),\n    invalidateFirstStepPathElementCreation: () =>\n      dispatch(invalidateFirstStepPathElementCreation()),\n    savePathElementCreation: () => dispatch(savePathElementCreation()),\n    nextStepOfElementCreation: () => dispatch(nextStepOfElementCreation()),\n    startRectangleSelection: (x, y) => dispatch(startRectangleSelection(x, y)),\n    stopRectangleSelection: () => dispatch(stopRectangleSelection()),\n    startMovePaper: (x, y) => dispatch(startMovePaper(x, y)),\n  };\n};\nconst mapStateToProps = (state) => {\n  return {\n    mode: state.mode,\n    newPath: state.newPath,\n    newNode: state.newNode,\n    rectangleSelection: state.rectangleSelection,\n    displayOptions: state.displayOptions,\n    isGridAttracting: state.magnetsOptions.isGridAttracting,\n    gridSpace: state.magnetsOptions.gridSpace,\n  };\n};\n\nconst Container = ({\n  svgRef,\n  mode,\n  newPath,\n  newNode,\n  rectangleSelection,\n  displayOptions,\n  isGridAttracting,\n  gridSpace,\n  stopDragging,\n  updatePosition,\n  validateFirstStepPathElementCreation,\n  invalidateFirstStepPathElementCreation,\n  savePathElementCreation,\n  nextStepOfElementCreation,\n  startRectangleSelection,\n  stopRectangleSelection,\n  startMovePaper,\n}) => {\n  const {\n    x: SVG_X,\n    y: SVG_Y,\n    width: SVG_WIDTH,\n    height: SVG_HEIGHT,\n  } = displayOptions;\n\n  const followMouse = (event) => {\n    const {\n      x: xOffset,\n      y: yOffset,\n      width: svgWidth,\n      height: svgHeight,\n    } = svgRef.current.getBoundingClientRect();\n\n    switch (mode) {\n      case MODE_DRAG:\n      case MODE_CREATE_PATH_ELEMENT:\n      case MODE_CREATE_NODE_ELEMENT:\n      case MODE_RECTANGLE_SELECTION:\n        updatePosition(\n          SVG_X +\n            (event.nativeEvent.clientX - xOffset) * (SVG_WIDTH / svgWidth),\n          SVG_Y +\n            (event.nativeEvent.clientY - yOffset) * (SVG_HEIGHT / svgHeight),\n          event.shiftKey\n        );\n        break;\n      default:\n        break;\n    }\n  };\n\n  const click = (event) => {\n    const {\n      x: xOffset,\n      y: yOffset,\n      width: svgWidth,\n      height: svgHeight,\n    } = svgRef.current.getBoundingClientRect();\n\n    switch (mode) {\n      case MODE_SELECT:\n        event.stopPropagation();\n        startRectangleSelection(\n          SVG_X +\n            (event.nativeEvent.clientX - xOffset) * (SVG_WIDTH / svgWidth),\n          SVG_Y +\n            (event.nativeEvent.clientY - yOffset) * (SVG_HEIGHT / svgHeight)\n        );\n        break;\n      case MODE_CREATE_PATH_ELEMENT:\n        event.stopPropagation();\n        if (newPath.isFromValidated) {\n          savePathElementCreation(\n            SVG_X +\n              (event.nativeEvent.clientX - xOffset) * (SVG_WIDTH / svgWidth),\n            SVG_Y +\n              (event.nativeEvent.clientY - yOffset) * (SVG_HEIGHT / svgHeight)\n          );\n        } else {\n          validateFirstStepPathElementCreation();\n        }\n        break;\n      case MODE_CREATE_NODE_ELEMENT:\n        event.stopPropagation();\n        nextStepOfElementCreation();\n        break;\n      case MODE_MOVE_PAPER:\n        event.stopPropagation();\n        startMovePaper(event.nativeEvent.clientX, event.nativeEvent.clientY);\n        break;\n      default:\n        break;\n    }\n  };\n\n  return (\n    <>\n      <ToolBar />\n      <svg\n        xmlns=\"http://www.w3.org/2000/svg\"\n        viewBox={`${SVG_X} ${SVG_Y} ${SVG_WIDTH} ${SVG_HEIGHT}`}\n        style={{ width: \"100%\", background: \"lightgray\" }}\n        onMouseMove={\n          mode === MODE_DRAG ||\n          mode === MODE_CREATE_PATH_ELEMENT ||\n          mode === MODE_CREATE_NODE_ELEMENT ||\n          mode === MODE_RECTANGLE_SELECTION\n            ? followMouse\n            : null\n        }\n        onMouseDown={click}\n        onMouseUp={\n          mode === MODE_DRAG\n            ? () => stopDragging()\n            : mode === MODE_RECTANGLE_SELECTION\n            ? (event) => {\n                event.stopPropagation();\n                stopRectangleSelection();\n              }\n            : null\n        }\n        ref={svgRef}\n      >\n        <defs>\n          <pattern\n            id=\"grid-magnets\"\n            x=\"-10\"\n            y=\"-10\"\n            width={gridSpace * MULTIPLICATIVE_CONST}\n            height={gridSpace * MULTIPLICATIVE_CONST}\n            patternUnits=\"userSpaceOnUse\"\n          >\n            <circle fill=\"gray\" cx=\"10\" cy=\"10\" r=\"3\"></circle>\n          </pattern>\n        </defs>\n        {isGridAttracting && (\n          <rect\n            x={SVG_X - 10}\n            y={SVG_Y - 10}\n            width=\"100%\"\n            height=\"100%\"\n            fill=\"url(#grid-magnets)\"\n          />\n        )}\n\n        <g id=\"drawingArea\">\n          <ComponentsDrawer ref={svgRef} displayOptions={displayOptions} />\n\n          {/* display the path element in during its creation */}\n\n          {mode === MODE_CREATE_PATH_ELEMENT && // the element\n            newPath &&\n            newPath.isFromValidated &&\n            newPath.to &&\n            newPath.to.x !== null &&\n            newPath.to.y !== null &&\n            newPath.from &&\n            newPath.from.x !== null &&\n            newPath.from.y !== null &&\n            components[newPath.elementType]({\n              fromCoords: newPath.from,\n              toCoords: newPath.to,\n            })}\n          {mode === MODE_CREATE_PATH_ELEMENT && //the anchor TO\n            newPath &&\n            newPath.isFromValidated &&\n            newPath.to.x !== null &&\n            newPath.to.y !== null && (\n              <circle cx={newPath.to.x} cy={newPath.to.y} r={5} />\n            )}\n          {mode === MODE_CREATE_PATH_ELEMENT && // the anchor FROM\n            newPath &&\n            newPath.from &&\n            newPath.from.x !== null &&\n            newPath.from.y !== null && (\n              <circle\n                cx={newPath.from.x}\n                cy={newPath.from.y}\n                r={5}\n                onMouseEnter={invalidateFirstStepPathElementCreation}\n              />\n            )}\n\n          {/* display the path element in during its creation */}\n\n          {mode === MODE_CREATE_NODE_ELEMENT && // the element\n            newNode &&\n            newNode.position &&\n            newNode.position.x !== null &&\n            newNode.position.y !== null &&\n            components[newNode.elementType]({\n              positionCoords: newNode.position,\n            })}\n          {mode === MODE_CREATE_NODE_ELEMENT && // the anchor POSITION\n            newNode &&\n            newNode.position &&\n            newNode.position.x !== null &&\n            newNode.position.y !== null && (\n              <circle cx={newNode.position.x} cy={newNode.position.y} r={5} />\n            )}\n\n          <Anchors ref={svgRef} displayOptions={displayOptions} />\n          <Magnets displayOptions={displayOptions} />\n\n          {mode === MODE_RECTANGLE_SELECTION && (\n            <path\n              d={`M ${rectangleSelection.x0} ${rectangleSelection.y0} L  ${rectangleSelection.x0} ${rectangleSelection.y1} L ${rectangleSelection.x1} ${rectangleSelection.y1} L  ${rectangleSelection.x1} ${rectangleSelection.y0} Z`}\n              style={{ fill: \"transparent\", stroke: \"red\", strokeWidth: 1 }}\n            />\n          )}\n        </g>\n      </svg>\n    </>\n  );\n};\n\nconst ConnectedContainer = connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(Container);\n\nexport default forwardRef((props, ref) => (\n  <ConnectedContainer {...props} svgRef={ref} />\n));\n","import { getPoles, getCoordId, getCoord, removeDrawnElements } from \"./utils\";\nimport { drawElement } from \"components\";\n// this function start from the coordinate \"startCoordId\" and follow a path by drawing components\nconst drawPathFromCoord = (\n  startCoordId,\n  coords,\n  state,\n  drawnElements,\n  nbOfCoordinateUsed\n) => {\n  const elementsToAdd = []; // list of the elements in the line to write\n  let previousCoord = {};\n\n  // variables to save some coordinates\n  let nbOfCreatedNames = 0;\n  let nextName = `point${nbOfCoordinateUsed + 1}`;\n\n  // create variable updatable\n  let currantCoordId = startCoordId;\n  let currantCoord = coords[currantCoordId];\n\n  // informations on the currant coord :\n  // path to start here, to finish here and node to draw here\n  let nextPaths = removeDrawnElements(drawnElements)(\n    currantCoord.startingPaths\n  );\n  let arrivingPaths = removeDrawnElements(drawnElements)(\n    currantCoord.endingPaths\n  );\n\n  let nextNode = removeDrawnElements(drawnElements)(\n    currantCoord.nodeAssociated\n  );\n\n  let coordIsNew = true; // this is for node because after drawing a node we are still at the same coordinate\n  while (nextPaths.length > 0 || nextNode.length > 0) {\n    // add draw if it's the beginning\n    if (elementsToAdd.length === 0) {\n      elementsToAdd.push(`\\\\draw `);\n    }\n\n    // add the coordinate if needed\n    if (coordIsNew) {\n      elementsToAdd.push(\n        `${getCoord(currantCoord.x, currantCoord.y, coords, previousCoord)} `\n      );\n      if (\n        !currantCoord.name &&\n        (nextPaths.length > 1 || arrivingPaths.length > 0)\n      ) {\n        //save name if we will need to start from here again or to arrive to here in the future\n        elementsToAdd.push(`coordinate(${nextName}) `);\n        coords[currantCoordId].name = nextName;\n\n        //get ready for next name\n        nbOfCreatedNames += 1;\n        nextName = `point${nbOfCoordinateUsed + nbOfCreatedNames + 1}`;\n      }\n    }\n\n    if (nextNode.length > 0) {\n      // create a node if possible\n      coordIsNew = false;\n      const nodeId = nextNode.pop();\n      const element = state.components.byId[nodeId];\n\n      elementsToAdd.push(`${drawElement(element)} `);\n      drawnElements[element.id] = true;\n    } else {\n      // create path if no more node is to draw\n      coordIsNew = true;\n      const element = state.components.byId[nextPaths[0]];\n\n      element.poles = getPoles(\n        state.coordinates.byId[element.from],\n        state.coordinates.byId[element.to]\n      );\n      elementsToAdd.push(drawElement(element));\n      drawnElements[element.id] = true;\n\n      // get information of the next coordinate\n      previousCoord = { ...currantCoord };\n\n      currantCoordId = getCoordId(state.coordinates.byId[element.to]);\n      currantCoord = coords[currantCoordId];\n      nextPaths = removeDrawnElements(drawnElements)(\n        currantCoord.startingPaths\n      );\n      arrivingPaths = removeDrawnElements(drawnElements)(\n        currantCoord.endingPaths\n      );\n      nextNode = removeDrawnElements(drawnElements)(\n        currantCoord.nodeAssociated\n      );\n    }\n  }\n\n  // We exit the while. So there is no elements to draw from the currant coordinate\n\n  if (elementsToAdd.length > 0) {\n    //check that we added something\n    if (coordIsNew) {\n      // if it's a new coordinate, we add it to the list\n      elementsToAdd.push(\n        `${getCoord(currantCoord.x, currantCoord.y, coords, previousCoord)} `\n      );\n      if (!currantCoord.name && arrivingPaths.length > 0) {\n        // we give it a name if needed\n        coords[currantCoordId].name = nextName;\n        elementsToAdd.push(`coordinate(${nextName}) `);\n        nbOfCreatedNames += 1;\n        nextName = `point${nbOfCoordinateUsed + nbOfCreatedNames + 1}`;\n      }\n    }\n\n    elementsToAdd.push(\";\"); //add the semi colon at the end of the line\n  }\n\n  // return the elements of the line and an indicator to update the number of coordinate saved\n  return [elementsToAdd, nbOfCreatedNames];\n};\n\nexport default drawPathFromCoord;\n","import { isMultyPole, getElementAnchors } from \"components\";\nimport { isPath, findCommonAnchor, getCoordId } from \"./utils\";\n\nconst initializeCoords = (state) => {\n  // dict created :\n  //\n  // coords = {[(x, y)]: {\n  //  x: number,\n  //  y: number,\n  //  name:null||str,\n  //  startingPaths: [list of elements id],\n  //  endingPaths: [list of elements id],\n  //  nodeAssociated: [list of elements id],\n  // }\n  //\n  // nodeReference = {\n  //   [nodeId]: {\n  //     name: null,\n  //     parent: null,\n  //     parentAnchor: null,\n  //     anchor: null,\n  //     associatedIds: [list of coordId relative to this node],\n  //   }\n  // }\n\n  const coords = {};\n  const nodeReference = {};\n\n  // check coord of all to[] element\n  state.components.allIds.forEach((id) => {\n    const element = state.components.byId[id];\n    if (isPath(element)) {\n      const fromCoord = state.coordinates.byId[element.from];\n      const toCoord = state.coordinates.byId[element.to];\n\n      const fromCoordId = getCoordId(fromCoord);\n      const toCoordId = getCoordId(toCoord);\n\n      if (coords[fromCoordId] === undefined) {\n        coords[fromCoordId] = {\n          x: Math.round(fromCoord.x),\n          y: Math.round(fromCoord.y),\n          name: null,\n          startingPaths: [element.id],\n          endingPaths: [],\n          nodeAssociated: [],\n        };\n      } else if (!coords[fromCoordId].startingPaths.includes(element.id)) {\n        coords[fromCoordId].startingPaths.push(element.id);\n      }\n\n      if (coords[toCoordId] === undefined) {\n        coords[toCoordId] = {\n          x: Math.round(toCoord.x),\n          y: Math.round(toCoord.y),\n          name: null,\n          endingPaths: [element.id],\n          startingPaths: [],\n          nodeAssociated: [],\n        };\n      } else if (!coords[toCoordId].endingPaths.includes(element.id)) {\n        coords[toCoordId].endingPaths.push(element.id);\n      }\n    } else {\n      nodeReference[element.id] = {\n        name: null,\n        parent: null,\n        parentAnchor: null,\n        anchor: null,\n        associatedIds: [],\n      };\n      if (!isMultyPole[element.type]) {\n        const positionCoord = state.coordinates.byId[element.position];\n        const positionCoordId = getCoordId(positionCoord);\n\n        if (coords[positionCoordId] === undefined) {\n          coords[positionCoordId] = {\n            x: Math.round(positionCoord.x),\n            y: Math.round(positionCoord.y),\n            name: null,\n            startingPaths: [],\n            endingPaths: [],\n            nodeAssociated: [element.id],\n          };\n        } else if (\n          !coords[positionCoordId].nodeAssociated.includes(element.id)\n        ) {\n          coords[positionCoordId].nodeAssociated.push(element.id);\n        }\n      }\n    }\n  });\n\n  const weakLinks = [...state.weakLinks];\n\n  // add node informations\n  state.weakLinks.forEach(({ anchorId, nodeId }) => {\n    const coord = state.coordinates.byId[anchorId];\n\n    if (\n      !coord.isNodePosition ||\n      !isMultyPole[\n        state.components.byId[state.coordinates.byId[anchorId].nodeId].type\n      ]\n    ) {\n      const coordId = getCoordId(coord);\n      if (!coords[coordId].nodeAssociated.includes(nodeId)) {\n        coords[coordId].nodeAssociated.push(nodeId);\n      }\n      if (!nodeReference[nodeId].associatedIds.includes(coordId)) {\n        nodeReference[nodeId].associatedIds.push(coordId);\n      }\n    }\n  });\n\n  const multipoleNodes = state.components.allIds.filter(\n    (id) => isMultyPole[state.components.byId[id].type]\n  );\n\n  multipoleNodes.forEach((parentNodeId, index) => {\n    const parent = { ...state.components.byId[parentNodeId] };\n    parent.positionCoords = { ...state.coordinates.byId[parent.position] };\n\n    // add multipole child (only those after in order to keep a directed tree structure)\n    multipoleNodes.slice(index + 1).forEach((childNodeIdId) => {\n      const child = { ...state.components.byId[childNodeIdId] };\n      child.positionCoords = { ...state.coordinates.byId[child.position] };\n\n      const { parentAnchor = null, childAnchor = null } = findCommonAnchor(\n        parent,\n        child\n      );\n\n      if (parentAnchor !== null && childAnchor !== null) {\n        nodeReference[childNodeIdId].parent = parentNodeId;\n        nodeReference[childNodeIdId].anchor = childAnchor;\n        nodeReference[childNodeIdId].parentAnchor = parentAnchor;\n        if (\n          !nodeReference[parentNodeId].associatedIds.includes(childNodeIdId)\n        ) {\n          nodeReference[parentNodeId].associatedIds.push(childNodeIdId);\n        }\n      }\n    });\n\n    // add link between coordinates and node anchors\n    Object.keys(coords).forEach((coordId) => {\n      const anchors = getElementAnchors(parent);\n\n      const { x: coordX, y: coordY } = coords[coordId];\n\n      anchors.forEach(({ x: anchorX, y: anchorY }) => {\n        if (coordX === Math.round(anchorX) && coordY === Math.round(anchorY)) {\n          if (!coords[coordId].nodeAssociated.includes(parent.id)) {\n            coords[coordId].nodeAssociated.push(parent.id);\n          }\n          if (!nodeReference[parent.id].associatedIds.includes(coordId)) {\n            nodeReference[parent.id].associatedIds.push(coordId);\n          }\n        }\n      });\n    });\n  });\n\n  return [coords, nodeReference];\n};\n\nexport default initializeCoords;\n","import { drawElement, isMultyPole } from \"components\";\nimport { isNode, fillCoordWithAnchorsName, compareCoord } from \"./utils\";\nimport drawPathFromCoord from \"./drawPath\";\nimport initializeCoords from \"./initializeCoords\";\n\n// =============================================\n// THIS IS A NIGHTMARE\n// FIRST THING TO REFACTO\n//  -> first idea : use auxiliary function with long names to be precise\n//  -> put every information in nodeRef and Coords.\n//          After there creation we should not need of the state anymore\n// ==============================================\n\nfunction getCircuitikz(state) {\n  const [coords, nodeReference] = initializeCoords(state);\n\n  const drawnElements = {}; //[id]:true when element of this id is drawn\n  let nbOfCoordinateUsed = 0; // counter to save coordinate with name : point1, point2, ...\n  const nodeNumberOfNames = {}; // conter for naming multi-pole (in order to start from 1 for each type of node) exemple: nmos1, pmos1, nmos2\n  const circuitText = [\"\\\\begin{circuitikz}\"];\n\n  // ========================\n  // 1. Draw multi-pole nodes\n  // ========================\n  const multiAnchorNodeIds = state.components.allIds\n    .filter((elementId) => {\n      // filter nodes to get only multi-pole\n      const element = state.components.byId[elementId];\n      return isNode(element) && isMultyPole[element.type];\n    })\n    .sort((id1, id2) => {\n      // sort them according to there dependencies\n      if (nodeReference[id1].parent === null) {\n        return -1; //if they are both null (without parent) id1 is preferred (so we do not need to check id2)\n      }\n      if (nodeReference[id2].parent === null) {\n        return 1; //if we are here, it's that id1 is not null. but id2 is so we prefer it\n      }\n      if (nodeReference[id2].parent === id1) {\n        //id1 is parent of id2\n        return -1; //so 1 must be printed before 2\n      }\n      if (nodeReference[id1].parent === id2) {\n        //id2 is parent of id1\n        return -1; //so 2 must be printed before 1\n      }\n      return -1;\n    });\n\n  multiAnchorNodeIds.forEach((elementId) => {\n    const element = state.components.byId[elementId];\n\n    // get parent information for positioning\n    const positionInformations = {};\n    if (nodeReference[elementId].parent !== null) {\n      positionInformations.position = `${\n        nodeReference[nodeReference[elementId].parent].name\n      }.${nodeReference[elementId].parentAnchor}`;\n\n      positionInformations.anchor = nodeReference[elementId].anchor;\n    } else {\n      positionInformations.x = state.coordinates.byId[element.position].x;\n      positionInformations.y = state.coordinates.byId[element.position].y;\n    }\n\n    // check if need to create name\n    const nameNeeded = nodeReference[elementId].associatedIds.length > 0;\n    if (nameNeeded) {\n      const name = `${element.type}${nodeNumberOfNames[element.type] || 1}`;\n\n      circuitText.push(drawElement(element, positionInformations, name));\n\n      nodeReference[element.id].name = name;\n      nodeNumberOfNames[element.type] =\n        (nodeNumberOfNames[element.type] || 1) + 1;\n    } else {\n      circuitText.push(drawElement(element, positionInformations));\n    }\n\n    drawnElements[elementId] = true; //note that this node is ok\n  });\n\n  // =====================================================\n  // 2. Associate anchor name to coordinates when possible\n  // =====================================================\n  // TODO : an good idea could be not to trust weak links but to compare anchor coordinate with used coordinates\n\n  const multipoleNodes = state.components.allIds\n    .filter((id) => isMultyPole[state.components.byId[id].type])\n    .map((id) => {\n      const node = { ...state.components.byId[id] };\n      node.positionCoords = { ...state.coordinates.byId[node.position] };\n      return node;\n    });\n\n  fillCoordWithAnchorsName(multipoleNodes, coords, nodeReference, state);\n\n  // ====================================\n  // 3. Draw path from multi-pole coordinates\n  // ====================================\n  multiAnchorNodeIds.forEach((nodeId) => {\n    nodeReference[nodeId].associatedIds.forEach((childId) => {\n      if (coords[childId] !== undefined) {\n        const [elementsToAdd, nbOfCreatedNames] = drawPathFromCoord(\n          childId,\n          coords,\n          state,\n          drawnElements,\n          nbOfCoordinateUsed\n        );\n\n        if (elementsToAdd.length > 0) {\n          nbOfCoordinateUsed += nbOfCreatedNames;\n          circuitText.push(elementsToAdd.join(\"\"));\n        }\n      }\n    });\n  });\n\n  // ===========================\n  // 4. Draw all remaining paths\n  // ===========================\n  const coordsToPlot = Object.keys(coords);\n  while (coordsToPlot.length > 0) {\n    // get coordinate id to start the path according to \"compareCoord\" function\n    const idToPlot = coordsToPlot.sort(compareCoord(drawElement, coords))[0];\n\n    //plot it\n    if (coords[idToPlot] !== undefined) {\n      const [elementsToAdd, nbOfCreatedNames] = drawPathFromCoord(\n        idToPlot,\n        coords,\n        state,\n        drawnElements,\n        nbOfCoordinateUsed\n      );\n\n      if (elementsToAdd.length > 0) {\n        nbOfCoordinateUsed += nbOfCreatedNames;\n        circuitText.push(elementsToAdd.join(\"\"));\n      } else {\n        // remove it from the list because there is no more things to draw from here\n        const index = coordsToPlot.indexOf(idToPlot);\n        coordsToPlot.splice(index, 1);\n      }\n    } else {\n      // remove it from the list because this coordinate does not exist\n      const index = coordsToPlot.indexOf(idToPlot);\n      coordsToPlot.splice(index, 1);\n    }\n  }\n  circuitText.push(\"\\\\end{circuitikz}\");\n\n  return circuitText;\n}\n\nexport default getCircuitikz;\n","import React from \"react\";\nimport { connect } from \"react-redux\";\n\nimport getCircuitikz from \"redux/store/getCircuitikz\";\n\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\nimport DialogContent from \"@material-ui/core/DialogContent\";\nimport DialogActions from \"@material-ui/core/DialogActions\";\nimport Button from \"@material-ui/core/Button\";\n\nconst copyCode = (code) => {\n  navigator.clipboard.writeText(code).then(\n    function () {},\n    function () {}\n  );\n};\n\nconst mapStateToProps = (state) => {\n  return { code: getCircuitikz(state) };\n};\n\nconst LatexDisplay = ({ code }) => (\n  <>\n    <DialogTitle>Your LaTEX code</DialogTitle>\n    <DialogContent>\n      <pre>\n        {code.slice(0, code.length - 1).join(\"\\n\\t\") +\n          \"\\n\" +\n          code[code.length - 1]}\n      </pre>\n    </DialogContent>\n    <DialogActions>\n      <Button\n        autoFocus\n        onClick={() => {\n          copyCode(\n            code.slice(0, code.length - 1).join(\"\\n\\t\") +\n              \"\\n\" +\n              code[code.length - 1]\n          );\n        }}\n      >\n        Copy\n      </Button>\n    </DialogActions>\n  </>\n);\n\nexport default connect(mapStateToProps, null)(LatexDisplay);\n","import React from \"react\";\nimport { connect } from \"react-redux\";\n\nimport { updateComponent } from \"redux/actions\";\n\nimport List from \"@material-ui/core/List\";\nimport ListItem from \"@material-ui/core/ListItem\";\nimport ListItemText from \"@material-ui/core/ListItemText\";\nimport ListItemSecondaryAction from \"@material-ui/core/ListItemSecondaryAction\";\n\nimport Input from \"@material-ui/core/Input\";\nimport Checkbox from \"@material-ui/core/Checkbox\";\nimport Switch from \"@material-ui/core/Switch\";\nimport FormControlLabel from \"@material-ui/core/FormControlLabel\";\nimport TextField from \"@material-ui/core/TextField\";\nimport Select from \"@material-ui/core/Select\";\nimport MenuItem from \"@material-ui/core/MenuItem\";\nimport SvgIcon from \"@material-ui/core/SvgIcon\";\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n    handleInputChange: (id, name) => (value) => (event) =>\n      dispatch(\n        updateComponent(id, name, value === null ? event.target.value : value)\n      ),\n  };\n};\n\nconst mapStateToProps = (state) => {\n  if (state.selection.length < 1) {\n    return {};\n  }\n  const idOfInterest = state.selection[0];\n\n  return {\n    id: idOfInterest,\n    options:\n      state.components.byId[idOfInterest] ||\n      state.coordinates.byId[idOfInterest] ||\n      {},\n  };\n};\n\nconst inputElement = {\n  label: (value, update) => (\n    <ListItem>\n      <TextField\n        label=\"Label\"\n        value={value}\n        onKeyDown={(e) => e.stopPropagation()}\n        onChangeCapture={update(null)}\n      />\n    </ListItem>\n  ),\n  annotation: (value, update) => (\n    <ListItem>\n      <TextField\n        label=\"Annotation\"\n        value={value}\n        onKeyDown={(e) => e.stopPropagation()}\n        onChangeCapture={update(null)}\n      />\n    </ListItem>\n  ),\n  angle: (value, update) => (\n    <ListItem button>\n      <ListItemText primary=\"rotation\" />\n      <ListItemSecondaryAction>\n        <Input\n          value={value || 0}\n          onKeyDown={(e) => e.stopPropagation()}\n          onChangeCapture={update(null)}\n          inputProps={{\n            step: 5,\n            min: -180,\n            max: 180,\n            type: \"number\",\n          }}\n        />\n      </ListItemSecondaryAction>\n    </ListItem>\n  ),\n  wiper_pos: (value, update) => (\n    <ListItem button>\n      <ListItemText primary=\"wiper position\" />\n      <ListItemSecondaryAction>\n        <Input\n          value={value || 0}\n          onKeyDown={(e) => e.stopPropagation()}\n          onChangeCapture={update(null)}\n          inputProps={{\n            step: 0.01,\n            min: 0,\n            max: 1,\n            type: \"number\",\n          }}\n        />\n      </ListItemSecondaryAction>\n    </ListItem>\n  ),\n  isOpen: (value, update) => (\n    <ListItem>\n      <FormControlLabel\n        control={\n          <Switch checked={value} onChange={update(!value)} name=\"isOpen\" />\n        }\n        label=\"isOpen\"\n      />\n    </ListItem>\n  ),\n  withArrow: (value, update) => (\n    <ListItem>\n      <FormControlLabel\n        control={\n          <Switch checked={value} onChange={update(!value)} name=\"withArrow\" />\n        }\n        label=\"withArrow\"\n      />\n    </ListItem>\n  ),\n  mirror: (value, update) => (\n    <ListItem>\n      <FormControlLabel\n        control={\n          <Switch checked={value} onChange={update(!value)} name=\"mirror\" />\n        }\n        label=\"mirror\"\n      />\n    </ListItem>\n  ),\n  invert: (value, update) => (\n    <ListItem>\n      <FormControlLabel\n        control={\n          <Switch checked={value} onChange={update(!value)} name=\"invert\" />\n        }\n        label=\"Invert\"\n      />\n    </ListItem>\n  ),\n  shape: (value, update) => (\n    <ListItem>\n      <ListItemText primary=\"shape\" />\n      <ListItemSecondaryAction>\n        <Select value={value} onChange={update(null)} autoFocus={true}>\n          <MenuItem value=\"\">\n            <SvgIcon></SvgIcon>\n          </MenuItem>\n          <MenuItem value=\"*\">\n            <SvgIcon>\n              <circle\n                cx={12}\n                cy={12}\n                r={5}\n                style={{ fill: \"black\", stroke: \"black\" }}\n              />\n            </SvgIcon>\n          </MenuItem>\n          <MenuItem value=\"o\">\n            <SvgIcon>\n              <circle\n                cx={12}\n                cy={12}\n                r={5}\n                style={{ fill: \"white\", stroke: \"black\", strokeWidth: 2 }}\n              />\n            </SvgIcon>\n          </MenuItem>\n          <MenuItem value=\"d\">\n            <SvgIcon>\n              <path\n                d={`M ${12 + 6} ${12}\n                  L ${12} ${12 + 6}\n                  L ${12 - 6} ${12}\n                  L ${12} ${12 - 6} Z`}\n                style={{ fill: \"black\", stroke: \"black\" }}\n              />\n            </SvgIcon>\n          </MenuItem>\n        </Select>\n      </ListItemSecondaryAction>\n    </ListItem>\n  ),\n  voltageName: (value, update) => (\n    <ListItem>\n      <TextField\n        label=\"Voltage\"\n        value={value}\n        onKeyDown={(e) => e.stopPropagation()}\n        onChangeCapture={update(null)}\n      />\n    </ListItem>\n  ),\n  voltageIsDown: (value, update) => (\n    <ListItem>\n      <FormControlLabel\n        control={\n          <Switch\n            checked={value}\n            onChange={update(!value)}\n            name=\"voltage position\"\n          />\n        }\n        label=\"Voltage Position\"\n      />\n    </ListItem>\n  ),\n  voltageIsDirect: (value, update) => (\n    <ListItem>\n      <FormControlLabel\n        control={\n          <Switch\n            checked={value}\n            onChange={update(!value)}\n            name=\"voltage direction\"\n          />\n        }\n        label=\"Voltage Direction\"\n      />\n    </ListItem>\n  ),\n  currant: (value, update) => (\n    <>\n      <ListItem button>\n        <ListItemText primary=\"Currant\" />\n        <ListItemSecondaryAction>\n          <Checkbox\n            checked={value.show}\n            onChange={update({ ...value, show: !value.show })}\n            inputProps={{ \"aria-label\": \"primary checkbox\" }}\n          />\n        </ListItemSecondaryAction>\n      </ListItem>\n      <ListItem>\n        <TextField\n          disabled={!value.show}\n          label=\"Currant name\"\n          value={value.currantText}\n          onKeyDown={(e) => e.stopPropagation()}\n          onChangeCapture={(e) =>\n            update({ ...value, currantText: e.target.value })()\n          }\n        />\n      </ListItem>\n      <ListItem>\n        <FormControlLabel\n          disabled={!value.show}\n          control={\n            <Switch\n              checked={value.currantIsForward}\n              onChange={update({\n                ...value,\n                currantIsForward: !value.currantIsForward,\n              })}\n              name=\"arrow direction\"\n            />\n          }\n          label=\"direction\"\n        />\n      </ListItem>\n      <ListItem>\n        <FormControlLabel\n          disabled={!value.show}\n          control={\n            <Switch\n              checked={value.currantIsAfter}\n              onChange={update({\n                ...value,\n                currantIsAfter: !value.currantIsAfter,\n              })}\n              name=\"currant position\"\n            />\n          }\n          label=\"arrow position\"\n        />\n      </ListItem>\n      <ListItem>\n        <FormControlLabel\n          disabled={!value.show}\n          control={\n            <Switch\n              checked={value.currantIsAbove}\n              onChange={update({\n                ...value,\n                currantIsAbove: !value.currantIsAbove,\n              })}\n              name=\"text position\"\n            />\n          }\n          label=\"text position\"\n        />\n      </ListItem>\n    </>\n  ),\n};\n\nconst ElementOptions = ({ handleInputChange, id, options = null }) => {\n  if (options === null) {\n    return null;\n  }\n  return (\n    <List>\n      {Object.keys(options)\n        .map((name) => [\n          name,\n          Object.keys(inputElement).findIndex((n) => n === name),\n        ])\n        .filter(([, index]) => index >= 0)\n        .sort(([, i1], [, i2]) => i1 - i2)\n        .map(([name]) => (\n          <div key={name}>\n            {inputElement[name](options[name], handleInputChange(id, name))}\n          </div>\n        ))}\n    </List>\n  );\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ElementOptions);\n","import React, { useState } from \"react\";\n\nimport { connect } from \"react-redux\";\nimport { startCreatePathElement, startCreateNodeElement } from \"redux/actions\";\n\nimport { isPath, structure } from \"components\";\n\nimport List from \"@material-ui/core/List\";\nimport ListItem from \"@material-ui/core/ListItem\";\nimport ListItemText from \"@material-ui/core/ListItemText\";\n\nimport ExpandLess from \"@material-ui/icons/ExpandLess\";\nimport ExpandMore from \"@material-ui/icons/ExpandMore\";\nimport Collapse from \"@material-ui/core/Collapse\";\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n    startCreatePathElement: (elementType) =>\n      dispatch(startCreatePathElement(elementType)),\n    startCreateNodeElement: (elementType) =>\n      dispatch(startCreateNodeElement(elementType)),\n  };\n};\n\nconst LeftMenu = ({ startCreatePathElement, startCreateNodeElement }) => {\n  const [openSection, setOpenSection] = useState();\n\n  return (\n    <List>\n      {Object.keys(structure).map((sectionName) => (\n        <div key={sectionName}>\n          <ListItem\n            button\n            onClick={() =>\n              setOpenSection(openSection === sectionName ? null : sectionName)\n            }\n          >\n            <ListItemText primary={sectionName} />\n            {openSection === sectionName ? <ExpandLess /> : <ExpandMore />}\n          </ListItem>\n          <Collapse\n            in={openSection === sectionName}\n            timeout=\"auto\"\n            unmountOnExit\n          >\n            <List>\n              {structure[sectionName].map((name) => (\n                <ListItem\n                  button\n                  key={name}\n                  onMouseDown={(event) => {\n                    event.stopPropagation();\n                    if (isPath[name]) {\n                      startCreatePathElement(name);\n                    } else {\n                      startCreateNodeElement(name);\n                    }\n                  }}\n                >\n                  <ListItemText\n                    primary={name}\n                    style={{ paddingLeft: \"20px\" }}\n                  />\n                </ListItem>\n              ))}\n            </List>\n          </Collapse>\n        </div>\n      ))}\n    </List>\n  );\n};\n\nexport default connect(null, mapDispatchToProps)(LeftMenu);\n","export default __webpack_public_path__ + \"static/media/options.0269d8f9.png\";","export default __webpack_public_path__ + \"static/media/save.4dd25b28.png\";","export default __webpack_public_path__ + \"static/media/selectElement.e081ff5c.png\";","import React, { useState } from \"react\";\nimport { useTranslation } from \"react-i18next\";\n\nimport Dialog from \"@material-ui/core/Dialog\";\nimport DialogContent from \"@material-ui/core/DialogContent\";\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\nimport List from \"@material-ui/core/List\";\nimport ListItem from \"@material-ui/core/ListItem\";\nimport ListItemText from \"@material-ui/core/ListItemText\";\nimport MobileStepper from \"@material-ui/core/MobileStepper\";\nimport Button from \"@material-ui/core/Button\";\n\nimport HelpOutlineIcon from \"@material-ui/icons/HelpOutline\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport KeyboardArrowLeft from \"@material-ui/icons/KeyboardArrowLeft\";\nimport KeyboardArrowRight from \"@material-ui/icons/KeyboardArrowRight\";\n\nimport options from \"./options.png\";\nimport save from \"./save.png\";\nimport selectElement from \"./selectElement.png\";\n\nconst titles = [\n  \"Select components to draw from the left menu.\",\n  \"Modify properties of selected component with right menu\",\n  \"Save and Export your creation with latex, png or json\",\n  \"Some shortcut to simplify your experience\",\n];\n\nconst images = [selectElement, options, save];\n\nconst shortcuts = [\n  {\n    key: \"S\",\n    description: \"Split coordinate point in multiple points\",\n  },\n  {\n    key: \"Shift\",\n    description: \"Lock dragging along x or y axis\",\n  },\n  {\n    key: \"Ctrl\",\n    description: \"Allow to select multiple element\",\n  },\n  {\n    key: \"Suppr\",\n    description: \"Delete selected component (only one)\",\n  },\n  {\n    key: \"Arrows\",\n    description: \"Stack coordinates along given direction\",\n  },\n];\n\nconst HelpShortcut = ({ classes }) => {\n  const { t, ready } = useTranslation(\"introduction\");\n\n  const [showHelp, setShowHelp] = useState(!localStorage.getItem(\"dontShow\"));\n  const [helpStep, setHelpStep] = useState(\n    localStorage.getItem(\"helpStep\") || 0\n  );\n\n  const openHelp = () => setShowHelp(true);\n  const closeHelp = () => {\n    setShowHelp(false);\n    localStorage.setItem(\"dontShow\", true);\n  };\n\n  const next = () => {\n    setHelpStep(Math.min(3, helpStep + 1));\n    localStorage.setItem(\"dontShow\", Math.min(3, helpStep + 1));\n  };\n  const prev = () => {\n    setHelpStep(Math.max(0, helpStep - 1));\n    localStorage.setItem(\"dontShow\", Math.max(3, helpStep - 1));\n  };\n\n  return (\n    <>\n      <IconButton\n        edge=\"start\"\n        className={classes.menuButton}\n        color=\"inherit\"\n        aria-label=\"open drawer\"\n        onClick={openHelp}\n      >\n        <HelpOutlineIcon />\n      </IconButton>\n      <Dialog fullWidth maxWidth=\"sm\" open={showHelp} onClose={closeHelp}>\n        <DialogTitle>\n          {ready ? t(`steps.${helpStep}`) : titles[helpStep]}\n        </DialogTitle>\n        <DialogContent>\n          {helpStep === 3 ? (\n            <List>\n              {shortcuts.map((shortcut) => (\n                <ListItem key={shortcut.key}>\n                  <ListItemText\n                    classes={{ primary: classes.keyboardDescription }}\n                    primary={\n                      ready ? t(`keys.${shortcut.key}`) : shortcut.description\n                    }\n                  />\n                  <span className={classes.keyboardKey}>{shortcut.key}</span>\n                </ListItem>\n              ))}\n            </List>\n          ) : (\n            <img\n              src={images[helpStep]}\n              alt={titles[helpStep]}\n              style={{ width: \"100%\" }}\n            />\n          )}\n        </DialogContent>\n        <MobileStepper\n          variant=\"dots\"\n          steps={4}\n          position=\"static\"\n          activeStep={helpStep}\n          nextButton={\n            <Button size=\"small\" onClick={next} disabled={helpStep === 3}>\n              Next\n              <KeyboardArrowRight />\n            </Button>\n          }\n          backButton={\n            <Button size=\"small\" onClick={prev} disabled={helpStep === 0}>\n              <KeyboardArrowLeft />\n              Back\n            </Button>\n          }\n        />\n      </Dialog>\n    </>\n  );\n};\n\nexport default HelpShortcut;\n","import { loadProject, listProjects } from \"redux/actions\";\nimport { openMessage } from \"redux/actions/messages\";\nimport { v4 as uuid } from \"uuid\";\n\nconst SUCCESS = \"success\";\nconst ERROR = \"error\";\n\nconst extractData = async (response) => {\n  const returnedData = await response.json();\n  const severity = response.ok ? SUCCESS : ERROR;\n\n  return { severity, returnedData };\n};\n\nexport const saveProject = ({ formData }) => async (dispatch, getState) => {\n  const { components, coordinates } = getState();\n  formData.append(\n    \"data\",\n    JSON.stringify({\n      components,\n      coordinates,\n    })\n  );\n  const response = await fetch(\"https://amathjourney.com/api/circuits/\", {\n    method: \"POST\",\n    body: formData,\n  });\n\n  const { severity, returnedData } = await extractData(response);\n\n  dispatch(\n    openMessage({\n      id: uuid(),\n      severity,\n      text: returnedData.error || \"project saved\",\n    })\n  );\n};\n\nexport const updateProject = ({ id, formData }) => async (\n  dispatch,\n  getState\n) => {\n  const { components, coordinates } = getState();\n\n  formData.append(\n    \"data\",\n    JSON.stringify({\n      components,\n      coordinates,\n    })\n  );\n\n  const response = await fetch(`https://amathjourney.com/api/circuits/${id}`, {\n    method: \"PUT\",\n    body: formData,\n  });\n\n  const { severity, returnedData } = await extractData(response);\n\n  dispatch(\n    openMessage({\n      id: uuid(),\n      severity,\n      text: returnedData.error || \"project updated\",\n    })\n  );\n};\n\nexport const deleteProject = ({ id, password, history }) => async (\n  dispatch,\n  getState\n) => {\n  const { components, coordinates } = getState();\n  const data = {\n    password,\n  };\n  const response = await fetch(`https://amathjourney.com/api/circuits/${id}`, {\n    method: \"DELETE\",\n    body: JSON.stringify(data),\n    headers: {\n      \"Content-Type\": \"application/json\",\n    },\n  });\n\n  const { severity, returnedData } = await extractData(response);\n\n  dispatch(\n    openMessage({\n      id: uuid(),\n      severity,\n      text: returnedData.error || \"project deleted\",\n    })\n  );\n  if (severity === SUCCESS) {\n    history.push(\"/catalogue\");\n  }\n};\n\nexport const getProjects = () => async (dispatch, getState) => {\n  const rep = await fetch(`https://amathjourney.com/api/circuits/`, {\n    method: \"GET\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n    },\n  });\n  const jsonRep = await rep.json();\n  if (jsonRep.length > 0) {\n    dispatch(listProjects(jsonRep));\n  }\n};\n\nexport const getProject = (id = \"\") => async (dispatch, getState) => {\n  if (!id) {\n    dispatch(\n      loadProject({\n        id: \"\",\n        username: \"\",\n        circuitname: \"\",\n        components: {\n          byId: {},\n          allIds: [],\n        },\n        coordinates: {\n          byId: {},\n          allIds: [],\n        },\n      })\n    );\n    return null;\n  }\n\n  const rep = await fetch(`https://amathjourney.com/api/circuits/${id}`, {\n    method: \"GET\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n    },\n  });\n  const jsonRep = await rep.json();\n\n  if (\n    jsonRep.length > 0 &&\n    jsonRep[0].data &&\n    jsonRep[0].data.components &&\n    jsonRep[0].data.coordinates\n  ) {\n    dispatch(\n      loadProject({\n        id: jsonRep[0].id,\n        username: jsonRep[0].username,\n        circuitname: jsonRep[0].circuitname,\n        components: jsonRep[0].data.components,\n        coordinates: jsonRep[0].data.coordinates,\n      })\n    );\n  }\n};\n","import React, { useState, useRef, useEffect, useCallback } from \"react\";\nimport rough from \"roughjs/bundled/rough.esm.js\";\n\nimport { roughComponents } from \"components\";\nimport { roughCoordinate } from \"atoms/anchor\";\n\nimport { connect } from \"react-redux\";\nimport { useHistory } from \"react-router-dom\";\n\nimport { loadProject } from \"redux/actions\";\nimport {\n  updateProject,\n  saveProject,\n  deleteProject,\n} from \"redux/apiInteractions\";\n\nimport IconButton from \"@material-ui/core/IconButton\";\nimport Menu from \"@material-ui/core/Menu\";\nimport MenuItem from \"@material-ui/core/MenuItem\";\nimport Dialog from \"@material-ui/core/Dialog\";\nimport DialogActions from \"@material-ui/core/DialogActions\";\nimport DialogContent from \"@material-ui/core/DialogContent\";\nimport FormControlLabel from \"@material-ui/core/FormControlLabel\";\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\nimport Button from \"@material-ui/core/Button\";\nimport TextField from \"@material-ui/core/TextField\";\nimport Checkbox from \"@material-ui/core/Checkbox\";\nimport ListSubheader from \"@material-ui/core/ListSubheader\";\nimport Divider from \"@material-ui/core/Divider\";\n\nimport FileCopyIcon from \"@material-ui/icons/FileCopy\";\n\n// size of the image to represent the circuit\nconst MAX_HEIGHT = 300;\nconst MAX_WIDTH = 500;\n\nfunction dataURItoBlob(dataURI) {\n  // convert base64/URLEncoded data component to raw binary data held in a string\n  var byteString;\n  if (dataURI.split(\",\")[0].indexOf(\"base64\") >= 0)\n    byteString = atob(dataURI.split(\",\")[1]);\n  else byteString = unescape(dataURI.split(\",\")[1]);\n\n  // separate out the mime component\n  var mimeString = dataURI.split(\",\")[0].split(\":\")[1].split(\";\")[0];\n\n  // write the bytes of the string to a typed array\n  var ia = new Uint8Array(byteString.length);\n  for (var i = 0; i < byteString.length; i++) {\n    ia[i] = byteString.charCodeAt(i);\n  }\n\n  return new Blob([ia], { type: mimeString });\n}\n\nconst mapStateToProps = (state) => {\n  return {\n    components: state.components,\n    coordinates: state.coordinates,\n    currentProject: state.currentProject,\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n    loadProject: ({ components, coordinates }) =>\n      dispatch(loadProject({ components, coordinates })),\n    saveProject: ({ formData }) => dispatch(saveProject({ formData })),\n    updateProject: ({ id, formData }) =>\n      dispatch(updateProject({ id, formData })),\n    deleteProject: ({ id, password, history }) =>\n      dispatch(deleteProject({ id, password, history })),\n  };\n};\n\nconst SaveOnline = ({\n  open,\n  toDelete,\n  setOpen,\n  updateProject,\n  saveProject,\n  deleteProject,\n  currentProject = {},\n  components,\n  coordinates,\n}) => {\n  const history = useHistory();\n\n  const id = (currentProject && currentProject.id) || \"\";\n  const [canvasUrl, setCanvasUrl] = useState(\"\");\n  const [erase, setErase] = useState(id !== \"\");\n\n  const [circuitname, setCircuitname] = useState(\n    (currentProject && currentProject.circuitname) || \"\"\n  );\n  const [username, setUsername] = useState(\n    (currentProject && currentProject.username) || \"\"\n  );\n  const [password1, setPassword1] = useState(\"\");\n  const [password2, setPassword2] = useState(\"\");\n\n  useEffect(() => {\n    setCircuitname((currentProject && currentProject.circuitname) || \"\");\n    setUsername((currentProject && currentProject.username) || \"\");\n  }, [currentProject.id, currentProject.circuitname, currentProject.username]);\n\n  const canvasRef = useCallback(\n    (canvasNode) => {\n      const margin = 10;\n      if (canvasNode) {\n        const svgBBox = document.getElementById(\"drawingArea\").getBBox();\n\n        const width = svgBBox.width;\n        const height = svgBBox.height;\n\n        const height_ratio = MAX_HEIGHT / (height + 2 * margin);\n        const width_ratio = MAX_WIDTH / (width + 2 * margin);\n        const ratio = Math.min(1, Math.min(height_ratio, width_ratio));\n\n        const rc = rough.canvas(canvasNode, {\n          options: { seed: 1, roughness: 0, curveFitting: 1 },\n        });\n\n        canvasNode.width = ratio * (width + 2 * margin);\n        canvasNode.height = ratio * (height + 2 * margin);\n        const ctx = canvasNode.getContext(\"2d\");\n        ctx.scale(ratio, ratio);\n\n        ctx.font = \"0.7cm IndieFlower\";\n\n        ctx.fillStyle = \"white\";\n        ctx.fillRect(0, 0, width + 2 * margin, height + 2 * margin);\n        ctx.fillStyle = \"black\";\n\n        components.allIds.forEach((id) => {\n          const element = components.byId[id];\n          element.positionCoords = element.position\n            ? coordinates.byId[element.position]\n            : undefined;\n          element.fromCoords = element.from\n            ? coordinates.byId[element.from]\n            : undefined;\n          element.toCoords = element.to\n            ? coordinates.byId[element.to]\n            : undefined;\n\n          roughComponents(\n            rc,\n            ctx,\n            svgBBox.x - margin,\n            svgBBox.y - margin,\n            element\n          );\n        });\n\n        coordinates.allIds.forEach((id) => {\n          const element = coordinates.byId[id];\n          roughCoordinate(\n            rc,\n            ctx,\n            svgBBox.x - margin,\n            svgBBox.y - margin,\n            element\n          );\n        });\n\n        setCanvasUrl(canvasNode.toDataURL(\"image/png\"));\n      }\n    },\n    [components, coordinates]\n  );\n\n  return (\n    <Dialog maxWidth=\"xs\" open={open} aria-labelledby=\"form-dialog-title\">\n      <DialogTitle id=\"form-dialog-title\">\n        {toDelete ? \"Delete circuit\" : \"Save circuit\"}\n      </DialogTitle>\n      <DialogContent>\n        {!toDelete && (\n          <>\n            <TextField\n              autoFocus\n              margin=\"dense\"\n              id=\"userName\"\n              label=\"user name\"\n              type=\"text\"\n              value={username}\n              onChange={(e) => {\n                setUsername(e.target.value);\n                console.log(\"value\", e.target.value);\n                e.stopPropagation();\n              }}\n              fullWidth\n            />\n            <TextField\n              margin=\"dense\"\n              id=\"circuitName\"\n              label=\"circuit name\"\n              type=\"text\"\n              value={circuitname}\n              onChange={(e) => setCircuitname(e.target.value)}\n              fullWidth\n            />\n          </>\n        )}\n        <TextField\n          margin=\"dense\"\n          id=\"password\"\n          label=\"password\"\n          type=\"password\"\n          value={password1}\n          onChange={(e) => setPassword1(e.target.value)}\n          fullWidth\n        />\n        {!toDelete && (\n          <TextField\n            margin=\"dense\"\n            id=\"confirmPassword\"\n            label=\"confirm password\"\n            type=\"password\"\n            value={password2}\n            onChange={(e) => setPassword2(e.target.value)}\n            disabled={erase}\n            error={!erase && password1 !== password2}\n            helperText={\"must be the same password\"}\n            fullWidth\n          />\n        )}\n        {id !== \"\" ? (\n          !toDelete && (\n            <FormControlLabel\n              control={\n                <Checkbox\n                  checked={erase}\n                  onChange={(e) => setErase(e.target.checked)}\n                />\n              }\n              label={\n                <>\n                  Erase the original schema<br></br>(you need the password)\n                </>\n              }\n            />\n          )\n        ) : (\n          <p>(Password will be necessary to modify your circuit later)</p>\n        )}\n      </DialogContent>\n      <DialogActions>\n        <Button onClick={() => setOpen(false)} color=\"primary\">\n          Cancel\n        </Button>\n        <Button\n          onClick={() => {\n            setOpen(false);\n            const fd = new FormData();\n\n            fd.append(\"username\", username);\n            fd.append(\"circuitname\", circuitname);\n            fd.append(\"password\", password1);\n            fd.append(\"file\", dataURItoBlob(canvasUrl), \"image.png\");\n            if (id && toDelete) {\n              deleteProject({ id, password: password1, history });\n            } else if (id && erase) {\n              updateProject({ id, formData: fd });\n            } else if (password1 === password2) {\n              saveProject({ formData: fd });\n            }\n          }}\n          color=\"primary\"\n        >\n          {id && toDelete ? \"Delete\" : \"Save\"}\n        </Button>\n      </DialogActions>\n      {/* canvas used to compute the image to upload */}\n      <canvas ref={canvasRef} style={{ display: \"none\" }} />\n    </Dialog>\n  );\n};\n\nconst FileManager = ({\n  components,\n  coordinates,\n  currentProject,\n  loadProject,\n  updateProject,\n  saveProject,\n  deleteProject,\n  ...props\n}) => {\n  const [openDialogue, setOpenDialogue] = useState(false);\n  const [isOpen, setIsOpen] = useState(false);\n  const [toDelete, setToDelete] = useState(false);\n\n  const anchorEl = useRef();\n  const [href, setHref] = useState(\"\");\n\n  useEffect(() => {\n    setHref(\n      \"data:text/json;charset=utf-8,\" +\n        encodeURIComponent(JSON.stringify({ components, coordinates }))\n    );\n  }, [components, coordinates]);\n\n  // when the modal is closed we set delete to false\n  useEffect(() => {\n    if (isOpen === false) {\n      setToDelete(false);\n    }\n  }, [isOpen]);\n\n  const open = () => setIsOpen(true);\n  const close = () => setIsOpen(false);\n\n  const handleUpload = (uploadedFile) => {\n    const fileReader = new FileReader();\n\n    fileReader.onloadend = () => {\n      try {\n        const data = JSON.parse(fileReader.result);\n        if (data.components && data.coordinates) {\n          loadProject(data);\n        }\n      } catch (e) {\n        console.log(\"not a json\");\n      }\n    };\n\n    if (uploadedFile !== undefined) fileReader.readAsText(uploadedFile);\n  };\n\n  return (\n    <>\n      <IconButton\n        {...props}\n        aria-controls=\"simple-menu\"\n        aria-haspopup=\"true\"\n        onClick={isOpen ? close : open}\n        ref={anchorEl}\n      >\n        <FileCopyIcon />\n      </IconButton>\n      <Menu anchorEl={anchorEl.current} open={isOpen} onClose={close}>\n        <ListSubheader>Local</ListSubheader>\n        <div>\n          <input\n            id=\"contained-button-file\"\n            type=\"file\"\n            style={{ display: \"none\" }}\n            onChange={(e) => {\n              handleUpload(e.target.files[0]);\n            }}\n          />\n          <label htmlFor=\"contained-button-file\">\n            <MenuItem variant=\"contained\" color=\"primary\" component=\"span\">\n              Open\n            </MenuItem>\n          </label>\n        </div>\n        <MenuItem\n          component=\"a\"\n          color=\"primary\"\n          href={href}\n          download=\"circuit.physSchem\"\n        >\n          Save\n        </MenuItem>\n        <Divider />\n        <ListSubheader>Online</ListSubheader>\n        <MenuItem\n          color=\"primary\"\n          onClick={() => {\n            setOpenDialogue(true);\n            setToDelete(false);\n          }}\n        >\n          Save Online\n        </MenuItem>\n        <MenuItem\n          color=\"primary\"\n          onClick={() => {\n            setOpenDialogue(true);\n            setToDelete(true);\n          }}\n        >\n          Delete Online\n        </MenuItem>\n      </Menu>\n      <SaveOnline\n        updateProject={updateProject}\n        saveProject={saveProject}\n        deleteProject={deleteProject}\n        currentProject={currentProject}\n        open={openDialogue}\n        toDelete={toDelete}\n        setOpen={setOpenDialogue}\n        components={components}\n        coordinates={coordinates}\n      />\n    </>\n  );\n};\nexport default connect(mapStateToProps, mapDispatchToProps)(FileManager);\n","import React, { useEffect, useState, useRef } from \"react\";\nimport { connect } from \"react-redux\";\n\nimport { Link as RouterLink, useParams } from \"react-router-dom\";\nimport Link from \"@material-ui/core/Link\";\n\nimport {\n  MODE_DRAG,\n  MODE_SELECT,\n  MODE_MOVE_PAPER,\n} from \"redux/store/interactionModes\";\n\nimport RoughDrawing from \"container/RoughDrawing\";\nimport Container from \"container/index.js\";\nimport LatexDisplay from \"container/latexDisplay\";\nimport ElementOptions from \"container/elementOptions\";\nimport LeftMenu from \"container/leftMenu\";\nimport Tutorial from \"container/tutorial\";\nimport FileManager from \"container/FileManager\";\n\nimport Drawer from \"@material-ui/core/Drawer\";\nimport AppBar from \"@material-ui/core/AppBar\";\nimport Toolbar from \"@material-ui/core/Toolbar\";\nimport Typography from \"@material-ui/core/Typography\";\n\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport CssBaseline from \"@material-ui/core/CssBaseline\";\n\nimport Button from \"@material-ui/core/Button\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport Dialog from \"@material-ui/core/Dialog\";\n\nimport PhotoLibraryIcon from \"@material-ui/icons/PhotoLibrary\";\n\nimport {\n  startSelect,\n  splitAnchor,\n  stackSelectedAnchors,\n  deleteElement,\n  movePaper,\n  endMovePaper,\n} from \"redux/actions\";\nimport { getProject } from \"redux/apiInteractions\";\n\nconst drawerWidth = 180;\nconst optionDrawerWidth = 280;\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    display: \"flex\",\n  },\n  appBar: {\n    zIndex: theme.zIndex.drawer + 1,\n  },\n  toolBar: {\n    justifyContent: \"space-between\",\n  },\n  drawer: {\n    width: drawerWidth,\n    flexShrink: 0,\n  },\n  drawerPaper: {\n    width: drawerWidth,\n  },\n  drawerContainer: {\n    overflow: \"auto\",\n  },\n  optionDrawer: {},\n  optionDrawerPaper: { width: optionDrawerWidth },\n  content: {\n    flexGrow: 1,\n    padding: `${theme.spacing(8)} 0`,\n  },\n  menuButton: {\n    marginRight: theme.spacing(2),\n  },\n\n  keyboardKey: {\n    backgroundColor: \"#eee\",\n    borderRadius: \"3px\",\n    border: \"1px solid #b4b4b4\",\n    boxShadow:\n      \"0 1px 1px rgba(0, 0, 0, .2), 0 2px 0 0 rgba(255, 255, 255, .7) inset\",\n    color: \"#333\",\n    display: \"inline-block\",\n    fontSize: \"1.2em\",\n    fontWeight: 600,\n    lineHeight: 1,\n    padding: \"8px 8px\",\n  },\n  keyboardDescription: {\n    fontSize: \"1.1rem\",\n  },\n}));\n\nconst mapStateToProps = (state) => {\n  return {\n    mode: state.mode,\n    selection: state.selection,\n    isPaperDragged: state.displayOptions.dragging.isDragging,\n    currentProject: state.currentProject,\n  };\n};\nconst mapDispatchToProps = (dispatch) => {\n  return {\n    startSelect: () => dispatch(startSelect()),\n    splitAnchor: () => dispatch(splitAnchor()),\n    stackSelectedAnchors: (direction) =>\n      dispatch(stackSelectedAnchors(direction)),\n    deleteElement: (selection) => {\n      dispatch(deleteElement(selection));\n    },\n    movePaper: (x, y) => dispatch(movePaper(x, y)),\n    endMovePaper: () => dispatch(endMovePaper()),\n    getProject: (id) => dispatch(getProject(id)),\n  };\n};\n\nfunction App({\n  mode,\n  selection,\n  isPaperDragged,\n  currentProject,\n  startSelect,\n  splitAnchor,\n  stackSelectedAnchors,\n  deleteElement,\n  movePaper,\n  endMovePaper,\n  getProject,\n}) {\n  const classes = useStyles();\n\n  const [showCode, setShowCode] = useState(false);\n  const [showRough, setShowRough] = useState(false);\n\n  const openRough = () => setShowRough(true);\n  const openCode = () => setShowCode(true);\n\n  const closeRough = () => setShowRough(false);\n  const closeCode = () => setShowCode(false);\n\n  const svgRef = useRef();\n\n  const { schemId } = useParams();\n  useEffect(() => {\n    // load the project when the url param does not match anymore\n    if (`${currentProject.id}` !== schemId) {\n      getProject(schemId);\n    }\n  }, [schemId, currentProject.id]);\n\n  useEffect(() => {\n    const handleKeyDown = (event) => {\n      switch (event.key) {\n        case \"ArrowRight\":\n          stackSelectedAnchors(\"R\");\n          break;\n        case \"ArrowLeft\":\n          stackSelectedAnchors(\"L\");\n          break;\n        case \"ArrowUp\":\n          stackSelectedAnchors(\"U\");\n          break;\n        case \"ArrowDown\":\n          stackSelectedAnchors(\"D\");\n          break;\n        case \"s\":\n          splitAnchor();\n          break;\n        case \"Delete\":\n          deleteElement(selection);\n          break;\n        default:\n          console.log(event.key);\n          break;\n      }\n    };\n    document.addEventListener(\"keydown\", handleKeyDown);\n\n    return () => {\n      document.removeEventListener(\"keydown\", handleKeyDown);\n    };\n  }, [splitAnchor, stackSelectedAnchors, deleteElement, selection]);\n\n  const mouseMove = (event) => {\n    movePaper(event.nativeEvent.clientX, event.nativeEvent.clientY);\n  };\n  return (\n    // TODO : Proper listen key event\n    <div\n      className={classes.root}\n      tabIndex=\"0\"\n      onMouseDown={startSelect}\n      onMouseMove={\n        mode === MODE_MOVE_PAPER && isPaperDragged ? mouseMove : null\n      }\n      onMouseUp={\n        mode === MODE_MOVE_PAPER && isPaperDragged ? endMovePaper : null\n      }\n    >\n      <CssBaseline />\n\n      <AppBar position=\"fixed\" className={classes.appBar}>\n        <Toolbar className={classes.toolBar}>\n          <Link component={RouterLink} to=\"/home\" color=\"inherit\">\n            <Typography variant=\"h6\" noWrap>\n              Physic Schem\n            </Typography>\n          </Link>\n\n          <div>\n            <Tutorial classes={classes} />\n            <FileManager\n              edge=\"start\"\n              className={classes.menuButton}\n              color=\"inherit\"\n            />\n            <IconButton\n              edge=\"start\"\n              className={classes.menuButton}\n              color=\"inherit\"\n              aria-label=\"open rough drawer\"\n              onClick={openRough}\n            >\n              <PhotoLibraryIcon />\n            </IconButton>\n            <Button color=\"inherit\" variant=\"outlined\" onClick={openCode}>\n              LaTEX\n            </Button>\n          </div>\n        </Toolbar>\n      </AppBar>\n      <Drawer\n        className={classes.drawer}\n        variant=\"permanent\"\n        classes={{\n          paper: classes.drawerPaper,\n        }}\n      >\n        <Toolbar />\n        <div className={classes.drawerContainer}>\n          <LeftMenu />\n        </div>\n      </Drawer>\n      <Drawer\n        anchor=\"right\"\n        variant=\"persistent\"\n        open={\n          (mode === MODE_SELECT || mode === MODE_DRAG) && selection.length === 1\n        }\n        className={classes.optionDrawer}\n        classes={{\n          paper: classes.optionDrawerPaper,\n        }}\n        // catch mousedown in element options\n        onMouseDown={(event) => event.stopPropagation()}\n      >\n        <Toolbar />\n        <ElementOptions />\n      </Drawer>\n      <main className={classes.content}>\n        <Container ref={svgRef} />\n      </main>\n\n      <Dialog open={showCode} onClose={closeCode}>\n        <LatexDisplay />\n      </Dialog>\n      <Dialog maxWidth=\"lg\" open={showRough} onClose={closeRough}>\n        <RoughDrawing />\n      </Dialog>\n    </div>\n  );\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(App);\n","import React from \"react\";\n\nimport { useTranslation } from \"react-i18next\";\n\nimport { Link as RouterLink } from \"react-router-dom\";\n\nimport Button from \"@material-ui/core/Button\";\nimport AppBar from \"@material-ui/core/AppBar\";\nimport Toolbar from \"@material-ui/core/Toolbar\";\nimport Typography from \"@material-ui/core/Typography\";\n\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport CssBaseline from \"@material-ui/core/CssBaseline\";\nimport IconButton from \"@material-ui/core/IconButton\";\n\nimport GitHubIcon from \"@material-ui/icons/GitHub\";\n\nconst useStyles = makeStyles((theme) => ({\n  appBar: {\n    zIndex: theme.zIndex.drawer + 1,\n  },\n  toolBar: {\n    justifyContent: \"space-between\",\n  },\n  content: {\n    padding: `${theme.spacing(4)}px ${theme.spacing(2)}px`,\n    display: \"inline-block\",\n    width: \"100%\",\n    backgroundColor: \"#daeeff\",\n\n    \"& h2\": {\n      fontSize: \"1.5rem\",\n      margin: \"0\",\n    },\n    \"& p\": {\n      fontSize: \"1.5rem\",\n      margin: \"0.5rem 1rem 1.5rem 1rem\",\n      textAlign: \"justify\",\n    },\n  },\n  header: {\n    padding: `${theme.spacing(8)}px 0`,\n    display: \"inline-block\",\n    width: \"100%\",\n    textAlign: \"center\",\n  },\n  headerTitle: {\n    margin: \"3em 1em 2em 1em\",\n    fontSize: \"1.5rem\",\n  },\n\n  callToActionContainer: {\n    display: \"flex\",\n    flexWrap: \"wrap\",\n    justifyContent: \"space-evenly\",\n    flex: \"1 1 200px\",\n    \"& a\": {\n      minWidth: \"10rem\",\n      margin: \"1rem\",\n    },\n  },\n}));\n\nconst Home = () => {\n  const classes = useStyles();\n  const { t, ready } = useTranslation();\n\n  return (\n    <div tabIndex=\"0\">\n      <CssBaseline />\n\n      <AppBar position=\"fixed\" className={classes.appBar}>\n        <Toolbar className={classes.toolBar}>\n          <Typography variant=\"h6\" noWrap>\n            Physic Schem\n          </Typography>\n          <IconButton\n            component=\"a\"\n            href={\"https://github.com/alexfauquette/physic-shem\"}\n          >\n            <GitHubIcon style={{ color: \"white\" }} fontSize=\"large\" />\n          </IconButton>\n        </Toolbar>\n      </AppBar>\n      <div className={classes.header}>\n        <div className={classes.headerTitle}>\n          <h1>\n            <span style={{ fontSize: \"2rem\" }}>Physic Schem</span>\n            {ready ? t(\"title\") : \", votre gnrateur de schma\"}\n          </h1>\n        </div>\n        <div className={classes.callToActionContainer}>\n          <Button\n            component={RouterLink}\n            to=\"/catalogue\"\n            variant=\"contained\"\n            color=\"primary\"\n            size=\"large\"\n          >\n            {ready ? t(\"button.generator\") : \"Gnrateur\"}\n          </Button>\n          <Button\n            component={RouterLink}\n            to=\"/tutorial\"\n            variant=\"contained\"\n            color=\"primary\"\n            size=\"large\"\n          >\n            {ready ? t(\"button.tutorial\") : \"Tuto\"}\n          </Button>\n        </div>\n      </div>\n      <div className={classes.content}>\n        <h2>{ready ? t(\"paragraph1.title\") : \"Des schmas beau facilement\"}</h2>\n        <p>\n          {ready\n            ? t(\"paragraph1.txt\")\n            : \"Avec quoi faite vous vos schmas ? Paint ou Word ? Dans les deux cas, tu dois souffrir, et le rsultat ne peut qu'tre dcevant face  tous les efforts mis en oeuvre. Ici tu pourras faire tes schmas rapidement en ne te concentrant que sur le contenue de ton schma. Une fois fini exporte le en png pour ou en svg (fonctionnalit  venir). Ou mieux encore rcupre le code LaTeX associ.\"}\n        </p>\n        <h2>{ready ? t(\"paragraph2.title\") : \"Du code LaTeX ?\"}</h2>\n        <p>\n          {ready ? (\n            <>\n              {t(\"paragraph2.txt.1\")}\n              <a href={t(\"paragraph2.txt.url\")}>Wikibook</a>\n              {t(\"paragraph2.txt.2\")}\n            </>\n          ) : (\n            <>\n              Tu as dj vue un cours de science que tu trouves magnifique ?\n              Probablement qu'il tait crit en LaTeX. Si tu veux toi aussi\n              crer de magnifiques documents, je te recommande ce{\" \"}\n              <a href=\"https://fr.wikibooks.org/wiki/LaTeX/G%C3%A9n%C3%A9ralit%C3%A9s\">\n                Wikibook\n              </a>{\" \"}\n              qui te donnera toutes les bases.\n            </>\n          )}\n        </p>\n        <h2></h2>\n        <p></p>\n      </div>\n    </div>\n  );\n};\n\nexport default Home;\n","import React from \"react\";\n\nimport styles from \"../index.module.scss\";\n\nimport svgComponents, { drawElement, isMultyPole } from \"components\";\nimport Anchor from \"atoms/anchor\";\n\nimport {\n  getPoles,\n  getCoord,\n  getCoordId,\n} from \"redux/store/getCircuitikz/utils\";\n\nconst DrawSvg = ({\n  components,\n  coordinates,\n  width = 500,\n  height = 400,\n  drawGrid = true,\n}) => {\n  const Xpoints = drawGrid ? [...new Array(Math.floor(width / 100) + 1)] : [];\n  const Ypoints = drawGrid ? [...new Array(Math.floor(height / 100) + 1)] : [];\n\n  return (\n    <svg\n      xmlns=\"http://www.w3.org/2000/svg\"\n      viewBox={`0 ${-height} ${width} ${height}`}\n    >\n      {/* draw the grid */}\n      <>\n        {Xpoints.map((_, xIndex) => (\n          <path\n            key={`x-${xIndex}`}\n            d={`M ${xIndex * 100} 0 L ${xIndex * 100} ${-height}`}\n            className={styles.gridLine}\n          />\n        ))}\n        {Ypoints.map((_, yIndex) => (\n          <path\n            key={`y-${yIndex}`}\n            d={`M 0 ${-yIndex * 100} L ${width} ${-yIndex * 100}`}\n            className={styles.gridLine}\n          />\n        ))}\n      </>\n\n      {/* draw the elements */}\n      {Object.keys(components).map((id) => {\n        const { id: idComponent, ...componentProps } = components[id];\n\n        return svgComponents[componentProps.type]({\n          ...componentProps,\n          fromCoords: { ...coordinates[componentProps.from] },\n          toCoords: { ...coordinates[componentProps.to] },\n          positionCoords: { ...coordinates[componentProps.position] },\n          key: id,\n        });\n      })}\n      {Object.keys(coordinates).map((id) => {\n        const { id: idCoordinate, ...coordinateProps } = coordinates[id];\n        return <Anchor key={id} {...coordinateProps} />;\n      })}\n    </svg>\n  );\n};\n\nconst ShowLatexCode = ({\n  components,\n  coordinates,\n  useRelativeCoord = false,\n}) => {\n  const code = [\"\\\\begin{circuitikz}\"];\n\n  let previousCoord = {};\n  const coordinates_info = {};\n\n  Object.keys(coordinates).forEach((id) => {\n    const coord = coordinates[id];\n    const coordId = getCoordId(coord);\n    coordinates_info[coordId] = { ...coord };\n  });\n\n  Object.keys(components).forEach((id) => {\n    const element = components[id];\n\n    const line = [\"\\\\draw\"];\n    if (element.from && element.to) {\n      const { x: xFrom, y: yFrom } = coordinates[element.from];\n      line.push(` ${getCoord(xFrom, yFrom, coordinates_info, previousCoord)}`);\n      previousCoord = useRelativeCoord ? { x: xFrom, y: yFrom } : {};\n\n      element.poles = getPoles(\n        coordinates[element.from],\n        coordinates[element.to]\n      );\n\n      line.push(` ${drawElement(element)}`);\n      const { x: xTo, y: yTo } = coordinates[element.to];\n      line.push(` ${getCoord(xTo, yTo, coordinates_info, previousCoord)}`);\n      previousCoord = useRelativeCoord ? { x: xTo, y: yTo } : {};\n    } else if (element.position && !isMultyPole[element.type]) {\n      previousCoord = {};\n      const { x, y } = coordinates[element.position];\n      line.push(` ${getCoord(x, y, coordinates_info, {})}`);\n      line.push(` ${drawElement(element)}`);\n    } else if (element.position && isMultyPole[element.type]) {\n      previousCoord = {};\n      line.pop(); //the \"\\draw (x, y)\" is added by the drawer function\n      const { x, y, dx = 0, dy = 0 } = coordinates[element.position];\n\n      line.push(\n        ` ${drawElement(\n          element,\n          {\n            x: x - dx,\n            y: y - dy,\n            position: false,\n            anchor: element.anchor,\n          },\n          element.name || null\n        )}`\n      );\n    }\n\n    if (!isMultyPole[element.type]) {\n      line.push(\";\");\n    }\n\n    code.push(line.join(\"\"));\n  });\n  code.push(\"\\\\end{circuitikz}\");\n\n  return (\n    <pre>\n      {code.slice(0, code.length - 1).join(\"\\n\\t\") +\n        \"\\n\" +\n        code[code.length - 1]}\n    </pre>\n  );\n};\n\nconst Displayer = ({\n  components,\n  coordinates,\n  svgOption = {},\n  latexOption = {},\n}) => (\n  <div>\n    <ShowLatexCode\n      components={components}\n      coordinates={coordinates}\n      {...latexOption}\n    />\n    <DrawSvg components={components} coordinates={coordinates} {...svgOption} />\n  </div>\n);\nexport default Displayer;\n","import React, { useState } from \"react\";\nimport Displayer from \"../interaction\";\nimport styles from \"../index.module.scss\";\n\nimport ButtonGroup from \"@material-ui/core/ButtonGroup\";\nimport Button from \"@material-ui/core/Button\";\nimport CachedIcon from \"@material-ui/icons/Cached\";\n\nconst default_components = {\n  id1: {\n    id: \"id1\",\n    from: \"coord1\",\n    to: \"coord2\",\n    type: \"R\",\n    currant: {\n      show: true,\n      currantText: \"i1\",\n      currantIsForward: true,\n      currantIsAbove: true,\n      currantIsAfter: true,\n    },\n    label: \"\",\n    annotation: \"\",\n    mirror: false,\n    invert: false,\n  },\n};\nconst default_coordinates = {\n  coord1: {\n    id: \"coord1\",\n    x: 100,\n    y: -100,\n    shape: \"o\",\n  },\n  coord2: {\n    id: \"coord2\",\n    x: 400,\n    y: -100,\n    shape: \"*\",\n  },\n};\n\nconst Explanation = () => {\n  const [components, setComponents] = useState(default_components);\n  const [coordinates, setCoordinates] = useState(default_coordinates);\n  const [left2right, setLeft2right] = useState(true);\n\n  const setCurrantDirection = (value) => () => {\n    setComponents({\n      ...components,\n      [\"id1\"]: {\n        ...components.id1,\n        [\"currant\"]: {\n          ...components.id1.currant,\n          [\"currantIsForward\"]: value,\n        },\n      },\n    });\n  };\n\n  const setCurrantXPosition = (value) => () => {\n    setComponents({\n      ...components,\n      [\"id1\"]: {\n        ...components.id1,\n        [\"currant\"]: {\n          ...components.id1.currant,\n          [\"currantIsAfter\"]: value,\n        },\n      },\n    });\n  };\n\n  const setCurrantYPosition = (value) => () => {\n    setComponents({\n      ...components,\n      [\"id1\"]: {\n        ...components.id1,\n        [\"currant\"]: {\n          ...components.id1.currant,\n          [\"currantIsAbove\"]: value,\n        },\n      },\n    });\n  };\n\n  const switchPoisitions = () => {\n    const left = {\n      x: default_coordinates.coord1.x,\n      y: default_coordinates.coord1.y,\n    };\n    const right = {\n      x: default_coordinates.coord2.x,\n      y: default_coordinates.coord2.y,\n    };\n    setCoordinates({\n      ...coordinates,\n      coord1: { ...coordinates.coord1, ...(left2right ? right : left) },\n      coord2: { ...coordinates.coord2, ...(left2right ? left : right) },\n    });\n    setLeft2right(!left2right);\n  };\n\n  const isForard = components.id1.currant.currantIsForward;\n  const isAfter = components.id1.currant.currantIsAfter;\n  const isAbove = components.id1.currant.currantIsAbove;\n\n  return (\n    <div className={styles.root}>\n      <div className={`${styles.options} ${styles.optionsColumn}`}>\n        <label>sens du courant</label>\n        <ButtonGroup\n          color=\"primary\"\n          size=\"medium\"\n          aria-label=\"outlined primary button group\"\n        >\n          <Button\n            variant={isForard ? \"contained\" : \"outlined\"}\n            onClick={setCurrantDirection(true)}\n          >\n            direct\n          </Button>\n          <Button\n            variant={!isForard ? \"contained\" : \"outlined\"}\n            onClick={setCurrantDirection(false)}\n          >\n            indirect\n          </Button>\n        </ButtonGroup>\n\n        <label>position de la flche</label>\n        <ButtonGroup\n          color=\"primary\"\n          size=\"medium\"\n          aria-label=\"outlined primary button group\"\n        >\n          <Button\n            variant={isAfter ? \"contained\" : \"outlined\"}\n            onClick={setCurrantXPosition(true)}\n          >\n            aprs\n          </Button>\n          <Button\n            variant={!isAfter ? \"contained\" : \"outlined\"}\n            onClick={setCurrantXPosition(false)}\n          >\n            avant\n          </Button>\n        </ButtonGroup>\n\n        <label>position du text</label>\n        <ButtonGroup\n          color=\"primary\"\n          size=\"medium\"\n          aria-label=\"outlined primary button group\"\n        >\n          <Button\n            variant={isAbove ? \"contained\" : \"outlined\"}\n            onClick={setCurrantYPosition(true)}\n          >\n            haut\n          </Button>\n          <Button\n            variant={!isAbove ? \"contained\" : \"outlined\"}\n            onClick={setCurrantYPosition(false)}\n          >\n            bas\n          </Button>\n        </ButtonGroup>\n\n        <label>changer le sens</label>\n        <Button onClick={switchPoisitions} variant=\"outlined\">\n          <CachedIcon />\n        </Button>\n      </div>\n      <div className={styles.drawing}>\n        <Displayer\n          components={components}\n          coordinates={coordinates}\n          svgOption={{ width: 500, height: 200 }}\n        />\n      </div>\n    </div>\n  );\n};\n\nexport default Explanation;\n","import React, { useState } from \"react\";\nimport Displayer from \"../interaction\";\nimport styles from \"../index.module.scss\";\n\nimport Slider from \"@material-ui/core/Slider\";\n\nconst components = {\n  id1: {\n    id: \"id1\",\n    from: \"coord1\",\n    to: \"coord2\",\n    type: \"R\",\n    currant: {\n      show: false,\n      currantText: \"i1\",\n      currantIsForward: true,\n      currantIsAbove: true,\n      currantIsAfter: true,\n    },\n    label: \"\",\n    annotation: \"\",\n    mirror: false,\n    invert: false,\n  },\n};\n\nconst getCoordinates = ({ x1, x2, y1, y2 }) => ({\n  coord1: {\n    id: \"coord1\",\n    x: x1 * 100,\n    y: -y1 * 100,\n    shape: \"\",\n  },\n  coord2: {\n    id: \"coord2\",\n    x: x2 * 100,\n    y: -y2 * 100,\n    shape: \"\",\n  },\n});\n\nconst default_x1 = 1;\nconst default_y1 = 1;\nconst default_x2 = 4;\nconst default_y2 = 1;\n\nconst maxX = 5;\nconst maxY = 2;\nconst xMarks = [\n  { value: 0, label: 0 },\n  { value: 1, label: 1 },\n  { value: 2, label: 2 },\n  { value: 3, label: 3 },\n  { value: 4, label: 4 },\n  { value: 5, label: 5 },\n];\nconst yMarks = [\n  { value: 0, label: 0 },\n  { value: 1, label: 1 },\n  { value: 2, label: 2 },\n];\nconst Explanation = () => {\n  const [x1, setX1] = useState(default_x1);\n  const [y1, setY1] = useState(default_y1);\n  const [x2, setX2] = useState(default_x2);\n  const [y2, setY2] = useState(default_y2);\n\n  return (\n    <div className={styles.root}>\n      <div className={styles.options}>\n        <ul>\n          <li>\n            <h4>premier point</h4>\n            <label>x</label>\n            <Slider\n              defaultValue={default_x1}\n              step={0.1}\n              min={0}\n              max={maxX}\n              valueLabelDisplay=\"auto\"\n              marks={xMarks}\n              value={x1}\n              onChange={(event, newValue) => setX1(newValue)}\n            />\n            <label>y</label>\n            <Slider\n              defaultValue={default_y1}\n              step={0.1}\n              min={0}\n              max={maxY}\n              valueLabelDisplay=\"auto\"\n              marks={yMarks}\n              value={y1}\n              onChange={(event, newValue) => setY1(newValue)}\n            />\n          </li>\n          <li>\n            <h4>deuxime point</h4>\n            <label>x</label>\n            <Slider\n              defaultValue={default_x2}\n              step={0.1}\n              min={0}\n              max={maxX}\n              valueLabelDisplay=\"auto\"\n              marks={xMarks}\n              value={x2}\n              onChange={(event, newValue) => setX2(newValue)}\n            />\n            <label>y</label>\n            <Slider\n              defaultValue={default_y2}\n              step={0.1}\n              min={0}\n              max={maxY}\n              valueLabelDisplay=\"auto\"\n              marks={yMarks}\n              value={y2}\n              onChange={(event, newValue) => setY2(newValue)}\n            />\n          </li>\n        </ul>\n      </div>\n      <div className={styles.drawing}>\n        <Displayer\n          components={components}\n          coordinates={getCoordinates({ x1, x2, y1, y2 })}\n          svgOption={{ width: maxX * 100, height: maxY * 100 }}\n        />\n      </div>\n    </div>\n  );\n};\n\nexport default Explanation;\n","import React, { useState } from \"react\";\nimport Displayer from \"../interaction\";\nimport styles from \"../index.module.scss\";\n\nimport FormControl from \"@material-ui/core/FormControl\";\nimport InputLabel from \"@material-ui/core/InputLabel\";\nimport Select from \"@material-ui/core/Select\";\nimport MenuItem from \"@material-ui/core/MenuItem\";\nimport TextField from \"@material-ui/core/TextField\";\n\nconst coordinates = {\n  coord1: {\n    id: \"coord1\",\n    x: 100,\n    y: -100,\n    shape: \"\",\n  },\n  coord2: {\n    id: \"coord2\",\n    x: 400,\n    y: -100,\n    shape: \"\",\n  },\n};\n\nconst multCoordinates = {\n  coord0: {\n    id: \"coord0\",\n    x: 400,\n    y: -100,\n    shape: \"\",\n  },\n  coord1: {\n    id: \"coord1\",\n    x: 700,\n    y: -100,\n    shape: \"\",\n  },\n  coord2: {\n    id: \"coord2\",\n    x: 700,\n    y: -400,\n    shape: \"\",\n  },\n  coord3: {\n    id: \"coord3\",\n    x: 400,\n    y: -400,\n    shape: \"\",\n  },\n  coord4: {\n    id: \"coord4\",\n    x: 100,\n    y: -400,\n    shape: \"\",\n  },\n  coord5: {\n    id: \"coord5\",\n    x: 100,\n    y: -100,\n    shape: \"\",\n  },\n};\n\nconst getComponents = (type, label = \"\", annotation = \"\") => ({\n  id1: {\n    id: \"id1\",\n    from: \"coord1\",\n    to: \"coord2\",\n    type: type,\n    currant: {\n      show: false,\n      currantText: \"i1\",\n      currantIsForward: true,\n      currantIsAbove: true,\n      currantIsAfter: true,\n    },\n    label: label,\n    annotation: annotation,\n    mirror: false,\n    invert: false,\n  },\n});\n\nconst getMultipleComponents = (type, label = \"\", annotation = \"\") => {\n  const rep = {};\n\n  [1, 2, 3, 4, 5].forEach((nb) => {\n    const id = `id${nb}`;\n\n    rep[id] = {\n      id: id,\n      from: \"coord0\",\n      to: `coord${nb}`,\n      type: type,\n      currant: {\n        show: false,\n        currantText: \"i1\",\n        currantIsForward: true,\n        currantIsAbove: true,\n        currantIsAfter: true,\n      },\n      label: label,\n      annotation: annotation,\n      mirror: false,\n      invert: false,\n    };\n  });\n\n  return rep;\n};\n\nconst components_available = {\n  R: \"resistance : R\",\n  lampe: \"lampe : lamp\",\n  battery1: \"batterie : battery1\",\n  L: \"bobine : L\",\n  C: \"condensateur : C\",\n  \"empty led\": \"led : empty diode\",\n  pR: \"potential resistor (pR)\",\n  vcapacitor: \"variable capacitor\",\n};\n\nconst Explanation = ({\n  withAnnotations = false,\n  withMultipleComponents = false,\n}) => {\n  const [element_type, setType] = useState(\"R\");\n\n  const [label, SetLabel] = useState(\"R1\");\n  const [annotation, SetAnnotation] = useState(\"hello world\");\n\n  return (\n    <div className={styles.root}>\n      <div className={`${styles.options} ${styles.optionsColumn}`}>\n        <FormControl className={styles.selector}>\n          <InputLabel id=\"select-component-to-draw\">\n            Type de composant\n          </InputLabel>\n          <Select\n            labelId=\"select-component-to-draw\"\n            id=\"demo-simple-select\"\n            value={element_type}\n            onChange={(event) => setType(event.target.value)}\n          >\n            {Object.keys(components_available).map((type_el) => (\n              <MenuItem value={type_el} key={type_el}>\n                {components_available[type_el]}\n              </MenuItem>\n            ))}\n          </Select>\n        </FormControl>\n        {withAnnotations && (\n          <>\n            <TextField\n              value={label}\n              onChange={(event) => SetLabel(event.target.value)}\n              label=\"label\"\n              className={styles.textInput}\n            />\n            <TextField\n              value={annotation}\n              onChange={(event) => SetAnnotation(event.target.value)}\n              label=\"annotation\"\n              className={styles.textInput}\n            />\n          </>\n        )}\n      </div>\n      <div className={styles.drawing}>\n        <Displayer\n          components={\n            withMultipleComponents\n              ? getMultipleComponents(\n                  element_type,\n                  withAnnotations ? label : \"\",\n                  withAnnotations ? annotation : \"\"\n                )\n              : getComponents(\n                  element_type,\n                  withAnnotations ? label : \"\",\n                  withAnnotations ? annotation : \"\"\n                )\n          }\n          coordinates={withMultipleComponents ? multCoordinates : coordinates}\n          svgOption={{\n            width: withMultipleComponents ? 800 : 500,\n            height: withMultipleComponents ? 500 : 200,\n          }}\n        />\n      </div>\n    </div>\n  );\n};\n\nexport default Explanation;\n","import React, { useState } from \"react\";\nimport Displayer from \"../interaction\";\nimport styles from \"../index.module.scss\";\n\nimport FormControl from \"@material-ui/core/FormControl\";\nimport InputLabel from \"@material-ui/core/InputLabel\";\nimport Select from \"@material-ui/core/Select\";\nimport MenuItem from \"@material-ui/core/MenuItem\";\n\nconst components = {\n  id1: {\n    id: \"id1\",\n    from: \"coord1\",\n    to: \"coord2\",\n    type: \"R\",\n    currant: {\n      show: false,\n      currantText: \"i1\",\n      currantIsForward: true,\n      currantIsAbove: true,\n      currantIsAfter: true,\n    },\n    label: \"\",\n    annotation: \"\",\n    mirror: false,\n    invert: false,\n  },\n};\n\nconst getCoordinates = (shape1, shape2) => ({\n  coord1: {\n    id: \"coord1\",\n    x: 100,\n    y: -100,\n    shape: shape1,\n  },\n  coord2: {\n    id: \"coord2\",\n    x: 400,\n    y: -100,\n    shape: shape2,\n  },\n});\n\nconst Explanation = () => {\n  const [shape1, setShape1] = useState(\"*\");\n  const [shape2, setShape2] = useState(\"*\");\n\n  return (\n    <div className={styles.root}>\n      <div className={styles.options}>\n        <FormControl className={styles.decorationSelector}>\n          <InputLabel id=\"input-for-shape1\">decoration 1</InputLabel>\n          <Select\n            labelId=\"input-for-shape1\"\n            value={shape1}\n            onChange={(event) => setShape1(event.target.value)}\n          >\n            <MenuItem value={\"rien\"}>rien</MenuItem>\n            <MenuItem value={\"*\"}>*</MenuItem>\n            <MenuItem value={\"o\"}>o</MenuItem>\n            <MenuItem value={\"d\"}>d</MenuItem>\n          </Select>\n        </FormControl>\n        <FormControl className={styles.decorationSelector}>\n          <InputLabel id=\"input-for-shape2\">decoration 2</InputLabel>\n          <Select\n            labelId=\"input-for-shape2\"\n            value={shape2}\n            onChange={(event) => setShape2(event.target.value)}\n          >\n            <MenuItem value={\"rien\"}>rien</MenuItem>\n            <MenuItem value={\"*\"}>*</MenuItem>\n            <MenuItem value={\"o\"}>o</MenuItem>\n            <MenuItem value={\"d\"}>d</MenuItem>\n          </Select>\n        </FormControl>\n      </div>\n      <div className={styles.drawing}>\n        <Displayer\n          components={components}\n          coordinates={getCoordinates(shape1, shape2)}\n          svgOption={{ width: 500, height: 200 }}\n        />\n      </div>\n    </div>\n  );\n};\n\nexport default Explanation;\n","import React, { useState } from \"react\";\nimport Displayer from \"../interaction\";\nimport styles from \"../index.module.scss\";\n\nimport FormControl from \"@material-ui/core/FormControl\";\nimport InputLabel from \"@material-ui/core/InputLabel\";\nimport Select from \"@material-ui/core/Select\";\nimport MenuItem from \"@material-ui/core/MenuItem\";\nimport Slider from \"@material-ui/core/Slider\";\n\nconst getCoordinates = (x = 1, y = 1) => ({\n  coord1: {\n    id: \"coord1\",\n    x: x * 100,\n    y: -y * 100,\n    shape: \"\",\n  },\n});\n\nconst getComponents = (type, angle) => ({\n  id1: {\n    id: \"id1\",\n    position: \"coord1\",\n    type: type,\n    angle: angle,\n  },\n});\n\nconst components_available = {\n  ground: \"ground\",\n  vee: \"vee\",\n  vcc: \"vcc\",\n};\n\nconst Explanation = ({ withAngle = false, withPosition = false }) => {\n  const [element_type, setType] = useState(\"ground\");\n\n  const [angle, setAngle] = useState(0);\n  const [x, setX] = useState(1);\n  const [y, setY] = useState(1);\n\n  return (\n    <div className={styles.root}>\n      <div className={`${styles.options} ${styles.optionsColumn}`}>\n        <FormControl className={styles.selector}>\n          <InputLabel id=\"select-component-to-draw\">\n            Type de composant\n          </InputLabel>\n          <Select\n            labelId=\"select-component-to-draw\"\n            id=\"demo-simple-select\"\n            value={element_type}\n            onChange={(event) => setType(event.target.value)}\n          >\n            {Object.keys(components_available).map((type_el) => (\n              <MenuItem value={type_el} key={type_el}>\n                {components_available[type_el]}\n              </MenuItem>\n            ))}\n          </Select>\n        </FormControl>\n        {withAngle && (\n          <>\n            <label>angle</label>\n            <Slider\n              defaultValue={0}\n              step={1}\n              min={-180}\n              max={180}\n              valueLabelDisplay=\"auto\"\n              valueLabelFormat={(t) => `${t}`}\n              value={angle}\n              onChange={(event, newValue) => setAngle(newValue)}\n            />\n          </>\n        )}\n        {withPosition && (\n          <>\n            <label>x</label>\n            <Slider\n              defaultValue={1}\n              step={0.1}\n              min={0}\n              max={5}\n              valueLabelDisplay=\"auto\"\n              value={x}\n              onChange={(event, newValue) => setX(newValue)}\n            />\n            <label>y</label>\n            <Slider\n              defaultValue={1}\n              step={0.1}\n              min={0}\n              max={2}\n              valueLabelDisplay=\"auto\"\n              value={y}\n              onChange={(event, newValue) => setY(newValue)}\n            />\n          </>\n        )}\n      </div>\n      <div className={styles.drawing}>\n        <Displayer\n          components={getComponents(element_type, withAngle ? angle : 0)}\n          coordinates={getCoordinates(\n            withPosition ? x : 1,\n            withPosition ? y : 1\n          )}\n          svgOption={{\n            width: 500,\n            height: 200,\n          }}\n        />\n      </div>\n    </div>\n  );\n};\n\nexport default Explanation;\n","import React, { useState, useEffect } from \"react\";\nimport Displayer from \"../interaction\";\nimport styles from \"../index.module.scss\";\n\nimport FormControl from \"@material-ui/core/FormControl\";\nimport InputLabel from \"@material-ui/core/InputLabel\";\nimport Select from \"@material-ui/core/Select\";\nimport MenuItem from \"@material-ui/core/MenuItem\";\n\nimport Slider from \"@material-ui/core/Slider\";\nimport { getElementAnchors } from \"components\";\n\nconst getAnchors = (type) =>\n  getElementAnchors({\n    type: type,\n    angle: 0,\n    positionCoords: { x: 0, y: 0 },\n  }).map(({ name }) => name);\n\nconst getCoordinates = ({ x, y, type, anchor, angle = 0 }) => {\n  const anchors = getElementAnchors({\n    type: type,\n    angle: angle,\n    positionCoords: { x: 0, y: 0 },\n  });\n  const anchorInfo = anchors.filter((elem) => elem.name === anchor);\n\n  let dx = 0;\n  let dy = 0;\n  if (anchorInfo.length === 1) {\n    dx = -anchorInfo[0].x;\n    dy = -anchorInfo[0].y;\n  }\n\n  return {\n    coord1: {\n      id: \"coord1\",\n      x: x * 100 + dx,\n      y: -y * 100 + dy,\n      dx,\n      dy,\n      shape: \"\",\n    },\n  };\n};\n\nconst getComponents = (type, angle, anchor) => ({\n  id1: {\n    id: \"id1\",\n    position: \"coord1\",\n    type: type,\n    angle: angle,\n    anchor: anchor,\n  },\n});\n\nconst components_available = {\n  nmos: \"nmos\",\n  op_amp: \"op_amp\",\n};\n\nconst Explanation = ({\n  withAnchor = false,\n  withAngle = false,\n  withPosition = false,\n}) => {\n  const [type, setType] = useState(\"nmos\");\n  const [anchor, setAnchor] = useState(\"\");\n  const [availableAnchors, setAvailableAnchors] = useState(getAnchors(\"nmos\"));\n\n  const [angle, setAngle] = useState(0);\n  const [x, setX] = useState(1);\n  const [y, setY] = useState(1);\n\n  useEffect(() => {\n    setAvailableAnchors(getAnchors(type));\n    setAnchor(\"\");\n  }, [type]);\n\n  return (\n    <div className={styles.root}>\n      <div className={`${styles.options} ${styles.optionsColumn}`}>\n        <FormControl className={styles.selector}>\n          <InputLabel id=\"select-component-to-draw\">\n            Type de composant\n          </InputLabel>\n          <Select\n            labelId=\"select-component-to-draw\"\n            id=\"demo-simple-select\"\n            value={type}\n            onChange={(event) => setType(event.target.value)}\n          >\n            {Object.keys(components_available).map((type_el) => (\n              <MenuItem value={type_el} key={type_el}>\n                {components_available[type_el]}\n              </MenuItem>\n            ))}\n          </Select>\n        </FormControl>\n\n        {withAnchor && (\n          <FormControl className={styles.selector}>\n            <InputLabel id=\"select-associated-anchor\">anchor</InputLabel>\n            <Select\n              labelId=\"select-associated-anchor\"\n              id=\"demo-simple-select\"\n              value={anchor}\n              onChange={(event) => setAnchor(event.target.value)}\n            >\n              <MenuItem value={\"\"}>None</MenuItem>\n              {availableAnchors.map((anchorName) => (\n                <MenuItem value={anchorName} key={anchorName}>\n                  {anchorName}\n                </MenuItem>\n              ))}\n            </Select>\n          </FormControl>\n        )}\n        {withAngle && (\n          <>\n            <label>angle</label>\n            <Slider\n              defaultValue={0}\n              step={1}\n              min={-180}\n              max={180}\n              valueLabelDisplay=\"auto\"\n              valueLabelFormat={(t) => `${t}`}\n              value={angle}\n              onChange={(event, newValue) => setAngle(newValue)}\n            />\n          </>\n        )}\n        {withPosition && (\n          <>\n            <label>x</label>\n            <Slider\n              defaultValue={1}\n              step={0.1}\n              min={0}\n              max={6}\n              valueLabelDisplay=\"auto\"\n              value={x}\n              onChange={(event, newValue) => setX(newValue)}\n            />\n            <label>y</label>\n            <Slider\n              defaultValue={1}\n              step={0.1}\n              min={0}\n              max={3}\n              valueLabelDisplay=\"auto\"\n              value={y}\n              onChange={(event, newValue) => setY(newValue)}\n            />\n          </>\n        )}\n      </div>\n      <div className={styles.drawing}>\n        <Displayer\n          components={getComponents(type, angle, anchor)}\n          coordinates={getCoordinates({ x, y, type, anchor, angle })}\n          svgOption={{\n            width: 600,\n            height: 300,\n          }}\n        />\n      </div>\n    </div>\n  );\n};\n\nexport default Explanation;\n","import React, { useState } from \"react\";\nimport Displayer from \"../interaction\";\nimport styles from \"../index.module.scss\";\n\nimport Slider from \"@material-ui/core/Slider\";\nimport { getElementAnchors } from \"components\";\n\nconst getUsedAnchors = (x, y, angle = 0) => {\n  const rep = {};\n  getElementAnchors({\n    type: \"op_amp\",\n    angle: angle,\n    positionCoords: { x, y },\n  }).forEach(({ x, y, name }) => {\n    if (name === \"+\" || name === \"out\") {\n      rep[name] = { x, y };\n    }\n  });\n  return rep;\n};\n\nconst getCoordinates = ({ x, y, angle = 0, useRelativeCoord }) => {\n  const anchors = getUsedAnchors(100 * x, -y * 100, angle);\n\n  return {\n    coord1: {\n      id: \"coord1\",\n      x: x * 100,\n      y: -y * 100,\n      shape: \"\",\n    },\n    coordP1: {\n      id: \"coordP1\",\n      x: anchors[\"+\"].x,\n      y: anchors[\"+\"].y,\n      name: \"opAmp.+\",\n      shape: \"\",\n    },\n    coordP2: {\n      id: \"coordP2\",\n      x: useRelativeCoord ? anchors[\"+\"].x : 1.81 * 100,\n      y: useRelativeCoord ? anchors[\"+\"].y + 200 : -0.5 * 100,\n      shape: \"\",\n    },\n    coordOut1: {\n      id: \"coordOut1\",\n      x: anchors[\"out\"].x,\n      y: anchors[\"out\"].y,\n      name: \"opAmp.out\",\n      shape: \"\",\n    },\n    coordOut2: {\n      id: \"coordOut2\",\n      x: useRelativeCoord ? anchors[\"out\"].x : 4.19 * 100,\n      y: useRelativeCoord ? anchors[\"out\"].y + 200 : -0.5 * 100,\n      shape: \"\",\n    },\n  };\n};\n\nconst default_bipole = {\n  currant: {\n    show: false,\n    currantText: \"i1\",\n    currantIsForward: true,\n    currantIsAbove: true,\n    currantIsAfter: true,\n  },\n  label: \"\",\n  annotation: \"\",\n  mirror: false,\n  invert: false,\n};\nconst getComponents = (angle) => ({\n  id1: {\n    id: \"id1\",\n    position: \"coord1\",\n    type: \"op_amp\",\n    angle: angle,\n    name: \"opAmp\",\n  },\n  id2: {\n    id: \"id2\",\n    from: \"coordP1\",\n    to: \"coordP2\",\n    type: \"R\",\n    ...default_bipole,\n  },\n  id3: {\n    id: \"id3\",\n    from: \"coordOut1\",\n    to: \"coordOut2\",\n    type: \"R\",\n    ...default_bipole,\n  },\n});\n\nconst Explanation = ({\n  withAngle = false,\n  withPosition = false,\n  useRelativeCoord = false,\n}) => {\n  const [angle, setAngle] = useState(0);\n  const [x, setX] = useState(3);\n  const [y, setY] = useState(3);\n\n  return (\n    <div className={styles.root}>\n      <div className={`${styles.options} ${styles.optionsColumn}`}>\n        {withAngle && (\n          <>\n            <label>angle</label>\n            <Slider\n              defaultValue={0}\n              step={1}\n              min={-180}\n              max={180}\n              valueLabelDisplay=\"auto\"\n              valueLabelFormat={(t) => `${t}`}\n              value={angle}\n              onChange={(event, newValue) => setAngle(newValue)}\n            />\n          </>\n        )}\n        {withPosition && (\n          <>\n            <label>x</label>\n            <Slider\n              defaultValue={1}\n              step={0.1}\n              min={0}\n              max={6}\n              valueLabelDisplay=\"auto\"\n              value={x}\n              onChange={(event, newValue) => setX(newValue)}\n            />\n            <label>y</label>\n            <Slider\n              defaultValue={1}\n              step={0.1}\n              min={0}\n              max={3}\n              valueLabelDisplay=\"auto\"\n              value={y}\n              onChange={(event, newValue) => setY(newValue)}\n            />\n          </>\n        )}\n      </div>\n      <div className={styles.drawing}>\n        <Displayer\n          components={getComponents(angle)}\n          coordinates={getCoordinates({ x, y, angle, useRelativeCoord })}\n          svgOption={{\n            width: 600,\n            height: 400,\n          }}\n          latexOption={{ useRelativeCoord }}\n        />\n      </div>\n    </div>\n  );\n};\n\nexport default Explanation;\n","import React from \"react\";\nimport classes from \"./index.module.scss\";\n\nimport { Trans, useTranslation } from \"react-i18next\";\n\nimport { Link as RouterLink } from \"react-router-dom\";\nimport Link from \"@material-ui/core/Link\";\n\nimport AppBar from \"@material-ui/core/AppBar\";\nimport Toolbar from \"@material-ui/core/Toolbar\";\nimport Typography from \"@material-ui/core/Typography\";\n\nimport ExplanationCurrant from \"tutorial/currantExplanation\";\nimport ExplanationPosition from \"tutorial/positionExplanation\";\nimport ExplanationBipoles from \"tutorial/bipoleExplanation\";\nimport ExplanationDecoraion from \"tutorial/decorationExplanation\";\nimport ExplanationMonopole from \"tutorial/monopoleExplanation\";\nimport ExplanationMultipole from \"tutorial/multipoleExplanation\";\nimport ExplanationAnchors from \"tutorial/anchorExplanation\";\n\nconst Tuto = () => {\n  const { t, ready } = useTranslation(\"tutorial\");\n\n  return (\n    // TODO : Proper listen key event\n    <div>\n      <AppBar position=\"fixed\" className={classes.appBar}>\n        <Toolbar className={classes.toolBar}>\n          <>\n            <Link component={RouterLink} to=\"/home\" color=\"inherit\">\n              <Typography variant=\"h6\" noWrap>\n                Physic Schem\n              </Typography>\n            </Link>\n          </>\n        </Toolbar>\n      </AppBar>\n      <div className={classes.contentContainer}>\n        <div className={classes.content}>\n          <p>{ready && <Trans t={t} i18nKey=\"introduction\" />}</p>\n          <h2>{ready && <Trans t={t} i18nKey=\"importModule.title\" />}</h2>\n          <p>\n            {ready && (\n              <Trans\n                t={t}\n                i18nKey=\"importModule.paragraph1\"\n                components={{ c: <code /> }}\n              />\n            )}\n          </p>\n          <pre className={classes.latexArea}>{\"\\\\usepackage{circuitikz}\"}</pre>\n          <p>\n            {ready && (\n              <Trans\n                t={t}\n                i18nKey=\"importModule.paragraph2\"\n                components={{ c: <code /> }}\n              />\n            )}\n          </p>\n          <pre>\n            {\n              \"\\\\documentclass{article}\\n\\n\\\\usepackage[utf8]{inputenc}\\n\\\\usepackage{circuitikz}\\n\\n\\\\title{Mon document}\\n\\n\\\\begin{document}\\n\\n\\\\begin{circuitikz}\\n\\t% ici je met mon code\\n\\\\end{circuitikz}\\n\\n\\\\end{document}\"\n            }\n          </pre>\n          <h2>{ready && <Trans t={t} i18nKey=\"bipolePosition.title\" />}</h2>\n          <p>\n            {ready && (\n              <Trans\n                t={t}\n                i18nKey=\"bipolePosition.paragraph1\"\n                components={{ c: <code /> }}\n              />\n            )}\n          </p>\n          <ExplanationPosition />\n          <h2>{ready && <Trans t={t} i18nKey=\"bipoleNames.title\" />}</h2>\n          <p>\n            {ready && (\n              <Trans\n                t={t}\n                i18nKey=\"bipoleNames.paragraph1\"\n                components={{ c: <code /> }}\n              />\n            )}\n          </p>\n          <ExplanationBipoles />\n          <h2>{ready && <Trans t={t} i18nKey=\"bipoleAnnotations.title\" />}</h2>\n          <p>\n            {ready && (\n              <Trans\n                t={t}\n                i18nKey=\"bipoleAnnotations.paragraph1\"\n                components={{ c: <code /> }}\n              />\n            )}\n          </p>\n          <p>\n            {ready && (\n              <Trans\n                t={t}\n                i18nKey=\"bipoleAnnotations.paragraph2\"\n                components={{ c: <code /> }}\n              />\n            )}\n          </p>\n          <ExplanationBipoles withAnnotations />\n\n          <p>\n            {ready && (\n              <Trans\n                t={t}\n                i18nKey=\"bipoleAnnotations.paragraph3\"\n                components={{ c: <code /> }}\n              />\n            )}\n          </p>\n          <p>\n            {ready && (\n              <Trans\n                t={t}\n                i18nKey=\"bipoleAnnotations.paragraph4\"\n                components={{ c: <code /> }}\n              />\n            )}\n          </p>\n          <ExplanationBipoles withAnnotations withMultipleComponents />\n          <h2>{ready && <Trans t={t} i18nKey=\"bipoleDecorations.title\" />}</h2>\n\n          <p>\n            {ready && (\n              <Trans\n                t={t}\n                i18nKey=\"bipoleDecorations.paragraph1\"\n                components={{ c: <code /> }}\n              />\n            )}\n          </p>\n          <ExplanationDecoraion />\n          <h2>{ready && <Trans t={t} i18nKey=\"bipoleCurrant.title\" />}</h2>\n          <p>\n            {ready && (\n              <>\n                <Trans\n                  t={t}\n                  i18nKey=\"bipoleCurrant.paragraph1.1\"\n                  components={{ c: <code /> }}\n                />\n                <code>{\"<\"}</code>\n                <Trans t={t} i18nKey=\"bipoleCurrant.paragraph1.2\" />\n              </>\n            )}\n          </p>\n          <p>\n            {ready && (\n              <Trans\n                t={t}\n                i18nKey=\"bipoleCurrant.paragraph2\"\n                components={{ c: <code /> }}\n              />\n            )}\n          </p>\n          <ExplanationCurrant />\n          <h2>{ready && <Trans t={t} i18nKey=\"monopole.title\" />}</h2>\n          <p>\n            {ready && (\n              <Trans\n                t={t}\n                i18nKey=\"monopole.paragraph1\"\n                components={{ c: <code /> }}\n              />\n            )}\n          </p>\n          <ExplanationMonopole withAngle withPosition />\n          <h2>{ready && <Trans t={t} i18nKey=\"multipoles.title\" />}</h2>\n          <p>\n            {ready && (\n              <Trans\n                t={t}\n                i18nKey=\"multipoles.paragraph1\"\n                components={{ c: <code /> }}\n              />\n            )}\n          </p>\n          <ExplanationMultipole withAnchor withAngle withPosition />\n          <h2>\n            {ready && <Trans t={t} i18nKey=\"multipolesPointOfInterest.title\" />}\n          </h2>\n\n          <p>\n            {ready && (\n              <Trans\n                t={t}\n                i18nKey=\"multipolesPointOfInterest.paragraph1\"\n                components={{ c: <code /> }}\n              />\n            )}\n          </p>\n          <ExplanationAnchors withAngle withPosition />\n          <h2>\n            {ready && <Trans t={t} i18nKey=\"relative coordinates.title\" />}\n          </h2>\n\n          <p>\n            {ready && (\n              <Trans\n                t={t}\n                i18nKey=\"relative coordinates.paragraph1\"\n                components={{ c: <code /> }}\n              />\n            )}\n          </p>\n          <ExplanationAnchors withAngle withPosition useRelativeCoord />\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Tuto;\n","import React from \"react\";\n\nimport { Link as RouterLink } from \"react-router-dom\";\n\nimport { makeStyles } from \"@material-ui/core/styles\";\n\nimport Card from \"@material-ui/core/Card\";\nimport CardActionArea from \"@material-ui/core/CardActionArea\";\nimport CardContent from \"@material-ui/core/CardContent\";\nimport CardMedia from \"@material-ui/core/CardMedia\";\n\nconst useStyles = makeStyles((theme) => ({\n  card: {\n    marginBottom: \"1rem\",\n  },\n  newSchemaText: {\n    padding: \"3rem\",\n    border: \"2px solid gray\",\n    borderRadius: \"1rem\",\n    fontSize: \"1.5rem\",\n  },\n  image: { height: \"140px\", backgroundSize: \"contain\" },\n  cardTitle: { fontSize: \"1.2rem\", margin: \"1rem 0 0.5rem 0\" },\n  cardInfo: {\n    fontSize: \"0.8rem\",\n    \"& span\": { fontStyle: \"italic\", color: \"gray\" },\n  },\n}));\n\nconst CircuitCard = ({ circuitname, username, date, id = null, ...props }) => {\n  const classes = useStyles();\n\n  return (\n    <Card className={classes.card}>\n      <CardActionArea component={RouterLink} to={`/app/${id || \"\"}`} {...props}>\n        <CardContent>\n          {id === null ? (\n            <p className={classes.newSchemaText}>+ NEW SCHEMA</p>\n          ) : (\n            <>\n              <CardMedia\n                image={`https://amathjourney.com/circuits/img/${id}.png`}\n                title=\"\"\n                className={classes.image}\n              />\n              <h4 className={classes.cardTitle}>{circuitname}</h4>\n              <p className={classes.cardInfo}>\n                <span>by: </span>\n                {username}\n              </p>\n              <p className={classes.cardInfo}>\n                <span>the </span>\n                {date.slice(0, 10).split(\"-\").reverse().join(\"/\")}\n              </p>\n            </>\n          )}\n        </CardContent>\n      </CardActionArea>\n    </Card>\n  );\n};\n\nexport default CircuitCard;\n","import React, { useEffect } from \"react\";\n\nimport { Link as RouterLink } from \"react-router-dom\";\nimport Link from \"@material-ui/core/Link\";\n\nimport AppBar from \"@material-ui/core/AppBar\";\nimport Toolbar from \"@material-ui/core/Toolbar\";\nimport Typography from \"@material-ui/core/Typography\";\n\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport CssBaseline from \"@material-ui/core/CssBaseline\";\nimport IconButton from \"@material-ui/core/IconButton\";\n\nimport GitHubIcon from \"@material-ui/icons/GitHub\";\n\nimport { getProjects } from \"redux/apiInteractions\";\nimport { connect } from \"react-redux\";\nimport CircuitCard from \"atoms/CircuitCard\";\n\nconst useStyles = makeStyles((theme) => ({\n  appBar: {\n    zIndex: theme.zIndex.drawer + 1,\n  },\n  toolBar: {\n    justifyContent: \"space-between\",\n  },\n  content: {\n    marginTop: \"64px\",\n    padding: `${theme.spacing(4)}px ${theme.spacing(2)}px`,\n    display: \"inline-block\",\n    width: \"100%\",\n    backgroundColor: \"#daeeff\",\n  },\n  cardGroup: {\n    margin: \"0 auto\",\n    display: \"grid\",\n    gridGap: \"1rem\",\n    maxWidth: \"1200px\",\n    \"@media (min-width: 600px)\": {\n      gridTemplateColumns: \"repeat(2, 1fr)\",\n    },\n    \"@media (min-width: 900px)\": {\n      gridTemplateColumns: \"repeat(3, 1fr)\",\n    },\n    \"@media (min-width: 1200px)\": {\n      gridTemplateColumns: \"repeat(4, 1fr)\",\n    },\n  },\n}));\n\nconst mapStateToProps = (state) => {\n  return { projects: state.projects || [] };\n};\nconst mapDispatchToProps = (dispatch) => {\n  return {\n    getProjects: () => dispatch(getProjects()),\n  };\n};\n\nconst Catalogue = ({ projects, getProjects }) => {\n  const classes = useStyles();\n\n  useEffect(() => {\n    getProjects();\n  }, []);\n\n  return (\n    <div tabIndex=\"0\">\n      <CssBaseline />\n\n      <AppBar position=\"fixed\" className={classes.appBar}>\n        <Toolbar className={classes.toolBar}>\n          <Link component={RouterLink} to=\"/home\" color=\"inherit\">\n            <Typography variant=\"h6\" noWrap>\n              Physic Schem\n            </Typography>\n          </Link>\n          <IconButton\n            component=\"a\"\n            href={\"https://github.com/alexfauquette/physic-shem\"}\n          >\n            <GitHubIcon style={{ color: \"white\" }} fontSize=\"large\" />\n          </IconButton>\n        </Toolbar>\n      </AppBar>\n      <div className={classes.content}>\n        <div className={classes.cardGroup}>\n          <CircuitCard />\n        </div>\n\n        <div className={classes.cardGroup}>\n          {projects.map(({ id, username, circuitname, date }) => (\n            <CircuitCard\n              key={id}\n              id={id}\n              username={username}\n              circuitname={circuitname}\n              date={date}\n            />\n          ))}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Catalogue);\n","import React from \"react\";\nimport { connect } from \"react-redux\";\n\nimport { closeAndDeleteMessage } from \"redux/actions/messages\";\n\nimport Snackbar from \"@material-ui/core/Snackbar\";\nimport MuiAlert from \"@material-ui/lab/Alert\";\n\nconst mapStateToProps = (state) => {\n  return { messages: state.messages || {} };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return { closeAndDeleteMessage: (id) => dispatch(closeAndDeleteMessage(id)) };\n};\n\nconst Messages = ({ messages, closeAndDeleteMessage }) => {\n  return (\n    <>\n      {Object.keys(messages).map((id) => {\n        const { text, severity, show } = messages[id];\n        return (\n          <Snackbar\n            key={id}\n            open={show}\n            anchorOrigin={{ vertical: \"top\", horizontal: \"center\" }}\n            autoHideDuration={4000}\n            onClose={() => closeAndDeleteMessage(id)}\n          >\n            <MuiAlert\n              elevation={6}\n              severity={severity}\n              onClose={() => closeAndDeleteMessage(id)}\n            >\n              {text}\n            </MuiAlert>\n          </Snackbar>\n        );\n      })}\n    </>\n  );\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Messages);\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React, { useEffect } from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { Provider } from \"react-redux\";\nimport store from \"redux/store\";\n\n// import i18n (needs to be bundled ;))\nimport \"./i18n\";\n\nimport \"./index.css\";\nimport App from \"pages/App\";\nimport Home from \"pages/Home\";\nimport Tuto from \"pages/Tuto\";\nimport Catalogue from \"pages/Catalogue\";\nimport Messages from \"container/serverMessages\";\n\nimport * as serviceWorker from \"./serviceWorker\";\n\nimport { ThemeProvider, createMuiTheme } from \"@material-ui/core/styles\";\n\nimport {\n  HashRouter as Router,\n  Switch,\n  Route,\n  useLocation,\n} from \"react-router-dom\";\n\nimport ReactGA from \"react-ga\";\nReactGA.initialize(process.env.REACT_APP_GA_ID);\nReactGA.pageview(window.location.href);\n\nconst ScrollToTop = () => {\n  const { pathname } = useLocation();\n\n  useEffect(() => {\n    window.scrollTo(0, 0);\n    ReactGA.pageview(window.location.href);\n  }, [pathname]);\n\n  return null;\n};\n\nconst theme = createMuiTheme({\n  palette: {\n    primary: {\n      main: \"#1565c0\",\n    },\n    secondary: {\n      main: \"#42a5f5\",\n    },\n  },\n});\n\nReactDOM.render(\n  <React.StrictMode>\n    <ThemeProvider theme={theme}>\n      <Provider store={store}>\n        <Router>\n          <ScrollToTop />\n          <p id=\"load-font\">aaa</p>\n          <Switch>\n            <Route path=\"/app/:schemId?\">\n              <App />\n            </Route>\n            <Route path=\"/catalogue\">\n              <Catalogue />\n            </Route>\n            <Route path=\"/tutorial\">\n              <Tuto />\n            </Route>\n            <Route path=\"/\">\n              <Home />\n            </Route>\n          </Switch>\n          <Messages />\n        </Router>\n      </Provider>\n    </ThemeProvider>\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"appBar\":\"Tuto_appBar__-bG7R\",\"toolBar\":\"Tuto_toolBar__966vL\",\"contentContainer\":\"Tuto_contentContainer__3Ifj3\",\"content\":\"Tuto_content__1QDJ5\"};"],"sourceRoot":""}