{"version":3,"sources":["redux/actions/index.js","redux/store/interactionModes.js","redux/store/displayOptions.js","redux/store/magnetsOptions.js","redux/store/debugInitialState.js","utils/maths.js","utils/svgToCanvas.js","utils/constantes.js","atoms/currant.js","atoms/label.js","components/hoc/pathComponents.js","components/Lampe.js","components/empty_diode.js","components/pR.js","components/vcapacitor.js","components/nmos.js","components/op_amp.js","components/vee.js","components/vcc.js","components/ground.js","components/C.js","components/R.js","components/battery1.js","atoms/arrowEnd.js","components/switch.js","components/short.js","components/rightUp.js","components/upRight.js","components/index.js","redux/store/utils.js","redux/store/dragging.js","redux/store/delete.js","redux/store/pathCreation.js","redux/store/rectangleSelection.js","redux/store/nodeCreation.js","redux/store/anchorHelper.js","redux/store/index.js","atoms/anchor.js","container/RoughDrawing.js","container/toolbar.js","container/componentsDrawer.js","container/anchors.js","atoms/magnet.js","container/magnets.js","container/index.js","redux/store/getCircuitikz.js","container/latexDisplay.js","container/elementOptions.js","container/leftMenu.js","container/helpShortcut.js","App.js","serviceWorker.js","index.js"],"names":["START_DRAGGING","startDragging","x","y","type","STOP_DRAGGING","stopDragging","UPDATE_POSITION","updatePosition","attractor","attracted","shiftPress","START_SELECT","startSelect","TOGGLE_SELECTION","toggleSelection","objectId","reset","START_CREATE_PATH_ELEMENT","startCreatePathElement","elementType","VALIDATE_FIRST_STEP_PATH_ELEMENT_CREATION","INVALIDATE_FIRST_STEP_PATH_ELEMENT_CREATION","SAVE_PATH_ELEMENT_CREATION","START_CREATE_NODE_ELEMENT","ELEMENT_CREATION_NEXT_STEP","SPLIT_ANCHOR","START_RECTANGLE_SELECTION","STOP_RECTANGLE_SELECTION","STACK_SELECTED_ANCHORS","stackSelectedAnchors","direction","DELETE_ELEMENT","UPDATE_COMPONENT","ZOOM","START_MOVE_PAPER","MOVE_PAPER","END_MOVE_PAPER","SET_MODE_MOVE_PAPER","UPDATE_MAGNET_OPTION","updateMagnetOption","optionName","optionValue","MODE_SELECT","MODE_DRAG","MODE_CREATE_PATH_ELEMENT","MODE_CREATE_NODE_ELEMENT","MODE_RECTANGLE_SELECTION","MODE_MOVE_PAPER","default_displayOptions","zoom","width","height","dragging","isDragging","x0","y0","reducer_displayOptions","state","action","mode","newZoom","newWidth","newHeight","displayOptions","newX","newY","movePaper","toggleDragging","reducer_magnetsOptions","magnetsOptions","initial_state","isGridAttracting","gridSpace","isPathCoordinatesAttracting","isNodeAnchorsAttracting","selection","adhesivePoints","weakLinks","currentMagnet","components","byId","allIds","coordinates","rotation","angle","Math","cos","PI","sin","translateSVGbaseline2Canvas","baseline","hanging","middle","translateSVGalign2Canvas","start","end","MULTIPLICATIVE_CONST","R_LEN","default_path_options","currant","show","currantText","currantIsForward","currantIsAbove","currantIsAfter","label","annotation","mirror","invert","getTextAnchor","textAnchor","alignmentBaseline","drawRoughCurrant","rc","ctx","ratio","element","fromCoords","toCoords","xFrom","xTo","yFrom","yTo","xI","yI","theta","path","xText","yText","textAlign","textBaseline","fillText","CurrantArrow","style","fill","stroke","d","transform","transformOrigin","random","isAbove","rotationAngle","gap","drawRoughLabel","text","from","to","xL","yL","save","translate","rotate","restore","Label","mapStateToProps","props","id","withPathAttributes","component","connect","selected","onMouseDown","sqrt","parseInt","atan2","className","drawLinks","getPathAttributes","currantAttribute","position","getCurrantAttribute","getLabelAttribute","getAnnotationAttribute","poles","r","toFixed","cx","cy","UNIT_X","UNIT_Y","UNIT_Y2","parameters","wiper_pos","STEP","capacitor_width","getElementTranslation","positionAnchor","positionCoords","showHandles","xAnchor","yAnchor","deltaX","deltaY","base_height","gate_height","strokeWidth","upX","upY","input_height","port_width","ArrowEnd","dy","Arrow","theta1","theta2","x1","y1","x2","y2","isOpen","withArrow","getAnchors","pR","name","pR_getAnchor","nmos","dx","Cgap","Bgap","Egap","radAngle","Crad","Brad","Erad","distanceC","distanceB","distanceE","nmos_getAnchor","op_amp","map","anchorRad","distance","op_amp_getAnchor","vee","vee_getAnchor","vcc","vcc_getAnchor","ground","ground_getAnchor","pathOptions","pRParameters","switch","switchParameters","getDrawer","short","rightUp","upRight","lampe","positionInformations","anchor","coord","parseFloat","vcapacitor","C","R","battery1","getRoughComponents","circle","drawRoughArrowEnd","getElementAnchors","drawElement","position1","position2","isPath","isMultyPole","structure","bipoles","sources","references","transistors","svgComponents","getAdhesivePoints","push","forEach","componentUseThisAnchor","anchorId","replaceComponentAnchor","previousAnchorId","newAnchorId","newElement","coordinatesToMove","selectedId","includes","findIndex","elem","fromId","toId","pile","nodeSeen","pop","nodeId","isNodePosition","length","originalPosition","alreadyMoved","weakLinksToRemove","filter","anchorToRemoveID","anchorToUseId","anchorToRemoveIDIndex","remainingAnchors","newByIDElements","slice","newWeakLink","newMoveX","newMoveY","originalX","originalY","abs","anchorById","deleteElement","componentId","anchorToRemove","arg","elementId","newAnchors","newComponents","newPath","isFromValidated","validateFirstStepPathElement","attractorFrom","attractorTo","movedAfterFromCreation","invalidateFirstStepPathElement","savePathElement","newId_element","uuid","fromAnchor","toAnchor","shape","newWeakLinks","newRectangle","rectangleSelection","isInRectangle","stopRectangleSelection","startRectangleSelection","newNode","startNodeCreation","anchorsDelta","saveNodeCreation","positionId","newPositions","toUpdate","deltaToAdd","anchorName","rotateNode","value","prevAngle","newAngle","prevAnchors","rotationHelper","IdToUpdate","stackAnchors","coordinatesSelected","movedAnchors","newPosition","index","min","max","undefined","splitAnchor","componentsToChange","weakLinksToCopy","linkedAnchorId","linkToCopy","store","createStore","refSpace","modX","modY","round","xToTest","yToTest","draggingUpdatePosition","pathCreationUpdatePosition","nodeCreationUpdatePosition","rectangleSelectionUpdatePosition","ConnectedAnchor","dispatch","svgRef","current","getBoundingClientRect","xOffset","yOffset","svgWidth","svgHeight","SVG_X","SVG_Y","SVG_WIDTH","SVG_HEIGHT","event","stopPropagation","ctrlKey","nativeEvent","clientX","clientY","forwardRef","ref","margin","canvasRef","useRef","useState","setWidth","setHeight","seed","setSeed","roughness","setRoughness","canvasURL","setCanvasURL","useEffect","svgBBox","document","getElementById","getBBox","rough","canvas","options","curveFitting","getContext","font","fillStyle","fillRect","roughComponents","roughCoordinate","toDataURL","replace","DialogTitle","DialogContent","DialogActions","Typography","gutterBottom","Slider","onChange","newValue","aria-labelledby","step","Button","onClick","variant","href","download","color","setZoom","setModeMovePaper","top","padding","backgroundColor","IconButton","SvgIcon","disabled","Select","target","MenuItem","ConnectedComponentsDrawer","ConnectedAnchors","anchorIds","isUsed","setIsUsed","onMouseEnter","onMouseLeave","onMouseMove","onMouseUp","isMoving","reduce","accumulator","accu","nameAdhesive","idAdhesive","ConnectedContainer","validateFirstStepPathElementCreation","invalidateFirstStepPathElementCreation","savePathElementCreation","nextStepOfElementCreation","startMovePaper","xmlns","viewBox","background","shiftKey","patternUnits","getPoles","shapeFrom","shapeTo","useStart","useEnd","simplifyNumber","rep","getCoordId","getCoord","coords","coordId","removeDrawnElements","drawnElements","listeOfId","compareCoord","coordId1","coordId2","endingPaths1","endingPaths","nodeAssociated1","nodeAssociated","endingPaths2","nodeAssociated2","drawPathFromCoord","startCoordId","nbOfCoordinateUsed","elementsToAdd","nbOfCreatedNames","nextName","currantCoordId","currantCoord","nextPaths","startingPaths","arrivingPaths","nextNode","coordIsNew","initializeCoords","nodeReference","fromCoord","toCoord","fromCoordId","toCoordId","parent","parentAnchor","associatedIds","positionCoord","positionCoordId","multipoleNodes","parentNodeId","childNodeIdId","child","node1","node2","anchors1","anchors2","name1","name2","childAnchor","findCommonAnchor","Object","keys","anchors","coordX","coordY","anchorX","anchorY","getCircuitikz","nodeNumberOfNames","circuitText","multiAnchorNodeIds","isNode","sort","id1","id2","node","fillCoordWithAnchorsName","childId","join","coordsToPlot","idToPlot","indexOf","splice","code","autoFocus","navigator","clipboard","writeText","then","copyCode","inputElement","update","ListItem","TextField","onKeyDown","e","onChangeCapture","button","ListItemText","primary","ListItemSecondaryAction","Input","inputProps","FormControlLabel","control","checked","Checkbox","idOfInterest","handleInputChange","updateComponent","List","n","startCreateNodeElement","openSection","setOpenSection","sectionName","Collapse","in","timeout","unmountOnExit","paddingLeft","shortcuts","key","description","useStyles","makeStyles","keyboardKey","borderRadius","border","boxShadow","display","fontSize","fontWeight","lineHeight","keyboardDescription","HelpShortcut","classes","shortcut","theme","root","appBar","zIndex","drawer","toolBar","justifyContent","flexShrink","drawerPaper","drawerContainer","overflow","optionDrawer","optionDrawerPaper","content","flexGrow","spacing","menuButton","marginRight","isPaperDragged","endMovePaper","showCode","setShowCode","showRough","setShowRough","showHelp","setShowHelp","handleKeyDown","console","log","addEventListener","removeEventListener","tabIndex","CssBaseline","AppBar","Toolbar","noWrap","edge","aria-label","Drawer","paper","open","Dialog","onClose","maxWidth","fullWidth","Boolean","window","location","hostname","match","ReactDOM","render","StrictMode","serviceWorker","ready","registration","unregister","catch","error","message"],"mappings":"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","file":"static/js/main.866835b4.chunk.js","sourcesContent":["export const START_DRAGGING = \"START_DRAGGING\";\nexport function startDragging(x, y) {\n  return {\n    type: START_DRAGGING,\n    x,\n    y,\n  };\n}\n\nexport const STOP_DRAGGING = \"STOP_DRAGGING\";\nexport function stopDragging() {\n  return {\n    type: STOP_DRAGGING,\n  };\n}\n\nexport const UPDATE_POSITION = \"UPDATE_POSITION\";\nexport function updatePosition({ x, y, attractor, attracted, shiftPress }) {\n  // TODO : id should be remove\n  return {\n    type: UPDATE_POSITION,\n    x,\n    y,\n    attractor: attractor || null,\n    attracted: attracted || null,\n    shiftPress,\n  };\n}\n\nexport const START_SELECT = \"START_SELECT\";\nexport function startSelect() {\n  return {\n    type: START_SELECT,\n  };\n}\n\nexport const TOGGLE_SELECTION = \"TOGGLE_SELECTION\";\nexport function toggleSelection(objectId, reset) {\n  return {\n    type: TOGGLE_SELECTION,\n    objectId,\n    reset,\n  };\n}\n\nexport const START_CREATE_PATH_ELEMENT = \"START_CREATE_PATH_ELEMENT\";\nexport function startCreatePathElement(elementType) {\n  return {\n    type: START_CREATE_PATH_ELEMENT,\n    elementType,\n  };\n}\n\nexport const VALIDATE_FIRST_STEP_PATH_ELEMENT_CREATION =\n  \"VALIDATE_FIRST_STEP_PATH_ELEMENT_CREATION\";\nexport function validateFirstStepPathElementCreation() {\n  return {\n    type: VALIDATE_FIRST_STEP_PATH_ELEMENT_CREATION,\n  };\n}\n\nexport const INVALIDATE_FIRST_STEP_PATH_ELEMENT_CREATION =\n  \"INVALIDATE_FIRST_STEP_PATH_ELEMENT_CREATION\";\nexport function invalidateFirstStepPathElementCreation() {\n  return {\n    type: INVALIDATE_FIRST_STEP_PATH_ELEMENT_CREATION,\n  };\n}\n\nexport const SAVE_PATH_ELEMENT_CREATION = \"SAVE_PATH_ELEMENT_CREATION\";\nexport function savePathElementCreation() {\n  return {\n    type: SAVE_PATH_ELEMENT_CREATION,\n  };\n}\n\nexport const START_CREATE_NODE_ELEMENT = \"START_CREATE_NODE_ELEMENT\";\nexport function startCreateNodeElement(elementType) {\n  return {\n    type: START_CREATE_NODE_ELEMENT,\n    elementType,\n  };\n}\n\nexport const ELEMENT_CREATION_NEXT_STEP = \"ELEMENT_CREATION_NEXT_STEP\";\nexport function nextStepOfElementCreation() {\n  return {\n    type: ELEMENT_CREATION_NEXT_STEP,\n  };\n}\n\nexport const SPLIT_ANCHOR = \"SPLIT_ANCHOR\";\nexport function splitAnchor(anchorId) {\n  return {\n    type: SPLIT_ANCHOR,\n    anchorId: anchorId || null,\n  };\n}\n\nexport const START_RECTANGLE_SELECTION = \"START_RECTANGLE_SELECTION\";\nexport function startRectangleSelection(x, y) {\n  return {\n    type: START_RECTANGLE_SELECTION,\n    x,\n    y,\n  };\n}\n\nexport const STOP_RECTANGLE_SELECTION = \"STOP_RECTANGLE_SELECTION\";\nexport function stopRectangleSelection() {\n  return {\n    type: STOP_RECTANGLE_SELECTION,\n  };\n}\n\nexport const STACK_SELECTED_ANCHORS = \"STACK_SELECTED_ANCHORS\";\nexport function stackSelectedAnchors(direction) {\n  return {\n    type: STACK_SELECTED_ANCHORS,\n    direction,\n  };\n}\n\nexport const DELETE_ELEMENT = \"DELETE_ELEMENT\";\nexport function deleteElement(selection) {\n  return {\n    type: DELETE_ELEMENT,\n    selection,\n  };\n}\n\nexport const UPDATE_COMPONENT = \"UPDATE_COMPONENT\";\nexport function updateComponent(id, name, value) {\n  return {\n    type: UPDATE_COMPONENT,\n    id,\n    name,\n    value,\n  };\n}\n\nexport const ZOOM = \"ZOOM\";\nexport function setZoom(zoom) {\n  return {\n    type: ZOOM,\n    zoom,\n  };\n}\n\nexport const START_MOVE_PAPER = \"START_MOVE_PAPER\";\nexport function startMovePaper(x, y) {\n  return {\n    type: START_MOVE_PAPER,\n    x,\n    y,\n  };\n}\n\nexport const MOVE_PAPER = \"MOVE_PAPER\";\nexport function movePaper(x, y) {\n  return {\n    type: MOVE_PAPER,\n    x,\n    y,\n  };\n}\n\nexport const END_MOVE_PAPER = \"END_MOVE_PAPER\";\nexport function endMovePaper() {\n  return {\n    type: END_MOVE_PAPER,\n  };\n}\n\nexport const SET_MODE_MOVE_PAPER = \"SET_MODE_MOVE_PAPER\";\nexport function setModeMovePaper() {\n  return {\n    type: SET_MODE_MOVE_PAPER,\n  };\n}\n\nexport const UPDATE_MAGNET_OPTION = \"UPDATE_MAGNET_OPTION\";\nexport function updateMagnetOption(optionName, optionValue) {\n  return {\n    type: UPDATE_MAGNET_OPTION,\n    optionName,\n    optionValue,\n  };\n}\n","export const MODE_SELECT = \"MODE_SELECT\";\nexport const MODE_DRAG = \"MODE_DRAG\";\nexport const MODE_CREATE_PATH_ELEMENT = \"MODE_CREATE_PATH_ELEMENT\";\nexport const MODE_CREATE_NODE_ELEMENT = \"MODE_CREATE_NODE_ELEMENT\";\nexport const MODE_RECTANGLE_SELECTION = \"MODE_RECTANGLE_SELECTION\";\n\n// for dragging the all svg\nexport const MODE_MOVE_PAPER = \"MODE_MOVE_PAPER\";\n","import {\n  ZOOM,\n  START_MOVE_PAPER,\n  MOVE_PAPER,\n  END_MOVE_PAPER,\n  SET_MODE_MOVE_PAPER,\n} from \"redux/actions\";\nimport { MODE_MOVE_PAPER } from \"./interactionModes\";\n\n// If we want to use A4 format (not sure it's useful)\n// const PAGE_WIDTH = 2100;\n// const PAGE_HEIGHT = 2970;\nconst PAGE_WIDTH = 800;\nconst PAGE_HEIGHT = 500;\n\nexport const default_displayOptions = {\n  x: 0,\n  y: 0,\n  zoom: 1,\n  width: PAGE_WIDTH,\n  height: PAGE_HEIGHT,\n  dragging: {\n    isDragging: false,\n    x0: null,\n    y0: null,\n  },\n};\n\nconst zoom = (state, action) => {\n  const newZoom = action.zoom;\n  const newWidth = PAGE_WIDTH / newZoom;\n  const newHeight = PAGE_HEIGHT / newZoom;\n\n  const { x, y, width, height } = state.displayOptions;\n\n  // this do the center on the middle (no useful until SVG heigh is fixed to fit the screen size)\n  const newX = x + width / 2 - newWidth / 2;\n  const newY = y + height / 2 - newHeight / 2;\n\n  return {\n    ...state,\n    displayOptions: {\n      ...state.displayOptions,\n      x: newX,\n      y: newY,\n      zoom: newZoom,\n      width: newWidth,\n      height: newHeight,\n    },\n  };\n};\n\nconst toggleDragging = (state, action) => {\n  const { x = null, y = null } = action;\n  return {\n    ...state,\n    displayOptions: {\n      ...state.displayOptions,\n      dragging: {\n        isDragging: !state.displayOptions.dragging.isDragging,\n        x0: x,\n        y0: y,\n      },\n    },\n  };\n};\n\nconst movePaper = (state, action) => {\n  const { x, y } = action;\n  const { x0, y0 } = state.displayOptions.dragging;\n  return {\n    ...state,\n    displayOptions: {\n      ...state.displayOptions,\n      x: state.displayOptions.x + (x0 - x) / state.displayOptions.zoom,\n      y: state.displayOptions.y + (y0 - y) / state.displayOptions.zoom,\n      dragging: {\n        ...state.displayOptions.dragging,\n        x0: x,\n        y0: y,\n      },\n    },\n  };\n};\n\nconst reducer_displayOptions = (state, action) => {\n  switch (action.type) {\n    case SET_MODE_MOVE_PAPER:\n      return { ...state, mode: MODE_MOVE_PAPER };\n    case ZOOM:\n      return zoom(state, action);\n    case MOVE_PAPER:\n      return movePaper(state, action);\n    case START_MOVE_PAPER:\n    case END_MOVE_PAPER:\n      return toggleDragging(state, action);\n    default:\n      return state;\n  }\n};\nexport default reducer_displayOptions;\n","import { UPDATE_MAGNET_OPTION } from \"redux/actions\";\n\nexport const default_magnetsOptions = {\n  isGridAttracting: true,\n  gridSpace: 1,\n  isPathCoordinatesAttracting: true,\n  isNodeAnchorsAttracting: true,\n};\n\nconst reducer_magnetsOptions = (state, action) => {\n  const { type, optionName, optionValue = null } = action;\n  switch (type) {\n    case UPDATE_MAGNET_OPTION:\n      if (optionValue === null) {\n        return {\n          ...state,\n          magnetsOptions: {\n            ...state.magnetsOptions,\n            [optionName]: !state.magnetsOptions[optionName],\n          },\n        };\n      } else {\n        return {\n          ...state,\n          magnetsOptions: {\n            ...state.magnetsOptions,\n            [optionName]: optionValue,\n          },\n        };\n      }\n    default:\n      return state;\n  }\n};\nexport default reducer_magnetsOptions;\n","import { MODE_SELECT } from \"./interactionModes\";\nimport { default_displayOptions } from \"./displayOptions\";\nimport { default_magnetsOptions } from \"./magnetsOptions\";\n\nexport const initial_state = {\n  displayOptions: default_displayOptions,\n  magnetsOptions: default_magnetsOptions,\n  mode: MODE_SELECT,\n  selection: [],\n  adhesivePoints: [],\n  weakLinks: [],\n  currentMagnet: {\n    attractor: null,\n    attracted: null,\n  },\n  components: {\n    byId: {},\n    allIds: [],\n  },\n  coordinates: {\n    byId: {},\n    allIds: [],\n  },\n};\n","export const rotation = (angle, x0, y0, x, y) => {\n  return `${\n    x0 +\n    Math.cos((-angle / 180) * Math.PI) * x -\n    Math.sin((-angle / 180) * Math.PI) * y\n  } ${\n    y0 +\n    Math.sin((-angle / 180) * Math.PI) * x +\n    Math.cos((-angle / 180) * Math.PI) * y\n  }`;\n};\n","export const translateSVGbaseline2Canvas = {\n  baseline: \"bottom\",\n  hanging: \"top\",\n  middle: \"middle\",\n};\n\nexport const translateSVGalign2Canvas = {\n  start: \"start\",\n  end: \"end\",\n  middle: \"center\",\n};\n","// this factor is used to get a good ratio between coordinates and line width\nexport const MULTIPLICATIVE_CONST = 100;\n\nexport const R_LEN = 1.4;\n\nexport const defaultCurrant = {\n  show: false,\n  currantText: \"\",\n  currantIsForward: true,\n  currantIsAbove: true,\n  currantIsAfter: true,\n};\n\nexport const default_path_options = {\n  currant: defaultCurrant,\n  label: \"\",\n  annotation: \"\",\n  mirror: false,\n  invert: false,\n};\n","import React from \"react\";\nimport {\n  rotation,\n  translateSVGbaseline2Canvas,\n  translateSVGalign2Canvas,\n} from \"utils\";\n\nconst getTextAnchor = (angle, currantIsAbove) => {\n  if (-5 < angle && angle < 5) {\n    return {\n      textAnchor: \"middle\",\n      alignmentBaseline: currantIsAbove ? \"baseline\" : \"hanging\",\n    };\n  }\n  if (-86 < angle && angle <= -5) {\n    return {\n      textAnchor: currantIsAbove ? \"end\" : \"start\",\n      alignmentBaseline: currantIsAbove ? \"baseline\" : \"hanging\",\n    };\n  }\n  if (-95 < angle && angle <= -86) {\n    return {\n      textAnchor: currantIsAbove ? \"end\" : \"start\",\n      alignmentBaseline: \"middle\",\n    };\n  }\n  if (-176 < angle && angle <= -95) {\n    return {\n      textAnchor: currantIsAbove ? \"end\" : \"start\",\n      alignmentBaseline: currantIsAbove ? \"hanging\" : \"baseline\",\n    };\n  }\n\n  if (angle >= 5 && angle < 86) {\n    return {\n      textAnchor: currantIsAbove ? \"start\" : \"end\",\n      alignmentBaseline: currantIsAbove ? \"baseline\" : \"hanging\",\n    };\n  }\n  if (angle >= 86 && angle < 95) {\n    return {\n      textAnchor: currantIsAbove ? \"start\" : \"end\",\n      alignmentBaseline: \"middle\",\n    };\n  }\n  if (angle >= 95 && angle < 176) {\n    return {\n      textAnchor: currantIsAbove ? \"start\" : \"end\",\n      alignmentBaseline: currantIsAbove ? \"hanging\" : \"baseline\",\n    };\n  }\n  return {\n    textAnchor: \"middle\",\n    alignmentBaseline: currantIsAbove ? \"hanging\" : \"baseline\",\n  };\n};\n\nexport const getCurrantAttribute = ({\n  show,\n  currantText,\n  currantIsForward,\n  currantIsAbove,\n  currantIsAfter,\n}) => {\n  if (!show) {\n    return \"\";\n  }\n  const text = currantText || \"$$$$\";\n  if (!currantIsAfter) {\n    const position = currantIsAbove ? \"^\" : \"_\";\n    const direction = currantIsForward ? \">\" : \"<\";\n    return `i${direction}${position}=${text}`;\n  } else {\n    const position = currantIsAbove ? \"^\" : \"_\";\n    const direction = currantIsForward ? \">\" : \"<\";\n    return `i${position}${direction}=${text}`;\n  }\n};\n\nconst CurrantArrow = ({\n  fromCoords,\n  toCoords,\n  currantText,\n  ratio = null,\n  angle = null,\n  currantIsForward = true,\n  currantIsAbove = true,\n  currantIsAfter = true,\n}) => {\n  if (!fromCoords || !toCoords || angle === null || ratio === null) {\n    return null;\n  }\n  const { x: xFrom, y: yFrom } = fromCoords;\n  const { x: xTo, y: yTo } = toCoords;\n\n  const xI = currantIsAfter\n    ? xTo + (ratio * (xFrom - xTo)) / 2\n    : xFrom + (ratio * (xTo - xFrom)) / 2;\n  const yI = currantIsAfter\n    ? yTo + (ratio * (yFrom - yTo)) / 2\n    : yFrom + (ratio * (yTo - yFrom)) / 2;\n  const rI = 15;\n\n  return (\n    <g\n      style={{\n        fill: \"black\",\n        stroke: \"none\",\n      }}\n    >\n      <path\n        d={`M ${xI + 0.5 * rI} ${yI} L  ${xI - 0.5 * rI} ${yI + 0.5 * rI} L  ${\n          xI - 0.5 * rI\n        } ${yI - 0.5 * rI} Z`}\n        style={{\n          transform: `rotate(${angle + (currantIsForward ? 0 : 180)}deg)`,\n          transformOrigin: `${xI}px ${yI}px`,\n        }}\n      />\n      <text\n        key={Math.random()}\n        x={\n          xI -\n          (currantIsAbove ? -0.5 * rI : 0.5 * rI) *\n            Math.sin((angle / 180) * Math.PI)\n        }\n        y={\n          yI +\n          (currantIsAbove ? -0.5 * rI : 0.5 * rI) *\n            Math.cos((angle / 180) * Math.PI)\n        }\n        style={{ ...getTextAnchor(angle, currantIsAbove) }}\n      >\n        {currantText}\n      </text>\n    </g>\n  );\n};\n\nexport const drawRoughCurrant = (rc, ctx, x0, y0, angle, ratio, element) => {\n  const {\n    fromCoords,\n    toCoords,\n    currant: {\n      show,\n      currantText,\n      currantIsForward = true,\n      currantIsAbove = true,\n      currantIsAfter = true,\n    },\n  } = element;\n\n  if (!show) {\n    return null;\n  }\n\n  const xFrom = fromCoords.x - x0;\n  const xTo = toCoords.x - x0;\n  const yFrom = fromCoords.y - y0;\n  const yTo = toCoords.y - y0;\n\n  const xI = currantIsAfter\n    ? xTo + (ratio * (xFrom - xTo)) / 2\n    : xFrom + (ratio * (xTo - xFrom)) / 2;\n  const yI = currantIsAfter\n    ? yTo + (ratio * (yFrom - yTo)) / 2\n    : yFrom + (ratio * (yTo - yFrom)) / 2;\n  const rI = 15;\n\n  const theta = -angle + (currantIsForward ? 0 : 180);\n  rc.path(\n    `M ${rotation(theta, xI, yI, -0.5 * rI, 0.5 * rI)}\n    L ${rotation(theta, xI, yI, 0.5 * rI, 0)}\n    L ${rotation(theta, xI, yI, -0.5 * rI, -0.5 * rI)}\n    Z\n    `\n  );\n\n  if (!currantText) {\n    return null;\n  }\n  const xText =\n    xI -\n    (currantIsAbove ? -0.5 * rI : 0.5 * rI) * Math.sin((angle / 180) * Math.PI);\n\n  const yText =\n    yI +\n    (currantIsAbove ? -0.5 * rI : 0.5 * rI) * Math.cos((angle / 180) * Math.PI);\n\n  const { textAnchor, alignmentBaseline } = getTextAnchor(\n    angle,\n    currantIsAbove\n  );\n\n  ctx.textAlign = translateSVGbaseline2Canvas[textAnchor];\n  ctx.textBaseline = translateSVGalign2Canvas[alignmentBaseline];\n  ctx.fillText(currantText, xText, yText);\n};\n\nexport default CurrantArrow;\n","import React from \"react\";\nimport { translateSVGbaseline2Canvas, translateSVGalign2Canvas } from \"utils\";\n\nconst getTextAnchor = (angle, isAbove, x, y) => {\n  if (-20 < angle && angle < 20) {\n    return {\n      textAnchor: \"middle\",\n      alignmentBaseline: isAbove ? \"baseline\" : \"hanging\",\n    };\n  }\n  if (-110 < angle && angle < -70) {\n    return {\n      textAnchor: isAbove ? \"end\" : \"start\",\n      alignmentBaseline: \"middle\",\n    };\n  }\n  if (70 < angle && angle < 110) {\n    return {\n      textAnchor: isAbove ? \"start\" : \"end\",\n      alignmentBaseline: \"middle\",\n    };\n  }\n  if (angle < -160 || angle > 160) {\n    return {\n      textAnchor: \"middle\",\n      alignmentBaseline: isAbove ? \"hanging\" : \"baseline\",\n    };\n  }\n  if (angle <= -20 && angle >= -70) {\n    return {\n      // textAnchor: isAbove ? \"end\" : \"start\",\n      textAnchor: \"middle\",\n      alignmentBaseline: isAbove ? \"baseline\" : \"hanging\",\n      transform: `rotate(${angle}deg)`,\n      transformOrigin: `${x}px ${y}px`,\n      rotationAngle: angle,\n    };\n  }\n  if (angle >= 20 && angle <= 70) {\n    return {\n      // textAnchor: isAbove ? \"start\" : \"end\",\n      textAnchor: \"middle\",\n      alignmentBaseline: isAbove ? \"baseline\" : \"hanging\",\n      transform: `rotate(${angle}deg)`,\n      transformOrigin: `${x}px ${y}px`,\n      rotationAngle: angle,\n    };\n  }\n  if (angle <= -110 && angle >= -160) {\n    return {\n      // textAnchor: isAbove ? \"end\" : \"start\",\n      textAnchor: \"middle\",\n      alignmentBaseline: isAbove ? \"hanging\" : \"baseline\",\n      transform: `rotate(${angle + 180}deg)`,\n      transformOrigin: `${x}px ${y}px`,\n      rotationAngle: angle + 180,\n    };\n  }\n  if (angle >= 110 && angle <= 160) {\n    return {\n      // textAnchor: isAbove ? \"start\" : \"end\",\n      textAnchor: \"middle\",\n      alignmentBaseline: isAbove ? \"hanging\" : \"baseline\",\n      transform: `rotate(${angle + 180}deg)`,\n      transformOrigin: `${x}px ${y}px`,\n      rotationAngle: angle + 180,\n    };\n  }\n};\n\nexport const getLabelAttribute = (text, isAbove = true) => {\n  if (!text) {\n    return \"\";\n  }\n  if (!isAbove) {\n    return `l_=${text}`;\n  } else {\n    return `l=${text}`;\n  }\n};\nexport const getAnnotationAttribute = (text, isAbove = false) => {\n  if (!text) {\n    return \"\";\n  }\n  if (!isAbove) {\n    return `a=${text}`;\n  } else {\n    return `a^=${text}`;\n  }\n};\n\nconst gap = 10;\n\nconst Label = ({\n  fromCoords,\n  toCoords,\n  angle = null,\n  height = null,\n  text,\n  isAbove = true,\n}) => {\n  if (!fromCoords || !toCoords || !text || angle === null || height === null) {\n    return null;\n  }\n  const { x: xFrom, y: yFrom } = fromCoords;\n  const { x: xTo, y: yTo } = toCoords;\n\n  const xL =\n    (xFrom + xTo) / 2 +\n    (isAbove ? height + gap : -(height + gap)) *\n      Math.sin((angle / 180) * Math.PI);\n  const yL =\n    (yFrom + yTo) / 2 +\n    (isAbove ? -(height + gap) : height + gap) *\n      Math.cos((angle / 180) * Math.PI);\n\n  return (\n    <g\n      style={{\n        fill: \"black\",\n        stroke: \"none\",\n      }}\n    >\n      <text\n        key={Math.random()}\n        x={xL}\n        y={yL}\n        style={{ ...getTextAnchor(angle, isAbove, xL, yL) }}\n      >\n        {text}\n      </text>\n    </g>\n  );\n};\n\nexport const drawRoughLabel = ({\n  ctx,\n  text,\n  from,\n  to,\n  angle,\n  isAbove,\n  height,\n}) => {\n  const { x: xFrom, y: yFrom } = from;\n  const { x: xTo, y: yTo } = to;\n\n  const xL =\n    (xFrom + xTo) / 2 +\n    (isAbove ? height + gap : -(height + gap)) *\n      Math.sin((angle / 180) * Math.PI);\n  const yL =\n    (yFrom + yTo) / 2 +\n    (isAbove ? -(height + gap) : height + gap) *\n      Math.cos((angle / 180) * Math.PI);\n\n  const { textAnchor, alignmentBaseline, rotationAngle = 0 } = getTextAnchor(\n    angle,\n    isAbove,\n    0,\n    0\n  );\n\n  ctx.save();\n\n  ctx.textAlign = translateSVGalign2Canvas[textAnchor];\n  ctx.textBaseline = translateSVGbaseline2Canvas[alignmentBaseline];\n\n  ctx.translate(xL, yL);\n  ctx.rotate((rotationAngle * Math.PI) / 180);\n\n  ctx.fillText(text, 0, 0);\n\n  ctx.restore();\n};\nexport default Label;\n","import React from \"react\";\nimport { connect } from \"react-redux\";\nimport { MULTIPLICATIVE_CONST, R_LEN } from \"utils\";\nimport CurrantArrow, { getCurrantAttribute } from \"atoms/currant\";\nimport Label, {\n  getLabelAttribute,\n  getAnnotationAttribute,\n  drawRoughLabel,\n} from \"atoms/label\";\n\nconst mapStateToProps = (state, props) => {\n  return props.id\n    ? {\n        fromCoords: state.coordinates.byId[props.from],\n        toCoords: state.coordinates.byId[props.to],\n      }\n    : {};\n};\n\n// TODO : should allow to have heighTop and heighBottom (cf pR component problem)\n// or a ratio between top and bottom to share the complete heigh\nexport const withPathAttributes = ({ height = 1, width = 1 }) => (component) =>\n  connect(mapStateToProps)((props) => {\n    const {\n      fromCoords,\n      toCoords,\n      selected,\n      onMouseDown,\n      currant,\n      label,\n      annotation,\n      mirror,\n      invert,\n    } = props;\n\n    if (!fromCoords || !toCoords) {\n      return null;\n    }\n\n    const { x: xFrom, y: yFrom } = fromCoords;\n    const { x: xTo, y: yTo } = toCoords;\n\n    const d = Math.sqrt((xFrom - xTo) ** 2 + (yFrom - yTo) ** 2);\n    const ratio = (d - width * MULTIPLICATIVE_CONST * R_LEN) / (2 * d); // ratio of the line use by connection\n    const angle = parseInt(\n      (180 * Math.atan2(yTo - yFrom, xTo - xFrom)) / Math.PI\n    );\n\n    return (\n      <g\n        onMouseDown={onMouseDown || null}\n        className={`component ${selected ? \"red\" : \"black\"}`}\n      >\n        <g\n          style={{\n            transform: `translate(${(xFrom + xTo) / 2}px , ${\n              (yFrom + yTo) / 2\n            }px) rotate(${angle}deg)${mirror ? \"scaleY(-1)\" : \"\"}${\n              invert ? \"scaleX(-1)\" : \"\"\n            }`,\n          }}\n        >\n          {component({\n            ...props,\n            x: (xFrom + xTo) / 2,\n            y: (yFrom + yTo) / 2,\n            angle: angle,\n          })}\n        </g>\n\n        {/* draw the line between anchors and the component */}\n        <path\n          d={`M ${xFrom} ${yFrom} L ${xFrom + ratio * (xTo - xFrom)} ${\n            yFrom + ratio * (yTo - yFrom)\n          }`}\n        />\n        <path\n          d={`M ${xTo} ${yTo} L ${xTo + ratio * (xFrom - xTo)} ${\n            yTo + ratio * (yFrom - yTo)\n          }`}\n        />\n\n        {currant && currant.show && (\n          <CurrantArrow\n            fromCoords={fromCoords}\n            toCoords={toCoords}\n            ratio={ratio}\n            angle={angle}\n            {...currant}\n          />\n        )}\n        {label && (\n          <Label\n            fromCoords={fromCoords}\n            toCoords={toCoords}\n            height={0.5 * height * MULTIPLICATIVE_CONST * R_LEN}\n            angle={angle}\n            text={label}\n          />\n        )}\n        {annotation && (\n          <Label\n            fromCoords={fromCoords}\n            toCoords={toCoords}\n            height={0.5 * height * MULTIPLICATIVE_CONST * R_LEN}\n            angle={angle}\n            text={annotation}\n            isAbove={false}\n          />\n        )}\n      </g>\n    );\n  });\n\nexport const drawLinks = (rc, ctx, x0, y0, width, height, element) => {\n  const { x: xFrom, y: yFrom } = element.fromCoords;\n  const { x: xTo, y: yTo } = element.toCoords;\n\n  const x = (xFrom + xTo) / 2 - x0;\n  const y = (yFrom + yTo) / 2 - y0;\n\n  const d = Math.sqrt((xFrom - xTo) ** 2 + (yFrom - yTo) ** 2);\n  const ratio = (d - width * MULTIPLICATIVE_CONST * R_LEN) / (2 * d); // ratio of the line use by connection\n  const angle = parseInt(\n    (180 * Math.atan2(yTo - yFrom, xTo - xFrom)) / Math.PI\n  );\n\n  rc.path(\n    `M ${xFrom - x0} ${yFrom - y0}\n    L ${xFrom + ratio * (xTo - xFrom) - x0} ${\n      yFrom + ratio * (yTo - yFrom) - y0\n    }\n    M ${xTo - x0} ${yTo - y0}\n    L ${xTo + ratio * (xFrom - xTo) - x0} ${yTo + ratio * (yFrom - yTo) - y0}`\n  );\n\n  const { label = null, annotation = null } = element;\n\n  if (label !== null) {\n    drawRoughLabel({\n      ctx,\n      text: label,\n      from: { x: xFrom - x0, y: yFrom - y0 },\n      to: { x: xTo - x0, y: yTo - y0 },\n      angle,\n      isAbove: true,\n      height: 0.5 * height * MULTIPLICATIVE_CONST * R_LEN,\n    });\n  }\n  if (annotation !== null) {\n    drawRoughLabel({\n      ctx,\n      text: annotation,\n      from: { x: xFrom - x0, y: yFrom - y0 },\n      to: { x: xTo - x0, y: yTo - y0 },\n      angle,\n      isAbove: false,\n      height: 0.5 * height * MULTIPLICATIVE_CONST * R_LEN,\n    });\n  }\n\n  return { x, y, angle, ratio };\n};\n\nexport const getPathAttributes = (element) => {\n  const currantAttribute = getCurrantAttribute(element.currant);\n  const label = getLabelAttribute(element.label);\n  const annotation = getAnnotationAttribute(element.annotation);\n\n  return `${label ? `, ${label}` : \"\"}${annotation ? `, ${annotation}` : \"\"}${\n    currantAttribute ? `, ${currantAttribute}` : \"\"\n  }${element.mirror ? \", mirror\" : \"\"}${element.invert ? \", invert\" : \"\"}${\n    element.poles ? `, ${element.poles}` : \"\"\n  }`;\n};\n","import React from \"react\";\nimport \"./style.scss\";\nimport { MULTIPLICATIVE_CONST, R_LEN, rotation } from \"utils\";\nimport {\n  withPathAttributes,\n  getPathAttributes,\n  drawLinks,\n} from \"./hoc/pathComponents\";\nimport { drawRoughCurrant } from \"atoms/currant\";\n\nconst width = 0.6;\nconst height = 0.6;\nconst R = 0.6 * 0.5 * MULTIPLICATIVE_CONST * R_LEN;\nconst r = (0.7071 * R).toFixed(3);\n\nconst Lampe = () => (\n  <>\n    <circle cx={0} cy={0} r={R} />\n    <path d={`M -${r} -${r} L ${r} ${r} M -${r} ${r} L ${r} -${r}`} />\n  </>\n);\n\nexport const roughComponent = (rc, ctx, x0, y0, element) => {\n  const { x, y, angle, ratio } = drawLinks(\n    rc,\n    ctx,\n    x0,\n    y0,\n    width,\n    height,\n    element\n  );\n\n  drawRoughCurrant(rc, ctx, x0, y0, angle, ratio, element);\n\n  rc.path(\n    `M ${rotation(-angle, x, y, r, r)}\n    L ${rotation(-angle, x, y, -r, -r)}\n    M ${rotation(-angle, x, y, r, -r)}\n    L ${rotation(-angle, x, y, -r, r)}\n    `\n  );\n  rc.circle(x, y, 2 * R);\n};\n\nexport const drawer = (element) => {\n  return `to[lamp${getPathAttributes(element)}] `;\n};\n\nexport default withPathAttributes({ width, height })(Lampe);\n","import React from \"react\";\nimport \"./style.scss\";\nimport { MULTIPLICATIVE_CONST, R_LEN, rotation } from \"utils\";\nimport {\n  withPathAttributes,\n  getPathAttributes,\n  drawLinks,\n} from \"./hoc/pathComponents\";\nimport { drawRoughCurrant } from \"atoms/currant\";\n\nconst height = 0.5;\nconst width = 0.4;\n\nconst UNIT_X = 0.5 * width * MULTIPLICATIVE_CONST * R_LEN;\nconst UNIT_Y = 0.5 * height * MULTIPLICATIVE_CONST * R_LEN;\n\nconst EmptyDiode = () => (\n  <>\n    <path\n      d={`M ${UNIT_X} 0 L ${-UNIT_X} ${-UNIT_Y} L ${-UNIT_X} ${UNIT_Y} Z`}\n    />\n    <path d={`M ${UNIT_X} ${UNIT_Y} L ${UNIT_X} ${-UNIT_Y}`} />\n  </>\n);\n\nexport const roughComponent = (rc, ctx, x0, y0, element) => {\n  const { x, y, angle, ratio } = drawLinks(\n    rc,\n    ctx,\n    x0,\n    y0,\n    width,\n    height,\n    element\n  );\n\n  drawRoughCurrant(rc, ctx, x0, y0, angle, ratio, element);\n\n  rc.path(\n    `M ${rotation(-angle, x, y, UNIT_X, 0)}\n    L ${rotation(-angle, x, y, -UNIT_X, -UNIT_Y)}\n    L ${rotation(-angle, x, y, -UNIT_X, UNIT_Y)}\n    Z\n    M ${rotation(-angle, x, y, UNIT_X, UNIT_Y)}\n    L ${rotation(-angle, x, y, UNIT_X, -UNIT_Y)}\n    `\n  );\n};\n\nexport const drawer = (element) => {\n  return `to[empty diode${getPathAttributes(element)}] `;\n};\n\nexport default withPathAttributes({ width, height })(EmptyDiode);\n","import React from \"react\";\nimport \"./style.scss\";\nimport {\n  MULTIPLICATIVE_CONST,\n  R_LEN,\n  rotation,\n  default_path_options,\n} from \"utils\";\nimport {\n  withPathAttributes,\n  getPathAttributes,\n  drawLinks,\n} from \"./hoc/pathComponents\";\nimport { drawRoughCurrant } from \"atoms/currant\";\n\nconst height = 0.8;\nconst height_2 = 0.3;\nconst width = 0.8;\n\nconst UNIT_X = 0.5 * width * MULTIPLICATIVE_CONST * R_LEN;\nconst UNIT_Y2 = 0.5 * height_2 * MULTIPLICATIVE_CONST * R_LEN;\nconst UNIT_Y = 0.5 * height * MULTIPLICATIVE_CONST * R_LEN;\n\nexport const getAnchor = ({ fromCoords, toCoords }) => {\n  const { x: xFrom, y: yFrom } = fromCoords;\n  const { x: xTo, y: yTo } = toCoords;\n\n  const angle = Math.atan2(yTo - yFrom, xTo - xFrom);\n\n  const x = (xFrom + xTo) / 2 + 55 * Math.sin(angle);\n  const y = (yFrom + yTo) / 2 - 55 * Math.cos(angle);\n  return [{ name: \"wiper\", x, y }];\n};\n\nconst PR = ({ wiper_pos = 0.5 }) => (\n  <>\n    <path\n      d={`M ${(-6 / 6) * UNIT_X} 0 L ${(-5 / 6) * UNIT_X} ${-UNIT_Y2} L ${\n        (-3 / 6) * UNIT_X\n      } ${UNIT_Y2} L ${(-1 / 6) * UNIT_X} ${-UNIT_Y2} L ${\n        (1 / 6) * UNIT_X\n      } ${UNIT_Y2} L ${(3 / 6) * UNIT_X} ${-UNIT_Y2} L ${\n        (5 / 6) * UNIT_X\n      } ${UNIT_Y2} L ${(6 / 6) * UNIT_X} 0`}\n    />\n    <path\n      d={`M ${-(0.5 - wiper_pos) * 2 * UNIT_X} ${-UNIT_Y} L ${\n        -(0.5 - wiper_pos) * 2 * UNIT_X\n      } ${-UNIT_Y2}`}\n    />\n  </>\n);\n\nexport const roughComponent = (rc, ctx, x0, y0, element) => {\n  const { x, y, angle, ratio } = drawLinks(\n    rc,\n    ctx,\n    x0,\n    y0,\n    width,\n    height,\n    element\n  );\n\n  drawRoughCurrant(rc, ctx, x0, y0, angle, ratio, element);\n\n  const { wiper_pos } = element;\n  rc.path(\n    `M ${rotation(-angle, x, y, -UNIT_X, 0)}\n    L ${rotation(-angle, x, y, (-5 / 6) * UNIT_X, -UNIT_Y2)} \n    L ${rotation(-angle, x, y, (-3 / 6) * UNIT_X, UNIT_Y2)} \n    L ${rotation(-angle, x, y, (-1 / 6) * UNIT_X, -UNIT_Y2)} \n    L ${rotation(-angle, x, y, (1 / 6) * UNIT_X, UNIT_Y2)} \n    L ${rotation(-angle, x, y, (3 / 6) * UNIT_X, -UNIT_Y2)} \n    L ${rotation(-angle, x, y, (5 / 6) * UNIT_X, UNIT_Y2)} \n    L ${rotation(-angle, x, y, UNIT_X, 0)}\n    M ${rotation(-angle, x, y, -(0.5 - wiper_pos) * 2 * UNIT_X, -UNIT_Y)}\n    L ${rotation(-angle, x, y, -(0.5 - wiper_pos) * 2 * UNIT_X, -UNIT_Y2)}`\n  );\n};\n\nexport const drawer = (element) => {\n  return `to[pR${getPathAttributes(element)}] `;\n};\n\nexport const parameters = {\n  ...default_path_options,\n  wiper_pos: 0.5,\n};\n\nexport default withPathAttributes({ width, height })(PR);\n","import React from \"react\";\nimport \"./style.scss\";\nimport { MULTIPLICATIVE_CONST, R_LEN, rotation } from \"utils\";\nimport {\n  withPathAttributes,\n  getPathAttributes,\n  drawLinks,\n} from \"./hoc/pathComponents\";\nimport { drawRoughCurrant } from \"atoms/currant\";\n\nconst height = 0.6;\nconst width = 0.5;\nconst capacitor_width = 0.4;\n\nconst UNIT_X = 0.5 * width * MULTIPLICATIVE_CONST * R_LEN;\nconst UNIT_Y = 0.5 * height * MULTIPLICATIVE_CONST * R_LEN;\n\nconst STEP = capacitor_width * UNIT_X;\n\nconst Vcapacitor = () => (\n  <>\n    <path d={`M  ${-STEP} ${-UNIT_Y} L ${-STEP} ${UNIT_Y}`} />\n    <path d={`M  ${STEP} ${-UNIT_Y} L ${STEP} ${UNIT_Y}`} />\n    <path d={`M ${-UNIT_X} ${-UNIT_Y} L ${UNIT_X} ${UNIT_Y}`} />\n  </>\n);\n\nexport const roughComponent = (rc, ctx, x0, y0, element) => {\n  const { x, y, angle } = drawLinks(\n    rc,\n    x0,\n    y0,\n    capacitor_width / 2,\n    height,\n    element\n  );\n\n  rc.path(\n    `M ${rotation(-angle, x, y, -STEP, UNIT_Y)}\n    L ${rotation(-angle, x, y, -STEP, -UNIT_Y)}\n    M ${rotation(-angle, x, y, STEP, UNIT_Y)}\n    L ${rotation(-angle, x, y, STEP, -UNIT_Y)}\n    M ${rotation(-angle, x, y, -UNIT_X, -UNIT_Y)}\n    L ${rotation(-angle, x, y, UNIT_X, UNIT_Y)}\n    `\n  );\n};\n\nexport const drawer = (element) => {\n  return `to[variable capacitor${getPathAttributes(element)}] `;\n};\n\nexport default withPathAttributes({ width: capacitor_width / 2, height })(\n  Vcapacitor\n);\n","import React from \"react\";\nimport { connect } from \"react-redux\";\nimport \"./style.scss\";\n\nimport { MULTIPLICATIVE_CONST, R_LEN, rotation } from \"utils\";\n\nconst width = 0.7;\nconst gate_height = 0.35;\nconst base_height = 0.5;\n// const conn_height = 0;\nconst height = 1.1;\nconst base_width = 0.5;\nconst gate_width = 0.62;\n// const arrow_pos = 0.6;\n// const bodydiode_scale = 0.3;\n// const bodydiode_distance = 0.3;\n// const bodydiode_conn = 0.6;\n// const curr_direction = 1;\n\nconst UNIT_X = width * MULTIPLICATIVE_CONST * R_LEN;\nconst UNIT_Y = 0.5 * height * MULTIPLICATIVE_CONST * R_LEN;\n\nconst getElementTranslation = (positionAnchor) => {\n  switch (positionAnchor) {\n    case \"B\":\n      return { x: UNIT_X, y: 0 };\n    case \"C\":\n      return { x: 0, y: UNIT_Y };\n    case \"E\":\n      return { x: 0, y: -UNIT_Y };\n    default:\n      return { x: 0, y: 0 };\n  }\n};\n\nexport const getAnchor = ({ positionAnchor, angle = 0, positionCoords }) => {\n  const { x, y } = positionCoords;\n\n  const { x: dx, y: dy } = getElementTranslation(positionAnchor);\n\n  const Cgap = getElementTranslation(\"C\");\n  const Bgap = getElementTranslation(\"B\");\n  const Egap = getElementTranslation(\"E\");\n  const radAngle = (Math.PI * angle) / 180;\n\n  const Crad = Math.atan2(dy - Cgap.y, dx - Cgap.x);\n  const Brad = Math.atan2(dy - Bgap.y, dx - Bgap.x);\n  const Erad = Math.atan2(dy - Egap.y, dx - Egap.x);\n\n  const distanceC = Math.sqrt((Cgap.x - dx) ** 2 + (Cgap.y - dy) ** 2);\n  const distanceB = Math.sqrt((Bgap.x - dx) ** 2 + (Bgap.y - dy) ** 2);\n  const distanceE = Math.sqrt((Egap.x - dx) ** 2 + (Egap.y - dy) ** 2);\n\n  return [\n    {\n      name: \"C\",\n      x: x + Math.cos(-radAngle + Crad) * distanceC,\n      y: y + Math.sin(-radAngle + Crad) * distanceC,\n    },\n    {\n      name: \"B\",\n      x: x + Math.cos(-radAngle + Brad) * distanceB,\n      y: y + Math.sin(-radAngle + Brad) * distanceB,\n    },\n    {\n      name: \"E\",\n      x: x + Math.cos(-radAngle + Erad) * distanceE,\n      y: y + Math.sin(-radAngle + Erad) * distanceE,\n    },\n  ];\n};\n\n// If id => it's from scene\n// If no id => it's from adding\nconst mapStateToProps = (state, props) => {\n  return props.id\n    ? {\n        mode: state.mode,\n        // allows to create components directly without using the store\n        positionCoords: state.coordinates.byId[props.position],\n      }\n    : {};\n};\n\nconst NMOS = ({\n  positionCoords,\n  positionAnchor = \"\",\n  angle = 0,\n  mode,\n  selected,\n  showHandles,\n  id,\n  onMouseDown,\n}) => {\n  if (!positionCoords) {\n    return null;\n  }\n  const { x: xAnchor, y: yAnchor } = positionCoords;\n  const { x: deltaX, y: deltaY } = getElementTranslation(positionAnchor);\n\n  return (\n    <g\n      onMouseDown={onMouseDown || null}\n      className={`component ${selected ? \"red\" : \"black\"}`}\n    >\n      <g\n        style={{\n          transform: `translate(${xAnchor}px , ${yAnchor}px) rotate(${-angle}deg)`,\n        }}\n      >\n        <g\n          style={{\n            transform: `translate(${deltaX}px , ${deltaY}px)`,\n          }}\n        >\n          <path\n            d={`M ${0} ${-UNIT_Y} \n                  L ${0} ${-gate_height * UNIT_Y}\n                  L ${-base_width * UNIT_X} ${-gate_height * UNIT_Y}`}\n          />\n          <path\n            d={`M ${-base_width * UNIT_X} ${-base_height * UNIT_Y}\n                  L ${-base_width * UNIT_X} ${base_height * UNIT_Y}\n                  L ${-base_width * UNIT_X} ${gate_height * UNIT_Y}\n                  L ${0} ${gate_height * UNIT_Y}\n                  L ${0} ${UNIT_Y}`}\n          />\n          <path\n            d={`M ${-gate_width * UNIT_X} ${-gate_height * UNIT_Y}\n                  L ${-gate_width * UNIT_X} ${gate_height * UNIT_Y}`}\n            style={{ strokeWidth: 2 }}\n          />\n          <path\n            d={`M ${-gate_width * UNIT_X} 0\n                      L ${-UNIT_X} 0`}\n          />\n        </g>\n      </g>\n    </g>\n  );\n};\n\nexport const roughComponent = (rc, ctx, x0, y0, element) => {\n  const x = element.positionCoords.x - x0;\n  const y = element.positionCoords.y - y0;\n\n  const { angle } = element;\n\n  rc.path(\n    `M ${rotation(angle, x, y, 0, -UNIT_Y)} \n      L ${rotation(angle, x, y, 0, -gate_height * UNIT_Y)}\n      L ${rotation(angle, x, y, -base_width * UNIT_X, -gate_height * UNIT_Y)}\n      M ${rotation(angle, x, y, -base_width * UNIT_X, -base_height * UNIT_Y)}\n      L ${rotation(angle, x, y, -base_width * UNIT_X, +base_height * UNIT_Y)}\n      L ${rotation(angle, x, y, -base_width * UNIT_X, +gate_height * UNIT_Y)}\n      L ${rotation(angle, x, y, 0, gate_height * UNIT_Y)}\n      L ${rotation(angle, x, y, 0, UNIT_Y)}\n      M ${rotation(angle, x, y, -gate_width * UNIT_X, -gate_height * UNIT_Y)}\n      L ${rotation(angle, x, y, -gate_width * UNIT_X, +gate_height * UNIT_Y)}\n      M ${rotation(angle, x, y, -gate_width * UNIT_X, 0)}\n      L ${rotation(angle, x, y, -UNIT_X, 0)}`\n  );\n};\n\nexport const drawer = (element, positionInformations, name = null) => {\n  const { x, y, position, anchor } = positionInformations;\n\n  const coord = position\n    ? `(${position})`\n    : `(${(x / MULTIPLICATIVE_CONST).toFixed(2)}, ${(\n        -y / MULTIPLICATIVE_CONST\n      ).toFixed(2)})`;\n\n  return `\\\\draw ${coord} node[nmos${anchor ? `, anchor=${anchor}` : \"\"}${\n    element.angle && parseFloat(element.angle) !== 0\n      ? `, rotate=${element.angle}`\n      : \"\"\n  }]${name ? `(${name})` : \"\"}{};`;\n};\n\nexport default connect(mapStateToProps)(NMOS);\n","import React from \"react\";\nimport { connect } from \"react-redux\";\nimport \"./style.scss\";\n\nimport { MULTIPLICATIVE_CONST, R_LEN, rotation } from \"utils\";\n\nconst width = 1.7; // Total width\nconst port_width = 0.7; // Terminals length\nconst height = 1.4; // Total height\nconst input_height = 0.5; // Input port vertical separation\nconst up_pos = 0.45; // Top and bottom anchor position\n// const font = \\pgf@circ@font@tenbm // Absolute font size needed!\n\nconst UNIT_X = 0.5 * width * MULTIPLICATIVE_CONST * R_LEN;\nconst UNIT_Y = 0.5 * height * MULTIPLICATIVE_CONST * R_LEN;\n\nconst getElementTranslation = (positionAnchor) => {\n  const upX = (1 - 2 * up_pos) * (port_width * UNIT_X);\n  const upY = (1 - up_pos) * UNIT_Y;\n  switch (positionAnchor) {\n    case \"+\":\n      return { x: UNIT_X, y: -input_height * UNIT_Y };\n    case \"-\":\n      return { x: UNIT_X, y: input_height * UNIT_Y };\n    case \"up\":\n      return { x: upX, y: upY };\n    case \"down\":\n      return { x: upX, y: -upY };\n    case \"out\":\n      return { x: -UNIT_X, y: 0 };\n    default:\n      return { x: 0, y: 0 };\n  }\n};\n\nexport const getAnchor = ({ positionAnchor, angle = 0, positionCoords }) => {\n  const { x, y } = positionCoords;\n\n  const { x: dx, y: dy } = getElementTranslation(positionAnchor);\n\n  return [\"+\", \"-\", \"up\", \"down\", \"out\"].map((name) => {\n    const gap = getElementTranslation(name);\n\n    const radAngle = (Math.PI * angle) / 180;\n\n    const anchorRad = Math.atan2(dy - gap.y, dx - gap.x);\n    const distance = Math.sqrt((gap.x - dx) ** 2 + (gap.y - dy) ** 2);\n    return {\n      name: name,\n      x: x + Math.cos(-radAngle + anchorRad) * distance,\n      y: y + Math.sin(-radAngle + anchorRad) * distance,\n    };\n  });\n};\n\n// If id => it's from scene\n// If no id => it's from adding\nconst mapStateToProps = (state, props) => {\n  return props.id\n    ? {\n        mode: state.mode,\n        // allows to create components directly without using the store\n        positionCoords: state.coordinates.byId[props.position],\n      }\n    : {};\n};\n\nconst OpAmp = ({\n  positionCoords,\n  positionAnchor = \"\",\n  angle = 0,\n  selected,\n\n  onMouseDown,\n}) => {\n  if (!positionCoords) {\n    return null;\n  }\n  const { x: xAnchor, y: yAnchor } = positionCoords;\n  const { x: deltaX, y: deltaY } = getElementTranslation(positionAnchor);\n\n  return (\n    <g\n      onMouseDown={onMouseDown || null}\n      className={`component ${selected ? \"red\" : \"black\"}`}\n    >\n      <g\n        style={{\n          transform: `translate(${xAnchor}px , ${yAnchor}px) rotate(${-angle}deg)`,\n        }}\n      >\n        <g\n          style={{\n            transform: `translate(${deltaX}px , ${deltaY}px)`,\n          }}\n        >\n          {/* Triangle */}\n          <path\n            d={`M ${port_width * UNIT_X} 0\n            L ${-port_width * UNIT_X} ${UNIT_Y}\n            L ${-port_width * UNIT_X} ${-UNIT_Y}\n            Z`}\n          />\n          {/* % Negative input terminal */}\n          <path\n            d={`M ${-UNIT_X} ${-input_height * UNIT_Y}\n               L ${-port_width * UNIT_X} ${-input_height * UNIT_Y}`}\n          />\n          <path\n            d={`M ${-port_width * UNIT_X + 10} ${-input_height * UNIT_Y} L ${\n              -port_width * UNIT_X + 30\n            } ${-input_height * UNIT_Y}`}\n          />\n\n          {/* % Positive input terminal */}\n          <path\n            d={`M ${-UNIT_X} ${input_height * UNIT_Y}\n                L ${-port_width * UNIT_X} ${input_height * UNIT_Y}`}\n          />\n          <path\n            d={`M ${-port_width * UNIT_X + 10} ${input_height * UNIT_Y}\n              L ${-port_width * UNIT_X + 30} ${input_height * UNIT_Y}\n              M ${-port_width * UNIT_X + 20} ${input_height * UNIT_Y - 10}\n              L ${-port_width * UNIT_X + 20} ${input_height * UNIT_Y + 10}`}\n          />\n\n          {/* % Output terminal */}\n          <path\n            d={`M ${UNIT_X} 0\n                L ${port_width * UNIT_X} 0`}\n          />\n        </g>\n      </g>\n    </g>\n  );\n};\n\nexport const roughComponent = (rc, ctx, x0, y0, element) => {\n  const x = element.positionCoords.x - x0;\n  const y = element.positionCoords.y - y0;\n\n  const { angle } = element;\n\n  rc.path(\n    `M ${rotation(angle, x, y, port_width * UNIT_X, 0)} \n      L ${rotation(angle, x, y, -port_width * UNIT_X, UNIT_Y)}\n      L ${rotation(angle, x, y, -port_width * UNIT_X, -UNIT_Y)}\n      Z\n      M ${rotation(angle, x, y, -UNIT_X, -input_height * UNIT_Y)}\n      L ${rotation(angle, x, y, -port_width * UNIT_X, -input_height * UNIT_Y)}\n      M ${rotation(angle, x, y, -UNIT_X, input_height * UNIT_Y)}\n      L ${rotation(angle, x, y, -port_width * UNIT_X, input_height * UNIT_Y)}\n      M ${rotation(angle, x, y, UNIT_X, 0)}\n      L ${rotation(angle, x, y, port_width * UNIT_X, 0)}\n      M ${rotation(\n        angle,\n        x,\n        y,\n        -port_width * UNIT_X + 10,\n        -input_height * UNIT_Y\n      )}\n      L ${rotation(\n        angle,\n        x,\n        y,\n        -port_width * UNIT_X + 30,\n        -input_height * UNIT_Y\n      )}\n      M ${rotation(\n        angle,\n        x,\n        y,\n        -port_width * UNIT_X + 10,\n        input_height * UNIT_Y\n      )}\n      L ${rotation(\n        angle,\n        x,\n        y,\n        -port_width * UNIT_X + 30,\n        input_height * UNIT_Y\n      )}\n      M ${rotation(\n        angle,\n        x,\n        y,\n        -port_width * UNIT_X + 20,\n        input_height * UNIT_Y - 10\n      )}\n      L ${rotation(\n        angle,\n        x,\n        y,\n        -port_width * UNIT_X + 20,\n        input_height * UNIT_Y + 10\n      )}`\n  );\n};\n\nexport const drawer = (element, positionInformations, name = null) => {\n  const { x, y, position, anchor } = positionInformations;\n\n  const coord = position\n    ? `(${position})`\n    : `(${(x / MULTIPLICATIVE_CONST).toFixed(2)}, ${(\n        -y / MULTIPLICATIVE_CONST\n      ).toFixed(2)})`;\n\n  return `\\\\draw ${coord} node[op amp${anchor ? `, anchor=${anchor}` : \"\"}${\n    element.angle && parseFloat(element.angle) !== 0\n      ? `, rotate=${element.angle}`\n      : \"\"\n  }]${name ? `(${name})` : \"\"}{};`;\n};\n\nexport default connect(mapStateToProps)(OpAmp);\n","import React from \"react\";\nimport { connect } from \"react-redux\";\nimport \"./style.scss\";\n\nimport { MULTIPLICATIVE_CONST, R_LEN, rotation } from \"utils\";\n\nconst width = 0.2;\nconst STEP = width * R_LEN * MULTIPLICATIVE_CONST;\n\nexport const getAnchor = ({ positionCoords }) => {\n  const { x, y } = positionCoords;\n\n  return [\n    {\n      name: \"C\",\n      x: x,\n      y: y,\n    },\n  ];\n};\n\n// If id => it's from scene\n// If no id => it's from adding\nconst mapStateToProps = (state, props) => {\n  return props.id\n    ? {\n        // allows to create components directly without using the store\n        positionCoords: state.coordinates.byId[props.position],\n      }\n    : {};\n};\n\nconst VEE = ({ positionCoords, angle = 0, selected, onMouseDown }) => {\n  if (!positionCoords) {\n    return null;\n  }\n  const { x: xAnchor, y: yAnchor } = positionCoords;\n\n  return (\n    <g\n      onMouseDown={onMouseDown || null}\n      className={`component ${selected ? \"red\" : \"black\"}`}\n    >\n      <g\n        style={{\n          transform: `translate(${xAnchor}px , ${yAnchor}px) rotate(${-angle}deg)`,\n        }}\n      >\n        <path\n          d={`M ${-0.5 * STEP} ${0.8 * STEP}\n                L 0 ${1.5 * STEP}\n                L ${0.5 * STEP} ${0.8 * STEP}`}\n        />\n        <path\n          d={`M 0 0\n                L 0 ${1.5 * STEP}`}\n        />\n      </g>\n    </g>\n  );\n};\n\nexport const roughComponent = (rc, ctx, x0, y0, element) => {\n  const x = element.positionCoords.x - x0;\n  const y = element.positionCoords.y - y0;\n\n  const { angle } = element;\n\n  rc.path(\n    `M ${rotation(angle, x, y, -0.5 * STEP, 0.8 * STEP)} \n      L ${rotation(angle, x, y, 0, 1.5 * STEP)}\n      L ${rotation(angle, x, y, 0.5 * STEP, 0.8 * STEP)}\n      M ${rotation(angle, x, y, 0, 0)} \n      L ${rotation(angle, x, y, 0, 1.5 * STEP)}`\n  );\n};\n\nexport const drawer = (element) => {\n  return `node[vee${\n    element.angle && element.angle !== 0 ? \" ,rotate=\" + element.angle : \"\"\n  }]{}`;\n};\n\nexport default connect(mapStateToProps)(VEE);\n","import React from \"react\";\nimport { connect } from \"react-redux\";\nimport \"./style.scss\";\n\nimport { MULTIPLICATIVE_CONST, R_LEN, rotation } from \"utils\";\n\nconst width = 0.2;\n\nconst STEP = width * R_LEN * MULTIPLICATIVE_CONST;\n\nexport const getAnchor = ({ positionCoords }) => {\n  const { x, y } = positionCoords;\n\n  return [\n    {\n      name: \"C\",\n      x: x,\n      y: y,\n    },\n  ];\n};\n\n// If id => it's from scene\n// If no id => it's from adding\nconst mapStateToProps = (state, props) => {\n  return props.id\n    ? {\n        // allows to create components directly without using the store\n        positionCoords: state.coordinates.byId[props.position],\n      }\n    : {};\n};\n\nconst VCC = ({ positionCoords, angle = 0, selected, onMouseDown }) => {\n  if (!positionCoords) {\n    return null;\n  }\n  const { x: xAnchor, y: yAnchor } = positionCoords;\n\n  return (\n    <g\n      onMouseDown={onMouseDown || null}\n      className={`component ${selected ? \"red\" : \"black\"}`}\n    >\n      <g\n        style={{\n          transform: `translate(${xAnchor}px , ${yAnchor}px) rotate(${-angle}deg)`,\n        }}\n      >\n        <path\n          d={`M ${-0.5 * STEP} ${-0.8 * STEP}\n                L 0 ${-1.5 * STEP}\n                L ${0.5 * STEP} ${-0.8 * STEP}`}\n        />\n        <path\n          d={`M 0 0\n                L 0 ${-1.5 * STEP}`}\n        />\n      </g>\n    </g>\n  );\n};\n\nexport const roughComponent = (rc, ctx, x0, y0, element) => {\n  const x = element.positionCoords.x - x0;\n  const y = element.positionCoords.y - y0;\n\n  const { angle } = element;\n\n  rc.path(\n    `M ${rotation(angle, x, y, -0.5 * STEP, -0.8 * STEP)} \n      L ${rotation(angle, x, y, 0, -1.5 * STEP)}\n      L ${rotation(angle, x, y, 0.5 * STEP, -0.8 * STEP)}\n      M ${rotation(angle, x, y, 0, 0)} \n      L ${rotation(angle, x, y, 0, -1.5 * STEP)}`\n  );\n};\n\nexport const drawer = (element) => {\n  return `node[vcc${\n    element.angle && element.angle !== 0 ? \" ,rotate=\" + element.angle : \"\"\n  }]{}`;\n};\n\nexport default connect(mapStateToProps)(VCC);\n","import React from \"react\";\nimport { connect } from \"react-redux\";\nimport \"./style.scss\";\n\nimport { MULTIPLICATIVE_CONST, R_LEN, rotation } from \"utils\";\n\nconst width = 0.25;\nconst STEP = width * R_LEN * MULTIPLICATIVE_CONST;\n\nexport const getAnchor = ({ positionCoords }) => {\n  const { x, y } = positionCoords;\n\n  return [\n    {\n      name: \"C\",\n      x: x,\n      y: y,\n    },\n  ];\n};\n\n// If id => it's from scene\n// If no id => it's from adding\nconst mapStateToProps = (state, props) => {\n  return props.id\n    ? {\n        // allows to create components directly without using the store\n        positionCoords: state.coordinates.byId[props.position],\n      }\n    : {};\n};\n\nconst Ground = ({ positionCoords, angle = 0, selected, onMouseDown }) => {\n  if (!positionCoords) {\n    return null;\n  }\n  const { x: xAnchor, y: yAnchor } = positionCoords;\n\n  return (\n    <g\n      onMouseDown={onMouseDown || null}\n      className={`component ${selected ? \"red\" : \"black\"}`}\n    >\n      <g\n        style={{\n          transform: `translate(${xAnchor}px , ${yAnchor}px) rotate(${-angle}deg)`,\n        }}\n      >\n        <path\n          d={`M ${-0.6 * STEP} ${1.2 * STEP} L ${0.6 * STEP} ${1.2 * STEP}\n          M ${-0.4 * STEP} ${1.4 * STEP} L ${0.4 * STEP} ${1.4 * STEP}\n          M ${-0.25 * STEP} ${1.6 * STEP} L ${0.25 * STEP} ${1.6 * STEP}`}\n        />\n        <path\n          d={`M 0 0\n                L 0 ${1.2 * STEP}`}\n        />\n      </g>\n    </g>\n  );\n};\n\nexport const roughComponent = (rc, ctx, x0, y0, element) => {\n  const x = element.positionCoords.x - x0;\n  const y = element.positionCoords.y - y0;\n\n  const { angle } = element;\n\n  rc.path(\n    `M ${rotation(angle, x, y, -0.6 * STEP, 1.2 * STEP)}\n     L ${rotation(angle, x, y, 0.6 * STEP, 1.2 * STEP)}\n     M ${rotation(angle, x, y, -0.4 * STEP, 1.4 * STEP)}\n     L ${rotation(angle, x, y, 0.4 * STEP, 1.4 * STEP)}\n     M ${rotation(angle, x, y, -0.25 * STEP, 1.6 * STEP)}\n     L ${rotation(angle, x, y, 0.25 * STEP, 1.6 * STEP)}\n     M ${rotation(angle, x, y, 0, 0)} \n     L ${rotation(angle, x, y, 0, 1.2 * STEP)}`\n  );\n};\n\nexport const drawer = (element) => {\n  return `node[ground${\n    element.angle && element.angle !== 0 ? \" ,rotate=\" + element.angle : \"\"\n  }]{}`;\n};\n\nexport default connect(mapStateToProps)(Ground);\n","import React from \"react\";\nimport \"./style.scss\";\nimport { MULTIPLICATIVE_CONST, R_LEN, rotation } from \"utils\";\nimport {\n  withPathAttributes,\n  getPathAttributes,\n  drawLinks,\n} from \"./hoc/pathComponents\";\nimport { drawRoughCurrant } from \"atoms/currant\";\n\nconst height = 0.6;\nconst width = 0.2;\n\nconst UNIT_X = 0.5 * width * MULTIPLICATIVE_CONST * R_LEN;\nconst UNIT_Y = 0.5 * height * MULTIPLICATIVE_CONST * R_LEN;\n\nexport const getAnchor = ({ fromCoords, toCoords }) => {\n  const { x: xFrom, y: yFrom } = fromCoords;\n  const { x: xTo, y: yTo } = toCoords;\n\n  const angle = Math.atan2(yTo - yFrom, xTo - xFrom);\n\n  const x = (xFrom + xTo) / 2 + 55 * Math.sin(angle);\n  const y = (yFrom + yTo) / 2 - 55 * Math.cos(angle);\n  return [{ name: \"wiper\", x, y }];\n};\n\nconst C = () => (\n  <>\n    <path d={`M  ${-UNIT_X} ${-UNIT_Y} L ${-UNIT_X} ${UNIT_Y}`} />\n    <path d={`M  ${UNIT_X} ${-UNIT_Y} L ${UNIT_X} ${UNIT_Y}`} />\n  </>\n);\n\nexport const roughComponent = (rc, ctx, x0, y0, element) => {\n  const { x, y, angle, ratio } = drawLinks(\n    rc,\n    ctx,\n    x0,\n    y0,\n    width,\n    height,\n    element\n  );\n\n  drawRoughCurrant(rc, ctx, x0, y0, angle, ratio, element);\n\n  rc.path(\n    `M ${rotation(-angle, x, y, -UNIT_X, UNIT_Y)}\n    L ${rotation(-angle, x, y, -UNIT_X, -UNIT_Y)}\n    M ${rotation(-angle, x, y, UNIT_X, UNIT_Y)}\n    L ${rotation(-angle, x, y, UNIT_X, -UNIT_Y)}\n    `\n  );\n};\n\nexport const drawer = (element) => {\n  return `to[C${getPathAttributes(element)}] `;\n};\n\nexport default withPathAttributes({ width, height })(C);\n","import React from \"react\";\nimport \"./style.scss\";\nimport { MULTIPLICATIVE_CONST, R_LEN, rotation } from \"utils\";\nimport {\n  withPathAttributes,\n  getPathAttributes,\n  drawLinks,\n} from \"./hoc/pathComponents\";\nimport { drawRoughCurrant } from \"atoms/currant\";\n\nconst height = 0.3;\nconst width = 0.8;\n\nconst UNIT_X = 0.5 * width * MULTIPLICATIVE_CONST * R_LEN;\nconst UNIT_Y = 0.5 * height * MULTIPLICATIVE_CONST * R_LEN;\n\nconst R = () => (\n  <path\n    d={`M ${(-6 / 6) * UNIT_X} 0 L ${(-5 / 6) * UNIT_X} ${-UNIT_Y} L ${\n      (-3 / 6) * UNIT_X\n    } ${UNIT_Y} L ${(-1 / 6) * UNIT_X} ${-UNIT_Y} L ${\n      (1 / 6) * UNIT_X\n    } ${UNIT_Y} L ${(3 / 6) * UNIT_X} ${-UNIT_Y} L ${\n      (5 / 6) * UNIT_X\n    } ${UNIT_Y} L ${(6 / 6) * UNIT_X} 0`}\n  />\n);\n\nexport const roughComponent = (rc, ctx, x0, y0, element) => {\n  const { x, y, angle, ratio } = drawLinks(\n    rc,\n    ctx,\n    x0,\n    y0,\n    width,\n    height,\n    element\n  );\n\n  drawRoughCurrant(rc, ctx, x0, y0, angle, ratio, element);\n  rc.path(\n    `M ${rotation(-angle, x, y, -UNIT_X, 0)}\n    L ${rotation(-angle, x, y, (-5 / 6) * UNIT_X, -UNIT_Y)} \n    L ${rotation(-angle, x, y, (-3 / 6) * UNIT_X, UNIT_Y)} \n    L ${rotation(-angle, x, y, (-1 / 6) * UNIT_X, -UNIT_Y)} \n    L ${rotation(-angle, x, y, (1 / 6) * UNIT_X, UNIT_Y)} \n    L ${rotation(-angle, x, y, (3 / 6) * UNIT_X, -UNIT_Y)} \n    L ${rotation(-angle, x, y, (5 / 6) * UNIT_X, UNIT_Y)} \n    L ${rotation(-angle, x, y, UNIT_X, 0)}`\n  );\n};\n\nexport const drawer = (element) => {\n  return `to[R${getPathAttributes(element)}] `;\n};\n\nexport default withPathAttributes({ width, height })(R);\n","import React from \"react\";\nimport \"./style.scss\";\nimport { MULTIPLICATIVE_CONST, R_LEN, rotation } from \"utils\";\nimport {\n  withPathAttributes,\n  getPathAttributes,\n  drawLinks,\n} from \"./hoc/pathComponents\";\nimport { drawRoughCurrant } from \"atoms/currant\";\n\nconst height = 0.6;\nconst width = 0.3 * 0.33;\n\nconst UNIT_X = 0.5 * width * MULTIPLICATIVE_CONST * R_LEN;\nconst UNIT_Y = 0.5 * height * MULTIPLICATIVE_CONST * R_LEN;\n\nconst Battery1 = () => (\n  <>\n    <path d={`M ${-UNIT_X} ${-UNIT_Y} L ${-UNIT_X} ${UNIT_Y}`} />\n    <path d={`M ${UNIT_X} ${-0.5 * UNIT_Y}L ${UNIT_X} ${0.5 * UNIT_Y}`} />\n  </>\n);\n\nexport const roughComponent = (rc, ctx, x0, y0, element) => {\n  const { x, y, angle, ratio } = drawLinks(\n    rc,\n    ctx,\n    x0,\n    y0,\n    width,\n    height,\n    element\n  );\n\n  drawRoughCurrant(rc, ctx, x0, y0, angle, ratio, element);\n  rc.path(\n    `M ${rotation(-angle, x, y, -UNIT_X, -UNIT_Y)}\n    L ${rotation(-angle, x, y, -UNIT_X, UNIT_Y)}\n    M ${rotation(-angle, x, y, UNIT_X, 0.5 * UNIT_Y)}\n    L ${rotation(-angle, x, y, UNIT_X, -0.5 * UNIT_Y)}\n    `\n  );\n};\n\nexport const drawer = (element) => {\n  return `to[battery1${getPathAttributes(element)}] `;\n};\n\nexport default withPathAttributes({ width, height })(Battery1);\n","import React from \"react\";\n\nimport \"components/style.scss\";\nimport { MULTIPLICATIVE_CONST, rotation } from \"utils\";\n\nconst dx = 0.1;\nconst dy = 0.04;\nconst ArrowEnd = ({ x, y, angle }) => (\n  <g\n    style={{\n      transform: `translate(${x}px , ${y}px) rotate(${angle}deg)`,\n    }}\n  >\n    <path\n      d={`M 0 0 L ${-dx * MULTIPLICATIVE_CONST} ${\n        dy * MULTIPLICATIVE_CONST\n      } L ${-dx * MULTIPLICATIVE_CONST} ${-dy * MULTIPLICATIVE_CONST} Z`}\n      className=\"fill\"\n    />\n  </g>\n);\n\nexport const drawRoughArrowEnd = (rc, x, y, angle, x2, y2, theta) => {\n  const x0 =\n    x +\n    Math.cos((angle / 180) * Math.PI) * x2 -\n    Math.sin((angle / 180) * Math.PI) * y2;\n\n  const y0 =\n    y +\n    Math.sin((angle / 180) * Math.PI) * x2 +\n    Math.cos((-angle / 180) * Math.PI) * y2;\n\n  rc.path(`\n      M ${x0} ${y0}\n      L ${rotation(\n        -angle - theta,\n        x0,\n        y0,\n        -dx * MULTIPLICATIVE_CONST,\n        -dy * MULTIPLICATIVE_CONST\n      )}\n      L ${rotation(\n        -angle - theta,\n        x0,\n        y0,\n        -dx * MULTIPLICATIVE_CONST,\n        dy * MULTIPLICATIVE_CONST\n      )}\n      Z\n  `);\n};\nexport default ArrowEnd;\n","import React from \"react\";\nimport \"./style.scss\";\nimport {\n  MULTIPLICATIVE_CONST,\n  R_LEN,\n  default_path_options,\n  rotation,\n} from \"utils\";\nimport {\n  withPathAttributes,\n  getPathAttributes,\n  drawLinks,\n} from \"./hoc/pathComponents\";\nimport ArrowEnd, { drawRoughArrowEnd } from \"atoms/arrowEnd\";\n\nimport { drawRoughCurrant } from \"atoms/currant\";\n\nconst height = 0.35;\nconst width = 0.35;\n\nconst Arrow = ({ x, y, r, theta1, theta2 }) => {\n  const x1 = x + r * Math.cos((theta1 / 180) * Math.PI);\n  const y1 = y - r * Math.sin((theta1 / 180) * Math.PI);\n\n  const x2 = x + r * Math.cos((theta2 / 180) * Math.PI);\n  const y2 = y - r * Math.sin((theta2 / 180) * Math.PI);\n\n  return (\n    <>\n      <path\n        d={`M ${x1} ${y1} A ${r} ${r} 0 0 ${\n          theta1 < theta2 ? 0 : 1\n        } ${x2} ${y2} `}\n      />\n      <ArrowEnd x={x2} y={y2} angle={theta1 < theta2 ? 194 : 96} />\n    </>\n  );\n};\n\nconst Switch = ({ isOpen = true, withArrow = true }) => {\n  const height = withArrow ? 0.35 : 0.3;\n\n  const UNIT_X = 0.5 * width * MULTIPLICATIVE_CONST * R_LEN;\n  const UNIT_Y = 0.5 * height * MULTIPLICATIVE_CONST * R_LEN;\n  if (withArrow) {\n    return (\n      <>\n        <Arrow\n          x={-UNIT_X}\n          y={0}\n          r={1.2 * UNIT_X}\n          theta1={isOpen ? -10 : 90}\n          theta2={isOpen ? 90 : -20}\n        />\n        <path d={`M ${-UNIT_X} 0 L ${0.6 * UNIT_X} ${-UNIT_Y}`} />\n      </>\n    );\n  }\n\n  return (\n    <path\n      d={`M ${-UNIT_X} 0 L ${0.9 * UNIT_X} ${-UNIT_Y} ${\n        isOpen\n          ? \"\"\n          : `M ${UNIT_X} 0 L ${0.2 * UNIT_X} 0 L ${0.2 * UNIT_X} ${-UNIT_Y}`\n      }`}\n    />\n  );\n};\n\nexport const roughComponent = (rc, ctx, x0, y0, element) => {\n  const { isOpen, withArrow } = element;\n  const height = withArrow ? 0.35 : 0.3;\n\n  const { x, y, angle, ratio } = drawLinks(\n    rc,\n    ctx,\n    x0,\n    y0,\n    width,\n    height,\n    element\n  );\n\n  drawRoughCurrant(rc, ctx, x0, y0, angle, ratio, element);\n\n  const UNIT_X = 0.5 * width * MULTIPLICATIVE_CONST * R_LEN;\n  const UNIT_Y = 0.5 * height * MULTIPLICATIVE_CONST * R_LEN;\n  if (!withArrow) {\n    rc.path(\n      `M ${rotation(-angle, x, y, -UNIT_X, 0)}\n        L ${rotation(-angle, x, y, 0.9 * UNIT_X, -UNIT_Y)}`\n    );\n    if (!isOpen) {\n      rc.path(\n        `M ${rotation(-angle, x, y, UNIT_X, 0)}\n          L ${rotation(-angle, x, y, 0.2 * UNIT_X, 0)} \n          L ${rotation(-angle, x, y, 0.2 * UNIT_X, -UNIT_Y)}`\n      );\n    }\n  } else {\n    rc.path(\n      `M ${rotation(-angle, x, y, -UNIT_X, 0)}\n        L ${rotation(-angle, x, y, 0.6 * UNIT_X, -UNIT_Y)}`\n    );\n\n    const cx = -UNIT_X;\n    const r = 1.2 * UNIT_X;\n    const theta1 = isOpen ? -10 : 90;\n    const theta2 = isOpen ? 90 : -20;\n\n    const x1 = cx + r * Math.cos((theta1 / 180) * Math.PI);\n    const y1 = -r * Math.sin((theta1 / 180) * Math.PI);\n\n    const x2 = cx + r * Math.cos((theta2 / 180) * Math.PI);\n    const y2 = -r * Math.sin((theta2 / 180) * Math.PI);\n\n    rc.path(\n      `M ${rotation(-angle, x, y, x1, y1)} A ${r} ${r} 0 0 ${\n        theta1 < theta2 ? 0 : 1\n      } ${rotation(-angle, x, y, x2, y2)}`\n    );\n\n    drawRoughArrowEnd(rc, x, y, angle, x2, y2, theta1 < theta2 ? 194 : 96);\n  }\n};\n\nexport const drawer = (element) => {\n  const { isOpen, withArrow } = element;\n  if (withArrow) {\n    return `to[${isOpen ? \"opening \" : \"\"}switch${getPathAttributes(\n      element\n    )}] `;\n  }\n  return `to[normal ${isOpen ? \"open\" : \"closed\"} switch${getPathAttributes(\n    element\n  )}] `;\n};\n\nexport const parameters = {\n  ...default_path_options,\n  isOpen: true,\n  withArrow: true,\n};\n\nexport default withPathAttributes({ width, height })(Switch);\n","import React from \"react\";\nimport { connect } from \"react-redux\";\nimport \"./style.scss\";\nimport CurrantArrow from \"atoms/currant\";\nimport Label from \"atoms/label\";\n\nimport { drawRoughCurrant } from \"atoms/currant\";\nimport { getPathAttributes } from \"./hoc/pathComponents\";\n\nconst mapStateToProps = (state, props) => {\n  return props.id\n    ? {\n        fromCoords: state.coordinates.byId[props.from],\n        toCoords: state.coordinates.byId[props.to],\n      }\n    : {};\n};\n\nconst Short = ({\n  fromCoords,\n  toCoords,\n  selected,\n  onMouseDown,\n  currant,\n  label,\n  annotation,\n}) => {\n  if (!fromCoords || !toCoords) {\n    return null;\n  }\n\n  const { x: xFrom, y: yFrom } = fromCoords;\n  const { x: xTo, y: yTo } = toCoords;\n\n  const d = Math.sqrt((xFrom - xTo) ** 2 + (yFrom - yTo) ** 2);\n  const ratio = 1; // ratio of the line use by connection\n  const angle = parseInt(\n    (180 * Math.atan2(yTo - yFrom, xTo - xFrom)) / Math.PI\n  );\n\n  return (\n    <g\n      onMouseDown={onMouseDown || null}\n      className={`component ${selected ? \"red\" : \"black\"}`}\n    >\n      <path d={`M ${xFrom} ${yFrom} L ${xTo} ${yTo}`} />\n\n      {currant && currant.show && (\n        <CurrantArrow\n          fromCoords={fromCoords}\n          toCoords={toCoords}\n          ratio={1}\n          angle={angle}\n          {...currant}\n        />\n      )}\n      {label && (\n        <Label\n          fromCoords={fromCoords}\n          toCoords={toCoords}\n          height={0}\n          angle={angle}\n          text={label}\n        />\n      )}\n      {annotation && (\n        <Label\n          fromCoords={fromCoords}\n          toCoords={toCoords}\n          height={0}\n          angle={angle}\n          text={annotation}\n          isAbove={false}\n        />\n      )}\n    </g>\n  );\n};\n\nexport const roughComponent = (rc, ctx, x0, y0, element) => {\n  const xFrom = element.fromCoords.x - x0;\n  const yFrom = element.fromCoords.y - y0;\n\n  const xTo = element.toCoords.x - x0;\n  const yTo = element.toCoords.y - y0;\n\n  rc.path(`M ${xFrom} ${yFrom} L ${xTo} ${yTo}`);\n\n  const angle = parseInt(\n    (180 * Math.atan2(yTo - yFrom, xTo - xFrom)) / Math.PI\n  );\n\n  drawRoughCurrant(rc, ctx, x0, y0, angle, 1, element);\n};\n\nexport const drawer = (element) => {\n  return `to[short${getPathAttributes(element)}] `;\n};\n\nexport default connect(mapStateToProps)(Short);\n","import React from \"react\";\nimport { connect } from \"react-redux\";\nimport \"./style.scss\";\n\nconst mapStateToProps = (state, props) => {\n  return props.id\n    ? {\n        fromCoords: state.coordinates.byId[props.from],\n        toCoords: state.coordinates.byId[props.to],\n      }\n    : {};\n};\n\nconst RightUp = ({ fromCoords, toCoords, selected, onMouseDown }) => {\n  if (!fromCoords || !toCoords) {\n    return null;\n  }\n\n  const { x: xFrom, y: yFrom } = fromCoords;\n  const { x: xTo, y: yTo } = toCoords;\n\n  return (\n    <g\n      onMouseDown={onMouseDown || null}\n      className={`component ${selected ? \"red\" : \"black\"}`}\n    >\n      <path d={`M ${xFrom} ${yFrom} L ${xTo} ${yFrom}L ${xTo} ${yTo}`} />\n    </g>\n  );\n};\n\nexport const roughComponent = (rc, ctx, x0, y0, element) => {\n  const xFrom = element.fromCoords.x - x0;\n  const yFrom = element.fromCoords.y - y0;\n\n  const xTo = element.toCoords.x - x0;\n  const yTo = element.toCoords.y - y0;\n\n  rc.path(`M ${xFrom} ${yFrom} L ${xTo} ${yFrom} L ${xTo} ${yTo}`);\n};\n\nexport const drawer = () => {\n  return `-| `;\n};\n\nexport default connect(mapStateToProps)(RightUp);\n","import React from \"react\";\nimport { connect } from \"react-redux\";\nimport \"./style.scss\";\n\nconst mapStateToProps = (state, props) => {\n  return props.id\n    ? {\n        fromCoords: state.coordinates.byId[props.from],\n        toCoords: state.coordinates.byId[props.to],\n      }\n    : {};\n};\n\nexport const roughComponent = (rc, ctx, x0, y0, element) => {\n  const xFrom = element.fromCoords.x - x0;\n  const yFrom = element.fromCoords.y - y0;\n\n  const xTo = element.toCoords.x - x0;\n  const yTo = element.toCoords.y - y0;\n\n  rc.path(`M ${xFrom} ${yFrom} L ${xFrom} ${yTo}L ${xTo} ${yTo}`);\n};\n\nconst UpRight = ({ fromCoords, toCoords, selected, onMouseDown }) => {\n  if (!fromCoords || !toCoords) {\n    return null;\n  }\n\n  const { x: xFrom, y: yFrom } = fromCoords;\n  const { x: xTo, y: yTo } = toCoords;\n\n  return (\n    <g\n      onMouseDown={onMouseDown || null}\n      className={`component ${selected ? \"red\" : \"black\"}`}\n    >\n      <path d={`M ${xFrom} ${yFrom} L ${xFrom} ${yTo}L ${xTo} ${yTo}`} />\n    </g>\n  );\n};\n\nexport const drawer = () => {\n  return `|- `;\n};\n\nexport default connect(mapStateToProps)(UpRight);\n","import React from \"react\";\nimport Lampe, {\n  drawer as lampeDrawer,\n  roughComponent as lampeRoughComponent,\n} from \"./Lampe\";\nimport EmptyDiode, {\n  drawer as emptyDiodeDrawer,\n  roughComponent as emptyDiodeRoughComponent,\n} from \"./empty_diode\";\nimport PR, {\n  getAnchor as pR_getAnchor,\n  drawer as pRDrawer,\n  roughComponent as pRRoughComponent,\n  parameters as pRParameters,\n} from \"./pR\";\nimport Vcapacitor, {\n  drawer as vcapacitorDrawer,\n  roughComponent as vcapacitorRoughComponent,\n} from \"./vcapacitor\";\nimport NMOS, {\n  getAnchor as nmos_getAnchor,\n  drawer as nmosDrawer,\n  roughComponent as nmosRoughComponent,\n} from \"./nmos\";\nimport OpAmp, {\n  getAnchor as op_amp_getAnchor,\n  drawer as op_ampDrawer,\n  roughComponent as op_ampRoughComponent,\n} from \"./op_amp\";\nimport VEE, {\n  getAnchor as vee_getAnchor,\n  drawer as veeDrawer,\n  roughComponent as veeRoughComponent,\n} from \"./vee\";\nimport VCC, {\n  getAnchor as vcc_getAnchor,\n  drawer as vccDrawer,\n  roughComponent as vccRoughComponent,\n} from \"./vcc\";\nimport Ground, {\n  getAnchor as ground_getAnchor,\n  drawer as groundDrawer,\n  roughComponent as groundRoughComponent,\n} from \"./ground\";\nimport C, { drawer as cDrawer, roughComponent as cRoughComponent } from \"./C\";\nimport R, { drawer as rDrawer, roughComponent as rRoughComponent } from \"./R\";\nimport Battery1, {\n  drawer as battery1Drawer,\n  roughComponent as battery1RoughComponent,\n} from \"./battery1\";\nimport Switch, {\n  drawer as switchDrawer,\n  roughComponent as switchRoughComponent,\n  parameters as switchParameters,\n} from \"./switch\";\n\nimport Short, {\n  drawer as shortDrawer,\n  roughComponent as shortRoughComponent,\n} from \"./short\";\nimport RightUp, {\n  drawer as rightUpDrawer,\n  roughComponent as rightUpRoughComponent,\n} from \"./rightUp\";\nimport UpRight, {\n  drawer as upRightDrawer,\n  roughComponent as upRightRoughComponent,\n} from \"./upRight\";\n\nconst getAnchors = {\n  pR: (props) => pR_getAnchor(props),\n  nmos: (props) => nmos_getAnchor(props),\n  op_amp: (props) => op_amp_getAnchor(props),\n  vee: (props) => vee_getAnchor(props),\n  vcc: (props) => vcc_getAnchor(props),\n  ground: (props) => ground_getAnchor(props),\n};\n\nexport const pathOptions = {\n  pR: pRParameters,\n  switch: switchParameters,\n};\n\nconst getDrawer = {\n  short: shortDrawer,\n  rightUp: rightUpDrawer,\n  upRight: upRightDrawer,\n  lampe: lampeDrawer,\n  \"empty led\": emptyDiodeDrawer,\n  pR: pRDrawer,\n  nmos: nmosDrawer,\n  op_amp: op_ampDrawer,\n  vee: veeDrawer,\n  vcc: vccDrawer,\n  ground: groundDrawer,\n  vcapacitor: vcapacitorDrawer,\n  C: cDrawer,\n  R: rDrawer,\n  battery1: battery1Drawer,\n  switch: switchDrawer,\n};\n\nconst getRoughComponents = {\n  short: shortRoughComponent,\n  rightUp: rightUpRoughComponent,\n  upRight: upRightRoughComponent,\n  lampe: lampeRoughComponent,\n  \"empty led\": emptyDiodeRoughComponent,\n  pR: pRRoughComponent,\n  nmos: nmosRoughComponent,\n  op_amp: op_ampRoughComponent,\n  vee: veeRoughComponent,\n  vcc: vccRoughComponent,\n  ground: groundRoughComponent,\n  vcapacitor: vcapacitorRoughComponent,\n  C: cRoughComponent,\n  R: rRoughComponent,\n  battery1: battery1RoughComponent,\n  switch: switchRoughComponent,\n};\n\nexport const roughComponents = (rc, ctx, x0, y0, element) =>\n  getRoughComponents[element.type](rc, ctx, x0, y0, element);\n\nexport const getElementAnchors = (element) => {\n  return getAnchors[element.type] ? getAnchors[element.type](element) : [];\n};\n\nexport const drawElement = (element, position1, position2) => {\n  return getDrawer[element.type](element, position1, position2);\n};\n\nexport const isPath = {\n  short: true,\n  rightUp: true,\n  upRight: true,\n  lampe: true,\n  \"empty led\": true,\n  pR: true,\n  nmos: false,\n  op_amp: false,\n  vee: false,\n  vcc: false,\n  ground: false,\n  vcapacitor: true,\n  C: true,\n  R: true,\n  battery1: true,\n  switch: true,\n};\n\nexport const isMultyPole = {\n  short: false,\n  rightUp: false,\n  upRight: false,\n  lampe: false,\n  \"empty led\": false,\n  pR: false,\n  nmos: true,\n  op_amp: true,\n  vee: false,\n  vcc: false,\n  ground: false,\n  vcapacitor: false,\n  C: false,\n  R: false,\n  battery1: false,\n  switch: false,\n};\n\nconst svgComponents = {\n  short: (props) => <Short key={props.id} {...props} />,\n  rightUp: (props) => <RightUp key={props.id} {...props} />,\n  upRight: (props) => <UpRight key={props.id} {...props} />,\n  lampe: (props) => <Lampe key={props.id} {...props} />,\n  \"empty led\": (props) => <EmptyDiode key={props.id} {...props} />,\n  pR: (props) => <PR key={props.id} {...props} />,\n  nmos: (props) => <NMOS key={props.id} {...props} />,\n  op_amp: (props) => <OpAmp key={props.id} {...props} />,\n  vee: (props) => <VEE key={props.id} {...props} />,\n  vcc: (props) => <VCC key={props.id} {...props} />,\n  ground: (props) => <Ground key={props.id} {...props} />,\n  vcapacitor: (props) => <Vcapacitor key={props.id} {...props} />,\n  C: (props) => <C key={props.id} {...props} />,\n  R: (props) => <R key={props.id} {...props} />,\n  battery1: (props) => <Battery1 key={props.id} {...props} />,\n  switch: (props) => <Switch key={props.id} {...props} />,\n};\n\nexport const structure = {\n  bipoles: [\"lampe\", \"switch\", \"R\", \"C\", \"empty led\", \"vcapacitor\", \"pR\"],\n  sources: [\"battery1\"],\n  references: [\"vee\", \"vcc\", \"ground\"],\n  transistors: [\"nmos\", \"op_amp\"],\n};\n\nexport default svgComponents;\n","import { getElementAnchors, isPath } from \"components\";\n\nexport const getAdhesivePoints = (elementType) => {\n  const adhesivePoints = [];\n  if (isPath[elementType]) {\n    adhesivePoints.push({\n      type: \"ANCHOR\",\n      id: null,\n      dx: 0,\n      dy: 0,\n    });\n  }\n\n  const elementAnchors = getElementAnchors({\n    type: elementType,\n    fromCoords: { x: 0, y: 0 },\n    toCoords: { x: 0, y: 0 },\n    positionCoords: { x: 0, y: 0 },\n  });\n\n  elementAnchors.forEach(({ x, y, name }) => {\n    adhesivePoints.push({\n      type: isPath[elementType] ? \"PATH\" : \"NODE\", // TODO use constant file\n      name: name,\n      id: null,\n      dx: -x,\n      dy: -y,\n    });\n  });\n\n  return adhesivePoints;\n};\n\nexport const componentUseThisAnchor = (element, anchorId) => {\n  if (element.from && element.from === anchorId) {\n    return true;\n  }\n  if (element.to && element.to === anchorId) {\n    return true;\n  }\n  if (element.position && element.position === anchorId) {\n    return true;\n  }\n  return false;\n};\n\nexport const replaceComponentAnchor = (\n  element,\n  previousAnchorId,\n  newAnchorId\n) => {\n  const newElement = { ...element };\n  if (element.from && element.from === previousAnchorId) {\n    newElement.from = newAnchorId;\n  }\n  if (element.to && element.to === previousAnchorId) {\n    newElement.to = newAnchorId;\n  }\n  if (element.position && element.position === previousAnchorId) {\n    newElement.position = newAnchorId;\n  }\n  return { ...newElement };\n};\n\nexport const isInRectangle = ({ x, y }, { x0, y0, x1, y1 }) => {\n  return (\n    Math.abs(x - x0) + Math.abs(x - x1) <= Math.abs(x1 - x0) &&\n    Math.abs(y - y0) + Math.abs(y - y1) <= Math.abs(y1 - y0)\n  );\n};\n\nexport const isAnchor = (state, id) =>\n  id !== null && state.coordinates.allIds.includes(id);\n","import { getElementAnchors } from \"components\";\n\nimport { replaceComponentAnchor } from \"./utils\";\n\nimport { MODE_DRAG, MODE_SELECT } from \"./interactionModes\";\n\nexport const startDragging = (state, action) => {\n  const coordinatesToMove = [];\n  const adhesivePoints = [];\n\n  state.selection.forEach((selectedId) => {\n    if (state.coordinates.allIds.includes(selectedId)) {\n      if (adhesivePoints.findIndex((elem) => elem.id === selectedId) === -1) {\n        adhesivePoints.push({\n          type: \"ANCHOR\",\n          id: selectedId,\n          dx: action.x - state.coordinates.byId[selectedId].x,\n          dy: action.y - state.coordinates.byId[selectedId].y,\n        });\n      }\n    } else if (state.components.allIds.includes(selectedId)) {\n      const coordinates = getElementAnchors({\n        ...state.components.byId[selectedId],\n        fromCoords:\n          state.components.byId[selectedId].from &&\n          state.coordinates.byId[state.components.byId[selectedId].from],\n        toCoords:\n          state.components.byId[selectedId].to &&\n          state.coordinates.byId[state.components.byId[selectedId].to],\n        positionCoords:\n          state.components.byId[selectedId].position &&\n          state.coordinates.byId[state.components.byId[selectedId].position],\n      });\n\n      coordinates.forEach(({ x, y, name }) => {\n        adhesivePoints.push({\n          type: state.components.byId[selectedId].position ? \"NODE\" : \"PATH\", // TODO use constant file\n          name: name,\n          id: selectedId,\n          dx: action.x - x,\n          dy: action.y - y,\n        });\n      });\n      if (\n        state.components.byId[selectedId].from &&\n        adhesivePoints.findIndex(\n          (elem) => elem.id === state.components.byId[selectedId].from\n        ) === -1\n      ) {\n        //the from anchor is new\n        const fromId = state.components.byId[selectedId].from;\n        adhesivePoints.push({\n          type: \"ANCHOR\", // TODO use constant file\n          id: fromId,\n          dx: action.x - state.coordinates.byId[fromId].x,\n          dy: action.y - state.coordinates.byId[fromId].y,\n        });\n      }\n      if (\n        state.components.byId[selectedId].to &&\n        adhesivePoints.findIndex(\n          (elem) => elem.id === state.components.byId[selectedId].to\n        ) === -1\n      ) {\n        //the to anchor is new\n        const toId = state.components.byId[selectedId].to;\n        adhesivePoints.push({\n          type: \"ANCHOR\",\n          id: toId,\n          dx: action.x - state.coordinates.byId[toId].x,\n          dy: action.y - state.coordinates.byId[toId].y,\n        });\n      }\n    }\n  });\n\n  const pile = [...state.selection];\n  const nodeSeen = [];\n  while (pile.length > 0) {\n    const selectedId = pile.pop();\n    if (state.components.allIds.includes(selectedId)) {\n      if (\n        state.components.byId[selectedId].from &&\n        !coordinatesToMove.includes(state.components.byId[selectedId].from)\n      ) {\n        coordinatesToMove.push(state.components.byId[selectedId].from);\n      }\n      if (\n        state.components.byId[selectedId].to &&\n        !coordinatesToMove.includes(state.components.byId[selectedId].to)\n      ) {\n        coordinatesToMove.push(state.components.byId[selectedId].to);\n      }\n      if (state.components.byId[selectedId].position) {\n        if (\n          !coordinatesToMove.includes(\n            state.components.byId[selectedId].position\n          )\n        ) {\n          pile.push(state.components.byId[selectedId].position);\n        }\n        if (!nodeSeen.includes(selectedId)) {\n          nodeSeen.push(selectedId);\n          state.weakLinks.forEach(({ anchorId, nodeId }) => {\n            if (\n              nodeId === selectedId &&\n              !coordinatesToMove.includes(anchorId)\n            ) {\n              pile.push(anchorId);\n            }\n          });\n        }\n      }\n    } else {\n      if (!coordinatesToMove.includes(selectedId)) {\n        coordinatesToMove.push(selectedId);\n\n        if (state.coordinates.byId[selectedId].isNodePosition) {\n          pile.push(state.coordinates.byId[selectedId].nodeId);\n        }\n      }\n    }\n  }\n\n  return {\n    ...state,\n    mode: MODE_DRAG,\n    coordinatesToMove: [...coordinatesToMove],\n    adhesivePoints: [...adhesivePoints],\n    originalPosition: { x: action.x, y: action.y },\n    alreadyMoved: { x: 0, y: 0 },\n    weakLinksToRemove: [\n      ...state.weakLinks\n        .filter(\n          ({ anchorId, nodeId }) =>\n            coordinatesToMove.includes(anchorId) &&\n            !coordinatesToMove.includes(state.components.byId[nodeId].position)\n        )\n        .map(({ anchorId, nodeId }) => anchorId + \"-\" + nodeId),\n    ],\n  };\n};\n\nexport const stopDragging = (state, action) => {\n  if (\n    state.currentMagnet.attractor &&\n    state.currentMagnet.attracted &&\n    state.currentMagnet.attracted.type === \"ANCHOR\" &&\n    state.currentMagnet.attractor.type === \"ANCHOR\"\n  ) {\n    // we need to fusion those coordinates\n    const anchorToRemoveID = state.currentMagnet.attracted.id;\n    const anchorToUseId = state.currentMagnet.attractor.id;\n\n    // remove anchor\n    const anchorToRemoveIDIndex = state.coordinates.allIds.findIndex(\n      (id) => id === anchorToRemoveID\n    );\n    const {\n      [anchorToRemoveID]: anchorToRemove,\n      ...remainingAnchors\n    } = state.coordinates.byId;\n\n    //const update elements\n    const newByIDElements = {};\n    state.components.allIds.forEach((id) => {\n      newByIDElements[id] = replaceComponentAnchor(\n        state.components.byId[id],\n        anchorToRemoveID,\n        anchorToUseId\n      );\n    });\n\n    return {\n      ...state,\n      coordinates: {\n        byId: { ...remainingAnchors },\n        allIds: [\n          ...state.coordinates.allIds.slice(0, anchorToRemoveIDIndex),\n          ...state.coordinates.allIds.slice(anchorToRemoveIDIndex + 1),\n        ],\n      },\n      components: {\n        ...state.components,\n        byId: { ...newByIDElements },\n      },\n      mode: MODE_SELECT,\n      coordinatesToMove: [],\n      originalPosition: {},\n      alreadyMoved: {},\n      weakLinksToRemove: [],\n      weakLinks: [\n        ...state.weakLinks.filter(\n          ({ anchorId, nodeId }) =>\n            !state.weakLinksToRemove.includes(anchorId + \"-\" + nodeId)\n        ),\n      ],\n    };\n  }\n\n  if (\n    state.currentMagnet.attractor &&\n    state.currentMagnet.attracted &&\n    state.currentMagnet.attracted.type !== \"PATH\" &&\n    state.currentMagnet.attractor.type !== \"PATH\"\n  ) {\n    const newWeakLink = [];\n\n    if (\n      state.currentMagnet.attracted.type === \"NODE\" &&\n      state.currentMagnet.attractor.type === \"ANCHOR\"\n    ) {\n      const nodeId = state.currentMagnet.attracted.id;\n      const anchorId = state.currentMagnet.attractor.id;\n      const name = state.currentMagnet.attracted.name;\n      newWeakLink.push({\n        anchorId: anchorId,\n        nodeId: nodeId,\n        name: name,\n      });\n    }\n    if (\n      state.currentMagnet.attracted.type === \"ANCHOR\" &&\n      state.currentMagnet.attractor.type === \"NODE\"\n    ) {\n      const nodeId = state.currentMagnet.attractor.id;\n      const anchorId = state.currentMagnet.attracted.id;\n      const name = state.currentMagnet.attractor.name;\n      newWeakLink.push({\n        anchorId: anchorId,\n        nodeId: nodeId,\n        name: name,\n      });\n    }\n    return {\n      ...state,\n      mode: MODE_SELECT,\n      coordinatesToMove: [],\n      originalPosition: {},\n      alreadyMoved: {},\n      weakLinksToRemove: [],\n      weakLinks: [\n        ...state.weakLinks.filter(\n          ({ anchorId, nodeId }) =>\n            !state.weakLinksToRemove.includes(anchorId + \"-\" + nodeId)\n        ),\n        ...newWeakLink,\n      ],\n    };\n  }\n\n  return {\n    ...state,\n    mode: MODE_SELECT,\n    coordinatesToMove: [],\n    originalPosition: {},\n    alreadyMoved: {},\n\n    weakLinksToRemove: [],\n\n    weakLinks: [\n      ...state.weakLinks.filter(\n        ({ anchorId, nodeId }) =>\n          !state.weakLinksToRemove.includes(anchorId + \"-\" + nodeId)\n      ),\n    ],\n  };\n};\n\nexport const updatePosition = (state, action) => {\n  const { x, y, shiftPress } = action;\n  const { x: originalX, y: originalY } = state.originalPosition;\n\n  let newMoveX, newMoveY;\n  // if shift is pressed only allow to move along x or y axis\n  if (shiftPress) {\n    if (Math.abs(x - originalX) > Math.abs(y - originalY)) {\n      newMoveX = x - originalX;\n      newMoveY = 0;\n    } else {\n      newMoveX = 0;\n      newMoveY = y - originalY;\n    }\n  } else {\n    newMoveX = x - originalX;\n    newMoveY = y - originalY;\n  }\n\n  const anchorById = state.coordinates.byId;\n  state.coordinatesToMove.forEach((anchorId) => {\n    anchorById[anchorId] = {\n      ...anchorById[anchorId],\n      x: anchorById[anchorId].x + newMoveX - state.alreadyMoved.x,\n      y: anchorById[anchorId].y + newMoveY - state.alreadyMoved.y,\n    };\n  });\n\n  return {\n    ...state,\n    coordinates: {\n      ...state.coordinates,\n      byId: { ...anchorById },\n    },\n    alreadyMoved: {\n      x: newMoveX,\n      y: newMoveY,\n    },\n  };\n};\n","import { componentUseThisAnchor } from \"./utils\";\n\nconst deleteElement = (state, action) => {\n  const selection = action.selection;\n  if (\n    selection.length === 1 &&\n    state.components.allIds.includes(selection[0])\n  ) {\n    // we only consider the deletion of a component (not coordinates)\n    const componentId = selection[0];\n\n    const anchorToChange = [\"from\", \"to\", \"position\"]\n      .map((arg) => state.components.byId[componentId][arg])\n      .filter((id) => !!id);\n\n    // get the list of of ids of coordinates that are not anymore used by components\n    const anchorToRemove = anchorToChange.filter((anchorId) => {\n      return (\n        state.components.allIds.filter((elementId) =>\n          componentUseThisAnchor(state.components.byId[elementId], anchorId)\n        ).length === 1\n      );\n    });\n\n    const newAnchors = { ...state.coordinates.byId };\n    anchorToRemove.forEach((id) => delete newAnchors[id]);\n\n    const newComponents = { ...state.components.byId };\n    delete newComponents[componentId];\n    return {\n      ...state,\n      components: {\n        allIds: [...state.components.allIds.filter((id) => id !== componentId)],\n        byId: { ...newComponents },\n      },\n      coordinates: {\n        byId: { ...newAnchors },\n        allIds: [\n          ...state.coordinates.allIds.filter(\n            (id) => !anchorToRemove.includes(id)\n          ),\n        ],\n      },\n      weakLinks: [\n        ...state.weakLinks.filter(\n          ({ anchorId, nodeId, name }) =>\n            nodeId !== componentId && !anchorToRemove.includes(anchorId)\n        ),\n      ],\n    };\n  } else {\n    return state;\n  }\n};\n\nexport default deleteElement;\n","import { getAdhesivePoints, isAnchor } from \"./utils\";\nimport { default_path_options } from \"utils\";\nimport { MODE_CREATE_PATH_ELEMENT } from \"./interactionModes\";\nimport { pathOptions } from \"components\";\nimport { v4 as uuid } from \"uuid\";\n\nexport const startCreatePathElement = (state, action) => {\n  return {\n    ...state,\n    selection: [],\n    adhesivePoints: [...getAdhesivePoints(action.elementType)],\n    mode: MODE_CREATE_PATH_ELEMENT,\n    newPath: {\n      ...state.newPath,\n      elementType: action.elementType,\n      isFromValidated: false,\n    },\n  };\n};\n\nexport const validateFirstStepPathElement = (state, action) => {\n  return {\n    ...state,\n    newPath: {\n      ...state.newPath,\n      attractorFrom: state.currentMagnet.attractor && {\n        ...state.currentMagnet.attractor,\n      },\n      to: { x: null, y: null },\n      attractorTo: null,\n      isFromValidated: true,\n      movedAfterFromCreation: false,\n    },\n  };\n};\n\nexport const invalidateFirstStepPathElement = (state, action) => {\n  if (state.newPath.movedAfterFromCreation && state.newPath.isFromValidated) {\n    return {\n      ...state,\n      newPath: {\n        ...state.newPath,\n        from: { ...state.newPath.to },\n        attractorFrom: state.newPath.attractorTo && {\n          ...state.newPath.attractorTo,\n        },\n        to: { x: null, y: null },\n        attractorTo: null,\n        isFromValidated: false,\n      },\n    };\n  } else {\n    return state;\n  }\n};\n\nexport const savePathElement = (state, action) => {\n  const attractorTo = state.currentMagnet.attractor && {\n    ...state.currentMagnet.attractor,\n  };\n  const { attractorFrom, from, to, elementType } = state.newPath;\n\n  const newId_element = uuid();\n\n  const fromAnchor =\n    attractorFrom && attractorFrom.type === \"ANCHOR\"\n      ? attractorFrom.id\n      : uuid();\n  const toAnchor =\n    attractorTo && attractorTo.type === \"ANCHOR\" ? attractorTo.id : uuid();\n\n  // create coordinates if necessary\n  let newAnchors = { ...state.coordinates };\n  if (!attractorFrom || attractorFrom.type !== \"ANCHOR\") {\n    newAnchors = {\n      byId: {\n        ...newAnchors.byId,\n        [fromAnchor]: {\n          id: fromAnchor,\n          x: from.x,\n          y: from.y,\n          shape: \"\",\n        },\n      },\n      allIds: [...newAnchors.allIds, fromAnchor],\n    };\n  }\n  if (!attractorTo || attractorTo.type !== \"ANCHOR\") {\n    newAnchors = {\n      byId: {\n        ...newAnchors.byId,\n        [toAnchor]: {\n          id: toAnchor,\n          x: to.x,\n          y: to.y,\n          shape: \"\",\n        },\n      },\n      allIds: [...newAnchors.allIds, toAnchor],\n    };\n  }\n\n  // create weak links if necessary\n  const newWeakLinks = [];\n  if (attractorFrom && attractorFrom.type === \"NODE\") {\n    newWeakLinks.push({\n      anchorId: fromAnchor,\n      nodeId: attractorFrom.id,\n      name: attractorFrom.name,\n    });\n  }\n  if (attractorTo && attractorTo.type === \"NODE\") {\n    newWeakLinks.push({\n      anchorId: toAnchor,\n      nodeId: attractorTo.id,\n      name: attractorTo.name,\n    });\n  }\n\n  return {\n    ...state,\n    currentMagnet: {\n      ...state.currentMagnet,\n      attractor: {\n        type: \"ANCHOR\",\n        id: toAnchor,\n      },\n    },\n    newPath: {\n      ...state.newPath,\n      isFromValidated: false,\n      from: {\n        ...to,\n      },\n      to: {\n        x: null,\n        y: null,\n      },\n    },\n    components: {\n      byId: {\n        ...state.components.byId,\n        [newId_element]: {\n          id: newId_element,\n          from: fromAnchor,\n          to: toAnchor,\n          type: elementType,\n          ...(pathOptions[elementType]\n            ? pathOptions[elementType]\n            : default_path_options),\n        },\n      },\n      allIds: [...state.components.allIds, newId_element],\n    },\n    coordinates: { ...newAnchors },\n    weakLinks: [...state.weakLinks, ...newWeakLinks],\n  };\n};\n\nexport const updatePosition = (state, action) => {\n  const { x, y, shiftPress } = action;\n\n  if (state.newPath.isFromValidated) {\n    if (shiftPress) {\n      const { x: xFrom, y: yFrom } = state.newPath.from;\n      if (Math.abs(x - xFrom) > Math.abs(y - yFrom)) {\n        return {\n          ...state,\n          newPath: {\n            ...state.newPath,\n            to: { x: x, y: yFrom },\n            movedAfterFromCreation: true,\n          },\n        };\n      } else {\n        return {\n          ...state,\n          newPath: {\n            ...state.newPath,\n            to: { x: xFrom, y: y },\n            movedAfterFromCreation: true,\n          },\n        };\n      }\n    }\n    return {\n      ...state,\n      newPath: {\n        ...state.newPath,\n        to: { x: x, y: y },\n        movedAfterFromCreation: true,\n      },\n    };\n  } else {\n    return {\n      ...state,\n      newPath: {\n        ...state.newPath,\n        from: { x: x, y: y },\n      },\n    };\n  }\n};\n","import { isInRectangle } from \"./utils\";\n\nimport { MODE_SELECT, MODE_RECTANGLE_SELECTION } from \"./interactionModes\";\n\nexport const updatePosition = (state, action) => {\n  const { x, y } = action;\n  const newRectangle = {\n    ...state.rectangleSelection,\n    x1: x,\n    y1: y,\n  };\n\n  return {\n    ...state,\n    selection: [\n      ...state.coordinates.allIds.filter((id) =>\n        isInRectangle(state.coordinates.byId[id], newRectangle)\n      ),\n    ],\n    rectangleSelection: {\n      ...state.rectangleSelection,\n      x1: x,\n      y1: y,\n    },\n  };\n};\n\nexport const stopRectangleSelection = (state, action) => {\n  // add equality verification, if rectangle has no area it's probably a single click\n  // so we reset the selection\n  return {\n    ...state,\n    mode: MODE_SELECT,\n    rectangleSelection: {},\n    selection:\n      state.rectangleSelection.x0 === state.rectangleSelection.x1 ||\n      state.rectangleSelection.y0 === state.rectangleSelection.y1\n        ? []\n        : [...state.selection],\n  };\n};\n\nexport const startRectangleSelection = (state, action) => {\n  return {\n    ...state,\n    mode: MODE_RECTANGLE_SELECTION,\n    rectangleSelection: {\n      x0: action.x,\n      y0: action.y,\n      x1: action.x,\n      y1: action.y,\n    },\n  };\n};\n","import { MODE_CREATE_NODE_ELEMENT } from \"./interactionModes\";\n\nimport { getAdhesivePoints } from \"./utils\";\nimport { getElementAnchors, isMultyPole } from \"components\";\n\nimport { v4 as uuid } from \"uuid\";\n\nexport const updatePosition = (state, action) => {\n  const { x, y } = action;\n  return {\n    ...state,\n    newNode: {\n      ...state.newNode,\n      position: { x: x, y: y },\n    },\n  };\n};\n\nexport const startNodeCreation = (state, action) => {\n  return {\n    ...state,\n    selection: [],\n    adhesivePoints: [...getAdhesivePoints(action.elementType)],\n    mode: MODE_CREATE_NODE_ELEMENT,\n    newNode: {\n      elementType: action.elementType,\n      position: { x: null, y: null },\n      anchorsDelta: getElementAnchors({\n        type: action.elementType,\n        positionCoords: { x: 0, y: 0 },\n      }).map(({ x, y }) => ({ dx: -x, dy: -y })),\n    },\n  };\n};\n\nexport const saveNodeCreation = (state, action) => {\n  if (\n    state.mode === MODE_CREATE_NODE_ELEMENT &&\n    state.newNode.position.x !== null &&\n    state.newNode.position.y !== null\n  ) {\n    const newId_element = uuid();\n    const positionId = uuid();\n\n    return {\n      ...state,\n      newNode: {\n        ...state.newNode,\n        position: { x: null, y: null },\n      },\n      components: {\n        byId: {\n          ...state.components.byId,\n          [newId_element]: {\n            id: newId_element,\n            position: positionId,\n            type: state.newNode.elementType,\n            angle: 0,\n          },\n        },\n        allIds: [...state.components.allIds, newId_element],\n      },\n      coordinates: {\n        ...state.coordinates,\n        byId: {\n          ...state.coordinates.byId,\n          [positionId]: {\n            id: positionId,\n            x: state.newNode.position.x,\n            y: state.newNode.position.y,\n            isNodePosition: true,\n            nodeId: newId_element,\n          },\n        },\n      },\n    };\n  }\n  return state;\n};\n\nconst newPositions = (coordinates, toUpdate, deltaToAdd) => {\n  // this function update coordinates by a delta\n  const newAnchors = { ...coordinates };\n\n  toUpdate.forEach(({ anchorId, anchorName }) => {\n    newAnchors[anchorId] = {\n      ...newAnchors[anchorId],\n      x: newAnchors[anchorId].x + deltaToAdd[anchorName].dx,\n      y: newAnchors[anchorId].y + deltaToAdd[anchorName].dy,\n    };\n  });\n\n  return { ...newAnchors };\n};\n\nexport const rotateNode = (state, { id, value }) => {\n  // we prepare data for the update\n  // first we get coordinate of coordinates before and after rotation\n  const element = state.components.byId[id];\n\n  const positionCoords = state.coordinates.byId[element.position];\n  const prevAngle = element.angle;\n  const newAngle = value;\n\n  const prevAnchors = getElementAnchors({\n    ...element,\n    positionCoords: positionCoords,\n    angle: prevAngle,\n  });\n  const newAnchors = getElementAnchors({\n    ...element,\n    positionCoords: positionCoords,\n    angle: newAngle,\n  });\n\n  // Now we create a dictionary that for an anchor name return dx and dy the delta modification of the anchor\n  const deltaToAdd = {};\n  newAnchors.forEach(({ name, x, y }) => {\n    deltaToAdd[name] = { dx: x, dy: y };\n  });\n  prevAnchors.forEach(({ name, x, y }) => {\n    deltaToAdd[name].dx -= x;\n    deltaToAdd[name].dy -= y;\n  });\n\n  if (\n    state.rotationHelper &&\n    state.rotationHelper.id &&\n    state.rotationHelper.id === id\n  ) {\n    // the id is the same as before So we just need to do the update of coordinates\n\n    return {\n      ...state,\n      coordinates: {\n        ...state.coordinates,\n        byId: {\n          ...newPositions(\n            state.coordinates.byId,\n            state.rotationHelper.IdToUpdate,\n            deltaToAdd\n          ),\n        },\n      },\n      components: {\n        ...state.components,\n        byId: {\n          ...state.components.byId,\n          [id]: {\n            ...state.components.byId[id],\n            angle: newAngle,\n          },\n        },\n      },\n    };\n  } else {\n    const IdToUpdate = [];\n\n    // we will parse weakLinks to know what to update and what to remove\n    state.weakLinks.forEach(({ anchorId, nodeId, name }) => {\n      if (nodeId === id) {\n        // if child is path of mono pole\n        IdToUpdate.push({ anchorId, anchorName: name });\n      }\n    });\n\n    return {\n      ...state,\n      coordinates: {\n        ...state.coordinates,\n        byId: {\n          ...newPositions(state.coordinates.byId, IdToUpdate, deltaToAdd),\n        },\n      },\n      components: {\n        ...state.components,\n        byId: {\n          ...state.components.byId,\n          [id]: {\n            ...state.components.byId[id],\n            angle: newAngle,\n          },\n        },\n      },\n      rotationHelper: {\n        IdToUpdate: IdToUpdate,\n        id: id,\n      },\n    };\n  }\n};\n","import { componentUseThisAnchor, replaceComponentAnchor } from \"./utils\";\n\nimport { v4 as uuid } from \"uuid\";\n\nexport const stackAnchors = (state, action) => {\n  const coordinatesSelected = state.selection.filter(\n    (id) => id in state.coordinates.byId\n  );\n  const movedAnchors = [];\n  if (\n    coordinatesSelected.length <= 1 ||\n    ![\"U\", \"D\", \"L\", \"R\"].includes(action.direction)\n  ) {\n    return state;\n  } else {\n    const newPosition = {};\n\n    // We start by looping on selected element to find the min/max along x/y depending on the letter\n    coordinatesSelected.forEach((id, index) => {\n      const anchor = state.coordinates.byId[id];\n\n      switch (action.direction) {\n        case \"U\":\n          newPosition.y =\n            index === 0 ? anchor.y : Math.min(newPosition.y, anchor.y);\n          break;\n        case \"D\":\n          newPosition.y =\n            index === 0 ? anchor.y : Math.max(newPosition.y, anchor.y);\n          break;\n        case \"L\":\n          newPosition.x =\n            index === 0 ? anchor.x : Math.min(newPosition.x, anchor.x);\n          break;\n        case \"R\":\n          newPosition.x =\n            index === 0 ? anchor.x : Math.max(newPosition.x, anchor.x);\n          break;\n        default:\n          break;\n      }\n    });\n\n    // now we now the new x/y we change those positions\n    coordinatesSelected.forEach((id) => {\n      const anchor = state.coordinates.byId[id];\n\n      //  if the position is modified we just break all the weak lins associated\n      if (\n        (newPosition.x !== undefined && newPosition.x !== anchor.x) ||\n        (newPosition.y !== undefined && newPosition.y !== anchor.y)\n      ) {\n        movedAnchors.push(id);\n      }\n\n      state.coordinates.byId[id] = {\n        ...anchor,\n        ...newPosition,\n      };\n    });\n\n    return {\n      ...state,\n      coordinates: {\n        ...state.coordinates,\n        byId: { ...state.coordinates.byId },\n      },\n      weakLinks: [\n        ...state.weakLinks.filter(\n          ({ anchorId }) => !movedAnchors.includes(anchorId)\n        ),\n      ],\n    };\n  }\n};\n\nexport const splitAnchor = (state, action) => {\n  let anchorId = action.anchorId;\n  if (\n    !anchorId &&\n    state.selection.length === 1 &&\n    state.coordinates.allIds.includes(state.selection[0])\n  ) {\n    anchorId = state.selection[0];\n  }\n  if (anchorId && state.coordinates.allIds.includes(anchorId)) {\n    const componentsToChange = state.components.allIds.filter((id) =>\n      componentUseThisAnchor(state.components.byId[id], anchorId)\n    );\n    if (componentsToChange.length <= 1) {\n      return state;\n    }\n\n    const newAnchors = state.coordinates;\n    const newComponents = state.components.byId;\n    const newWeakLinks = [];\n    const weakLinksToCopy = state.weakLinks.filter(\n      ({ anchorId: linkedAnchorId }) => anchorId === linkedAnchorId\n    );\n\n    componentsToChange.slice(1).forEach((componentId) => {\n      const newAnchorId = uuid();\n\n      newComponents[componentId] = replaceComponentAnchor(\n        state.components.byId[componentId],\n        anchorId,\n        newAnchorId\n      );\n\n      newAnchors.allIds = [newAnchorId, ...newAnchors.allIds];\n      newAnchors.byId = {\n        ...newAnchors.byId,\n        [newAnchorId]: { ...newAnchors.byId[anchorId] },\n      };\n\n      weakLinksToCopy.forEach((linkToCopy) => {\n        newWeakLinks.push({ ...linkToCopy, anchorId: newAnchorId });\n      });\n    });\n\n    return {\n      ...state,\n      components: {\n        ...state.components,\n        byId: { ...newComponents },\n      },\n      coordinates: {\n        allIds: [...newAnchors.allIds],\n        byId: { ...newAnchors.byId },\n      },\n      weakLinks: [...state.weakLinks, ...newWeakLinks],\n    };\n  }\n  return state;\n};\n","import { createStore } from \"redux\";\n\nimport reducer_displayOptions from \"./displayOptions\";\nimport reducer_magnetsOptions from \"./magnetsOptions\";\n\nimport {\n  START_DRAGGING,\n  START_SELECT,\n  TOGGLE_SELECTION,\n  STOP_DRAGGING,\n  START_CREATE_PATH_ELEMENT,\n  START_CREATE_NODE_ELEMENT,\n  ELEMENT_CREATION_NEXT_STEP,\n  VALIDATE_FIRST_STEP_PATH_ELEMENT_CREATION,\n  INVALIDATE_FIRST_STEP_PATH_ELEMENT_CREATION,\n  SAVE_PATH_ELEMENT_CREATION,\n  UPDATE_POSITION,\n  SPLIT_ANCHOR,\n  START_RECTANGLE_SELECTION,\n  STOP_RECTANGLE_SELECTION,\n  STACK_SELECTED_ANCHORS,\n  DELETE_ELEMENT,\n  UPDATE_COMPONENT,\n} from \"redux/actions\";\n\nimport {\n  MODE_SELECT,\n  MODE_DRAG,\n  MODE_CREATE_PATH_ELEMENT,\n  MODE_CREATE_NODE_ELEMENT,\n  MODE_RECTANGLE_SELECTION,\n} from \"./interactionModes\";\n\nimport { initial_state } from \"./debugInitialState\";\n\nimport {\n  startDragging,\n  stopDragging,\n  updatePosition as draggingUpdatePosition,\n} from \"./dragging\";\n\nimport deleteElement from \"./delete\";\nimport {\n  startCreatePathElement,\n  validateFirstStepPathElement,\n  invalidateFirstStepPathElement,\n  savePathElement,\n  updatePosition as pathCreationUpdatePosition,\n} from \"./pathCreation\";\n\nimport {\n  stopRectangleSelection,\n  startRectangleSelection,\n  updatePosition as rectangleSelectionUpdatePosition,\n} from \"./rectangleSelection\";\n\nimport {\n  startNodeCreation,\n  saveNodeCreation,\n  updatePosition as nodeCreationUpdatePosition,\n  rotateNode,\n} from \"./nodeCreation\";\n\nimport { stackAnchors, splitAnchor } from \"./anchorHelper\";\nimport { MULTIPLICATIVE_CONST } from \"utils\";\n\nfunction update(state = initial_state, action) {\n  state = { ...reducer_displayOptions(state, action) };\n  state = { ...reducer_magnetsOptions(state, action) };\n\n  switch (action.type) {\n    case UPDATE_COMPONENT:\n      const { id, name, value } = action;\n      if (state.components.allIds.includes(id)) {\n        if (name === \"angle\") {\n          return rotateNode(state, action);\n        }\n        return {\n          ...state,\n          components: {\n            ...state.components,\n            byId: {\n              ...state.components.byId,\n              [id]: {\n                ...state.components.byId[id],\n                [name]: value,\n              },\n            },\n          },\n        };\n      }\n      if (state.coordinates.allIds.includes(id)) {\n        return {\n          ...state,\n          coordinates: {\n            ...state.coordinates,\n            byId: {\n              ...state.coordinates.byId,\n              [id]: {\n                ...state.coordinates.byId[id],\n                [name]: value,\n              },\n            },\n          },\n        };\n      }\n      return state;\n    case TOGGLE_SELECTION:\n      if (action.reset) {\n        return {\n          ...state,\n          selection: [action.objectId],\n        };\n      } else {\n        const index = state.selection.findIndex((x) => x === action.objectId);\n        if (index >= 0) {\n          return {\n            ...state,\n            selection: [\n              ...state.selection.slice(0, index),\n              ...state.selection.slice(index + 1),\n            ],\n          };\n        } else {\n          return {\n            ...state,\n            selection: [...state.selection, action.objectId],\n          };\n        }\n      }\n    case START_SELECT:\n      return {\n        ...state,\n        selection: [],\n        adhesivePoints: [],\n        mode: MODE_SELECT,\n      };\n\n    case START_DRAGGING:\n      return startDragging(state, action);\n\n    case STOP_DRAGGING:\n      return stopDragging(state, action);\n\n    case UPDATE_POSITION:\n      const { attractor, attracted } = action;\n\n      if (attractor === null && state.magnetsOptions.isGridAttracting) {\n        // if not already attracted by someone check the grid attraction\n\n        const { x, y } = action;\n\n        const refSpace = MULTIPLICATIVE_CONST * state.magnetsOptions.gridSpace;\n\n        if (state.mode === MODE_CREATE_PATH_ELEMENT) {\n          const modX = Math.abs(x) % refSpace;\n          const modY = Math.abs(y) % refSpace;\n\n          const R = 10;\n          if (\n            (modX <= R || modX >= refSpace - R) &&\n            (modY <= R || modY >= refSpace - R)\n          ) {\n            action.x = refSpace * Math.round(x / refSpace);\n            action.y = refSpace * Math.round(y / refSpace);\n          }\n        } else if (\n          state.mode === MODE_DRAG ||\n          state.mode === MODE_CREATE_NODE_ELEMENT\n        ) {\n          const adhesivePoints =\n            state.mode === MODE_DRAG\n              ? state.adhesivePoints\n              : state.newNode.anchorsDelta;\n\n          adhesivePoints.forEach(({ dx, dy }) => {\n            const xToTest = x - dx;\n            const yToTest = y - dy;\n\n            const modX = Math.abs(xToTest) % refSpace;\n            const modY = Math.abs(yToTest) % refSpace;\n\n            const R = 10;\n            if (\n              (modX <= R || modX >= refSpace - R) &&\n              (modY <= R || modY >= refSpace - R)\n            ) {\n              action.x =\n                x - (xToTest - refSpace * Math.round(xToTest / refSpace));\n              action.y =\n                y - (yToTest - refSpace * Math.round(yToTest / refSpace));\n            }\n          });\n        }\n      }\n      switch (state.mode) {\n        case MODE_DRAG:\n          return {\n            ...draggingUpdatePosition(state, action),\n            currentMagnet: { attractor, attracted },\n          };\n\n        case MODE_CREATE_PATH_ELEMENT:\n          return {\n            ...pathCreationUpdatePosition(state, action),\n            currentMagnet: { attractor, attracted },\n          };\n\n        case MODE_CREATE_NODE_ELEMENT:\n          return {\n            ...nodeCreationUpdatePosition(state, action),\n            currentMagnet: { attractor, attracted },\n          };\n\n        case MODE_RECTANGLE_SELECTION:\n          return {\n            ...rectangleSelectionUpdatePosition(state, action),\n            currentMagnet: { attractor, attracted },\n          };\n\n        default:\n          return {\n            ...state,\n            currentMagnet: { attractor, attracted },\n          };\n      }\n\n    case START_CREATE_PATH_ELEMENT:\n      return startCreatePathElement(state, action);\n\n    case START_CREATE_NODE_ELEMENT:\n      return startNodeCreation(state, action);\n\n    case ELEMENT_CREATION_NEXT_STEP:\n      return saveNodeCreation(state, action);\n\n    case VALIDATE_FIRST_STEP_PATH_ELEMENT_CREATION:\n      return validateFirstStepPathElement(state, action);\n\n    case INVALIDATE_FIRST_STEP_PATH_ELEMENT_CREATION:\n      return invalidateFirstStepPathElement(state, action);\n\n    case SAVE_PATH_ELEMENT_CREATION:\n      return savePathElement(state, action);\n\n    case SPLIT_ANCHOR:\n      return splitAnchor(state, action);\n\n    case START_RECTANGLE_SELECTION:\n      return startRectangleSelection(state, action);\n\n    case STOP_RECTANGLE_SELECTION:\n      return stopRectangleSelection(state, action);\n\n    case STACK_SELECTED_ANCHORS:\n      return stackAnchors(state, action);\n\n    case DELETE_ELEMENT:\n      return deleteElement(state, action);\n\n    default:\n      return state;\n  }\n}\n\n// Create a Redux store holding the state of your app.\n// Its API is { subscribe, dispatch, getState }.\nlet store = createStore(update);\n\nexport default store;\n","import React, { forwardRef } from \"react\";\n\nimport \"./style.scss\";\nimport { connect } from \"react-redux\";\nimport { MODE_SELECT } from \"redux/store/interactionModes\";\nimport { toggleSelection, startDragging } from \"redux/actions\";\n\nconst mapDispatchToProps = (dispatch, { svgRef, displayOptions }) => {\n  return {\n    toggleSelection: (objectId, reset) =>\n      dispatch(toggleSelection(objectId, reset)),\n    startDragging: (x, y) => {\n      const {\n        x: xOffset,\n        y: yOffset,\n        width: svgWidth,\n        height: svgHeight,\n      } = svgRef.current.getBoundingClientRect();\n      const {\n        x: SVG_X,\n        y: SVG_Y,\n        width: SVG_WIDTH,\n        height: SVG_HEIGHT,\n      } = displayOptions;\n\n      dispatch(\n        startDragging(\n          SVG_X + (x - xOffset) * (SVG_WIDTH / svgWidth),\n          SVG_Y + (y - yOffset) * (SVG_HEIGHT / svgHeight)\n        )\n      );\n    },\n  };\n};\nconst mapStateToProps = (state, { id }) => {\n  return {\n    x: state.coordinates.byId[id].x,\n    y: state.coordinates.byId[id].y,\n    shape: state.coordinates.byId[id].shape,\n    mode: state.mode,\n    selected: state.selection.includes(id),\n  };\n};\n\nconst Anchor = ({\n  id,\n  x,\n  y,\n  shape,\n  mode,\n  selected,\n  startDragging,\n  toggleSelection,\n}) => {\n  switch (shape) {\n    case \"d\":\n      return (\n        <path\n          d={`M ${x - 5} ${y} L ${x} ${y - 5} L ${x + 5} ${y} L ${x} ${\n            y + 5\n          } Z`}\n          className={`anchor full ${selected ? \"selected\" : \"\"} `}\n          onMouseDown={\n            mode === MODE_SELECT\n              ? (event) => {\n                  event.stopPropagation();\n                  if (!event.ctrlKey && selected) {\n                    startDragging(\n                      event.nativeEvent.clientX,\n                      event.nativeEvent.clientY\n                    );\n                  } else {\n                    toggleSelection(id, !event.ctrlKey);\n                  }\n                }\n              : null\n          }\n        />\n      );\n\n    default:\n      return (\n        <circle\n          cx={x}\n          cy={y}\n          r={5}\n          className={`anchor ${selected ? \"selected\" : \"\"} ${\n            shape === \"o\" ? \" empty\" : \"\"\n          }${shape === \"*\" ? \" full\" : \"\"}`}\n          onMouseDown={\n            mode === MODE_SELECT\n              ? (event) => {\n                  event.stopPropagation();\n                  if (!event.ctrlKey && selected) {\n                    startDragging(\n                      event.nativeEvent.clientX,\n                      event.nativeEvent.clientY\n                    );\n                  } else {\n                    toggleSelection(id, !event.ctrlKey);\n                  }\n                }\n              : null\n          }\n        />\n      );\n  }\n};\n\nexport const roughCoordinate = (rc, ctx, x0, y0, { x, y, shape }) => {\n  if (shape === \"o\") {\n    rc.circle(x - x0, y - y0, 10, {\n      fill: \"white\",\n      fillStyle: \"solid\",\n      roughness: 0.5,\n    });\n  }\n  if (shape === \"*\") {\n    rc.circle(x - x0, y - y0, 10, {\n      fill: \"black\",\n      fillStyle: \"solid\",\n      roughness: 0.5,\n    });\n  }\n  if (shape === \"d\") {\n    rc.path(\n      `M ${x - x0 - 5} ${y - y0}\n      L ${x - x0} ${y - y0 - 5}\n      L ${x - x0 + 5} ${y - y0}\n      L ${x - x0} ${y - y0 + 5}\n      Z`,\n      { fill: \"black\", fillStyle: \"solid\", roughness: 0.5 }\n    );\n  }\n};\nconst ConnectedAnchor = connect(mapStateToProps, mapDispatchToProps)(Anchor);\n\nexport default forwardRef((props, ref) => (\n  <ConnectedAnchor {...props} svgRef={ref} />\n));\n","import React, { useRef, useState, useEffect } from \"react\";\nimport rough from \"roughjs/bundled/rough.esm.js\";\n\nimport { roughComponents } from \"components\";\nimport { roughCoordinate } from \"atoms/anchor\";\n\nimport { connect } from \"react-redux\";\n\nimport Button from \"@material-ui/core/Button\";\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\nimport DialogContent from \"@material-ui/core/DialogContent\";\nimport DialogActions from \"@material-ui/core/DialogActions\";\nimport Slider from \"@material-ui/core/Slider\";\nimport Typography from \"@material-ui/core/Typography\";\n\nimport AutorenewIcon from \"@material-ui/icons/Autorenew\";\n\nconst mapStateToProps = (state) => {\n  return {\n    components: state.components,\n    coordinates: state.coordinates,\n  };\n};\n\nconst margin = 50;\nconst RoughDrawing = ({ components, coordinates }) => {\n  const canvasRef = useRef();\n  const [width, setWidth] = useState(0);\n  const [height, setHeight] = useState(0);\n  const [seed, setSeed] = useState(1);\n  const [roughness, setRoughness] = useState(1);\n\n  const [canvasURL, setCanvasURL] = useState();\n\n  useEffect(() => {\n    const svgBBox = document.getElementById(\"drawingArea\").getBBox();\n    setWidth(svgBBox.width);\n    setHeight(svgBBox.height);\n\n    // const rc = rough.canvas(canvasRef.current);\n    const rc = rough.canvas(document.getElementById(\"rough-canvas\"), {\n      options: { seed: seed, roughness: roughness, curveFitting: 1 },\n    });\n    const ctx = document.getElementById(\"rough-canvas\").getContext(\"2d\");\n\n    ctx.font = \"0.7cm IndieFlower\";\n\n    ctx.fillStyle = \"white\";\n    ctx.fillRect(0, 0, width + 2 * margin, height + 2 * margin);\n    ctx.fillStyle = \"black\";\n\n    components.allIds.forEach((id) => {\n      const element = components.byId[id];\n      element.positionCoords = element.position\n        ? coordinates.byId[element.position]\n        : undefined;\n      element.fromCoords = element.from\n        ? coordinates.byId[element.from]\n        : undefined;\n      element.toCoords = element.to ? coordinates.byId[element.to] : undefined;\n\n      roughComponents(rc, ctx, svgBBox.x - margin, svgBBox.y - margin, element);\n    });\n\n    coordinates.allIds.forEach((id) => {\n      const element = coordinates.byId[id];\n      roughCoordinate(rc, ctx, svgBBox.x - margin, svgBBox.y - margin, element);\n    });\n  }, [width, height, components, coordinates, seed, roughness]);\n\n  useEffect(() => {\n    setCanvasURL(\n      canvasRef.current\n        .toDataURL(\"image/jpg\")\n        .replace(\"image/png\", \"image/octet-stream\")\n    );\n  }, [canvasRef.current]);\n\n  const generateNewDrawing = () => setSeed(seed + 1);\n  return (\n    <>\n      <DialogTitle>Image Generator</DialogTitle>\n      <DialogContent>\n        <canvas\n          id=\"rough-canvas\"\n          ref={canvasRef}\n          width={width + 2 * margin}\n          height={height + 2 * margin}\n        />\n      </DialogContent>\n      <DialogActions>\n        <div>\n          <Typography id=\"roughness-slider\" gutterBottom>\n            Roughness\n          </Typography>\n          <Slider\n            value={roughness}\n            onChange={(event, newValue) => setRoughness(newValue)}\n            aria-labelledby=\"roughness-slider\"\n            min={0}\n            max={5}\n            step={0.1}\n          />\n        </div>\n        <Button onClick={generateNewDrawing} variant=\"outlined\">\n          <AutorenewIcon />\n        </Button>\n        <Button\n          href={canvasURL}\n          download=\"circuit.png\"\n          variant=\"contained\"\n          color=\"primary\"\n        >\n          Download\n        </Button>\n      </DialogActions>\n    </>\n  );\n};\nexport default connect(mapStateToProps)(RoughDrawing);\n","import React from \"react\";\nimport { connect } from \"react-redux\";\n\nimport {\n  setZoom,\n  setModeMovePaper,\n  startSelect,\n  stackSelectedAnchors,\n  updateMagnetOption,\n  startCreatePathElement,\n} from \"redux/actions\";\nimport { MODE_MOVE_PAPER } from \"redux/store/interactionModes\";\n\nimport SvgIcon from \"@material-ui/core/SvgIcon\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport Select from \"@material-ui/core/Select\";\nimport MenuItem from \"@material-ui/core/MenuItem\";\n\nimport ControlCameraIcon from \"@material-ui/icons/ControlCamera\";\nimport ZoomInIcon from \"@material-ui/icons/ZoomIn\";\nimport ZoomOutIcon from \"@material-ui/icons/ZoomOut\";\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n    startCreatePathElement: (name) => dispatch(startCreatePathElement(name)),\n    setZoom: (zoom) => dispatch(setZoom(zoom)),\n    setModeMovePaper: () => dispatch(setModeMovePaper()),\n    startSelect: () => dispatch(startSelect()),\n    stackSelectedAnchors: (direction) =>\n      dispatch(stackSelectedAnchors(direction)),\n    updateMagnetOption: (optionName, optionValue = null) =>\n      dispatch(updateMagnetOption(optionName, optionValue)),\n  };\n};\nconst mapStateToProps = (state) => {\n  return {\n    mode: state.mode,\n    zoom: state.displayOptions.zoom,\n    magnetsOptions: state.magnetsOptions,\n  };\n};\n\nconst ToolBar = ({\n  mode,\n  zoom,\n  magnetsOptions,\n  startCreatePathElement,\n  setZoom,\n  setModeMovePaper,\n  startSelect,\n  stackSelectedAnchors,\n  updateMagnetOption,\n}) => {\n  return (\n    <div\n      style={{\n        position: \"sticky\",\n        top: \"64px\",\n        padding: \"8px 2px\",\n        backgroundColor: \"#fafafa\",\n      }}\n    >\n      {/* TODO create a clean toolbar */}\n      <IconButton\n        onMouseDown={(event) => {\n          startCreatePathElement(\"short\");\n          event.stopPropagation();\n        }}\n      >\n        <SvgIcon>\n          <circle cx=\"4\" cy=\"20\" r=\"2\" />\n          <circle cx=\"20\" cy=\"4\" r=\"2\" />\n          <path d=\"M 19.5,3.5 3.5,19.5 l 1,1 L 20.5,4.5 Z\" />\n        </SvgIcon>\n      </IconButton>\n      <IconButton\n        onMouseDown={(event) => {\n          startCreatePathElement(\"upRight\");\n          event.stopPropagation();\n        }}\n      >\n        <SvgIcon>\n          <circle cx=\"4\" cy=\"20\" r=\"2\" />\n          <circle cx=\"20\" cy=\"4\" r=\"2\" />\n          <path d=\"M 20,3.5 H 3.5 V 20 h 1 V 4.5 H 20 Z\" />\n        </SvgIcon>\n      </IconButton>\n      <IconButton\n        onMouseDown={(event) => {\n          startCreatePathElement(\"rightUp\");\n          event.stopPropagation();\n        }}\n      >\n        <SvgIcon>\n          <circle cx=\"4\" cy=\"20\" r=\"2\" />\n          <circle cx=\"20\" cy=\"4\" r=\"2\" />\n          <path d=\"M 5,20.5 20.5,20.5 l 0,-16.5 h -1 L 19.5,19.5 l -15.5,0 z\" />\n        </SvgIcon>\n      </IconButton>\n      |\n      <IconButton\n        color={mode === MODE_MOVE_PAPER ? \"secondary\" : \"default\"}\n        onMouseDown={(event) => {\n          event.stopPropagation();\n          if (mode === MODE_MOVE_PAPER) {\n            startSelect();\n          } else {\n            setModeMovePaper();\n          }\n        }}\n      >\n        <ControlCameraIcon />\n      </IconButton>\n      <IconButton\n        disabled={zoom < 0.2}\n        onMouseDown={(event) => {\n          event.stopPropagation();\n          setZoom(zoom / 2);\n        }}\n      >\n        <ZoomOutIcon />\n      </IconButton>\n      {zoom}\n      <IconButton\n        disabled={zoom > 2}\n        onMouseDown={(event) => {\n          event.stopPropagation();\n          setZoom(zoom * 2);\n        }}\n      >\n        <ZoomInIcon />\n      </IconButton>\n      |\n      <IconButton\n        onMouseDown={(event) => {\n          event.stopPropagation();\n          stackSelectedAnchors(\"L\");\n        }}\n      >\n        <SvgIcon>\n          <path d=\"M22 13V19H6V13H22M6 5V11H16V5H6M2 2V22H4V2H2\" />\n        </SvgIcon>\n      </IconButton>\n      <IconButton\n        onMouseDown={(event) => {\n          event.stopPropagation();\n          stackSelectedAnchors(\"R\");\n        }}\n      >\n        <SvgIcon>\n          <path d=\"M18 13V19H2V13H18M8 5V11H18V5H8M20 2V22H22V2H20Z\" />\n        </SvgIcon>\n      </IconButton>\n      <IconButton\n        onMouseDown={(event) => {\n          event.stopPropagation();\n          stackSelectedAnchors(\"U\");\n        }}\n      >\n        <SvgIcon>\n          <path d=\"M11 22H5V6H11V22M19 6H13V16H19V6M22 2H2V4H22V2Z\" />\n        </SvgIcon>\n      </IconButton>\n      <IconButton\n        onMouseDown={(event) => {\n          event.stopPropagation();\n          stackSelectedAnchors(\"D\");\n        }}\n      >\n        <SvgIcon>\n          <path d=\"M11 18H5V2H11V18M19 8H13V18H19V8M22 20H2V22H22V20Z\" />\n        </SvgIcon>\n      </IconButton>\n      |\n      <IconButton\n        color={magnetsOptions.isGridAttracting ? \"secondary\" : \"default\"}\n        onMouseDown={(event) => {\n          event.stopPropagation();\n          updateMagnetOption(\"isGridAttracting\");\n        }}\n      >\n        <SvgIcon>\n          <path d=\"M0 6v1h24v-1ZM0 12v1h24v-1ZM0 18v1h24v-1Z\" />\n          <path d=\"M4 0h1v24h-1ZM11 0h1v24h-1ZM18 0h1v24h-1Z\" />\n          <circle cx={18.5} cy={18.5} r={3} />\n        </SvgIcon>\n      </IconButton>\n      <Select\n        value={magnetsOptions.gridSpace}\n        onChange={(event) =>\n          updateMagnetOption(\"gridSpace\", event.target.value)\n        }\n        onMouseDown={(event) => {\n          event.stopPropagation();\n        }}\n      >\n        <MenuItem value={0.5}>0.5</MenuItem>\n        <MenuItem value={1}>1</MenuItem>\n        <MenuItem value={2}>2</MenuItem>\n      </Select>\n      <IconButton\n        color={\n          magnetsOptions.isPathCoordinatesAttracting ? \"secondary\" : \"default\"\n        }\n        onMouseDown={(event) => {\n          event.stopPropagation();\n          updateMagnetOption(\"isPathCoordinatesAttracting\");\n        }}\n      >\n        <SvgIcon>\n          <path d=\"M4 11.5h20v1h-20Z\" />\n\n          <circle cx={2} cy={12} r={2} />\n          <circle cx={22} cy={12} r={2} />\n        </SvgIcon>\n      </IconButton>\n      <IconButton\n        color={magnetsOptions.isNodeAnchorsAttracting ? \"secondary\" : \"default\"}\n        onMouseDown={(event) => {\n          event.stopPropagation();\n          updateMagnetOption(\"isNodeAnchorsAttracting\");\n        }}\n      >\n        <SvgIcon>\n          <circle id=\"path858\" cx=\"2\" cy=\"16.5\" r=\"2\" />\n          <circle id=\"path834\" cx=\"2\" cy=\"7.5\" r=\"2\" />\n          <circle id=\"path838\" cx=\"22\" cy=\"12\" r=\"2\" />\n          <path d=\"m 22,11.5 v 1 L 18.5,12.5 7,21 7,17 H 2 V 16 H 7 L 7,8 H 2 v -1 L 7,7 7,3 18.5,11.5 Z\" />\n        </SvgIcon>\n      </IconButton>\n    </div>\n  );\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ToolBar);\n","import React, { forwardRef } from \"react\";\nimport svgComponents from \"components\";\nimport { connect } from \"react-redux\";\nimport { MODE_SELECT } from \"redux/store/interactionModes\";\nimport { toggleSelection, startDragging } from \"redux/actions\";\n\nconst mapDispatchToProps = (dispatch, { svgRef, displayOptions }) => {\n  return {\n    toggleSelection: (objectId, reset) =>\n      dispatch(toggleSelection(objectId, reset)),\n    startDragging: (x, y) => {\n      const {\n        x: xOffset,\n        y: yOffset,\n        width: svgWidth,\n        height: svgHeight,\n      } = svgRef.current.getBoundingClientRect();\n\n      const {\n        x: SVG_X,\n        y: SVG_Y,\n        width: SVG_WIDTH,\n        height: SVG_HEIGHT,\n        zoom,\n      } = displayOptions;\n\n      dispatch(\n        startDragging(\n          SVG_X + (x - xOffset) * (SVG_WIDTH / svgWidth),\n          SVG_Y + (y - yOffset) * (SVG_HEIGHT / svgHeight)\n        )\n      );\n    },\n  };\n};\nconst mapStateToProps = (state) => {\n  return {\n    components: state.components,\n    selection: state.selection,\n    mode: state.mode,\n  };\n};\n\nconst ComponentsDrawer = ({\n  components,\n  selection,\n  mode,\n  startDragging,\n  toggleSelection,\n}) => (\n  <>\n    {components.allIds.map(\n      (id) =>\n        components.byId[id].type &&\n        svgComponents[components.byId[id].type]({\n          ...components.byId[id],\n          onMouseDown:\n            mode === MODE_SELECT\n              ? (event) => {\n                  event.stopPropagation();\n                  if (\n                    !event.ctrlKey &&\n                    selection.includes(components.byId[id].id)\n                  ) {\n                    startDragging(\n                      event.nativeEvent.clientX,\n                      event.nativeEvent.clientY\n                    );\n                  } else {\n                    toggleSelection(components.byId[id].id, !event.ctrlKey);\n                  }\n                }\n              : null,\n          selected: selection.includes(components.byId[id].id),\n        })\n    )}\n  </>\n);\n\nconst ConnectedComponentsDrawer = connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(ComponentsDrawer);\n\nexport default forwardRef((props, ref) => (\n  <ConnectedComponentsDrawer {...props} svgRef={ref} />\n));\n","import React, { forwardRef } from \"react\";\nimport { connect } from \"react-redux\";\n\nimport Anchor from \"atoms/anchor\";\n\nconst mapStateToProps = (state) => {\n  return {\n    anchorIds: state.coordinates.allIds,\n  };\n};\n\nconst Anchors = ({ anchorIds, svgRef, displayOptions }) => (\n  <>\n    {anchorIds.map((id) => (\n      <Anchor key={id} id={id} ref={svgRef} displayOptions={displayOptions} />\n    ))}\n  </>\n);\n\nconst ConnectedAnchors = connect(mapStateToProps)(Anchors);\n\nexport default forwardRef((props, ref) => (\n  <ConnectedAnchors {...props} svgRef={ref} />\n));\n","import React, { useState } from \"react\";\nimport { connect } from \"react-redux\";\n\nimport { updatePosition, stopDragging } from \"redux/actions\";\nimport { MODE_DRAG } from \"redux/store/interactionModes\";\nconst mapDispatchToProps = (dispatch, { attractor, attracted }) => {\n  return {\n    updatePosition: (x, y) =>\n      dispatch(updatePosition({ x, y, attractor, attracted })),\n    stopDragging: () => dispatch(stopDragging()),\n  };\n};\n\nconst Magnet = ({\n  id,\n  x,\n  y,\n  dx,\n  dy,\n  color,\n  mode,\n  updatePosition,\n  stopDragging,\n}) => {\n  const [isUsed, setIsUsed] = useState(false);\n\n  return (\n    <>\n      {isUsed && (\n        <circle\n          cx={x}\n          cy={y}\n          r={5}\n          style={{\n            fill: \"none\",\n            stroke: \"red\",\n            strokeWidth: 2,\n          }}\n        />\n      )}\n      <circle\n        cx={x + dx}\n        cy={y + dy}\n        r={10}\n        style={{\n          fill: color || \"transparent\",\n        }}\n        onMouseEnter={(event) => {\n          event.stopPropagation();\n          updatePosition(x + dx, y + dy);\n          setIsUsed(true);\n        }}\n        onMouseLeave={() => setIsUsed(false)}\n        onMouseMove={\n          (event) => event.stopPropagation() //stop the propagation\n        }\n        onMouseUp={\n          mode === MODE_DRAG\n            ? (event) => {\n                event.stopPropagation();\n                stopDragging();\n              }\n            : null\n        }\n      />\n    </>\n  );\n};\n\nexport default connect(null, mapDispatchToProps)(Magnet);\n","import React from \"react\";\nimport { connect } from \"react-redux\";\n\nimport {\n  MODE_CREATE_PATH_ELEMENT,\n  MODE_CREATE_NODE_ELEMENT,\n  MODE_DRAG,\n} from \"redux/store/interactionModes\";\n\nimport Magnet from \"atoms/magnet\";\nimport { getElementAnchors } from \"components\";\n\nconst mapStateToProps = (state) => {\n  return {\n    coordinates: state.coordinates,\n    components: state.components,\n    mode: state.mode,\n    coordinatesToMove: state.coordinatesToMove,\n    selection: state.selection,\n    adhesivePoints: state.adhesivePoints || null,\n    ...state.magnetsOptions,\n  };\n};\n\nconst isMoving = (element, coordinatesToMove) => {\n  // help function to filter magnets\n  if (!coordinatesToMove) {\n    return false;\n  }\n  if (typeof element === \"string\" && coordinatesToMove.includes(element)) {\n    return true;\n  }\n  if (element.from && coordinatesToMove.includes(element.from)) {\n    return true;\n  }\n  if (element.to && coordinatesToMove.includes(element.to)) {\n    return true;\n  }\n  if (element.position && coordinatesToMove.includes(element.position)) {\n    return true;\n  }\n  return false;\n};\n\nconst Magnets = ({\n  mode,\n  coordinates,\n  components,\n  coordinatesToMove,\n  adhesivePoints,\n  isPathCoordinatesAttracting,\n  isNodeAnchorsAttracting,\n}) => {\n  // TODO : use a correct way to compute how many circle to draw\n  if (\n    mode !== MODE_DRAG &&\n    mode !== MODE_CREATE_NODE_ELEMENT &&\n    mode !== MODE_CREATE_PATH_ELEMENT\n  ) {\n    return null;\n  }\n\n  return (\n    <>\n      {isNodeAnchorsAttracting &&\n        components.allIds\n          .filter((id) => !isMoving(components.byId[id], coordinatesToMove))\n          .reduce(\n            (accumulator, id) => [\n              ...accumulator,\n              ...getElementAnchors({\n                ...components.byId[id],\n                fromCoords:\n                  components.byId[id].from &&\n                  coordinates.byId[components.byId[id].from],\n                toCoords:\n                  components.byId[id].to &&\n                  coordinates.byId[components.byId[id].to],\n                positionCoords:\n                  components.byId[id].position &&\n                  coordinates.byId[components.byId[id].position],\n              }).map(({ x, y, name }) =>\n                adhesivePoints.reduce(\n                  (\n                    accu,\n                    { type, dx, dy, name: nameAdhesive = \"\", id: idAdhesive }\n                  ) => {\n                    return [\n                      ...accu,\n                      <Magnet\n                        key={`${id}-${name}<-${idAdhesive}-${\n                          nameAdhesive || \"\"\n                        }`}\n                        x={x}\n                        dx={dx}\n                        y={y}\n                        dy={dy}\n                        mode={mode}\n                        attractor={{\n                          type: components.byId[id].position ? \"NODE\" : \"PATH\",\n                          name: name,\n                          id: id,\n                        }}\n                        attracted={{\n                          type: type,\n                          name: nameAdhesive,\n                          id: idAdhesive,\n                        }}\n                      />,\n                    ];\n                  },\n                  []\n                )\n              ),\n            ],\n            []\n          )}\n      {isPathCoordinatesAttracting &&\n        coordinates.allIds\n          .filter((id) => !isMoving(id, coordinatesToMove))\n          .map((id) =>\n            adhesivePoints.reduce(\n              (\n                accu,\n                { type, dx, dy, name: nameAdhesive = \"\", id: idAdhesive }\n              ) => {\n                return [\n                  ...accu,\n                  <Magnet\n                    key={`${id}<-${idAdhesive}-${nameAdhesive || \"\"}`}\n                    x={coordinates.byId[id].x}\n                    dx={dx}\n                    y={coordinates.byId[id].y}\n                    dy={dy}\n                    mode={mode}\n                    attractor={{ type: \"ANCHOR\", name: \"\", id: id }}\n                    attracted={{\n                      type: type,\n                      name: nameAdhesive,\n                      id: idAdhesive,\n                    }}\n                  />,\n                ];\n              },\n              []\n            )\n          )}\n    </>\n  );\n};\n\nexport default connect(mapStateToProps)(Magnets);\n","import React, { forwardRef } from \"react\";\nimport { connect } from \"react-redux\";\nimport components from \"components\";\nimport ToolBar from \"./toolbar\";\n\nimport {\n  updatePosition,\n  stopDragging,\n  validateFirstStepPathElementCreation,\n  invalidateFirstStepPathElementCreation,\n  savePathElementCreation,\n  nextStepOfElementCreation,\n  startRectangleSelection,\n  stopRectangleSelection,\n  startMovePaper,\n} from \"redux/actions\";\nimport {\n  MODE_DRAG,\n  MODE_CREATE_PATH_ELEMENT,\n  MODE_CREATE_NODE_ELEMENT,\n  MODE_SELECT,\n  MODE_RECTANGLE_SELECTION,\n  MODE_MOVE_PAPER,\n} from \"redux/store/interactionModes\";\n\nimport { MULTIPLICATIVE_CONST } from \"utils\";\n\nimport ComponentsDrawer from \"container/componentsDrawer\";\nimport Anchors from \"./anchors\";\nimport Magnets from \"./magnets\";\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n    updatePosition: (x, y, shiftPress) =>\n      dispatch(updatePosition({ x, y, shiftPress })),\n    stopDragging: () => dispatch(stopDragging()),\n    validateFirstStepPathElementCreation: () =>\n      dispatch(validateFirstStepPathElementCreation()),\n    invalidateFirstStepPathElementCreation: () =>\n      dispatch(invalidateFirstStepPathElementCreation()),\n    savePathElementCreation: () => dispatch(savePathElementCreation()),\n    nextStepOfElementCreation: () => dispatch(nextStepOfElementCreation()),\n    startRectangleSelection: (x, y) => dispatch(startRectangleSelection(x, y)),\n    stopRectangleSelection: () => dispatch(stopRectangleSelection()),\n    startMovePaper: (x, y) => dispatch(startMovePaper(x, y)),\n  };\n};\nconst mapStateToProps = (state) => {\n  return {\n    mode: state.mode,\n    newPath: state.newPath,\n    newNode: state.newNode,\n    rectangleSelection: state.rectangleSelection,\n    displayOptions: state.displayOptions,\n    isGridAttracting: state.magnetsOptions.isGridAttracting,\n    gridSpace: state.magnetsOptions.gridSpace,\n  };\n};\n\nconst Container = ({\n  svgRef,\n  mode,\n  newPath,\n  newNode,\n  rectangleSelection,\n  displayOptions,\n  isGridAttracting,\n  gridSpace,\n  stopDragging,\n  updatePosition,\n  validateFirstStepPathElementCreation,\n  invalidateFirstStepPathElementCreation,\n  savePathElementCreation,\n  nextStepOfElementCreation,\n  startRectangleSelection,\n  stopRectangleSelection,\n  startMovePaper,\n}) => {\n  const {\n    x: SVG_X,\n    y: SVG_Y,\n    width: SVG_WIDTH,\n    height: SVG_HEIGHT,\n  } = displayOptions;\n\n  const followMouse = (event) => {\n    const {\n      x: xOffset,\n      y: yOffset,\n      width: svgWidth,\n      height: svgHeight,\n    } = svgRef.current.getBoundingClientRect();\n\n    switch (mode) {\n      case MODE_DRAG:\n      case MODE_CREATE_PATH_ELEMENT:\n      case MODE_CREATE_NODE_ELEMENT:\n      case MODE_RECTANGLE_SELECTION:\n        updatePosition(\n          SVG_X +\n            (event.nativeEvent.clientX - xOffset) * (SVG_WIDTH / svgWidth),\n          SVG_Y +\n            (event.nativeEvent.clientY - yOffset) * (SVG_HEIGHT / svgHeight),\n          event.shiftKey\n        );\n        break;\n      default:\n        break;\n    }\n  };\n\n  const click = (event) => {\n    const {\n      x: xOffset,\n      y: yOffset,\n      width: svgWidth,\n      height: svgHeight,\n    } = svgRef.current.getBoundingClientRect();\n\n    switch (mode) {\n      case MODE_SELECT:\n        event.stopPropagation();\n        startRectangleSelection(\n          SVG_X +\n            (event.nativeEvent.clientX - xOffset) * (SVG_WIDTH / svgWidth),\n          SVG_Y +\n            (event.nativeEvent.clientY - yOffset) * (SVG_HEIGHT / svgHeight)\n        );\n        break;\n      case MODE_CREATE_PATH_ELEMENT:\n        event.stopPropagation();\n        if (newPath.isFromValidated) {\n          savePathElementCreation(\n            SVG_X +\n              (event.nativeEvent.clientX - xOffset) * (SVG_WIDTH / svgWidth),\n            SVG_Y +\n              (event.nativeEvent.clientY - yOffset) * (SVG_HEIGHT / svgHeight)\n          );\n        } else {\n          validateFirstStepPathElementCreation();\n        }\n        break;\n      case MODE_CREATE_NODE_ELEMENT:\n        event.stopPropagation();\n        nextStepOfElementCreation();\n        break;\n      case MODE_MOVE_PAPER:\n        event.stopPropagation();\n        startMovePaper(event.nativeEvent.clientX, event.nativeEvent.clientY);\n        break;\n      default:\n        break;\n    }\n  };\n\n  return (\n    <>\n      <ToolBar />\n      <svg\n        xmlns=\"http://www.w3.org/2000/svg\"\n        viewBox={`${SVG_X} ${SVG_Y} ${SVG_WIDTH} ${SVG_HEIGHT}`}\n        style={{ width: \"100%\", background: \"lightgray\" }}\n        onMouseMove={\n          mode === MODE_DRAG ||\n          mode === MODE_CREATE_PATH_ELEMENT ||\n          mode === MODE_CREATE_NODE_ELEMENT ||\n          mode === MODE_RECTANGLE_SELECTION\n            ? followMouse\n            : null\n        }\n        onMouseDown={click}\n        onMouseUp={\n          mode === MODE_DRAG\n            ? () => stopDragging()\n            : mode === MODE_RECTANGLE_SELECTION\n            ? (event) => {\n                event.stopPropagation();\n                stopRectangleSelection();\n              }\n            : null\n        }\n        ref={svgRef}\n      >\n        <defs>\n          <pattern\n            id=\"grid-magnets\"\n            x=\"-10\"\n            y=\"-10\"\n            width={gridSpace * MULTIPLICATIVE_CONST}\n            height={gridSpace * MULTIPLICATIVE_CONST}\n            patternUnits=\"userSpaceOnUse\"\n          >\n            <circle fill=\"gray\" cx=\"10\" cy=\"10\" r=\"3\"></circle>\n          </pattern>\n        </defs>\n        {isGridAttracting && (\n          <rect\n            x={SVG_X - 10}\n            y={SVG_Y - 10}\n            width=\"100%\"\n            height=\"100%\"\n            fill=\"url(#grid-magnets)\"\n          />\n        )}\n\n        <g id=\"drawingArea\">\n          <ComponentsDrawer ref={svgRef} displayOptions={displayOptions} />\n\n          {/* display the path element in during its creation */}\n\n          {mode === MODE_CREATE_PATH_ELEMENT && // the element\n            newPath &&\n            newPath.isFromValidated &&\n            newPath.to &&\n            newPath.to.x !== null &&\n            newPath.to.y !== null &&\n            newPath.from &&\n            newPath.from.x !== null &&\n            newPath.from.y !== null &&\n            components[newPath.elementType]({\n              fromCoords: newPath.from,\n              toCoords: newPath.to,\n            })}\n          {mode === MODE_CREATE_PATH_ELEMENT && //the anchor TO\n            newPath &&\n            newPath.isFromValidated &&\n            newPath.to.x !== null &&\n            newPath.to.y !== null && (\n              <circle cx={newPath.to.x} cy={newPath.to.y} r={5} />\n            )}\n          {mode === MODE_CREATE_PATH_ELEMENT && // the anchor FROM\n            newPath &&\n            newPath.from &&\n            newPath.from.x !== null &&\n            newPath.from.y !== null && (\n              <circle\n                cx={newPath.from.x}\n                cy={newPath.from.y}\n                r={5}\n                onMouseEnter={invalidateFirstStepPathElementCreation}\n              />\n            )}\n\n          {/* display the path element in during its creation */}\n\n          {mode === MODE_CREATE_NODE_ELEMENT && // the element\n            newNode &&\n            newNode.position &&\n            newNode.position.x !== null &&\n            newNode.position.y !== null &&\n            components[newNode.elementType]({\n              positionCoords: newNode.position,\n            })}\n          {mode === MODE_CREATE_NODE_ELEMENT && // the anchor POSITION\n            newNode &&\n            newNode.position &&\n            newNode.position.x !== null &&\n            newNode.position.y !== null && (\n              <circle cx={newNode.position.x} cy={newNode.position.y} r={5} />\n            )}\n\n          <Anchors ref={svgRef} displayOptions={displayOptions} />\n          <Magnets displayOptions={displayOptions} />\n\n          {mode === MODE_RECTANGLE_SELECTION && (\n            <path\n              d={`M ${rectangleSelection.x0} ${rectangleSelection.y0} L  ${rectangleSelection.x0} ${rectangleSelection.y1} L ${rectangleSelection.x1} ${rectangleSelection.y1} L  ${rectangleSelection.x1} ${rectangleSelection.y0} Z`}\n              style={{ fill: \"transparent\", stroke: \"red\", strokeWidth: 1 }}\n            />\n          )}\n        </g>\n      </svg>\n    </>\n  );\n};\n\nconst ConnectedContainer = connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(Container);\n\nexport default forwardRef((props, ref) => (\n  <ConnectedContainer {...props} svgRef={ref} />\n));\n","import {\n  drawElement,\n  isMultyPole,\n  isPath,\n  getElementAnchors,\n} from \"components\";\nimport { MULTIPLICATIVE_CONST } from \"utils\";\n\n// =============================================\n// THIS IS A NIGHTMARE\n// FIRST THING TO REFACTO\n//  -> first idea : use auxiliary function with long names to be precise\n//  -> put every information in nodeRef and Coords.\n//          After there creation we should not need of the state anymore\n// ==============================================\n\nconst findCommonAnchor = (node1, node2) => {\n  const anchors1 = getElementAnchors(node1);\n  const anchors2 = getElementAnchors(node2);\n\n  const rep = {};\n  anchors1.forEach(({ name: name1, x: x1, y: y1 }) => {\n    anchors2.forEach(({ name: name2, x: x2, y: y2 }) => {\n      if (Math.abs(x1 - x2) < 0.01 && Math.abs(y1 - y2) < 0.01) {\n        rep.parentAnchor = name1;\n        rep.childAnchor = name2;\n      }\n    });\n  });\n\n  return rep;\n};\n\nconst fillCoordWithAnchorsName = (multipoleNodes, coords, nodeReference) => {\n  multipoleNodes.forEach((node) => {\n    const anchors = getElementAnchors(node);\n    anchors.forEach(({ name: anchorName, x, y }) => {\n      const coordId = getCoordId({ x, y });\n\n      if (coords[coordId] !== undefined) {\n        coords[coordId].name = `${nodeReference[node.id].name}.${anchorName}`;\n      }\n    });\n  });\n};\n\nconst getPoles = ({ shape: shapeFrom }, { shape: shapeTo }) => {\n  // TODO could be improved : if for example the starting position is already a diamond, it should be -o and not d-o\n  const useStart = [\"*\", \"o\", \"d\"].includes(shapeFrom);\n  const useEnd = [\"*\", \"o\", \"d\"].includes(shapeTo);\n  if (useStart || useEnd) {\n    return `${useStart ? shapeFrom : \"\"}-${useEnd ? shapeTo : \"\"}`;\n  } else {\n    return \"\";\n  }\n};\n\nconst simplifyNumber = (x) => {\n  const rep = x.toFixed(2);\n  if (rep.slice(-3) === \".00\") {\n    return rep.slice(0, -3);\n  }\n  if (rep.slice(-1) === \"0\") {\n    return rep.slice(0, -1);\n  }\n  return rep;\n};\n\nconst isNode = (element) => !!element.position;\n\nconst getCoordId = ({ x, y }) =>\n  `${typeof x === \"number\" ? x.toFixed(2) : x}-${\n    typeof y === \"number\" ? y.toFixed(2) : y\n  }`;\n\n// helper to write latex coordinate\nconst getCoord = (x, y, coords) => {\n  const coordId = getCoordId({ x: x, y: y });\n\n  if (coords[coordId].name) {\n    return `(${coords[coordId].name})`;\n  } else {\n    return `(${simplifyNumber(x / MULTIPLICATIVE_CONST)}, ${simplifyNumber(\n      -y / MULTIPLICATIVE_CONST\n    )})`;\n  }\n};\n\nconst removeDrawnElements = (drawnElements) => (listeOfId) =>\n  listeOfId.filter((id) => !drawnElements[id]);\n\n// comparing function to decide which coordinate should be drawn first\nconst compareCoord = (drawnElements, coords) => (coordId1, coordId2) => {\n  const { endingPaths: endingPaths1, nodeAssociated: nodeAssociated1 } = coords[\n    coordId1\n  ];\n  const { endingPaths: endingPaths2, nodeAssociated: nodeAssociated2 } = coords[\n    coordId2\n  ];\n\n  // we prefer starting from a coordinate with no arriving path element or as less a possible\n  if (\n    removeDrawnElements(drawnElements)(endingPaths1).length <\n    removeDrawnElements(drawnElements)(endingPaths2).length\n  ) {\n    return -1;\n  }\n  if (\n    removeDrawnElements(drawnElements)(endingPaths1).length >\n    removeDrawnElements(drawnElements)(endingPaths2).length\n  ) {\n    return 1;\n  }\n\n  // for equivalent number of arriving path, we prefer the one with the most important number of nodes\n  if (\n    removeDrawnElements(drawnElements)(nodeAssociated1).length >\n    removeDrawnElements(drawnElements)(nodeAssociated2).length\n  ) {\n    return -1;\n  }\n  if (\n    removeDrawnElements(drawnElements)(nodeAssociated1).length <\n    removeDrawnElements(drawnElements)(nodeAssociated2).length\n  ) {\n    return 1;\n  }\n  return 0;\n};\n\n// this function start from the coordinate \"startCoordId\" and follow a path by drawing components\nconst drawPathFromCoord = (\n  startCoordId,\n  coords,\n  state,\n  drawnElements,\n  nbOfCoordinateUsed\n) => {\n  const elementsToAdd = []; // list of the elements in the line to write\n\n  // variables to save some coordinates\n  let nbOfCreatedNames = 0;\n  let nextName = `point${nbOfCoordinateUsed + 1}`;\n\n  // create variable updatable\n  let currantCoordId = startCoordId;\n  let currantCoord = coords[currantCoordId];\n\n  // informations on the currant node\n  let nextPaths = currantCoord.startingPaths.filter((id) => !drawnElements[id]); //remove drawn elements\n  let arrivingPaths = currantCoord.endingPaths.filter(\n    (id) => !drawnElements[id]\n  );\n  let nextNode = currantCoord.nodeAssociated.filter((id) => !drawnElements[id]); // remove drawn elements (multi-pole are already drawn at this step)\n\n  // get ready to loop on components to add\n  let coordIsNew = true;\n  while (nextPaths.length > 0 || nextNode.length > 0) {\n    // add draw if it's the beginning\n    if (elementsToAdd.length === 0) {\n      elementsToAdd.push(`\\\\draw `);\n    }\n\n    // add the coordinate if needed\n    if (coordIsNew) {\n      elementsToAdd.push(\n        `${getCoord(currantCoord.x, currantCoord.y, coords)} `\n      );\n      if (\n        !currantCoord.name &&\n        (nextPaths.length > 1 || arrivingPaths.length > 0)\n      ) {\n        //save name if we will need to start from here again or to arrive to here in the future\n        elementsToAdd.push(`coordinate(${nextName}) `);\n        coords[currantCoordId].name = nextName;\n\n        //get ready for next name\n        nbOfCreatedNames += 1;\n        nextName = `point${nbOfCoordinateUsed + nbOfCreatedNames + 1}`;\n      }\n    }\n\n    if (nextNode.length > 0) {\n      // create a node if possible\n      coordIsNew = false;\n      const nodeId = nextNode.pop();\n      const element = state.components.byId[nodeId];\n\n      elementsToAdd.push(`${drawElement(element)} `);\n      drawnElements[element.id] = true;\n    } else {\n      // create path if no more node is to draw\n      coordIsNew = true;\n      const element = state.components.byId[nextPaths[0]];\n\n      element.poles = getPoles(\n        state.coordinates.byId[element.from],\n        state.coordinates.byId[element.to]\n      );\n      elementsToAdd.push(drawElement(element));\n      drawnElements[element.id] = true;\n\n      // get information of the next coordinate\n      currantCoordId = getCoordId(state.coordinates.byId[element.to]);\n      currantCoord = coords[currantCoordId];\n      nextPaths = currantCoord.startingPaths.filter((id) => !drawnElements[id]); //only path elements starting here not already drawn\n      arrivingPaths = currantCoord.endingPaths.filter(\n        (id) => !drawnElements[id]\n      );\n      nextNode = currantCoord.nodeAssociated.filter((id) => !drawnElements[id]);\n    }\n  }\n  // There is no elements to draw from the currant coordinate\n\n  if (elementsToAdd.length > 0) {\n    if (coordIsNew) {\n      // if it's a new coordinate, we add it to the list\n      elementsToAdd.push(\n        `${getCoord(currantCoord.x, currantCoord.y, coords)} `\n      );\n      if (!currantCoord.name && arrivingPaths.length > 0) {\n        // we give it a name if needed\n        coords[currantCoordId].name = nextName;\n        elementsToAdd.push(`coordinate(${nextName}) `);\n        nbOfCreatedNames += 1;\n        nextName = `point${nbOfCoordinateUsed + nbOfCreatedNames + 1}`;\n      }\n    }\n\n    elementsToAdd.push(\";\"); //add the semi colon at the end of the line\n  }\n\n  // return the elements of the line and an indicator to update the number of coordinate saved\n  return [elementsToAdd, nbOfCreatedNames];\n};\n\nconst initializeCoords = (state) => {\n  // dict created :\n  //\n  // coords = {[(x, y)]: {\n  //  x: number,\n  //  y: number,\n  //  name:null||str,\n  //  startingPaths: [list of elements id],\n  //  endingPaths: [list of elements id],\n  //  nodeAssociated: [list of elements id],\n  // }\n  //\n  // nodeReference = {\n  //   [nodeId]: {\n  //     name: null,\n  //     parent: null,\n  //     parentAnchor: null,\n  //     anchor: null,\n  //     associatedIds: [list of coordId relative to this node],\n  //   }\n  // }\n\n  const coords = {};\n  const nodeReference = {};\n\n  // check coord of all to[] element\n  state.components.allIds.forEach((id) => {\n    const element = state.components.byId[id];\n    if (isPath[element.type]) {\n      const fromCoord = state.coordinates.byId[element.from];\n      const toCoord = state.coordinates.byId[element.to];\n\n      const fromCoordId = getCoordId(fromCoord);\n      const toCoordId = getCoordId(toCoord);\n\n      if (coords[fromCoordId] === undefined) {\n        coords[fromCoordId] = {\n          x: fromCoord.x.toFixed(2),\n          y: fromCoord.y.toFixed(2),\n          name: null,\n          startingPaths: [element.id],\n          endingPaths: [],\n          nodeAssociated: [],\n        };\n      } else if (!coords[fromCoordId].startingPaths.includes(element.id)) {\n        coords[fromCoordId].startingPaths.push(element.id);\n      }\n\n      if (coords[toCoordId] === undefined) {\n        coords[toCoordId] = {\n          x: toCoord.x.toFixed(2),\n          y: toCoord.y.toFixed(2),\n          name: null,\n          endingPaths: [element.id],\n          startingPaths: [],\n          nodeAssociated: [],\n        };\n      } else if (!coords[toCoordId].endingPaths.includes(element.id)) {\n        coords[toCoordId].endingPaths.push(element.id);\n      }\n    } else {\n      nodeReference[element.id] = {\n        name: null,\n        parent: null,\n        parentAnchor: null,\n        anchor: null,\n        associatedIds: [],\n      };\n      if (!isMultyPole[element.type]) {\n        const positionCoord = state.coordinates.byId[element.position];\n        const positionCoordId = getCoordId(positionCoord);\n\n        if (coords[positionCoordId] === undefined) {\n          coords[positionCoordId] = {\n            x: positionCoord.x.toFixed(2),\n            y: positionCoord.y.toFixed(2),\n            name: null,\n            startingPaths: [],\n            endingPaths: [],\n            nodeAssociated: [element.id],\n          };\n        } else if (\n          !coords[positionCoordId].nodeAssociated.includes(element.id)\n        ) {\n          coords[positionCoordId].nodeAssociated.push(element.id);\n        }\n      }\n    }\n  });\n\n  const weakLinks = [...state.weakLinks];\n\n  // add node informations\n  state.weakLinks.forEach(({ anchorId, nodeId }) => {\n    const coord = state.coordinates.byId[anchorId];\n\n    if (\n      !coord.isNodePosition ||\n      !isMultyPole[\n        state.components.byId[state.coordinates.byId[anchorId].nodeId].type\n      ]\n    ) {\n      const coordId = getCoordId(coord);\n      if (!coords[coordId].nodeAssociated.includes(nodeId)) {\n        coords[coordId].nodeAssociated.push(nodeId);\n      }\n      if (!nodeReference[nodeId].associatedIds.includes(coordId)) {\n        nodeReference[nodeId].associatedIds.push(coordId);\n      }\n    }\n  });\n\n  const multipoleNodes = state.components.allIds.filter(\n    (id) => isMultyPole[state.components.byId[id].type]\n  );\n\n  multipoleNodes.forEach((parentNodeId, index) => {\n    const parent = { ...state.components.byId[parentNodeId] };\n    parent.positionCoords = { ...state.coordinates.byId[parent.position] };\n\n    // add multipole child (only those after in order to keep a directed tree structure)\n    multipoleNodes.slice(index + 1).forEach((childNodeIdId) => {\n      const child = { ...state.components.byId[childNodeIdId] };\n      child.positionCoords = { ...state.coordinates.byId[child.position] };\n\n      const { parentAnchor = null, childAnchor = null } = findCommonAnchor(\n        parent,\n        child\n      );\n\n      if (parentAnchor !== null && childAnchor !== null) {\n        nodeReference[childNodeIdId].parent = parentNodeId;\n        nodeReference[childNodeIdId].anchor = childAnchor;\n        nodeReference[childNodeIdId].parentAnchor = parentAnchor;\n        if (\n          !nodeReference[parentNodeId].associatedIds.includes(childNodeIdId)\n        ) {\n          nodeReference[parentNodeId].associatedIds.push(childNodeIdId);\n        }\n      }\n    });\n\n    // add link between coordinates and node anchors\n    Object.keys(coords).forEach((coordId) => {\n      const anchors = getElementAnchors(parent);\n\n      const { x: coordX, y: coordY } = coords[coordId];\n\n      anchors.forEach(({ x: anchorX, y: anchorY }) => {\n        if (\n          Math.abs(coordX - anchorX) < 0.01 &&\n          Math.abs(coordY - anchorY) < 0.01\n        ) {\n          if (!coords[coordId].nodeAssociated.includes(parent.id)) {\n            coords[coordId].nodeAssociated.push(parent.id);\n          }\n          if (!nodeReference[parent.id].associatedIds.includes(coordId)) {\n            nodeReference[parent.id].associatedIds.push(coordId);\n          }\n        }\n      });\n    });\n  });\n\n  return [coords, nodeReference];\n};\n\nfunction getCircuitikz(state) {\n  const [coords, nodeReference] = initializeCoords(state);\n\n  const drawnElements = {}; //[id]:true when element of this id is drawn\n  let nbOfCoordinateUsed = 0; // counter to save coordinate with name : point1, point2, ...\n  const nodeNumberOfNames = {}; // conter for naming multi-pole (in order to start from 1 for each type of node) exemple: nmos1, pmos1, nmos2\n  const circuitText = [\"\\\\begin{circuitikz}\"];\n\n  // ========================\n  // 1. Draw multi-pole nodes\n  // ========================\n  const multiAnchorNodeIds = state.components.allIds\n    .filter((elementId) => {\n      // filter nodes to get only multi-pole\n      const element = state.components.byId[elementId];\n      return isNode(element) && isMultyPole[element.type];\n    })\n    .sort((id1, id2) => {\n      // sort them according to there dependencies\n      if (nodeReference[id1].parent === null) {\n        return -1; //if they are both null (without parent) id1 is preferred (so we do not need to check id2)\n      }\n      if (nodeReference[id2].parent === null) {\n        return 1; //if we are here, it's that id1 is not null. but id2 is so we prefer it\n      }\n      if (nodeReference[id2].parent === id1) {\n        //id1 is parent of id2\n        return -1; //so 1 must be printed before 2\n      }\n      if (nodeReference[id1].parent === id2) {\n        //id2 is parent of id1\n        return -1; //so 2 must be printed before 1\n      }\n      return -1;\n    });\n\n  multiAnchorNodeIds.forEach((elementId) => {\n    const element = state.components.byId[elementId];\n\n    // get parent information for positioning\n    const positionInformations = {};\n    if (nodeReference[elementId].parent !== null) {\n      positionInformations.position = `${\n        nodeReference[nodeReference[elementId].parent].name\n      }.${nodeReference[elementId].parentAnchor}`;\n\n      positionInformations.anchor = nodeReference[elementId].anchor;\n    } else {\n      positionInformations.x = state.coordinates.byId[element.position].x;\n      positionInformations.y = state.coordinates.byId[element.position].y;\n    }\n\n    // check if need to create name\n    const nameNeeded = nodeReference[elementId].associatedIds.length > 0;\n    if (nameNeeded) {\n      const name = `${element.type}${nodeNumberOfNames[element.type] || 1}`;\n\n      circuitText.push(drawElement(element, positionInformations, name));\n\n      nodeReference[element.id].name = name;\n      nodeNumberOfNames[element.type] =\n        (nodeNumberOfNames[element.type] || 1) + 1;\n    } else {\n      circuitText.push(drawElement(element, positionInformations));\n    }\n\n    drawnElements[elementId] = true; //note that this node is ok\n  });\n\n  // =====================================================\n  // 2. Associate anchor name to coordinates when possible\n  // =====================================================\n  // TODO : an good idea could be not to trust weak links but to compare anchor coordinate with used coordinates\n\n  const multipoleNodes = state.components.allIds\n    .filter((id) => isMultyPole[state.components.byId[id].type])\n    .map((id) => {\n      const node = { ...state.components.byId[id] };\n      node.positionCoords = { ...state.coordinates.byId[node.position] };\n      return node;\n    });\n\n  fillCoordWithAnchorsName(multipoleNodes, coords, nodeReference, state);\n\n  // ====================================\n  // 3. Draw path from multi-pole coordinates\n  // ====================================\n  multiAnchorNodeIds.forEach((nodeId) => {\n    nodeReference[nodeId].associatedIds.forEach((childId) => {\n      if (coords[childId] !== undefined) {\n        const [elementsToAdd, nbOfCreatedNames] = drawPathFromCoord(\n          childId,\n          coords,\n          state,\n          drawnElements,\n          nbOfCoordinateUsed\n        );\n\n        if (elementsToAdd.length > 0) {\n          nbOfCoordinateUsed += nbOfCreatedNames;\n          circuitText.push(elementsToAdd.join(\"\"));\n        }\n      }\n    });\n  });\n\n  // ===========================\n  // 4. Draw all remaining paths\n  // ===========================\n  const coordsToPlot = Object.keys(coords);\n  while (coordsToPlot.length > 0) {\n    // get coordinate id to start the path according to \"compareCoord\" function\n    const idToPlot = coordsToPlot.sort(compareCoord(drawElement, coords))[0];\n\n    //plot it\n    if (coords[idToPlot] !== undefined) {\n      const [elementsToAdd, nbOfCreatedNames] = drawPathFromCoord(\n        idToPlot,\n        coords,\n        state,\n        drawnElements,\n        nbOfCoordinateUsed\n      );\n\n      if (elementsToAdd.length > 0) {\n        nbOfCoordinateUsed += nbOfCreatedNames;\n        circuitText.push(elementsToAdd.join(\"\"));\n      } else {\n        // remove it from the list because there is no more things to draw from here\n        const index = coordsToPlot.indexOf(idToPlot);\n        coordsToPlot.splice(index, 1);\n      }\n    } else {\n      // remove it from the list because this coordinate does not exist\n      const index = coordsToPlot.indexOf(idToPlot);\n      coordsToPlot.splice(index, 1);\n    }\n  }\n  circuitText.push(\"\\\\end{circuitikz}\");\n\n  return circuitText;\n}\n\nexport default getCircuitikz;\n","import React from \"react\";\nimport { connect } from \"react-redux\";\n\nimport getCircuitikz from \"redux/store/getCircuitikz\";\n\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\nimport DialogContent from \"@material-ui/core/DialogContent\";\nimport DialogActions from \"@material-ui/core/DialogActions\";\nimport Button from \"@material-ui/core/Button\";\n\nconst copyCode = (code) => {\n  navigator.clipboard.writeText(code).then(\n    function () {},\n    function () {}\n  );\n};\n\nconst mapStateToProps = (state) => {\n  return { code: getCircuitikz(state) };\n};\n\nconst LatexDisplay = ({ code }) => (\n  <>\n    <DialogTitle>Your LaTEX code</DialogTitle>\n    <DialogContent>\n      <pre>\n        {code.slice(0, code.length - 1).join(\"\\n\\t\") +\n          \"\\n\" +\n          code[code.length - 1]}\n      </pre>\n    </DialogContent>\n    <DialogActions>\n      <Button\n        autoFocus\n        onClick={() => {\n          copyCode(\n            code.slice(0, code.length - 1).join(\"\\n\\t\") +\n              \"\\n\" +\n              code[code.length - 1]\n          );\n        }}\n      >\n        Copy\n      </Button>\n    </DialogActions>\n  </>\n);\n\nexport default connect(mapStateToProps, null)(LatexDisplay);\n","import React from \"react\";\nimport { connect } from \"react-redux\";\n\nimport { updateComponent } from \"redux/actions\";\n\nimport List from \"@material-ui/core/List\";\nimport ListItem from \"@material-ui/core/ListItem\";\nimport ListItemText from \"@material-ui/core/ListItemText\";\nimport ListItemSecondaryAction from \"@material-ui/core/ListItemSecondaryAction\";\n\nimport Input from \"@material-ui/core/Input\";\nimport Checkbox from \"@material-ui/core/Checkbox\";\nimport Switch from \"@material-ui/core/Switch\";\nimport FormControlLabel from \"@material-ui/core/FormControlLabel\";\nimport TextField from \"@material-ui/core/TextField\";\nimport Select from \"@material-ui/core/Select\";\nimport MenuItem from \"@material-ui/core/MenuItem\";\nimport SvgIcon from \"@material-ui/core/SvgIcon\";\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n    handleInputChange: (id, name) => (value) => (event) =>\n      dispatch(\n        updateComponent(id, name, value === null ? event.target.value : value)\n      ),\n  };\n};\n\nconst mapStateToProps = (state) => {\n  if (state.selection.length < 1) {\n    return {};\n  }\n  const idOfInterest = state.selection[0];\n\n  return {\n    id: idOfInterest,\n    options:\n      state.components.byId[idOfInterest] ||\n      state.coordinates.byId[idOfInterest] ||\n      {},\n  };\n};\n\nconst inputElement = {\n  label: (value, update) => (\n    <ListItem>\n      <TextField\n        label=\"Label\"\n        value={value}\n        onKeyDown={(e) => e.stopPropagation()}\n        onChangeCapture={update(null)}\n      />\n    </ListItem>\n  ),\n  annotation: (value, update) => (\n    <ListItem>\n      <TextField\n        label=\"Annotation\"\n        value={value}\n        onKeyDown={(e) => e.stopPropagation()}\n        onChangeCapture={update(null)}\n      />\n    </ListItem>\n  ),\n  angle: (value, update) => (\n    <ListItem button>\n      <ListItemText primary=\"rotation\" />\n      <ListItemSecondaryAction>\n        <Input\n          value={value || 0}\n          onKeyDown={(e) => e.stopPropagation()}\n          onChangeCapture={update(null)}\n          inputProps={{\n            step: 5,\n            min: -180,\n            max: 180,\n            type: \"number\",\n          }}\n        />\n      </ListItemSecondaryAction>\n    </ListItem>\n  ),\n  wiper_pos: (value, update) => (\n    <ListItem button>\n      <ListItemText primary=\"wiper position\" />\n      <ListItemSecondaryAction>\n        <Input\n          value={value || 0}\n          onKeyDown={(e) => e.stopPropagation()}\n          onChangeCapture={update(null)}\n          inputProps={{\n            step: 0.01,\n            min: 0,\n            max: 1,\n            type: \"number\",\n          }}\n        />\n      </ListItemSecondaryAction>\n    </ListItem>\n  ),\n  isOpen: (value, update) => (\n    <ListItem>\n      <FormControlLabel\n        control={\n          <Switch checked={value} onChange={update(!value)} name=\"isOpen\" />\n        }\n        label=\"isOpen\"\n      />\n    </ListItem>\n  ),\n  withArrow: (value, update) => (\n    <ListItem>\n      <FormControlLabel\n        control={\n          <Switch checked={value} onChange={update(!value)} name=\"withArrow\" />\n        }\n        label=\"withArrow\"\n      />\n    </ListItem>\n  ),\n  mirror: (value, update) => (\n    <ListItem>\n      <FormControlLabel\n        control={\n          <Switch checked={value} onChange={update(!value)} name=\"mirror\" />\n        }\n        label=\"mirror\"\n      />\n    </ListItem>\n  ),\n  invert: (value, update) => (\n    <ListItem>\n      <FormControlLabel\n        control={\n          <Switch checked={value} onChange={update(!value)} name=\"invert\" />\n        }\n        label=\"Invert\"\n      />\n    </ListItem>\n  ),\n  shape: (value, update) => (\n    <ListItem>\n      <ListItemText primary=\"shape\" />\n      <ListItemSecondaryAction>\n        <Select value={value} onChange={update(null)} autoFocus={true}>\n          <MenuItem value=\"\">\n            <SvgIcon></SvgIcon>\n          </MenuItem>\n          <MenuItem value=\"*\">\n            <SvgIcon>\n              <circle\n                cx={12}\n                cy={12}\n                r={5}\n                style={{ fill: \"black\", stroke: \"black\" }}\n              />\n            </SvgIcon>\n          </MenuItem>\n          <MenuItem value=\"o\">\n            <SvgIcon>\n              <circle\n                cx={12}\n                cy={12}\n                r={5}\n                style={{ fill: \"white\", stroke: \"black\", strokeWidth: 2 }}\n              />\n            </SvgIcon>\n          </MenuItem>\n          <MenuItem value=\"d\">\n            <SvgIcon>\n              <path\n                d={`M ${12 + 6} ${12}\n                  L ${12} ${12 + 6}\n                  L ${12 - 6} ${12}\n                  L ${12} ${12 - 6} Z`}\n                style={{ fill: \"black\", stroke: \"black\" }}\n              />\n            </SvgIcon>\n          </MenuItem>\n        </Select>\n      </ListItemSecondaryAction>\n    </ListItem>\n  ),\n  currant: (value, update) => (\n    <>\n      <ListItem button>\n        <ListItemText primary=\"Currant\" />\n        <ListItemSecondaryAction>\n          <Checkbox\n            checked={value.show}\n            onChange={update({ ...value, show: !value.show })}\n            inputProps={{ \"aria-label\": \"primary checkbox\" }}\n          />\n        </ListItemSecondaryAction>\n      </ListItem>\n      <ListItem>\n        <TextField\n          disabled={!value.show}\n          label=\"Currant name\"\n          value={value.currantText}\n          onKeyDown={(e) => e.stopPropagation()}\n          onChangeCapture={(e) =>\n            update({ ...value, currantText: e.target.value })()\n          }\n        />\n      </ListItem>\n      <ListItem>\n        <FormControlLabel\n          disabled={!value.show}\n          control={\n            <Switch\n              checked={value.currantIsForward}\n              onChange={update({\n                ...value,\n                currantIsForward: !value.currantIsForward,\n              })}\n              name=\"arrow direction\"\n            />\n          }\n          label=\"direction\"\n        />\n      </ListItem>\n      <ListItem>\n        <FormControlLabel\n          disabled={!value.show}\n          control={\n            <Switch\n              checked={value.currantIsAfter}\n              onChange={update({\n                ...value,\n                currantIsAfter: !value.currantIsAfter,\n              })}\n              name=\"currant position\"\n            />\n          }\n          label=\"arrow position\"\n        />\n      </ListItem>\n      <ListItem>\n        <FormControlLabel\n          disabled={!value.show}\n          control={\n            <Switch\n              checked={value.currantIsAbove}\n              onChange={update({\n                ...value,\n                currantIsAbove: !value.currantIsAbove,\n              })}\n              name=\"text position\"\n            />\n          }\n          label=\"text position\"\n        />\n      </ListItem>\n    </>\n  ),\n};\n\nconst ElementOptions = ({ handleInputChange, id, options = null }) => {\n  if (options === null) {\n    return null;\n  }\n  return (\n    <List>\n      {Object.keys(options)\n        .map((name) => [\n          name,\n          Object.keys(inputElement).findIndex((n) => n === name),\n        ])\n        .filter(([, index]) => index >= 0)\n        .sort(([, i1], [, i2]) => i1 - i2)\n        .map(([name]) => (\n          <div key={name}>\n            {inputElement[name](options[name], handleInputChange(id, name))}\n          </div>\n        ))}\n    </List>\n  );\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ElementOptions);\n","import React, { useState } from \"react\";\n\nimport { connect } from \"react-redux\";\nimport { startCreatePathElement, startCreateNodeElement } from \"redux/actions\";\n\nimport { isPath, structure } from \"components\";\n\nimport List from \"@material-ui/core/List\";\nimport ListItem from \"@material-ui/core/ListItem\";\nimport ListItemText from \"@material-ui/core/ListItemText\";\n\nimport ExpandLess from \"@material-ui/icons/ExpandLess\";\nimport ExpandMore from \"@material-ui/icons/ExpandMore\";\nimport Collapse from \"@material-ui/core/Collapse\";\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n    startCreatePathElement: (elementType) =>\n      dispatch(startCreatePathElement(elementType)),\n    startCreateNodeElement: (elementType) =>\n      dispatch(startCreateNodeElement(elementType)),\n  };\n};\n\nconst LeftMenu = ({ startCreatePathElement, startCreateNodeElement }) => {\n  const [openSection, setOpenSection] = useState();\n\n  return (\n    <List>\n      {Object.keys(structure).map((sectionName) => (\n        <div key={sectionName}>\n          <ListItem\n            button\n            onClick={() =>\n              setOpenSection(openSection === sectionName ? null : sectionName)\n            }\n          >\n            <ListItemText primary={sectionName} />\n            {openSection === sectionName ? <ExpandLess /> : <ExpandMore />}\n          </ListItem>\n          <Collapse\n            in={openSection === sectionName}\n            timeout=\"auto\"\n            unmountOnExit\n          >\n            <List>\n              {structure[sectionName].map((name) => (\n                <ListItem\n                  button\n                  key={name}\n                  onMouseDown={(event) => {\n                    event.stopPropagation();\n                    if (isPath[name]) {\n                      startCreatePathElement(name);\n                    } else {\n                      startCreateNodeElement(name);\n                    }\n                  }}\n                >\n                  <ListItemText\n                    primary={name}\n                    style={{ paddingLeft: \"20px\" }}\n                  />\n                </ListItem>\n              ))}\n            </List>\n          </Collapse>\n        </div>\n      ))}\n    </List>\n  );\n};\n\nexport default connect(null, mapDispatchToProps)(LeftMenu);\n","import {\n  DialogContent,\n  DialogTitle,\n  Typography,\n  List,\n  ListItem,\n  ListItemText,\n} from \"@material-ui/core\";\nimport React from \"react\";\n\nimport { makeStyles } from \"@material-ui/core/styles\";\n\nconst shortcuts = [\n  {\n    key: \"S\",\n    description: \"Split coordinate point in multiple points\",\n  },\n  {\n    key: \"Shift\",\n    description: \"Lock dragging along x or y axis\",\n  },\n  {\n    key: \"Ctrl\",\n    description: \"Allow to select multiple element\",\n  },\n  {\n    key: \"Suppr\",\n    description: \"Delete selected component (only one)\",\n  },\n  {\n    key: \"Arrows\",\n    description: \"Stack coordinates along given direction\",\n  },\n];\n\nconst useStyles = makeStyles(() => ({\n  keyboardKey: {\n    backgroundColor: \"#eee\",\n    borderRadius: \"3px\",\n    border: \"1px solid #b4b4b4\",\n    boxShadow:\n      \"0 1px 1px rgba(0, 0, 0, .2), 0 2px 0 0 rgba(255, 255, 255, .7) inset\",\n    color: \"#333\",\n    display: \"inline-block\",\n    fontSize: \"1.2em\",\n    fontWeight: 600,\n    lineHeight: 1,\n    padding: \"8px 8px\",\n  },\n  keyboardDescription: {\n    fontSize: \"1.1rem\",\n  },\n}));\n\nconst HelpShortcut = () => {\n  const classes = useStyles();\n\n  return (\n    <>\n      <DialogTitle>\n        <Typography variant=\"h5\" component=\"h2\">\n          Short Cut\n        </Typography>\n      </DialogTitle>\n      <DialogContent>\n        <List>\n          {shortcuts.map((shortcut) => (\n            <ListItem key={shortcut.key}>\n              <ListItemText\n                classes={{ primary: classes.keyboardDescription }}\n                primary={shortcut.description}\n              />\n              <span className={classes.keyboardKey}>{shortcut.key}</span>\n            </ListItem>\n          ))}\n        </List>\n      </DialogContent>\n    </>\n  );\n};\n\nexport default HelpShortcut;\n","import React, { useEffect, useState, useRef } from \"react\";\nimport { connect } from \"react-redux\";\nimport {\n  MODE_DRAG,\n  MODE_SELECT,\n  MODE_MOVE_PAPER,\n} from \"redux/store/interactionModes\";\n\nimport RoughDrawing from \"container/RoughDrawing\";\nimport Container from \"container/index.js\";\nimport LatexDisplay from \"container/latexDisplay\";\nimport ElementOptions from \"container/elementOptions\";\nimport LeftMenu from \"container/leftMenu\";\nimport HelpShortcut from \"container/helpShortcut\";\n\nimport Drawer from \"@material-ui/core/Drawer\";\nimport AppBar from \"@material-ui/core/AppBar\";\nimport Toolbar from \"@material-ui/core/Toolbar\";\nimport Typography from \"@material-ui/core/Typography\";\n\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport CssBaseline from \"@material-ui/core/CssBaseline\";\n\nimport Button from \"@material-ui/core/Button\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport Dialog from \"@material-ui/core/Dialog\";\n\nimport HelpOutlineIcon from \"@material-ui/icons/HelpOutline\";\nimport PhotoLibraryIcon from \"@material-ui/icons/PhotoLibrary\";\n\nimport {\n  startSelect,\n  splitAnchor,\n  stackSelectedAnchors,\n  deleteElement,\n  movePaper,\n  endMovePaper,\n} from \"redux/actions\";\n\nconst drawerWidth = 180;\nconst optionDrawerWidth = 280;\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    display: \"flex\",\n  },\n  appBar: {\n    zIndex: theme.zIndex.drawer + 1,\n  },\n  toolBar: {\n    justifyContent: \"space-between\",\n  },\n  drawer: {\n    width: drawerWidth,\n    flexShrink: 0,\n  },\n  drawerPaper: {\n    width: drawerWidth,\n  },\n  drawerContainer: {\n    overflow: \"auto\",\n  },\n  optionDrawer: {},\n  optionDrawerPaper: { width: optionDrawerWidth },\n  content: {\n    flexGrow: 1,\n    padding: `${theme.spacing(8)} 0`,\n  },\n  menuButton: {\n    marginRight: theme.spacing(2),\n  },\n}));\n\nconst mapStateToProps = (state) => {\n  return {\n    mode: state.mode,\n    selection: state.selection,\n    isPaperDragged: state.displayOptions.dragging.isDragging,\n  };\n};\nconst mapDispatchToProps = (dispatch) => {\n  return {\n    startSelect: () => dispatch(startSelect()),\n    splitAnchor: () => dispatch(splitAnchor()),\n    stackSelectedAnchors: (direction) =>\n      dispatch(stackSelectedAnchors(direction)),\n    deleteElement: (selection) => {\n      dispatch(deleteElement(selection));\n    },\n    movePaper: (x, y) => dispatch(movePaper(x, y)),\n    endMovePaper: () => dispatch(endMovePaper()),\n  };\n};\n\nfunction App({\n  mode,\n  selection,\n  isPaperDragged,\n  startSelect,\n  splitAnchor,\n  stackSelectedAnchors,\n  deleteElement,\n  movePaper,\n  endMovePaper,\n}) {\n  const classes = useStyles();\n  const [showCode, setShowCode] = useState(false);\n  const [showRough, setShowRough] = useState(false);\n  const [showHelp, setShowHelp] = useState(false);\n\n  const openRough = () => setShowRough(true);\n  const openCode = () => setShowCode(true);\n  const openHelp = () => setShowHelp(true);\n  const closeRough = () => setShowRough(false);\n  const closeCode = () => setShowCode(false);\n  const closeHelp = () => setShowHelp(false);\n\n  const svgRef = useRef();\n\n  useEffect(() => {\n    const handleKeyDown = (event) => {\n      switch (event.key) {\n        case \"ArrowRight\":\n          stackSelectedAnchors(\"R\");\n          break;\n        case \"ArrowLeft\":\n          stackSelectedAnchors(\"L\");\n          break;\n        case \"ArrowUp\":\n          stackSelectedAnchors(\"U\");\n          break;\n        case \"ArrowDown\":\n          stackSelectedAnchors(\"D\");\n          break;\n        case \"s\":\n          splitAnchor();\n          break;\n        case \"Delete\":\n          deleteElement(selection);\n          break;\n        default:\n          console.log(event.key);\n          break;\n      }\n    };\n    document.addEventListener(\"keydown\", handleKeyDown);\n\n    return () => {\n      document.removeEventListener(\"keydown\", handleKeyDown);\n    };\n  }, [splitAnchor, stackSelectedAnchors, deleteElement, selection]);\n\n  const mouseMove = (event) => {\n    movePaper(event.nativeEvent.clientX, event.nativeEvent.clientY);\n  };\n  return (\n    // TODO : Proper listen key event\n    <div\n      className={classes.root}\n      tabIndex=\"0\"\n      onMouseDown={startSelect}\n      onMouseMove={\n        mode === MODE_MOVE_PAPER && isPaperDragged ? mouseMove : null\n      }\n      onMouseUp={\n        mode === MODE_MOVE_PAPER && isPaperDragged ? endMovePaper : null\n      }\n    >\n      <CssBaseline />\n\n      <AppBar position=\"fixed\" className={classes.appBar}>\n        <Toolbar className={classes.toolBar}>\n          <Typography variant=\"h6\" noWrap>\n            Clipped drawer\n          </Typography>\n\n          <div>\n            <IconButton\n              edge=\"start\"\n              className={classes.menuButton}\n              color=\"inherit\"\n              aria-label=\"open drawer\"\n              onClick={openHelp}\n            >\n              <HelpOutlineIcon />\n            </IconButton>\n            <IconButton\n              edge=\"start\"\n              className={classes.menuButton}\n              color=\"inherit\"\n              aria-label=\"open rough drawer\"\n              onClick={openRough}\n            >\n              <PhotoLibraryIcon />\n            </IconButton>\n            <Button color=\"inherit\" variant=\"outlined\" onClick={openCode}>\n              LaTEX\n            </Button>\n          </div>\n        </Toolbar>\n      </AppBar>\n      <Drawer\n        className={classes.drawer}\n        variant=\"permanent\"\n        classes={{\n          paper: classes.drawerPaper,\n        }}\n      >\n        <Toolbar />\n        <div className={classes.drawerContainer}>\n          <LeftMenu />\n        </div>\n      </Drawer>\n      <Drawer\n        anchor=\"right\"\n        variant=\"persistent\"\n        open={\n          (mode === MODE_SELECT || mode === MODE_DRAG) && selection.length === 1\n        }\n        className={classes.optionDrawer}\n        classes={{\n          paper: classes.optionDrawerPaper,\n        }}\n        // catch mousedown in element options\n        onMouseDown={(event) => event.stopPropagation()}\n      >\n        <Toolbar />\n        <ElementOptions />\n      </Drawer>\n      <main className={classes.content}>\n        <Container ref={svgRef} />\n      </main>\n\n      <Dialog open={showCode} onClose={closeCode}>\n        <LatexDisplay />\n      </Dialog>\n      <Dialog maxWidth=\"lg\" open={showRough} onClose={closeRough}>\n        <RoughDrawing />\n      </Dialog>\n      <Dialog fullWidth maxWidth=\"sm\" open={showHelp} onClose={closeHelp}>\n        <HelpShortcut />\n      </Dialog>\n    </div>\n  );\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(App);\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { Provider } from \"react-redux\";\nimport store from \"redux/store\";\n\nimport \"./index.css\";\nimport App from \"./App\";\nimport * as serviceWorker from \"./serviceWorker\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <p id=\"load-font\">aaa</p>\n    <Provider store={store}>\n      <App />\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}